(function(t){function e(e){for(var r,o,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0054":function(t,e,n){},"00b8":function(t,e,n){},"016f":function(t,e,n){},"0227":function(t,e,n){"use strict";n("9ed9")},"023f":function(t,e,n){"use strict";n("15a2")},"0378":function(t,e,n){"use strict";n("6f5f")},"0393":function(t,e,n){"use strict";n("4bcc")},"03d6":function(t,e,n){},"0437":function(t,e,n){},"0445":function(t,e,n){"use strict";n("3cde")},"04f3":function(t,e,n){},"0624":function(t,e,n){},"062b":function(t,e,n){},"0677":function(t,e,n){},"07b7":function(t,e,n){},"081b":function(t,e,n){},"0831":function(t,e,n){},"08f3":function(t,e,n){"use strict";n.d(e,"W",(function(){return r})),n.d(e,"V",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"H",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return c})),n.d(e,"I",(function(){return l})),n.d(e,"n",(function(){return u})),n.d(e,"J",(function(){return d})),n.d(e,"K",(function(){return h})),n.d(e,"G",(function(){return p})),n.d(e,"Q",(function(){return b})),n.d(e,"R",(function(){return v})),n.d(e,"L",(function(){return g})),n.d(e,"M",(function(){return x})),n.d(e,"S",(function(){return y})),n.d(e,"T",(function(){return k})),n.d(e,"P",(function(){return C})),n.d(e,"U",(function(){return S})),n.d(e,"o",(function(){return O})),n.d(e,"O",(function(){return I})),n.d(e,"F",(function(){return A})),n.d(e,"N",(function(){return T})),n.d(e,"B",(function(){return j})),n.d(e,"t",(function(){return F})),n.d(e,"D",(function(){return M})),n.d(e,"a",(function(){return _})),n.d(e,"e",(function(){return L})),n.d(e,"j",(function(){return D})),n.d(e,"k",(function(){return N})),n.d(e,"l",(function(){return E})),n.d(e,"z",(function(){return P})),n.d(e,"y",(function(){return R})),n.d(e,"E",(function(){return V})),n.d(e,"C",(function(){return B})),n.d(e,"p",(function(){return U})),n.d(e,"w",(function(){return H})),n.d(e,"i",(function(){return W})),n.d(e,"q",(function(){return $})),n.d(e,"v",(function(){return G})),n.d(e,"r",(function(){return z})),n.d(e,"s",(function(){return Y})),n.d(e,"m",(function(){return X})),n.d(e,"u",(function(){return K})),n.d(e,"A",(function(){return q})),n.d(e,"f",(function(){return Q})),n.d(e,"x",(function(){return J})),n.d(e,"h",(function(){return Z})),n.d(e,"g",(function(){return tt}));n("4bf0"),n("86d1"),n("1918"),n("697b"),n("d77e"),n("b763"),n("36db"),n("8d23");function r(t,e,n){var i;null!==(i=Array.isArray)&&void 0!==i&&i.call(Array,e)?e.forEach((function(e){return r(t,e,n)})):Object.defineProperty(t,e,{enumerable:n})}var i=750,a=38,o={Success:0,NotLogin:1,Err:2,ArgumentErr:3,VCode:4,NotEmailChecked:5},s={WEB:0,ANDROID:1,IOS:2,CUSTOM:3,WE_CHAT_MINI_PROGRAM:4,getClassName:function(t){switch(t){case this.ANDROID:return"android";case this.IOS:return"ios";case this.WE_CHAT_MINI_PROGRAM:return"wx_mp";case this.CUSTOM:return"custom";default:return"web"}}};r(s,"getClassName",!1),window.CALC_PLATFORM_TYPE=s;var c={PX:0,DP:1,PT:2,RPX:3},l={NONE:0,PNG:1,SVG:2,WEBP:4,JPG:8,PDF:16},u={ALL:0,XD:1,SKETCH:2,PHOTOSHOP:4,FIGMA:8,JS_DESIGN:16,getFileExt:function(t){switch(t){case this.XD:return".xd";case this.SKETCH:return".sketch";case this.PHOTOSHOP:return".psd";case this.FIGMA:return".fig";case this.JS_DESIGN:return".jsd";default:return".unknow"}}},d={PASSTHROUGH:"pass-through",NORMAL:"Normal",DARKEN:"Darken",MULTIPLY:"Multiply",COLOR_BURN:"ColorBurn",LIGHTEN:"Lighten",SCREEN:"Screen",COLOR_DODGE:"ColorDodge",OVERLAY:"Overlay",SOFT_LIGHT:"SoftLight",HARD_LIGHT:"HardLight",DIFFERENCE:"Difference",EXCLUSION:"Exclusion",HUE:"Hue",SATURATION:"Saturation",COLOR:"Color",LUMINOSITY:"Luminosity"},h=w(d),f={Thin:100,ExtraLight:200,Light:300,Normal:400,Medium:500,SemiBold:600,Bold:700,ExtraBold:800,Black:900},m=(w(f),{100:"Thin",200:"ExtraLight",300:"Light",400:"Normal",500:"Medium",600:"Semibold",700:"Bold",800:"ExtraBold",900:"Black"}),p=m,b={Layer:0,Group:1,Page:2,Artboard:3,Shape:4,Image:5,ShapePath:6,Text:7,SymbolMaster:8,SymbolInstance:9,HotSpot:10,Slice:11,StyledLayer:12},v={Rectangle:0,Oval:1,Triangle:2,Polygon:3,Star:4,Custom:5},g={left:0,right:1,center:2,justify:3};function w(t){var e={};return Object.keys(t).forEach((function(n){e[t[n]]=n})),e}var x=w(g),y={top:0,center:1,bottom:2},k=w(y),C={Color:0,Gradient:1,Pattern:4},S=(w(C),{Linear:0,Radial:1,Angular:2}),O={None:0,FillColor:1,LinearGradientFill:2,ImageFill:3,RadialGradientFill:4,AngularGradientFill:5,DiamondGradientFill:6,getGradientInfo:function(t){var e,n;switch(t){case O.LinearGradientFill:e="线性",n="linear";break;case O.RadialGradientFill:e="径向",n="radial";break;case O.AngularGradientFill:e="角度",n="angular";break;case O.DiamondGradientFill:e="菱形",n="diamond";break;default:return null}return{name:e,className:n}}};r(O,"getGradientInfo",!1);var I={Center:0,Inside:1,Outside:2,getName:function(t){switch(t){case this.Center:return"中心";case this.Inside:return"内";case this.Outside:return"外";default:return""}}};r(I,"getName",!1);var A={Transparent:0,White:1,Black:2},T={Gaussian:0,Motion:1,Zoom:2,Background:3},j={ArtboardList:0,ArtboardDetail:1,ImageViewer:2},F={Success:0,WebUser_NotLogin:1,Err:2,ArgumentErr:3,VCode:4,NotEmailChecked:5,CloudRank_NotComment:6,CloudRank_SourceFile:7,NeedUserConfirm:3001,UserNotConfirm:3002},M={None:0,Artboard_Comment:1,Artboard_Reply:2,Artboard_Comment_At:4,Artboard_Reply_At:8},_="allfolders.opened",L="cloudfolders.visible",D={Folder:0,File:1,Artboard:2},N={Name:0,Date:1,ArtboardRect:2},E={All:0,Artboard:1},P={Small:0,Normal:1,Big:2},R={Other:0,Url:1,XD:2,Sketch:3,XDPlugin:4,SketchPlugin:5,Word:6,PPT:7,Excel:8,Txt:9,Html:10,Image:11,Pdf:12,Zip:13,AxureExport:14,App:15,Dmg:16,PhotoShop:17,AdobeIllustrator:18,AfterEffects:19,Media:20,AxureSourceFile:21,Figma:22,Font:23,AndroidApp:24,Package:25,Lottie:26,JsDesign:27,PhotoShopPlugin:28,getName:function(t,e){var n;switch(e){case P.Small:n="fs-";break;case P.Big:n="fb-";break;default:n="fn-";break}var r=["other","url","xd","sketch","xd-plugin","sketch-plugin","word","ppt","excel","txt","html","image","pdf","zip","axure-export","app","dmg","photoshop","adobe-illustrator","after-effects","media","axure-source","figma","font","apk","package","lottie",null,"ps-plugin"],i=r[t];return i||(i=r[0]),n+i},isSupportOnlineViewType:function(t,e,n){switch(t){case R.Html:case R.Url:case R.Image:case R.Pdf:case R.AxureExport:case R.Media:case R.Txt:case R.Lottie:return!0}return!(!n||!this.isDocxFile(t,e))},isDocxFile:function(t,e){return t===this.Word&&"string"===typeof e&&/\.docx$/i.test(e)},isMarkdownFile:function(t,e){return this.isTextFile(t)&&"string"===typeof e&&/\.md$/i.test(e)},isTextFile:function(t){return t===this.Txt}};r(R,["isSupportOnlineViewType","getName","isDocxFile","isMarkdownFile","isTextFile"],!1);var V={Folder:0,Artboard:1,File:2},B={Normal:0,File:1,Interaction:2},U={Blue:0,Red:1,Green:2,Yellow:3,Purple:4,getName:function(t){switch(t){case this.Red:return"red";case this.Green:return"green";case this.Yellow:return"yellow";case this.Purple:return"purple";default:return"blue"}}};r(U,"getName",!1);var H={Folder_Add:0,Folder_Edit:1,Remove:2,MoveTo:3,Folder_SetPreview:4,Folder_CancelPreview:5,Remove_ArtboardVer:6,Artboard_Upload:21,NetDisk_LinkAdd:40,NetDisk_LinkEdit:41,NetDisk_FileReName:42,NetDisk_FileUploadCompleted:47,defined:function(t){switch(t){case this.Folder_Add:case this.Folder_Edit:case this.Folder_SetPreview:case this.Folder_CancelPreview:return!0;case this.Remove:case this.MoveTo:case this.Remove_ArtboardVer:return!0;case this.Artboard_Upload:return!0;case this.NetDisk_FileUploadCompleted:case this.NetDisk_FileReName:case this.NetDisk_LinkAdd:case this.NetDisk_LinkEdit:return!0;default:return!1}}},W={Artboard:1,File:2,Folder:4},$={Change:0,Add:1,Remove:2},G={ALL:-1,Artboard:1,File:2,Folder:4},z={Public:0,PrivateCode:1,SpecifyMembers:2,getName:function(t){switch(t){case this.PrivateCode:return"加密";case this.SpecifyMembers:return"限定访问";default:return"公开"}}};r(z,"getName",!1);var Y={None:0,Read:1,ReadWrite:2,OnlyChildFolderVisit:4,Owner:256,ParentOwner:512,Admin:1024,getAuthorityName:function(t){switch(t){case this.Owner:return"所有者";case this.ParentOwner:return"父级所有者";case this.Admin:return"超级管理员";case this.Read:return"可查看";case this.ReadWrite:return"可编辑";case this.OnlyChildFolderVisit:return"-";default:return null}},canChangeAuthority:function(t){switch(t){case this.Admin:case this.ParentOwner:case this.Owner:return!1}return!0}};r(z,["getAuthorityName","canChangeAuthority"],!1);var X={None:0,Tourist:1,Designer:2,Admin:128,getName:function(t){switch(t){case this.Tourist:return"协作者";case this.Designer:return"设计师";case this.Admin:return"超级管理员";default:return"-"}}};r(X,"getName",!1);var K={Top:1,Middle:2,Bottom:3,getName:function(t){switch(t){case this.Top:return"顶部";case this.Bottom:return"底部";case this.Middle:return"居中";default:return"未知:".concat(t)}}};r(K,"getName",!1);var q={Property:0,Comment:1,Slice:2},Q={None:0,Dev:1,getName:function(t){switch(t){case this.Dev:return"待开发";default:return"无"}}};r(Q,"getName",!1);var J={None:-1,Document:0,Page:1,Section:2,getClassName:function(t){switch(t){case this.Document:return"nav-doc";case this.Page:return"nav-page";case this.Section:return"nav-section";default:return null}}};r(J,"getClassName",!1);var Z={None:0,GlobalCloudFolderBoxMenu:1,HelperMenu:2,ArtboardModeMenu:4,SliceBorderLineMenu:8,ArtboardDevMode:16,getSortValues:function(){return Object.keys(Z).map((function(t){return Z[t]})).filter((function(t){return t>0})).sort((function(t,e){var n=t-e;return n>0?1:n<0?-1:0}))},getSortKeys:function(){var t=this;return Object.keys(Z).map((function(e){var n=Z[e];return n===t.None?null:{key:e,value:n}})).filter((function(t){return!!t})).sort((function(t,e){var n=t.value-e.value;return n>0?1:n<0?-1:0})).map((function(t){return t.key}))}};r(Z,["getSortKeys","getSortValues"],!1);var tt={TopLeft:0,TopRight:1,Left:2,Right:3,BottomLeft:4,BootomRight:5}},"0913":function(t,e,n){"use strict";n("f81c")},"0b86":function(t,e,n){},"0c4e":function(t,e,n){"use strict";n("fe87")},"0d14":function(t,e,n){"use strict";n("ad91")},"0d20":function(t,e,n){},"0eb7":function(t,e,n){"use strict";n("5bd7")},"0f21":function(t,e,n){},"103b":function(t,e,n){"use strict";n("b898")},1204:function(t,e,n){},"12a4":function(t,e,n){"use strict";n("7549")},"145a":function(t,e,n){"use strict";n("0b86")},1491:function(t,e,n){"use strict";n("dd0c")},"14c9":function(t,e,n){"use strict";n("f452")},1597:function(t,e,n){"use strict";n("081b")},"15a2":function(t,e,n){},"167a":function(t,e,n){},"16d5":function(t,e,n){},"16ed":function(t,e,n){},"177e":function(t,e,n){},"178d":function(t,e,n){},"183f":function(t,e,n){"use strict";n("47b3")},"1afc":function(t,e,n){"use strict";n("653cd")},"1bde":function(t,e,n){},"1c29":function(t,e,n){},"1d04":function(t,e,n){},"1d45":function(t,e,n){},"1e16":function(t,e,n){"use strict";n("6e2e")},2288:function(t,e,n){},"233b":function(t,e,n){"use strict";n("eba2")},"23fb":function(t,e,n){"use strict";n("4f19")},2400:function(t,e,n){},"24f8":function(t,e,n){},"254b":function(t,e,n){},"25f5":function(t,e,n){},2768:function(t,e,n){},2793:function(t,e,n){},"27a0":function(t,e,n){"use strict";n("d7f7")},"290c":function(t,e,n){"use strict";n("423f")},"298f":function(t,e,n){"use strict";n("b376")},2996:function(t,e,n){"use strict";n("9a4c")},2998:function(t,e,n){},"2a09":function(t,e,n){"use strict";n("4c4f")},"2afb":function(t,e,n){"use strict";n("7544")},"2b2b":function(t,e,n){"use strict";n("b50f")},"2c33":function(t,e,n){"use strict";n("b1c8")},"2cd5c":function(t,e,n){"use strict";n("16ed")},"2d13":function(t,e,n){"use strict";n("6397")},"2d5e":function(t,e,n){"use strict";n("177e")},"2ec9":function(t,e,n){"use strict";n("3adb")},"2f9e":function(t,e,n){"use strict";n("5194")},"2fcb":function(t,e,n){"use strict";n("f7d7")},"30be":function(t,e,n){"use strict";n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return h})),n.d(e,"g",(function(){return f})),n.d(e,"c",(function(){return g})),n.d(e,"f",(function(){return w})),n.d(e,"d",(function(){return x})),n.d(e,"b",(function(){return y})),n.d(e,"h",(function(){return k}));var r=n("9c82"),i=n("a3df"),a=n("0aec"),o=(n("f74c"),n("4bf0"),n("5fb4"),n("86d1"),n("cfdd"),n("80f5")),s=n("fa7d"),c=function(){function t(e,n){Object(r["a"])(this,t),Object(a["a"])(this,"start",0),Object(a["a"])(this,"end",0),null!=e&&null!=n&&(this.start=Math.min(e,n),this.end=Math.max(e,n))}return Object(i["a"])(t,[{key:"length",get:function(){return this.end-this.start}}]),t}(),l=function(t,e){return t.start<=e.start&&t.end>=e.end},u=function(t,e){var n,r;return t.start<=e.start?(n=t,r=e):(n=e,r=t),r.start>=n.start&&r.start<=n.end},d=function(t,e){var n=e.x,r=n+e.width,i=t.x,a=i+t.width,o=e.y,s=o+e.height,c=t.y,l=c+t.height;return!(r<i||r>a)&&(!(n<i||n>a)&&(!(s<c||s>l)&&!(o<c||o>l)))},h=function(){function t(){Object(r["a"])(this,t),Object(a["a"])(this,"width",0),Object(a["a"])(this,"height",0),Object(a["a"])(this,"x",0),Object(a["a"])(this,"y",0)}return Object(i["a"])(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}},{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this}},{key:"isSame",value:function(t){return null!=t&&f(this,t)}},{key:"isOverlap",value:function(t){return!(this.left>t.right||this.top>t.bottom||t.left>this.right||t.top>this.bottom)}},{key:"isContans",value:function(t){return t.left>=this.left&&t.top>=this.top&&t.left+t.width<=this.left+this.width&&t.top+t.height<=this.top+this.height}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}]),t}(),f=function(t,e){var n,r,i=5;return n=Object(s["q"])(t.x,i),r=Object(s["q"])(e.x,i),n===r&&(n=Object(s["q"])(t.y,i),r=Object(s["q"])(e.y,i),n===r&&(n=Object(s["q"])(t.width,i),r=Object(s["q"])(e.width,i),n===r&&(n=Object(s["q"])(t.height,i),r=Object(s["q"])(e.height,i),n===r)))},m=function(t,e){var n=new h;return n.x=Math.min(t.x,e.x),n.y=Math.min(t.y,e.y),n.width=Math.max(t.right,e.right)-n.x,n.height=Math.max(t.bottom,e.bottom)-n.y,n},p=function(t,e){for(var n=t.length,r=[],i=0;i<n;i++)for(var a=t[i],o=function(){var n=t[s];if(a!==n){var i=new c(a,n),o=e.find((function(t){return l(i,t)}));o||r.push(i)}},s=i+1;s<n;s++)o();return r},b=0,v=function(t,e,n,r,i,a){var o,s,c,l,d,f;return n?(o="x",s="right",c="width",l="y",d="bottom",f="height"):(o="y",s="bottom",c="height",l="x",d="right",f="width"),e.forEach((function(e){var m,p,v,g,w={start:r[l],end:r[d],length:r[f]},x={start:i[l],end:i[d],length:i[f]};if(u(w,x))m=Math.max(w.start,x.start),p=Math.min(w.end,x.end);else{var y={start:r[o],end:r[s],length:r[c]};u(e,y)?(m=x.start,p=x.end,g=r):(m=w.start,p=w.end,g=i)}var k=m+(p-m)/2,C=new h,S=a(Math.round(100*e.length)/100);if(n?(C.height=1,C.width=e.length,C.x=e.start,C.y=k):(C.height=e.length,C.width=1,C.x=k,C.y=e.start),t.push({rect:C,text:S,isHorizintal:n,id:++b}),null!=g){if(v=new h,n){v.width=1;var O,I=Math.min(Math.abs(C.y-g.y),Math.abs(C.y-g.bottom)),A={};[g.x,g.right,C.x,C.right].forEach((function(t){A[t]&&(O=t),A[t]=1})),v.x=O,v.y=C.y>g.y?C.y-I:C.y,v.height=I}else{v.height=1;var T,j=Math.min(Math.abs(C.x-g.x),Math.abs(C.x-g.right)),F={};[g.y,g.bottom,C.y,C.bottom].forEach((function(t){F[t]&&(T=t),F[t]=1})),v.y=T,v.x=C.x>g.x?C.x-j:C.x,v.width=j}t.push({rect:v,isHorizintal:!n,isDashed:!0,id:++b})}})),t},g=function(t,e,n,r){t.right>n.width&&(t.width=n.width-t.x),t.bottom>n.height&&(t.height=n.height-t.y),e.right>n.width&&(e.width=n.width-e.x),e.bottom>n.height&&(e.height=n.height-e.y),t.width=Math.max(t.width,.001),t.height=Math.max(t.height,.001),e.width=Math.max(e.width,.001),e.height=Math.max(e.height,.001);var i=m(t,e),a=Object(o["u"])([i.x,i.right,t.x,t.right,e.x,e.right]),s=Object(o["u"])([i.y,i.bottom,t.y,t.bottom,e.y,e.bottom]),l=[new c(t.x,t.right),new c(e.x,e.right)],u=[new c(t.y,t.bottom),new c(e.y,e.bottom)],d=p(a,l),h=p(s,u),f=[];return v(f,d,!0,t,e,r),v(f,h,!1,t,e,r),f},w=function(t,e){var n=e.x,r=e.x+e.width,i=e.y,a=e.y+e.height,o=t.x,s=t.x+t.width,c=t.y,l=t.y+t.height,u=r<o||n>s||a<c||i>l;return!u},x=function(t,e){if(w(t,e)){var n=new h,r=Math.max(t.x,e.x),i=Math.max(t.y,e.y),a=Math.min(t.x+t.width,e.x+e.width),o=Math.min(t.y+t.height,e.y+e.height),s=a-r,c=o-i;if(!(s<0||c<0))return n.set(r,i,s,c),n}};function y(t,e,n){return null==t||1===e?t:(t*=e,t=Math.round(100*t)/100,n?Math.ceil(t):t)}function k(t){var e,n;if(Object(o["s"])(t)){t.nameLower=null!==(e=null===(n=t.name)||void 0===n?void 0:n.toLowerCase())&&void 0!==e?e:"";var r=t.boundsInParent;if(r&&r.height>0&&r.width>0){var i=375/812,a=185,s=Math.round(a/r.width*r.height),c=Math.round(a/i);r.viewWidth=a,r.viewRealHeight=s,r.viewHeight=Math.min(c,s),r.thumbViewWidth=36,r.thumbViewHeight=Math.round(r.thumbViewWidth/i)}}}},"310c":function(t,e,n){"use strict";n("cbf5")},"31a4":function(t,e,n){"use strict";n("d3ec")},"31d8":function(t,e,n){"use strict";n("2998")},3251:function(t,e,n){"use strict";n("bf59")},"32e1":function(t,e,n){"use strict";n("e332")},"338f":function(t,e,n){"use strict";n("f395")},3528:function(t,e,n){"use strict";n("b4b3")},"35e8":function(t,e,n){"use strict";n("7e9c")},3733:function(t,e,n){"use strict";n("af58")},"374a":function(t,e,n){"use strict";n("1c29")},"38d8":function(t,e,n){"use strict";n("716f")},"3adb":function(t,e,n){},"3c31":function(t,e,n){"use strict";n("f99d")},"3cde":function(t,e,n){},"3d64":function(t,e,n){},"3dd0":function(t,e,n){},"3e9e":function(t,e,n){},"3eb4":function(t,e,n){"use strict";n("eca7")},"410a":function(t,e,n){"use strict";n("0437")},"423f":function(t,e,n){},"43c3":function(t,e,n){"use strict";n("2793")},"44a7":function(t,e,n){"use strict";n("caa5")},"45cf":function(t,e,n){"use strict";n("2288")},"47b3":function(t,e,n){},"47da":function(t,e,n){"use strict";n("a054")},"490e":function(t,e,n){"use strict";n("03d6")},4990:function(t,e,n){},"4b97":function(t,e,n){},"4bcc":function(t,e,n){},"4c4f":function(t,e,n){},"4c8d":function(t,e,n){"use strict";n("3e9e")},"4d32":function(t,e,n){"use strict";n("bd5b")},"4ea7":function(t,e,n){"use strict";n("e4aa")},"4f19":function(t,e,n){},5026:function(t,e,n){"use strict";n("ac73")},5124:function(t,e,n){"use strict";n("e3c1")},5194:function(t,e,n){},5484:function(t,e,n){},"54a6":function(t,e,n){"use strict";n("562e")},"55a0":function(t,e,n){"use strict";n("d08e")},"55a8":function(t,e,n){},"562e":function(t,e,n){},"567c":function(t,e,n){"use strict";n("b63f")},"56d7":function(t,e,n){"use strict";n.r(e);var r=n("0f37"),i=n("6fd1"),a=(n("f4fb"),n("c924"),n("e8ba"),n("1dc6"),n("f74c"),n("4bf0"),n("c018"),n("1a31")),o=n("08f3"),s=(n("697b"),n("f4af")),c=(n("8ee9"),n("86d1"),n("1918"),n("7d65"),n("cfdd"),n("1b7f"),n("5fb4"),n("bc79"),n("fa7d")),l=n("80f5"),u=n("a027"),d=(n("2eb9"),n("201d"),n("ce39"),n("92ea"),n("5a19"),n("d77e"),n("9cd4"),n("b763"),n("fd97"),n("36db"),n("30be")),h=n("bc8f");function f(t,e,n,r){var i;if(null!=e){var a=e.overrides.find((function(t){if(t.style){var e=t.style[n];return null!=e?t:void 0}}));if(a&&(i=a.style[n],null!=i))return i}return t&&(i=t[n],null!=i)?i:r}function m(t,e){var n,r;if(t){var i=function(t){var n;return t&&t.style?t.styleType!==e?null:null!==(n=t.name)&&void 0!==n?n:null:null},a=null===(n=t.overrides)||void 0===n||null===(n=n.find((function(t){return i(t)})))||void 0===n?void 0:n.name;return null!==(r=a)&&void 0!==r||(a=i(t.share)),a}}function p(t,e,n){var r,i={fill:{},charSpacing:f(t,e,"kerning",null,n),fontFamily:f(t,e,"fontFamily","",n),fontWeight:null!==(r=O[f(t,e,"fontWeight",4,n)])&&void 0!==r?r:400,fontItalic:f(t,e,"fontStyle","",n),fontSize:f(t,e,"fontSize","",n),underline:!!f(t,e,"textUnderline","",n),strikethrough:!!f(t,e,"textStrikethrough","",n)};i.fontStyle=i.fontWeightCss=i.fontWeight.toString(),i.fontItalic?i.fontStyle+=" "+i.fontItalic:i.fontItalic="normal";var a=f(t,e,"textColor","",n);return a&&(i.fill.value=Object(h["b"])(a)),i}function b(t){if(t&&t.type!==o["Q"].Artboard){var e=t.layers;if(!e)return t.type===o["Q"].ShapePath;var n=0,r=[];if(e.forEach((function(t,e){if(t)switch(t.type){case o["Q"].ShapePath:return void(t.markedForExport||n++);case o["Q"].Group:return void(b(t)&&(n++,r.push(e)))}})),n===e.length){n>=7&&(t.layers=[]);for(var i=r.length-1;i>=0;i--){var a=r[i];e.splice(a,1)}return!0}return t.type===o["Q"].ShapePath}}var v=["topLeft","topRight","bottomRight","bottomLeft"];function g(t){if(t){var e;switch(t.fillType){case o["P"].Color:var n=t.color;n&&(e={value:Object(h["b"])(t.color)});break;case o["P"].Gradient:var r=t.gradient;if(r)switch(r.gradientType){case o["U"].Linear:var i=r.from,a=r.to,s=r.stops;if(i&&a&&s){var l=[];e={endPoints:[i.x,i.y,a.x,a.y],colorStops:l},s.forEach((function(t){l.push({stop:t.position,color:{value:Object(h["b"])(t.color)}})}))}break;case o["U"].Radial:0===r.aspectRatio&&(r.aspectRatio=1);var u=r.from,d=r.to,f=Object(c["k"])(u.x,u.y,d.x,d.y,90),m=r.stops;if(u&&d&&m){var p=[],b=u.x,v=u.y,g=Math.sqrt(Math.pow(d.x-b,2)+Math.pow(d.y-v,2));e={endPoints:[u.x,u.y,d.x,d.y],colorStops:p,startX:b,startY:v,gradientRadialTransform:{rotate:f,scaleX:g,scaleY:g*r.aspectRatio,endR:1,startR:0}},m.forEach((function(t){p.push({stop:t.position,color:{value:Object(h["b"])(t.color)}})}))}break;case o["U"].Angular:var w=r.from,x=r.to,y=90,k=r.stops;if(w&&x&&k){var C,S,O=[],I=.5,A=.5,T=1;e={endPoints:[w.x,w.y,x.x,x.y],colorStops:O,startX:I,startY:A,gradientAngularTransform:{rotate:y,scaleX:T,scaleY:T,endR:1,startR:0}},k.sort((function(t,e){var n=t.position-e.position;return 0===n?0:n>0?1:-1}));var j=k[0],F=null!==(C=null===j||void 0===j?void 0:j.position)&&void 0!==C?C:0;0!=F&&(k.forEach((function(t){t.position-=F})),e.gradientAngularTransform.rotate=y=Object(c["q"])(y+360*F,2));var M=k[k.length-1],_=null!==(S=null===M||void 0===M?void 0:M.position)&&void 0!==S?S:1;_<1&&j&&(null===M||void 0===M?void 0:M.color)!=j.color&&k.push({position:1,color:j.color}),k.forEach((function(t){O.push({stop:t.position,color:{value:Object(h["b"])(t.color)}})}))}break}break;case o["P"].Pattern:e={assetId:"sketch"};break}return e}}function w(t,e){var n=e.background;if(n&&n.enabled&&n.color&&n.includedInInstance)return!1;var r=e.frame,i=t.frame;if(r.width!==i.width)return!1;if(r.height!==i.height)return!1;var a=e.style;if(!a)return!0;var o=a.opacity;return null==o||o>=1}function x(t,e){var n=e.nodeSharedStyles={overrides:[],share:null},r=t.sharedStyles;if(r){var i=e.overrideSharedStyleIds;if(i&&i.forEach((function(t){var e,i=r[t];i&&(null!==(e=i.id)&&void 0!==e||(i.id=t),n.overrides.push(i))})),e.sharedStyleId){var a=r[e.sharedStyleId];a&&(n.share=a)}}}function y(t){var e,n=t.boxTransform={rotation:0,flippedHorizontally:!1,flippedVertically:!1},r=t.transform;Object(l["s"])(r)&&(null!=r.rotation&&(n.rotation=Object(c["q"])(r.rotation,3)),r.flippedHorizontally&&(n.flippedHorizontally=!0),r.flippedVertically&&(n.flippedVertically=!0));var i=null!==(e=t.name)&&void 0!==e?e:"";if(90===n.rotation||-90===n.rotation||270===n.rotation){if(t.type===o["Q"].ShapePath&&t.shapeType===o["R"].Custom&&(-1!=i.indexOf("Line")||-1!=i.indexOf("直线")))return void(n.rotation=0);var a=t.frame,s=a.x,u=a.y,d=a.width,h=a.height;if(d===h)return;t._sketchRealStyle={rotation:n.rotation,x:s,y:u,width:d,height:h},t.markedForExport&&(n.rotation=0);var f=(d-h)/2,m=-f;t.frame={x:s+f,y:u+m,width:h,height:d}}}function k(t,e,n){if(!e.markedForExport){var r=t.frame;r={x:0,y:0,width:r.width,height:r.height};var i=e.frame,a=n.globalBounds.x-t.globalBounds.x,o=n.globalBounds.y-t.globalBounds.y,s={x:a+i.x,y:o+i.y,width:i.width,height:i.height};r=Object(d["d"])(r,s),r||(r={x:0,y:0,width:0,height:0});var c={width:r.width,height:r.height,x:r.x-a,y:r.y-o};if(!Object(d["g"])(c,i)){e.frame=c;var l=e.frame.x-i.x,u=e.frame.y-i.y;e._sketchFixedFrame=1,0===l&&0===u||e.layers&&e.layers.forEach((function(t){t.frame.x-=l,t.frame.y-=u}))}}}function C(t,e,n){if(n){if(k(t,e,n),n._sketchFixedFrame&&!e.markedForExport){var r={x:0,y:0,width:n.frame.width,height:n.frame.height};S(r,e)}if(e.hasClippingMask){var i=n.layers;if(i)for(var a=!1,o=e.frame,s=0,c=i.length;s<c;s++){var l=i[s];if(l!==e){if(a){if(l.hasClippingMask)break;if(l.shouldBreakMaskChain)break;l.markedForExport||S(o,l)}}else a=!0}}}}function S(t,e){var n=e.frame,r=n.x,i=n.y,a=Object(d["d"])(t,e.frame);if(a||(a={x:0,y:0,width:0,height:0}),!Object(d["g"])(a,e.frame)){var o=a.x-r,s=a.y-i;e.frame=a,e._sketchFixedFrame=1,0===o&&0===s||e.layers&&e.layers.forEach((function(t){var e=t.frame;e.x-=o,e.y-=s}))}}var O=[100,100,100,200,300,400,500,500,600,700,800,900,900,900,900,900];function I(t,e,n){var r;e.boundsInParent=e.frame,e.guid=e.id,e.visible=!e.hidden,e.children=e.layers,y(e),x(t,e);var i=e.nodeSharedStyles,a=e.style,d=new Map;null!==(r=e.layerSN)&&void 0!==r||(e.layerSN=m(i,"Layer")),e.opacity=f(a,i,"opacity",1,d);var b=c["e"][o["K"][f(a,i,"blendingMode",o["J"].NORMAL,d)]];b&&(e.blendMode=b);var w=f(a,i,"blur",null,d);if(null!=w)switch(w.blurType){case o["N"].Gaussian:e.blur={isBackgroundEffect:!1,visible:!0,blurAmount:w.radius};break;case o["N"].Background:e.blur={isBackgroundEffect:!0,visible:!0,blurAmount:w.radius,saturation:w.saturation};break;case o["N"].Zoom:var k=w.center;Object(l["s"])(k)&&(e.blur={isZoomEffect:!0,visible:!0,blurAmount:w.radius,center:k});break;case o["N"].Motion:var S=w.motionAngle;"number"===typeof S&&(e.blur={isMotionEffect:!0,visible:!0,blurAmount:w.radius,motionAngle:S});break}var O=f(a,i,"borders",null,d);O&&O.length>0&&(e.strokeArr=[],O.forEach((function(t){var n=g(t);if(n){var r={strokeEnabled:!0,stroke:n,strokeWidth:t.thickness,strokePosition:t.position},o=f(a,i,"borderOptions",null,d);if(o&&(r.strokeDashArray=o.dashPattern),0===e.strokeArr.length)for(var s in r)e[s]=r[s];e.strokeArr.push(r)}})));var I=f(a,i,"shadows",null,d);I&&I.length>0&&(e.shadowArr=[],I.forEach((function(t){if(t){var n={visible:!0,x:t.x,y:t.y,blur:t.blur,spread:t.spread,color:{value:Object(h["b"])(t.color)}};0===e.shadowArr.length&&(e.shadow=n),e.shadowArr.push(n)}})));var A=f(a,i,"innerShadows",null,d);if(A&&A.length>0&&(e.innerShadowArr=[],A.forEach((function(t){if(t){var n={visible:!0,x:t.x,y:t.y,blur:t.blur,spread:t.spread,color:{value:Object(h["b"])(t.color)}};0===e.innerShadowArr.length&&(e.innerShadow=n),e.innerShadowArr.push(n)}}))),e.type!==o["Q"].SymbolMaster&&e.type!==o["Q"].Artboard){var T=f(a,i,"fills",null,d);Object(l["h"])(T)&&(e.fillArr=[],T.forEach((function(t){t&&(t=g(t),0===e.fillArr.length&&(e.fillEnabled=!0,e.fill=t),e.fillArr.push({fillEnabled:!0,fill:t}))})))}if(C(t,e,n),t===e||null==n)e.globalBounds=e.globalDrawBounds=Object(s["a"])({},e.frame);else{var j=n.globalBounds,F=e.frame;e.globalBounds=e.globalDrawBounds={x:j.x+F.x,y:j.y+F.y,width:F.width,height:F.height}}if(!e.types)switch(e.types={GraphicNode:1},e.type){case o["Q"].SymbolInstance:e.types.SymbolInstance=1;break;case o["Q"].Artboard:e.types.Artboard=1;var M=e.background;M&&M.enabled&&M.color&&(e.fillEnabled=!0,e.fill={value:Object(h["b"])(M.color)});break;case o["Q"].Group:e.types.Group=1;break;case o["Q"].Text:var _;e.types.Text=1,e.paragraphSpacing=f(a,i,"paragraphSpacing",0,d),e.lineSpacing=f(a,i,"lineHeight",0,d);var L=f(a,i,"alignment",o["L"].left,d);e.textAlign=o["M"][L],null==e.textAlign&&(e.textAlign=L);var D=f(a,i,"verticalAlignment",o["S"].top,d);D!==o["S"].top&&(e.textVerticalAlign=o["T"][D]);var N=e.styleRanges=[p(a,i,d)],E=e.textStyles;if(null!==(_=e.charSN)&&void 0!==_||(e.charSN=m(i,"Text")),Object(l["h"])(E)&&E.length>1)for(var P=1;P<E.length;P++){var R=E[P],V=p(R,null,d);N.push(V)}break;case o["Q"].ShapePath:switch(e.types.Rectangle=1,e.shapeType){case o["R"].Rectangle:var B=e.points,U=null;Object(l["h"])(B)&&B.length>0&&(U={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},B.forEach((function(t,e){t&&(U[v[e]]=t.cornerRadius)}))),e.cornerRadii=U;break;default:break}break}e.usedSharedItems=Object(u["a"])(d.values())}var A=n("a3df"),T=n("9c82"),j=n("0aec"),F=(n("9f22"),n("55b0"),n("c469"),n("dc2e"),n("4437"),n("e328"),n("aa2f"),n("074f"),n("9758"),n("98f8"),n("67f3"),n("fc06"),n("3308"),n("92f9"),n("8f0e"),n("f309"),n("bdd9"),n("18b5"),n("6e6e"),n("8d23"),75),M="quality.jpg",_={None:-1,Brush:0,Line:1,Rectangle:2,Ellipse:3,Text:4,Arrow:5,Image:6,Move:7,Deleted:8,End:9},L=[14,16,18,20,24,28,32,36,48,72],D=36,N={Fine:3,Normal:6,Crude:12},E=[{color:"#545454",border:"#434343",name:"black"},{color:"#ffffff",border:"#cccccc",name:"white"},{color:"#f34e1e",border:"#c23e18",name:"orange"},{color:"#ffc701",border:"#cc9f07",name:"yellow"},{color:"#0ea958",border:"#0d8747",name:"green"},{color:"#417dee",border:"#2b63ce",name:"blue"},{color:"#9847ff",border:"#7e3bd2",name:"purple"},{color:"#d27c2c",border:"#a76323",name:"brown"}],P=function(){function t(e,n){return Object(T["a"])(this,t),Object(j["a"])(this,"_x",0),Object(j["a"])(this,"_y",0),this.x=null!=e?e:0,this.y=null!=n?n:0,this}return Object(A["a"])(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"top",get:function(){return this._y},set:function(t){this._y=t}},{key:"left",get:function(){return this._x},set:function(t){this._x=t}},{key:"toJSON",value:function(){var t=this.x,e=this.y;return{x:t,y:e}}}]),t}(),R=1,V=Object(A["a"])((function t(){Object(T["a"])(this,t),Object(j["a"])(this,"id",0),Object(j["a"])(this,"data",null),Object(j["a"])(this,"blob",null),Object(j["a"])(this,"thumbBlob",null),this.id=R++})),B=Object(A["a"])((function t(){Object(T["a"])(this,t),Object(j["a"])(this,"type",""),Object(j["a"])(this,"thumbType",""),Object(j["a"])(this,"name",""),Object(j["a"])(this,"length",0),Object(j["a"])(this,"thumbLength",0),Object(j["a"])(this,"fold",null),Object(j["a"])(this,"fileName",null),Object(j["a"])(this,"thumbFileName",null),Object(j["a"])(this,"imageSize",null),Object(j["a"])(this,"thumbImageSize",null)}));function U(t){return new Promise((function(e,n){if(t instanceof Image)return e(t);var r,i=!1;"string"===typeof t?r=t:(r=URL.createObjectURL(t),i=!0);var a=function(){i&&URL.revokeObjectURL(r),r=t=void 0};try{var o=new Image;o.onload=function(t){a(),e(t.target)},o.onerror=function(){a(),n("图片加载失败,不支持的图片类型")},o.src=r}catch(s){a(),n(s)}}))}var H="image/jpeg";function W(t,e){return $.apply(this,arguments)}function $(){return $=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o,s,c,l,u,d;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.naturalWidth,a=e.naturalHeight,o=Math.max(Math.ceil(a/i*n),1),t.prev=2,s=document.createElement("canvas"),c=function(t){return t},l=new Y(c(n),c(o)),s.width=l.width,s.height=l.height,s.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(s),u=s.getContext("2d"),u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height),u.drawImage(e,0,0,i,a,0,0,l.width,l.height),t.next=16,st(s,H,.75);case 16:return t.t0=t.sent,t.t1=n,t.t2=o,t.abrupt("return",{blob:t.t0,width:t.t1,height:t.t2});case 20:return t.prev=20,s&&(d=s.parentNode,d&&d.removeChild(s)),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,,20,23]])}))),$.apply(this,arguments)}function G(t){return z.apply(this,arguments)}function z(){return z=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,a,o,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e instanceof Blob||e instanceof File){t.next=2;break}throw new Error("附件异常,不支持的图片格式");case 2:return t.next=4,U(e);case 4:if(n=t.sent,i=new V,a=new B,i.data=a,a.imageSize=new Y(n.naturalWidth,n.naturalHeight),a.type=e.type,a.name=e.name,a.length=e.size,o=300,i.blob=e,!(a.imageSize.width<=o)){t.next=20;break}a.thumbImageSize=a.imageSize,a.thumbLength=0,a.thumbType=a.type,t.next=27;break;case 20:return t.next=22,W(n,o);case 22:s=t.sent,a.thumbImageSize=new Y(s.width,s.height),a.thumbLength=s.blob.size,a.thumbType=H,i.thumbBlob=s.blob;case 27:return t.abrupt("return",i);case 28:case"end":return t.stop()}}),t)}))),z.apply(this,arguments)}var Y=function(){function t(e,n){return Object(T["a"])(this,t),Object(j["a"])(this,"_width",0),Object(j["a"])(this,"_height",0),this.width=null!=e?e:0,this.height=null!=n?n:0,this}return Object(A["a"])(t,[{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"toJSON",value:function(){var t=this.width,e=this.height;return{width:t,height:e}}}]),t}(),X={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},K=72,q=3,Q=450;function J(t,e){null==e&&(e=1);var n=t.toLowerCase();if(!n)return n;X[n]&&(n=X[n]);var r=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i;if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(n)){if(4===n.length){for(var i="#",a=1;a<4;a+=1)i+=n.slice(a,a+1).concat(n.slice(a,a+1));n=i}for(var o=[],s=1;s<7;s+=2)o.push(parseInt("0x"+n.slice(s,s+2)));o.push(e),n="RGBA("+o.join(",")+")"}else n=r.test(n)?n.replace(r,"rgba($1,$2,$3,"+e+")"):n.replace(/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/i,"rgba($1,$2,$3,"+e+")");return n}function Z(t,e){return{x:t.x*Math.cos(e)+t.y*Math.sin(e),y:t.y*Math.cos(e)-t.x*Math.sin(e)}}function tt(t,e,n,r){var i,a,o,s=Math.atan((r.x-n.x)/(r.y-n.y)),c=Z(r,-s),l=Z(n,-s),u={x:0,y:0},d={x:0,y:0},h={x:0,y:0},f={x:0,y:0},m=c.y-l.y;switch(t){case N.Fine:m=m>0?6:-6,i=m>0?12:-12,a=m>0?2:-2,o=m>0?4:-4;break;case N.Crude:m=m>0?10:-10,i=m>0?20:-20,a=m>0?6:-6,o=m>0?12:-12;break;default:m=m>0?8:-8,i=m>0?16:-16,a=m>0?4:-4,o=m>0?8:-8}m*=e,i*=e,a*=e,o*=e,u.x=c.x+m,u.y=c.y-i,d.x=c.x-m,d.y=c.y-i,h.x=c.x+a,h.y=c.y-o,f.x=c.x-a,f.y=c.y-o;var p=Z(u,s),b=Z(d,s),v=Z(h,s),g=Z(f,s);return{h1:p,h2:b,h3:v,h4:g}}function et(t){var e=t[t.length-1];if(e){var n=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;t.forEach((function(t){n=Math.min(t.x,n),r=Math.min(t.y,r),i=Math.max(t.x+t.width,i),a=Math.max(t.y+t.height,a)}));var o=new d["a"];return o.x=n,o.y=r,o.width=i-n,o.height=a-r,o}}function nt(t){var e=t[t.length-1];if(e){var n=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;t.forEach((function(t){var e=(new d["a"]).set(t.x,t.y,1,1);n=Math.min(e.x,n),r=Math.min(e.y,r),i=Math.max(e.right,i),a=Math.max(e.bottom,a)}));var o=new d["a"];return o.x=n,o.y=r,o.width=i-n,o.height=a-r,o}}var rt=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"action",_.None),Object(j["a"])(this,"startPoint",null),Object(j["a"])(this,"endPoint",null),Object(j["a"])(this,"eventRect",null),Object(j["a"])(this,"color",null),Object(j["a"])(this,"brushSize",0),Object(j["a"])(this,"fontSize",0),Object(j["a"])(this,"text",null),Object(j["a"])(this,"family",null),Object(j["a"])(this,"lineHeight",0),Object(j["a"])(this,"textareaSize",null),Object(j["a"])(this,"points",null),Object(j["a"])(this,"textSplit",null),Object(j["a"])(this,"brushHash",null),Object(j["a"])(this,"dragFrom",-1),Object(j["a"])(this,"dragOn",-1),Object(j["a"])(this,"dragOffset",null),Object(j["a"])(this,"dragTarget",null)}return Object(A["a"])(t,[{key:"getBrushSize",value:function(){var t=this.action,e=this.brushSize;if(t!==_.Brush)return e;switch(e){case N.Crude:return 6;case N.Fine:return 1;default:return 3}}},{key:"makeBrushHash",value:function(t){return"".concat(t.offset.x,"-").concat(t.offset.y,"-").concat(t.scale,"-").concat(t.sceneWidth,"-").concat(t.sceneHeight)}},{key:"getArrowEventRect",value:function(){var t=this.startPoint,e=this.endPoint,n=1,r=tt(this.getBrushSize(),n,t,e);return nt([t,e,r.h1,r.h2,r.h3,r.h4])}},{key:"makePoint",value:function(t){switch(this.action){case _.Arrow:this.eventRect=this.getArrowEventRect();break;case _.Text:var e;t.font="".concat(this.fontSize,"px ").concat(null!==(e=this.family)&&void 0!==e?e:"sans-serif"),this.text=this.text.replace(/\r/g,"");for(var n=this.text,r={},i=0,a=this.textSplit=[],o=0,s=Q,c=n.length,l=this.lineHeight,u=new Y(0,0),h=0;h<c;h++){var f=n[h];if("\n"!==f){var m=r[f];m||(m=r[f]=t.measureText(f).width);var p=o+m;p>s?(u.width=Math.max(u.width,o),u.height+=l,o=m,a.push({index:i,length:h-i}),i=h):o=p}else u.width=Math.max(u.width,o),u.height+=l,o=0,a.push({index:i,length:h-i}),i=h+1}u.width=Math.max(u.width,o),i<=c-1&&(u.height+=l,a.push({index:i,length:c-i}));var b=this.startPoint;this.endPoint=new P(b.x+u.width,b.y+u.height);var v=l/2-l/8;this.eventRect=(new d["a"]).set(b.x,b.y-v,u.width,u.height);break;case _.Brush:var g,w=null!==(g=nt(this.points))&&void 0!==g?g:new d["a"],x=this.getBrushSize(),y=Math.ceil(x/2);this.startPoint=new P(w.x-y,w.y-y),this.endPoint=new P(w.right,w.bottom),this.eventRect=(new d["a"]).set(w.x-y,w.y-y,w.width+x,w.height+x),this.brushHash=null;break;default:var k=this.startPoint,C=this.endPoint;if(this.eventRect=new d["a"],k&&C){var S=Math.min(k.x,C.x),O=Math.min(k.y,C.y),I=Math.round(Math.abs(k.x-C.x)),A=Math.round(Math.abs(k.y-C.y));this.eventRect.set(S,O,I,A)}break}}},{key:"isVaildData",value:function(){switch(this.action){case _.Deleted:var t=this.dragTarget;return!!t;case _.Move:var e=this.startPoint,n=this.endPoint,r=this.dragTarget,i=this.dragOffset;return!!r&&(!(!e||!n)&&((e.x!==n.x||e.y!==n.y)&&(this.dragOffset=new P(n.x-e.x+i.x,n.y-e.y+i.y),!0)));case _.Arrow:case _.Ellipse:case _.Rectangle:var a=this.startPoint,o=this.endPoint;return null!=a&&null!=o&&(a.x!==o.x||a.y!==o.y);case _.Text:var s=this.text;return!!s&&(s=s.trim(),s.length>0);case _.Brush:var c=this.points;return!(!Object(l["h"])(c)||c.length<=1);default:return!1}}},{key:"isOverlapPoint",value:function(t,e,n){it.arrow(this,e,n)}}]),t}(),it={arrow:function(t,e,n){var r=t.startPoint,i=t.endPoint;if(r&&i){var a=ct.getCanvasLocation(e,t.startPoint,n),o=ct.getCanvasLocation(e,t.endPoint,n),s=e.scale*e.canvasScale,c=tt(t.getBrushSize(),s,a,o);return{triangle1:{p0:new P(a.x,a.y),p1:new P(c.h3.x,c.h3.y),p2:new P(c.h4.x,c.h4.y)},triangle2:{p0:new P(o.x,o.y),p1:new P(c.h1.x,c.h1.y),p2:new P(c.h2.x,c.h2.y)}}}}},at=Object(A["a"])((function t(){Object(T["a"])(this,t),Object(j["a"])(this,"offset",null),Object(j["a"])(this,"scale",1),Object(j["a"])(this,"sceneWidth",1),Object(j["a"])(this,"sceneHeight",1),Object(j["a"])(this,"canvasScale",1)}));function ot(t){return new Promise((function(e,n){var r=new Image;r.onload=function(t){e(t.target)},r.onerror=function(){n("画板预览图加载失败")},r.crossOrigin="*",r.src=t}))}function st(t,e,n){return new Promise((function(r,i){try{t.toBlob((function(t){r(t)}),e,n)}catch(a){i(a)}}))}var ct={_supportCanvasEllipse:-1,get supportCanvasEllipse(){var t=this._supportCanvasEllipse;return-1===t&&(t="function"===typeof CanvasRenderingContext2D.prototype.ellipse?1:0),t},getCanvasLocation:function(t,e,n){var r=new P(e.x-t.offset.x,e.y-t.offset.y);n&&(r.x+=n.x,r.y+=n.y);var i=t.scale*t.canvasScale;return r.x=Math.floor(r.x*i),r.y=Math.floor(r.y*i),r},getCanvasRect:function(t,e,n){var r=(new d["a"]).set(e.x-t.offset.x,e.y-t.offset.y,e.width,e.height);n&&(r.x+=n.x,r.y+=n.y);var i=t.scale*t.canvasScale;return r.x=Math.floor(r.x*i),r.y=Math.floor(r.y*i),r.width=Math.ceil(r.width*i),r.height=Math.ceil(r.height*i),r},getMidPointBtw:function(t,e){return{x:t.x+(e.x-t.x)/2,y:t.y+(e.y-t.y)/2}},setStrokeStyle:function(t,e,n,r){t.lineCap=t.lineJoin=null!==r&&void 0!==r?r:"round",t.fillStyle=t.strokeStyle=e.color;var i=e.getBrushSize(),a=Math.ceil(i*n.scale*n.canvasScale);t.lineWidth=a},drawRectangle:function(t,e,n,r,i,a){var o=e.startPoint,s=e.endPoint;if(o&&s){var c=this.getCanvasLocation(n,e.startPoint,a),l=this.getCanvasLocation(n,e.endPoint,a);i?this.drawSelectItem(t,e,n,a):r&&this.drawBackground(t,e,n,a),this.setStrokeStyle(t,e,n);var u=Math.round(t.lineWidth/2),d=Math.min(c.x,l.x)+u,h=Math.min(c.y,l.y)+u,f=Math.max(0,Math.abs(c.x-l.x)-2*u),m=Math.max(0,Math.abs(c.y-l.y)-2*u);t.strokeRect(d,h,f,m),i&&this.drawSelectItemBorder(t,e,n,a)}},drawEllipse:function(t,e,n,r,i,a){var o=e.startPoint,s=e.endPoint;if(o&&s){var c=this.getCanvasLocation(n,e.startPoint,a),l=this.getCanvasLocation(n,e.endPoint,a);i?this.drawSelectItem(t,e,n,a):r&&this.drawBackground(t,e,n,a),this.setStrokeStyle(t,e,n);try{var u=Math.ceil(t.lineWidth/2),d=Math.round(Math.abs(c.x-l.x)/2),h=Math.round(Math.abs(c.y-l.y)/2),f=Math.min(c.x,l.x)+d,m=Math.min(c.y,l.y)+h;if(d=Math.max(0,d-u),h=Math.max(0,h-u),this.supportCanvasEllipse)return t.beginPath(),t.ellipse(f,m,d,h,0*Math.PI/180,0,2*Math.PI),t.closePath(),void t.stroke();t.save();var p=d>h?d:h,b=d/p,v=h/p;t.scale(b,v),t.beginPath(),t.arc(f/b,m/v,p,0,2*Math.PI,!1),t.closePath(),t.stroke(),t.restore()}finally{i&&this.drawSelectItemBorder(t,e,n,a)}}},drawArrow:function(t,e,n,r,i,a){if(t){var o=it.arrow(e,n,a);o&&(i?this.drawSelectItem(t,e,n,a):r&&this.drawBackground(t,e,n,a),this.setStrokeStyle(t,e,n,"buff"),t.beginPath(),t.moveTo(o.triangle1.p0.x,o.triangle1.p0.y),t.lineTo(o.triangle1.p1.x,o.triangle1.p1.y),t.lineTo(o.triangle1.p2.x,o.triangle1.p2.y),t.closePath(),t.fill(),t.beginPath(),t.moveTo(o.triangle2.p0.x,o.triangle2.p0.y),t.lineTo(o.triangle2.p1.x,o.triangle2.p1.y),t.lineTo(o.triangle2.p2.x,o.triangle2.p2.y),t.closePath(),t.fill(),i&&this.drawSelectItemBorder(t,e,n,a))}},drawSelectItem:function(t,e,n,r){return this.drawBackground(t,e,n,r)},drawSelectItemBorder:function(t,e,n,r){if(e.eventRect){var i=this.getCanvasRect(n,e.eventRect,r),a="#1886ff";t.strokeStyle=a,t.lineCap="round";var o=Math.max(Math.ceil(n.scale*n.canvasScale),1);t.lineWidth=o,t.strokeRect(i.x,i.y,i.width,i.height)}},drawBackground:function(t,e,n,r){if(e.eventRect){var i=this.getCanvasRect(n,e.eventRect,r),a="#1886ff";a=J(a,.2),t.fillStyle=a,t.fillRect(i.x,i.y,i.width,i.height)}},drawText:function(t,e,n,r,i,a){var o,s=e.startPoint,c=e.textSplit;if(s&&c){var l=this.getCanvasLocation(n,e.startPoint,a);if(void 0!=t){i?this.drawSelectItem(t,e,n,a):r&&this.drawBackground(t,e,n,a);var u=n.canvasScale*n.scale,d=e.text,h=Math.max(1,Math.round(e.lineHeight*u)),f=new P(l.x,l.y-Math.round(h/4));t.imageSmoothingEnabled=!0,t.imageSmoothingQuality="high",t.font="".concat(Math.max(1,Math.round(e.fontSize*n.scale)*n.canvasScale),"px ").concat(null!==(o=e.family)&&void 0!==o?o:"sans-serif"),t.fillStyle=e.color,t.textAlign="left",t.textBaseline="top",c.forEach((function(e){if(e.length>0){var n=d.substr(e.index,e.length);t.fillText(n,f.x,f.y)}f.y+=h})),i&&this.drawSelectItemBorder(t,e,n,a)}}},smoothPoints:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e%2===0&&e++;for(var n=Math.floor(e/2),r=[],i=0;i<t.length;i++){for(var a=0,o=0,s=0,c=Math.max(0,i-n);c<=Math.min(t.length-1,i+n);c++)a+=t[c].x,o+=t[c].y,s++;r.push({x:Math.round(a/s),y:Math.round(o/s)})}return r},drawSmoothCurve:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=0;n<e.length-1;n++){var r=e[n],i=e[n+1],a=(r.x+i.x)/2,o=(r.y+i.y)/2;t.quadraticCurveTo(r.x,r.y,a,o)}var s=e[e.length-1];s&&t.quadraticCurveTo(s.x,s.y,s.x,s.y),t.stroke(),t.closePath()},drawBrush:function(t,e,n,r,i,a){var o=this;if(Object(l["h"])(e.points)&&!(e.points.length<=1)){var s=e.points.map((function(t){return o.getCanvasLocation(n,t,a)}));i?this.drawSelectItem(t,e,n,a):r&&this.drawBackground(t,e,n,a),this.setStrokeStyle(t,e,n),this.drawSmoothCurve(t,s),i&&this.drawSelectItemBorder(t,e,n,a),t=null}},save:function(t,e,n,a){var o=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var s,c,u,h,f,m,p,b,v,g,w,x,y,k,C,S,O,I;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(Object(l["i"])(e)){r.next=2;break}throw"artboardPreviewPath is empty";case 2:return r.next=4,ot(e+"?r="+Math.random());case 4:if(s=r.sent,c=a>=n.length-1?n:n.slice(0,a+1),0!==c.length){r.next=8;break}throw"没有截图操作信息";case 8:return u=[],h=[t],c.forEach((function(t){var e,r=t.action;switch(r){case _.Brush:case _.Rectangle:case _.Ellipse:case _.Arrow:case _.Text:var i=o.getHistoryTagetWithDragOn(n,t,a);if(i){if(i.action===_.Deleted)return;e=i.dragOffset}var s=new d["a"];s.set(t.eventRect.x,t.eventRect.y,t.eventRect.width,t.eventRect.height),e&&(s.x+=e.x,s.y+=e.y),u.push({target:t,offset:e}),h.push(s);break}})),f=et(h),m=new P(-f.x,-f.y),r.prev=13,b=2,p=document.createElement("canvas"),v=function(t){return t*b},p.width=v(f.width),p.height=v(f.height),g=500,w=Math.round(f.height/f.width*g),p.style.cssText="top:-10000px;left:0;width:".concat(g,"px;height:").concat(w,"px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;"),document.body.appendChild(p),x=p.getContext("2d"),x.fillStyle="#fafafa",x.fillRect(0,0,v(f.width),v(f.height)),y=new Y(s.width,s.height),x.drawImage(s,0,0,y.width,y.height,v(m.x+t.x),v(m.y+t.y),v(t.width),v(t.height)),k=!1,C=!1,S=new at,S.offset=new P,S.canvasScale=b,S.scale=1,S.sceneWidth=f.width,S.sceneHeight=f.height,O=new P,u.forEach((function(t){var e=t.target;switch(O.x=m.x,O.y=m.y,t.offset&&(O.x+=t.offset.x,O.y+=t.offset.y),e.action){case _.Brush:var n=!1;o.drawBrush(x,e,S,k,C,O,n);break;case _.Rectangle:o.drawRectangle(x,e,S,k,C,O);break;case _.Ellipse:o.drawEllipse(x,e,S,k,C,O);break;case _.Arrow:o.drawArrow(x,e,S,k,C,O);break;case _.Text:o.drawText(x,e,S,k,C,O);break}})),r.next=41,st(p,"image/jpeg",.75);case 41:return r.abrupt("return",r.sent);case 42:return r.prev=42,p&&(I=p.parentNode,I&&I.removeChild(p)),r.finish(42);case 46:case"end":return r.stop()}}),i,null,[[13,,42,46]])})))()},getHistoryTagetWithDragOn:function(t,e,n){if(null==e)return null;if(e.action===_.Move)return null;var r=e.dragOn;if(-1===r)return e;if(r>n)return e;var i,a=null;while(r<=n){var o=t[r];if(!o)return null;if(o.action!==_.Move&&o.action!==_.Deleted)return null;if(i=r,r=o.dragOn,-1===r)return o;if(r>n)return o;var s=t[r];if(!s)return o;if(s.action!==_.Move&&s.action!==_.Deleted)return o;if(s.dragFrom!==i)return o;a=o}return a}},lt=n("751a"),ut={T:"top",R:"right",B:"bottom",L:"left"},dt={linear:"linear","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out"},ht={goToArtboard:"goToArtboard",overlay:"overlay",goBack:"goBack",speak:"speak",goUrl:"url",replace:"replace",goBackAndCloseAllOverlay:"goBackAndCloseAllOverlay",closeCurrentOverlay:"closeCurrentOverlay",getTypeName:function(t){switch(t){case ht.goBack:case ht.goBackAndCloseAllOverlay:return"返回";case ht.goToArtboard:return"跳转";case ht.closeCurrentOverlay:return"关闭";case ht.replace:return"替换";case ht.goUrl:return"链接";case ht.overlay:return"覆盖";default:return"未知"}}},ft={none:"none",slideFromLeft:"slideFromLeft",slideFromRight:"slideFromRight",slideFromBottom:"slideFromBottom",slideFromTop:"slideFromTop",slideOutFromLeft:"slideOutFromLeft",slideOutFromRight:"slideOutFromRight",slideOutFromBottom:"slideOutFromBottom",slideOutFromTop:"slideOutFromTop",pushFromLeft:"pushFromLeft",pushFromRight:"pushFromRight",pushFromBottom:"pushFromBottom",pushFromTop:"pushFromTop",moveFromLeft:"moveFromLeft",moveFromRight:"moveFromRight",moveFromBottom:"moveFromBottom",moveFromTop:"moveFromTop",moveOutFromLeft:"moveOutFromLeft",moveOutFromRight:"moveOutFromRight",moveOutFromBottom:"moveOutFromBottom",moveOutFromTop:"moveOutFromTop"},mt={tap:"tap",drag:"drag",time:"time",voice:"voice"},pt={CENTER:"CENTER",TOP_LEFT:"TOP_LEFT",TOP_CENTER:"TOP_CENTER",TOP_RIGHT:"TOP_RIGHT",BOTTOM_LEFT:"BOTTOM_LEFT",BOTTOM_CENTER:"BOTTOM_CENTER",BOTTOM_RIGHT:"BOTTOM_RIGHT",MANUAL:"MANUAL"},bt=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,Object(lt["fetchGetCloudApi"])(e,{timeout:1e4});case 3:if(n=t.sent,Object(l["s"])(n)){t.next=6;break}throw new Error("无法解析".concat(e,"的返回值:").concat(n));case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function vt(t,e){return"".concat(t,":").concat(e)}function gt(t){var e={};return t.forEach((function(t){var n=t.artboard;e[vt(n.fileType,n.guid)]=n})),e}function wt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object(l["h"])(t)){var n=gt(t);(Object(l["h"])(e)?e:t).forEach((function(t){xt(t.artboard,n)}))}}function xt(t,e){return yt.apply(this,arguments)}function yt(){return yt=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=e.pathInteraction,a=e.interactionInfo,i){t.next=6;break}return a.fetchState=c["a"].Success,a.errMsg=null,a.data=null,t.abrupt("return");case 6:return a.fetchState=c["a"].Fetching,a.errMsg=null,t.prev=8,t.next=11,bt(i);case 11:o=t.sent,s=e.fileType,St(o,e),kt(o,s,n),a.data=o,a.fetchState=c["a"].Success,t.next=25;break;case 19:t.prev=19,t.t0=t["catch"](8),a.fetchState=c["a"].Error,a.errMsg=t.t0,a.data=null;case 25:case"end":return t.stop()}}),t,null,[[8,19]])}))),yt.apply(this,arguments)}function kt(t,e,n){return Ct.apply(this,arguments)}function Ct(){return Ct=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var a,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=null===e||void 0===e?void 0:e.interactions,Object(l["h"])(a)){t.next=3;break}return t.abrupt("return");case 3:o=e.renderInteractions=[],a.forEach((function(t){if(Object(l["s"])(t)&&Object(l["h"])(t.interactions)){var e=t.renderInteractions=[];t.interactions.forEach((function(t){if(Object(l["s"])(t)){switch(t.trigger_type){case mt.tap:break;default:return}switch(t.type){case ht.goBack:case ht.closeCurrentOverlay:case ht.goBackAndCloseAllOverlay:case ht.goUrl:e.push(t);break;case ht.goToArtboard:case ht.overlay:case ht.replace:var r=t.toArtboard;if(!Object(l["i"])(r))return;var a=i[vt(n,r)];t.toArtboardItem=a,e.push(t);break;default:return}var o=t.transition,s=t.animationType;if(s&&!o)switch(o=t.transition={duration:.3,easing:"linear"},s){case ft.slideFromBottom:o.type="slide",o.fromSide="T";break;case ft.slideFromLeft:o.type="slide",o.fromSide="R";break;case ft.slideFromRight:o.type="slide",o.fromSide="L";break;case ft.slideFromTop:o.type="slide",o.fromSide="B";break;default:o.type="dissolve";break}}})),e.length>0&&(t.renderTapInteraction=e.find((function(t){return t.trigger_type===mt.tap})),o.push(t),t.mlIgnoreEvent=!1,t.mlIgnoreLeftSide=!1,t.mlIgnoreScene=!1)}}));case 5:case"end":return t.stop()}}),t)}))),Ct.apply(this,arguments)}function St(t,e){if(Object(l["s"])(t)){var n,r={artScale:null!==(n=qe(e.pageGuid,e.docGuid))&&void 0!==n?n:t.scale,fileType:null},i=t.interactions,a=t.artboardMap;switch(t.docGuid=e.docGuid,t.pluginPlatform){case"xd":r.fileType=o["n"].XD,Object(l["h"])(i)&&i.forEach((function(t){ge(a,t,null,r)}));break;case"figma":r.fileType=o["n"].FIGMA,ge(a,a,null,r),Object(l["h"])(i)&&i.forEach((function(t){t.reactions=t.interactions,delete t.interactions,ge(a,t,null,r)}));break;case"sketch":r.fileType=o["n"].SKETCH;var s={};if(Object(l["h"])(i)&&i.forEach((function(t){s[t.guid]=t})),Object(l["s"])(a)){var c=["boundsInParent","globalBounds","frame","globalDrawBounds","globalBounds","boundsInArtboard","boundSameWithArtboard"],u=function t(e,n){var i;ge(a,e,n,r),null===(i=e.layers)||void 0===i||i.forEach((function(n){n&&(n.parentNode=e,t(n,e))}));var o=s[e.guid];o&&c.forEach((function(t){o[t]=e[t]}))};u(a,null)}break;default:throw new Error("lost pluginPlatform")}}}function Ot(t,e){var n=new P(t.maxRect.x-t.rect.x,t.maxRect.y-t.rect.y),r=new P(e.maxRect.x-e.rect.x,e.maxRect.y-e.rect.y);return r.x-=n.x,r.y-=n.y,r}function It(t,e,n,r,i,a){var c,l=null===e||void 0===e?void 0:e.renderTapInteraction;if(!l)return null;var u,h,f=!1,m=!1;switch(l.type){case ht.goToArtboard:case ht.overlay:c=!1;break;case ht.goBack:case ht.goBackAndCloseAllOverlay:case ht.closeCurrentOverlay:c=!0;break;case ht.goUrl:m=!0;break;default:return null}var p=!0;if(u=Object(s["a"])({},e.boundsInArtboard),c||m)h=Object(s["a"])(Object(s["a"])({},u),{},{width:1,height:1}),h.x+=80+u.width,h.y=h.y+Math.round(u.height/2)-40;else{if(!l.toArtboardItem)return;if(null!==a&&void 0!==a&&a.inSection&&l.toArtboardItem.topSectionId!==a.topSectionId)return;var b=l.toArtboardItem.pageGuid||l.toArtboardItem.docGuid;if(p=r===b,h=Object(s["a"])({},l.toArtboardItem.boundsInParentForList),h.x-=n.x,h.y-=n.y,!p){var v=t.find((function(t){return t.guid===r||t.docGuid===r})),g=t.find((function(t){return t.guid===b||t.docGuid===b}));if(!v)return;if(null!=g){var w=Ot(v,g);h.x-=w.x,h.y-=w.y}else f=!0,h=Object(s["a"])(Object(s["a"])({},u),{},{width:1,height:1}),h.x+=80+u.width,h.y=h.y+Math.round(u.height/2)-40}}var x=i?0:o["b"],y={width:20,height:20},k=y.width,C=u.x+u.width,S=u.y+x,O=S+Math.round(u.height/2),I=h.x-k,A=h.y+x-5,T=A+Math.round(h.height/2),j=Math.abs(I-C)<y.width;j&&Math.abs(T-O)<2*y.height&&(O=S+Math.round(2*u.height/3)),j&&Math.abs(T-O)<2*y.height&&(T=A+Math.round(h.height/3));var F,M,_,L,D=I-C,N=T-O,E=D>0?1:-1,R=N>0?1:-1;if(1===E)M=O+R*N*.2,F=C+.3*D,L=T-.1*R*N,_=C+.66*D;else{var V=Math.abs(D),B=Math.abs(N);V=Math.max(.3*V,200),B=Math.max(.1*V,80),F=C+V,M=O+R*B,_=I-V,L=T-R*B}var U=(new d["a"]).set(u.x,u.y+x,u.width,u.height),H={start:new P(C,O),p1:new P(F,M),p2:new P(_,L),end:new P(I+1,T)},W=m?"link":f?"otherpage":c?"back":"go",$=W+"_default",G=Object(s["a"])(Object(s["a"])({},y),{},{x:I,y:T-k/2,href:i?void 0:_t.urls[W],href_default:i?void 0:_t.urls[$],img:i?_t.imgs[W]:void 0,img_default:i?_t.imgs[$]:void 0});return{isBack:c,isOtherPage:f,drawRect:et([(new d["a"]).set(U.x,U.y,U.width,U.height),(new d["a"]).set(H.start.x,H.start.y,1,1),(new d["a"]).set(H.p1.x,H.p1.y,1,1),(new d["a"]).set(H.p2.x,H.p2.y,1,1),(new d["a"]).set(H.end.x,H.end.y,1,1),(new d["a"]).set(G.x,G.y,G.width,G.height)]),nodeRect:U,curve:H,arrowIcon:G,sameParent:p}}function At(t,e,n,r,i){var a=It(t,e,n,r,!1,i);if(!a)return null;var o=a.nodeRect,s=a.curve;return a.nodeRect="M ".concat(o.x," ").concat(o.y," \n  l 0 ").concat(o.height,"\n  l ").concat(o.width," 0\n  l 0 -").concat(o.height,"\n  l -").concat(o.width," 0\n  Z"),a.curve="M ".concat(s.start.x," ").concat(s.start.y,"\n  C ").concat(s.p1.x,",").concat(s.p1.y,"\n    ").concat(s.p2.x,",").concat(s.p2.y,"\n  ").concat(s.end.x," ").concat(s.end.y),a}var Tt="#1886FF",jt="#cdcdda",Ft={otherpage:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g  stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g  transform="translate(-827.000000, -471.000000)">\n              <g  transform="translate(827.000000, 471.000000)">\n                  <rect  fill="#1886FF" x="0" y="0" width="20" height="20" rx="4"></rect>\n                  <g  transform="translate(5.000000, 5.000000)" stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round">\n                      <path d="M3.18917988,0 L1.3,0 C0.582029825,3.53933586e-16 -3.09970593e-16,0.582029825 0,1.3 L0,8.7 C8.79259876e-17,9.41797017 0.582029825,10 1.3,10 L8.7,10 C9.41797017,10 10,9.41797017 10,8.7 L10,6.92115218 L10,6.92115218" ></path>\n                      <polyline  points="5.59135462 1.13732349e-13 10 1.13732349e-13 10 4.53043169"></polyline>\n                      <line x1="4.16417796" y1="5.7565608" x2="10" y2="1.13664457e-13" ></line>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>',link:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-899.000000, -471.000000)">\n              <g transform="translate(899.000000, 471.000000)">\n                  <rect fill="#1886FF" x="0" y="0" width="20" height="20" rx="4"></rect>\n                  <path d="M13.0932433,4 C14.2116336,4.06761548 15.2120028,4.61417394 15.7234275,5.83688719 C16.2517123,7.07650431 16.0100501,8.23723671 15.1108418,9.24019965 C14.4645359,9.93889294 13.7676495,10.6037785 13.0932433,11.2630294 C12.8066207,11.5503952 12.3289163,11.5672991 12.076014,11.2968372 C11.8231117,11.0263752 11.8399719,10.6488555 12.1603148,10.3445858 C12.8234809,9.67970027 13.5035071,9.01481472 14.1610531,8.33865993 C15.1445622,7.31879311 14.7061981,5.70165623 13.3461457,5.34667496 C12.7672804,5.19454014 12.2277554,5.29596336 11.8006315,5.70165623 C11.1037451,6.34963791 10.440579,7.0483312 9.7493127,7.69067825 C9.59757131,7.82590921 9.36152914,7.9442363 9.17044739,7.92733243 C8.6590227,7.89352469 8.40612039,7.27935075 8.76580368,6.90746561 C9.53013069,6.10734911 10.2944577,5.34104034 11.1093652,4.59163544 C11.5814495,4.15213483 12.2446156,4 13.0932433,4 L13.0932433,4 Z M4,12.9308779 C4,12.0800498 4.30348278,11.3306449 4.89920824,10.716471 C5.56237432,10.0346815 6.2255404,9.36979599 6.89994658,8.71054507 C7.22028952,8.38937154 7.61369312,8.37246767 7.8834556,8.64292959 C8.15321807,8.93029537 8.13635791,9.29091126 7.79915482,9.61208479 C7.1528489,10.2600665 6.51216303,10.8855097 5.88271726,11.5334913 C5.1015301,12.3336078 5.06780979,13.4041863 5.78155633,14.1366873 C6.47844272,14.8353806 7.61369312,14.8353806 8.32743966,14.1366873 C8.99060574,13.4887056 9.61443146,12.8463586 10.2607374,12.1983769 C10.6485209,11.8095879 11.2442464,11.9617227 11.3454073,12.4688388 C11.3791276,12.6547814 11.311687,12.9308779 11.1768058,13.0661089 C10.4630592,13.8155138 9.76617285,14.5649187 8.98498569,15.2410735 C8.03519699,16.0749977 6.93366689,16.2102287 5.77593628,15.7031126 C4.69688639,15.2410735 4,14.1535912 4,12.9308779 L4,12.9308779 Z M12.6380192,8.06256339 C12.6042989,8.14708274 12.5537184,8.29921757 12.4356973,8.41754465 C11.1318454,9.74731575 9.83923352,11.0545484 8.51852142,12.3674156 C8.24875894,12.6378775 7.83849518,12.6209736 7.58559287,12.3674156 C7.31583039,12.0969537 7.33269055,11.7363378 7.61931317,11.4320681 L11.4802886,7.55544729 C11.6826104,7.35260085 11.9411328,7.2680815 12.2277554,7.38640859 C12.5031379,7.50473568 12.621159,7.69067825 12.6380192,8.06256339 Z" fill="#FFFFFF" fill-rule="nonzero"></path>\n              </g>\n          </g>\n      </g>\n  </svg>',back:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-827.000000, -447.000000)">\n              <g transform="translate(827.000000, 447.000000)">\n                  <rect fill="#1886FF" x="0" y="0" width="20" height="20" rx="4"></rect>\n                  <g transform="translate(5.000000, 3.999689)" stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round">\n                      <polyline transform="translate(2.988418, 2.988418) rotate(-45.000000) translate(-2.988418, -2.988418) " points="1.01650178 5.1015487 0.875287378 0.875287378 5.1015487 1.01650178"></polyline>\n                      <path d="M0.685919732,3.01908886 L6.50938891,3.01908886 C8.43720018,3.01908886 10,4.58188868 10,6.50969995 C10,8.43751123 8.43720018,10.000311 6.50938891,10.000311 L2.06828362,10.000311 L2.06828362,10.000311"></path>\n                  </g>\n              </g>\n          </g>\n      </g>\n  </svg>',go:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="20px" height="20px" viewBox="0 0 20 20" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-807.000000, -392.000000)">\n              <g transform="translate(807.000000, 392.000000)">\n                  <path d="M0,0 L16,0 C18.209139,-4.05812251e-16 20,1.790861 20,4 L20,16 C20,18.209139 18.209139,20 16,20 L0,20 L0,20 L0,0 Z" fill="#1886FF" transform="translate(10.000000, 10.000000) scale(-1, 1) translate(-10.000000, -10.000000) "></path>\n                  <polyline stroke="#FFFFFF" stroke-linecap="round" stroke-linejoin="round" transform="translate(8.000000, 10.000000) scale(-1, 1) rotate(-45.000000) translate(-8.000000, -10.000000) " points="4 14 4 6 12 6"></polyline>\n              </g>\n          </g>\n      </g>\n  </svg>',flowStartIcon:'<?xml version="1.0" encoding="UTF-8"?>\n  <svg width="16px" height="26px" viewBox="0 0 16 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g transform="translate(-232.000000, -323.000000)">\n              <g transform="translate(240.000000, 336.000000) scale(-1, 1) translate(-240.000000, -336.000000) translate(232.000000, 323.000000)">\n                  <path d="M0,0 L16,0 L16,26 L4,26 C1.790861,26 2.705415e-16,24.209139 0,22 L0,0 L0,0 Z" fill="#1886FF" transform="translate(8.000000, 13.000000) scale(-1, 1) translate(-8.000000, -13.000000) "></path>\n                  <path d="M8.04115209,9 L12,12.8990659 L12,13.7290307 L11.012,13.729 L11.0126751,16.7147272 L9.01944469,16.7147272 L9.019,13.729 L7.026,13.729 L7.02621423,16.7147272 L5.03298378,16.7147272 L5.032,13.729 L4,13.7290307 L4,12.8990659 L8.04115209,9 Z" fill="#FFFFFF" transform="translate(8.000000, 12.857364) scale(-1, 1) translate(-8.000000, -12.857364) "></path>\n              </g>\n          </g>\n      </g>\n  </svg>',dev:'<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12.4 7.3999L11.2 14.5999" stroke="#22AB42" stroke-width="1.2"/>\n<path d="M14.7998 7.3999L18.3998 10.6726L14.7998 14.5999" stroke="#22AB42" stroke-width="1.2"/>\n<path d="M7.6 7.3999L4 10.6726L7.6 14.5999" stroke="#22AB42" stroke-width="1.2"/>\n</svg>'};function Mt(t){return t=btoa(t),"data:image/svg+xml;base64,".concat(t)}var _t={urls:{},imgs:{},sizes:{}};function Lt(t){var e=new Image;_t.imgs[t]=e,e.onload=function(e){var n,r,i=_t.sizes[t],a=e.target;i.width=null!==(n=a.naturalWidth)&&void 0!==n?n:a.width,i.height=null!==(r=a.naturalHeight)&&void 0!==r?r:a.height},e.src=_t.urls[t]}function Dt(t){var e=Ft[t];e&&(e=e.replace(new RegExp(Tt,"ig"),jt),Ft["".concat(t,"_default")]=e)}function Nt(t){_t.urls[t]=Mt(Ft[t]),_t.sizes[t]=new Y}function Et(t){if(!t)return null;if(!t.flowStart)return null;var e=t.docName,n=t.flowName,r=t.fileType,i=t.pageName;return"原型起始画板\n来自文档: ".concat(e).concat(o["n"].getFileExt(r)).concat(Object(l["i"])(i)?"/".concat(i):"").concat(Object(l["i"])(n)?"\n自定义标签名: ".concat(n):"")}["otherpage","go","back","link"].forEach((function(t){Dt(t)})),Object.keys(Ft).forEach((function(t){Nt(t),Lt(t)}));var Pt=n("43c1");function Rt(t,e,n){if(e.width<=n||e.height<=n)t.fillRect(e.x,e.y,e.width,e.height);else{var r=new P(e.x+n,e.y),i=new P(e.x+e.width,e.y),a=new P(e.x+e.width,e.y+e.height),o=new P(e.x,e.y+e.height),s=new P(e.x,e.y);t.beginPath(),t.moveTo(r.x,r.y),t.arcTo(i.x,i.y,a.x,a.y,n),t.arcTo(a.x,a.y,o.x,o.y,n),t.arcTo(o.x,o.y,s.x,s.y,n),t.arcTo(s.x,s.y,r.x,r.y,n),t.fill()}}var Vt=new Map;function Bt(t,e,n){var r="".concat(e,":").concat(n),i=Vt.get(r);if(null!=i)return i;var a=t.measureText(n),o=a.width,s=a.fontBoundingBoxAscent,c=a.fontBoundingBoxDescent,l=s+c;return("number"!==typeof l||isNaN(l))&&(l=e),i={width:o,height:l},Vt.set(r,i),i}function Ut(t,e,n,r){var i;if((null!==(i=null===n||void 0===n?void 0:n.length)&&void 0!==i?i:0)<1)return{text:"",maxHeight:0};t.font="".concat(e,"px Arial");var a=".",o=Bt(t,e,a).width,s=0,c=0;r-=Math.ceil(3*o);for(var l=0,u=n.length;l<u;l++){var d=n[l],h=Bt(t,e,d);if(s+=h.width,c=Math.max(c,h.height),s>=r)return l<u-1?{text:n.substring(0,l)+"...",maxHeight:c}:{text:n.substring(0,l),maxHeight:c}}return{text:n,maxHeight:c}}function Ht(t,e,n){var r;e.guid||(e.guid=e.id),Gt(e);var i=e.x,a=e.y,o=e.width,s=e.height;if(!e.absoluteBoundingBox){if(n){var l=n.globalBounds,u=l.x,d=l.y;i+=u,a+=d}e.absoluteBoundingBox=e.absoluteRenderBounds={x:i,y:a,width:o,height:s}}if(e.globalBounds=e.absoluteBoundingBox,e.globalDrawBounds=null!==(r=e.absoluteRenderBounds)&&void 0!==r?r:e.absoluteBoundingBox,e.boundsInParent=t==e?e.absoluteBoundingBox:{x:i,y:a,width:o,height:s},e.blendMode){var h=c["e"][e.blendMode];h&&(e.blendMode=h)}re(t,e),Xt(t,e),zt(e,n),ie(e),te(e),ee(e),ae(e),oe(e),qt(e),Qt(t,e)}var Wt={isMask:!1,layoutAlign:"INHERIT",constrainProportions:!1,layoutPositioning:"AUTO",layoutGrow:0,blendMode:"PASS_THROUGH"},$t=Object.keys(Wt);function Gt(t){$t.forEach((function(e){void 0===t[e]&&(t[e]=Wt[e])}));var e=t.textSegments,n=Object(l["h"])(e);if(n&&e.length>0){var r=e[0];r&&se.forEach((function(e){void 0===t[e]&&(t[e]=r[e])}))}}function zt(t,e){if(e&&t.isMask){t.mlIgnoreScene=!0;var n=e.children;if(n&&!(n.length<1))for(var r=!1,i=t.absoluteBoundingBox,a=0,o=n.length;a<o;a++){var s=n[a];if(s!==t){if(r){if(s.isMask)break;if(!s.markedForExport){var c=s.absoluteBoundingBox,l=Object(d["d"])(c,i);l&&(Object(d["g"])(l,c)||(c.x=l.x,c.y=l.y,c.width=l.width,c.height=l.height))}}}else r=!0}}}function Yt(t){if(!t)return null;var e;while(null!=(e=t.parentNode)){var n=e,r=n.clipsContent;if(r)return e;t=e}return null}function Xt(t,e){var n;if(!e.markedForExport){var r=null!==(n=Yt(e))&&void 0!==n?n:t,i=e.absoluteBoundingBox,a=Object(d["d"])(i,r.absoluteBoundingBox);a&&(Object(d["g"])(a,i)||(i.x=a.x,i.y=a.y,i.width=a.width,i.height=a.height))}}function Kt(t){switch(t){case"BOTTOM":case"TOP":case"RIGHT":return t=t.substring(0,1),"B"===t?t="T":"T"===t&&(t="B"),t;default:return"L"}}function qt(t){var e=t.reactions;if(Object(l["h"])(e)){var n=[];e.forEach((function(t){if(Object(l["s"])(t)){var e=t.action,r=t.trigger;if(Object(l["s"])(e)&&Object(l["s"])(r)){var i=r.delay,a=r.type;switch(a){case"MOUSE_DOWN":case"MOUSE_UP":case"ON_CLICK":a=mt.tap;break;default:return void("number"!==typeof i&&(i=0))}var o,s=e.type,c=e.frameGuid,u=e.frameId,d=e.navigation,f=e.transition,m=e.overlayBackground,p=e.overlayBackgroundInteraction,b=e.overlayPositionType,v=e.url;if(Object(l["i"])(v)&&!/https?:\/\//i.test(v)&&(v="http://"+v),Object(l["s"])(m))try{m=Object(h["i"])(Object(h["a"])(m)).value}catch(B){}switch(s){case"BACK":s=ht.goBackAndCloseAllOverlay;break;case"CLOSE":s=ht.closeCurrentOverlay;break;case"URL":s=ht.goUrl;break;case"NODE":if(!Object(l["i"])(c))return;switch(d){case"NAVIGATE":s=ht.goToArtboard;break;case"OVERLAY":s=ht.overlay;break;case"SWAP":s=ht.replace;break;default:return}break;default:return}if(Object(l["s"])(f)){var g,w,x=f.type,y=f.easing,k=f.duration,C=f.direction,S=!1;switch(x){case"MOVE_IN":g=Kt(C),x="move";break;case"MOVE_OUT":g=Kt(C),x="move_out";break;case"PUSH":g=Kt(C),x="push";break;case"SLIDE_IN":g=Kt(C),x="slide";break;case"SLIDE_OUT":g=Kt(C),x="slide_out";break;default:o=null,x="dissolve";break}if(Object(l["s"])(y)){var O=y.type,I=y.easingFunctionCubicBezier;switch(O){case"CUSTOM_CUBIC_BEZIER":w="cubic-bezier(".concat(I.x1,",").concat(I.y1,",").concat(I.x2,",").concat(I.y2,")"),S=!0;break;case"CUSTOM_SPRING":case"GENTLE":case"QUICK":case"BOUNCY":case"SLOW":w="ease-in-out",S=!0;break;case"EASE_IN_BACK":var A=.58,T=-.25,j=1,F=.42;w="cubic-bezier(".concat(A,", ").concat(T,", ").concat(j,", ").concat(F,")"),S=!0;break;case"EASE_OUT_BACK":var M=0,_=.58,L=.42,D=1.25;w="cubic-bezier(".concat(M,", ").concat(_,", ").concat(L,", ").concat(D,")"),S=!0;break;case"EASE_IN_AND_OUT_BACK":var N=.58,E=-.25,P=.42,R=1.25;w="cubic-bezier(".concat(N,", ").concat(E,", ").concat(P,", ").concat(R,")"),S=!0;break;case"EASE_IN":case"EASE_IN_AND_OUT":case"EASE_OUT":case"LINEAR":w=O.toLowerCase().replace(/_/g,"-").replace(/-and/g,"");break}}x&&(o={type:x,duration:k,fromSide:g,customEasing:S,easing:w})}var V={trigger_type:a,type:s,delay:i,toArtboard:c,toArtboardFigmaId:u,transition:o,overlayBackground:m,overlayBackgroundInteraction:p,overlayPositionType:b};s===ht.goUrl&&(V.toUrl=v),n.push(V)}}})),n.length>0&&(t.interactions=n)}}function Qt(t,e){var n=e.types={GraphicNode:1},r=t.sharedStyles;switch(e.type){case"FRAME":t===e?n.Artboard=1:n.Group=1,e.clipsContent||(n.GroupVisibleOutChild=1);break;case"GROUP":n.Group=1;break;case"LINE":n.Line=1;break;case"TEXT":n.Text=1,ce(e,r);break;case"VECTOR":n.Path=1;break;case"COMPONENT":case"COMPONENT_SET":case"INSTANCE":n.Group=1,e.clipsContent||(n.GroupVisibleOutChild=1),"INSTANCE"===e.type&&(n.FigmaInstance=1,void 0===e.isExposedInstance&&(e.isExposedInstance=!1));break;case"BOOLEAN_OPERATION":n.Group=1;var i=e.children;(null===i||void 0===i?void 0:i.length)>0&&i.forEach((function(t){if(t){var e=t.fills;e&&e.length>0&&e.splice(0)}}));break;case"RECTANGLE":n.Rectangle=1;break}}function Jt(t){if(t){var e=4;t.cssStyle={data:{},style:{},render:{},nameSize:{}};var n=t.fills;if(Object(l["h"])(n)){n=t.fills=n.map((function(t){var e,n=!(null===(e=t)||void 0===e||!e.fromPage);return t=Zt(t),t&&(t.fromPage=n),t})).filter((function(t){return!!t}));var r=function(e){var n,r=!(null===(n=e)||void 0===n||!n.fromPage);return e=Object(h["l"])(e,!1,!1,t,null),e&&(e.fromPage=r),e},i=t.cssStyle.data.background=n.map(r).filter((function(t){return!!t})),a=i.find((function(t){return t&&!t.fromPage}));if(!a){var s=r({value:4282400832});s&&i.push(s)}if(n=t.cssStyle.data.background,n.length>0){var u,f=[];n.forEach((function(t){switch(t.type){case o["o"].FillColor:var n=Object(h["j"])(t.color);f.push({color:n,image:"linear-gradient(0deg,".concat(n,",").concat(n,")"),render:function(t,r,i){t.fillStyle=n,Rt(t,(new d["a"]).set(i(r.x),i(r.y),i(r.width),i(r.height)),i(e))}});break;case o["o"].RadialGradientFill:case o["o"].DiamondGradientFill:u="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),f.push({image:u,scaleX:Object(c["gb"])(t.scaleX),scaleY:Object(c["gb"])(t.scaleY),startX:Object(c["gb"])(t.startX),startY:Object(c["gb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["gb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=this.scaleX,a=this.scaleY,o=this.startX,s=this.startY,c=this.colorStops,l=Math.round(i*n.width),u=Math.round(a*n.height),h=n.x+Math.round(o*n.width),f=n.y+Math.round(s*n.height),m=t.createRadialGradient(h,f,0,h,f,Math.max(l,u));c.forEach((function(t){m.addColorStop(t.stop,t.color)})),t.fillStyle=m,Rt(t,n,r(e))}});break;case o["o"].AngularGradientFill:u="conic-gradient(from ".concat(t.angle," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),f.push({image:u,angle:parseFloat(t.angle),startX:Object(c["gb"])(t.startX),startY:Object(c["gb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["gb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=this.colorStops,a=this.angle,o=this.startX,s=this.startY;o=n.x+o*n.width,s=n.y+s*n.height;var c=t.createConicGradient((a-90)*Math.PI/180,o,s);i.forEach((function(t){c.addColorStop(t.stop,t.color)})),t.fillStyle=c,Rt(t,n,r(e))}});break;case o["o"].LinearGradientFill:u="linear-gradient(".concat(t.angle,",").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),f.push({image:u,endPoints:t.endPoints,colorStops:t.colorStops.map((function(t){var e=Object(c["gb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=Object(Pt["a"])(this.endPoints,4),a=i[0],o=i[1],s=i[2],c=i[3],l=this.colorStops;a=Math.round(n.x+a*n.width),o=Math.round(n.y+o*n.height),s=Math.round(n.x+s*n.width),c=Math.round(n.y+c*n.height);var u=t.createLinearGradient(a,o,s,c);l.forEach((function(t){u.addColorStop(t.stop,t.color)})),t.fillStyle=u,Rt(t,n,r(e))}});break;case o["o"].ImageFill:break}}));var m=f.length;m>0&&(u=f.map((function(t,e){var n=0===e;return n&&t.color?t.color:t.image})).reverse().join(","),t.cssStyle.render.backgrounds=f,t.cssStyle.style.background=u)}}}}function Zt(t){var e,n;if(Object(l["h"])(t)){var r=[];return t.forEach((function(t){t=Zt(t),t&&r.push(t)})),r}if(!t.visible)return null;var i={blendMode:null!==(e=c["e"][t.blendMode])&&void 0!==e?e:t.blendMode};switch(t.type){case"SOLID":var a=t.color;if(!a)return null;i.value=Object(h["a"])(a,t.opacity),i.swatch=t.colorSwatch;break;case"IMAGE":return i.imageFill=!0,i;case"GRADIENT_LINEAR":var o=t.gradientStops,s=t.opacity,u=t.gradientParams;if(!o||!u)return null;var d=u.start,f=u.end;if(!d||!f)return null;"number"===typeof u.cssAngle&&(i.angle=Object(c["q"])(u.cssAngle,2)+"deg");var m=i.colorStops=[];o.forEach((function(t){m.push({stop:t.position,color:{value:Object(h["a"])(t.color,s),swatch:t.colorSwatch}})})),i.endPoints=[d[0],d[1],f[0],f[1]];break;case"GRADIENT_RADIAL":case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":var p=t.gradientStops,b=t.opacity,v=t.gradientParams;if(!p||!v)return null;var g,w=v.radius,x=v.center;if(!w||!x)return;switch(t.type){case"GRADIENT_RADIAL":g="gradientRadialTransform",v.cssAngle=Object(c["q"])((null!==(n=v.rotation)&&void 0!==n?n:0)+90,2);break;case"GRADIENT_ANGULAR":var y,k;g="gradientAngularTransform";var C=p[0],S=null!==(y=null===C||void 0===C?void 0:C.position)&&void 0!==y?y:0;0!=S&&(p.forEach((function(t){t.position-=S})),v.cssAngle+=Object(c["q"])(360*S,2));var O=p[p.length-1],I=null!==(k=null===O||void 0===O?void 0:O.position)&&void 0!==k?k:1;I<1&&C&&(null===O||void 0===O?void 0:O.color)!=C.color&&p.push({position:1,color:C.color});break;case"GRADIENT_DIAMOND":g="gradientDiamondTransform";break}i[g]={rotate:v.cssAngle,scaleX:w[0],scaleY:w[1],endR:1,startR:0},i.startX=x[0],i.startY=x[1],i.endPoints=[0,0,0,0];var A=i.colorStops=[];return p.forEach((function(t){A.push({stop:t.position,color:{value:Object(h["a"])(t.color,b),swatch:t.colorSwatch}})})),i}return i}function te(t){var e=t.rotation,n=t.markedForExport;null==e||0===e||n||(e=Object(c["q"])(e,2),e=-e,t.boxTransform={rotation:e,flippedHorizontally:!1,flippedVertically:!1})}function ee(t){var e,n,r,i=t.strokeWeight,a=t.strokeTopWeight,s=t.strokeBottomWeight,c=t.strokeLeftWeight,u=t.strokeRightWeight,d=t.strokeAlign,h=t.strokes,f=t.dashPattern,m=[];switch(d){case"INSIDE":e=o["O"].Inside;break;case"OUTSIDE":e=o["O"].Outside;break;default:e=o["O"].Center;break}if(null!=a&&a===s&&a===c&&a===u?(n=a,r=null):(n=null!==i&&void 0!==i?i:a,null!=a&&(r=[a,u,s,c])),Object(l["h"])(h)&&h.length>0&&h.forEach((function(t){if(t&&t.visible){var i=Zt(t);i&&m.push({stroke:i,strokePosition:e,strokeEnabled:!0,strokeWidth:n,strokeWidths:r,strokeDashArray:f})}})),m.length>0){var p=m[0];t.strokeArr=m,t.stroke=p.stroke,t.strokeEnabled=p.strokeEnabled,t.strokeWidth=p.strokeWidth,t.strokeWidthArr=p.strokeWidthArr,t.strokePosition=p.strokePosition,t.strokeDashArray=p.strokeDashArray}}function ne(t,e){if(!t||!e)return null;var n=t[e];return n?n.name:null}function re(t,e){var n=t.sharedStyles;e.fillSN=ne(n,e.fillStyleId),e.strokeSN=ne(n,e.strokeStyleId),e.effectSN=ne(n,e.effectStyleId),e.charSN=ne(n,e.textStyleId)}function ie(t){var e=t.fills;if(e&&0!==e.length){var n=[];e.forEach((function(t){t&&t.visible&&(t=Zt(t),t&&n.unshift({fill:t,fillEnabled:!0}))})),n.length>0&&(t.fillArr=n,t.fillEnabled=!0,t.fill=n[0].fill)}}function ae(t){var e=t.cornerRadius,n=t.bottomLeftRadius,r=t.bottomRightRadius,i=t.topLeftRadius,a=t.topRightRadius;0!==e&&("number"===typeof e&&(void 0===n&&(n=e),void 0===r&&(r=e),void 0===i&&(i=e),void 0===a&&(a=e)),void 0!==n&&void 0!==r&&void 0!==i&&void 0!==a&&(t.cornerRadii={bottomLeft:n,bottomRight:r,topLeft:i,topRight:a}))}function oe(t){var e=t.effects;if(Object(l["h"])(e)&&0!==e.length){var n=[],r=[],i=[];e.forEach((function(t){if(t&&t.visible)switch(t.type){case"BACKGROUND_BLUR":t.radius>=0&&n.push({visible:!0,blurAmount:t.radius,isBackgroundEffect:!0});break;case"LAYER_BLUR":t.radius>=0&&n.push({visible:!0,blurAmount:t.radius,isBackgroundEffect:!1});break;case"DROP_SHADOW":var e,a,o,s,l;r.push({visible:!0,x:null!==(e=null===(a=t.offset)||void 0===a?void 0:a.x)&&void 0!==e?e:0,y:null!==(o=null===(s=t.offset)||void 0===s?void 0:s.y)&&void 0!==o?o:0,blur:t.radius,spread:t.spread,showShadowBehindNode:t.showShadowBehindNode,color:{value:Object(h["a"])(t.color),swatch:t.colorSwatch},blendMode:null!==(l=c["e"][t.blendMode])&&void 0!==l?l:t.blendMode});break;case"INNER_SHADOW":var u,d,f,m,p;i.push({visible:!0,x:null!==(u=null===(d=t.offset)||void 0===d?void 0:d.x)&&void 0!==u?u:0,y:null!==(f=null===(m=t.offset)||void 0===m?void 0:m.y)&&void 0!==f?f:0,blur:t.radius,spread:t.spread,showShadowBehindNode:t.showShadowBehindNode,color:{value:Object(h["a"])(t.color),swatch:t.colorSwatch},blendMode:null!==(p=c["e"][t.blendMode])&&void 0!==p?p:t.blendMode});break}})),n.length>0&&(t.blurs=n),r.length>0&&(t.shadowArr=r,t.shadow=r[0]),i.length>0&&(t.innerShadowArr=i,t.innerShadow=i[0])}}var se=["fontSize","fontName","fontWeight","textDecoration","textCase","lineHeight","letterSpacing","fills","textStyleId","fillStyleId","listOptions","indentation","hyperlink"];function ce(t,e){var n,r,i,a;t.text=t.characters;var o=t.lineHeight;if(o)if("number"===typeof o)t.lineSpacing=o;else switch(o.unit){case"AUTO":t.lineSpacing=0;break;case"PIXELS":t.lineSpacing=o.value;break;case"PERCENT":t.lineSpacing=Object(c["q"])(o.value,3)+"%";break}else t.lineSpacing=0;t.textAlign=null!==(n=null===(r=t.textAlignHorizontal)||void 0===r?void 0:r.toLowerCase())&&void 0!==n?n:"left";var s=null!==(i=null===(a=t.textAlignVertical)||void 0===a?void 0:a.toLowerCase())&&void 0!==i?i:"top";"top"!==s&&(t.textVerticalAlign=s);var u=[],d=t.charSN,f=t.textSegments,m=t.fillSN;Object(l["h"])(f)&&f.forEach((function(n){var r,i=null!==(r=Zt(n.fills))&&void 0!==r?r:[];i.reverse();var a={fill:i.length>0?i[i.length-1]:{},fills:i,fillSN:m,figmaFills:i.length>0?i.map((function(e){return Object(h["l"])(e,!0,!1,t,null)})):void 0,textCase:n.textCase,charSpacing:n.letterSpacing&&0!==n.letterSpacing.value?"PIXELS"===n.letterSpacing.unit?n.letterSpacing.value:n.letterSpacing.value+"%":null,fontFamily:n.fontName.family,fontWeight:n.fontWeight,fontItalic:/italic/i.test(n.fontName.style)?"italic":"normal",fontSize:n.fontSize,underline:"UNDERLINE"===n.textDecoration,strikethrough:"STRIKETHROUGH"===n.textDecoration,charSN:ne(e,n.textStyleId)};null!=d&&a.charSN===d&&(a.charSN=void 0),a.text=n.characters,a.length=n.characters.length,null==a.fontWeight&&(a.fontWeight=400),a.fontWeightCss=a.fontWeight.toString(),a.fontStyle=a.fontWeight.toString(),a.fontItalic?a.fontStyle+=" "+a.fontItalic:a.fontItalic="normal",u.push(a)})),t.styleRanges=u}function le(t){if(t){var e=4;t.cssStyle={data:{},style:{},render:{},nameSize:{}};var n=t.fill,r=t.fillEnabled,i=t.fills=r&&Object(l["s"])(n)?[n]:[];if(Object(l["h"])(i)){var a=function(e){return e=Object(h["l"])(e,!1,!1,t,null),e.fromPage=!1,e},s=t.cssStyle.data.background=i.map(a).filter((function(t){return!!t})),u=s.find((function(t){return t&&!t.fromPage}));if(!u){var f=a({value:4282400832});f&&s.push(f)}if(i=t.cssStyle.data.background,i.length>0){var m,p=[];i.forEach((function(t){switch(t.type){case o["o"].FillColor:var n=Object(h["j"])(t.color);p.push({color:n,image:"linear-gradient(0deg,".concat(n,",").concat(n,")"),render:function(t,r,i){t.fillStyle=n,Rt(t,(new d["a"]).set(i(r.x),i(r.y),i(r.width),i(r.height)),i(e))}});break;case o["o"].RadialGradientFill:case o["o"].DiamondGradientFill:m="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),p.push({image:m,scaleX:Object(c["gb"])(t.scaleX),scaleY:Object(c["gb"])(t.scaleY),startX:Object(c["gb"])(t.startX),startY:Object(c["gb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["gb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=this.scaleX,a=this.scaleY,o=this.startX,s=this.startY,c=this.colorStops,l=Math.round(i*n.width),u=Math.round(a*n.height),h=n.x+Math.round(o*n.width),f=n.y+Math.round(s*n.height),m=t.createRadialGradient(h,f,0,h,f,Math.max(l,u));c.forEach((function(t){m.addColorStop(t.stop,t.color)})),t.fillStyle=m,Rt(t,n,r(e))}});break;case o["o"].AngularGradientFill:m="conic-gradient(from ".concat(t.angle," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),p.push({image:m,angle:parseFloat(t.angle),startX:Object(c["gb"])(t.startX),startY:Object(c["gb"])(t.startY),colorStops:t.colorStops.map((function(t){var e=Object(c["gb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=this.colorStops,a=this.angle,o=this.startX,s=this.startY;o=n.x+o*n.width,s=n.y+s*n.height;var c=t.createConicGradient((a-90)*Math.PI/180,o,s);i.forEach((function(t){c.addColorStop(t.stop,t.color)})),t.fillStyle=c,Rt(t,n,r(e))}});break;case o["o"].LinearGradientFill:m="linear-gradient(".concat(t.angle,",").concat(t.colorStops.map((function(t){return"".concat(Object(h["j"])(t.color)," ").concat(t.stop)})).join(","),")"),p.push({image:m,endPoints:t.endPoints,colorStops:t.colorStops.map((function(t){var e=Object(c["gb"])(t.stop);if(!isNaN(e)){var n=Object(h["j"])(t.color);return{stop:e,color:n}}})).filter((function(t){return!!t})),render:function(t,n,r){n=(new d["a"]).set(r(n.x),r(n.y),r(n.width),r(n.height));var i=Object(Pt["a"])(this.endPoints,4),a=i[0],o=i[1],s=i[2],c=i[3],l=this.colorStops;a=Math.round(n.x+a*n.width),o=Math.round(n.y+o*n.height),s=Math.round(n.x+s*n.width),c=Math.round(n.y+c*n.height);var u=t.createLinearGradient(a,o,s,c);l.forEach((function(t){u.addColorStop(t.stop,t.color)})),t.fillStyle=u,Rt(t,n,r(e))}});break;case o["o"].ImageFill:break}}));var b=p.length;b>0&&(m=p.map((function(t,e){var n=0===e;return n&&t.color?t.color:t.image})).reverse().join(","),t.cssStyle.render.backgrounds=p,t.cssStyle.style.background=m)}}}}window.addEventListener("error",(function(t){var e=t.filename;if(e){var n=e.match(/marklion_artboard_id=(\w+)/);if(n&&(n=n[1],n)){e=e.replace(/\\/g,"/");var r=e.indexOf("/res/");-1!==r&&(e=e.substr(r+1)),r=e.indexOf("?"),-1!==r&&(e=e.substr(0,r)),e=decodeURIComponent(e);var i=ue[n];i&&i(!1,"画板数据加载失败[".concat(e,"]"))}}}),!0),window.marklion_artboard=function(t,e){var n=null,r=null;if(arguments.length>2&&(n=arguments[0],t=arguments[1],e=arguments[2],arguments.length>3&&(r=arguments[3])),null!=t){var i=t._marklionBack,a=t._marklionCallId;if(i&&a){if(t._marklionBack=null,t._marklionCallId=null,ue[a]=null,Object(l["h"])(n)){var o=n;n={},o.forEach((function(t){if(Object(l["s"])(t)){var e=t.name;Object(l["i"])(e)&&(n[e.toLowerCase()]=t.value)}}))}else if(Object(l["s"])(n)){var s=n;n={},Object.keys(s).forEach((function(t){n[t.toLowerCase()]=s[t]}))}i(!0,{artboard:e,linked:n,sizeMap:r})}}};var ue={},de=1;function he(t){return new Promise((function(e,n){var r=document.createElement("script"),i=function(t){t&&null!=t.parentNode&&setTimeout((function(){t&&null!=t.parentNode&&(t.parentNode.removeChild(t),t=null)}),200)};r._marklionBack=function(t,a){r._marklionBack=null,r._marklionCallId=null,t?e(a):n(a),i(r),r=null},r.addEventListener("error",(function(e){var n=e.target._marklionBack;n&&n(!1,"画板数据加载失败[".concat(t,"]"))})),r.addEventListener("load",(function(t){i(t.target)}));var a="marklion_".concat(Date.now(),"_").concat(de++);r._marklionCallId=a,r.src=t+"?marklion_artboard_id="+a,ue[a]=r._marklionBack,document.body.appendChild(r)}))}function fe(t,e,n,r,i){void 0===t.markedForExport&&(t.markedForExport=!1),null==t.mlOutputTime&&(t.mlOutputTime=Date.now());var a=null!==r&&void 0!==r?r:n;if(n){var o,s,u,d,h,f,m,p,b,v,g,w,x,y,k,C,S,O;t.cid=n.cid,t.comments=n.comments,t.replies=n.replies,t.scale=n.scale,t.commentUpdateTime=n.commentUpdateTime,null!==(o=t.versionCount)&&void 0!==o||(t.versionCount=n.versionCount);var I=a.boundsInParent||a.frame,A=t.boundsInParent||t.frame;I&&A&&(c["S"].inCloudMode?(A.x=I.x,A.y=I.y,A.width=I.width,A.height=I.height):(A.x=I.x,A.y=I.y)),null!==(s=t.flowStart)&&void 0!==s||(t.flowStart=null!==(u=a.flowStart)&&void 0!==u&&u),null!==(d=t.flowName)&&void 0!==d||(t.flowName=null!==(h=a.flowName)&&void 0!==h?h:""),null!==(f=t.sectionId)&&void 0!==f||(t.sectionId=null!==(m=a.sectionId)&&void 0!==m?m:null),null!==(p=t.sectionInfo)&&void 0!==p||(t.sectionInfo=null!==(b=a.sectionInfo)&&void 0!==b?b:null),null!==(v=t.topSectionId)&&void 0!==v||(t.topSectionId=null!==(g=a.topSectionId)&&void 0!==g?g:null),null!==(w=t.topSectionInfo)&&void 0!==w||(t.topSectionInfo=null!==(x=a.topSectionInfo)&&void 0!==x?x:null),null!==(y=t.pageGuid)&&void 0!==y||(t.pageGuid=a.pageGuid),null!==(k=t.docName)&&void 0!==k||(t.docName=a.docName),null!==(C=t.pageName)&&void 0!==C||(t.pageName=a.pageName),null!==(S=t.fileType)&&void 0!==S||(t.fileType=a.fileType),null!==(O=t.lastVersionId)&&void 0!==O||(t.lastVersionId=a.lastVersionId),t.resNodeCount=a.resNodeCount,t.pathData=a.pathData,t.pathPreview=a.pathPreview,t.pathPreviewWebp=a.pathPreviewWebp,t.pathInteraction=a.pathInteraction,t.pathPreviewMini=a.pathPreviewMini,t.updaterName=a.updaterName,t.updateTimeStr=a.updateTimeStr,t.updateTimeTimes=a.updateTimeTimes,t.docGuid=a.docGuid,t.interactionInfo=a.interactionInfo,t.boundsInParentForList=a.boundsInParentForList,a.name&&(t.name=a.name)}else c["S"].inCloudMode&&(t.interactionInfo={fetchState:c["a"].Normal,data:null,errMsg:null});c["S"].inCloudMode?(t.artboardPreviewPng=t.pathPreview,t.artboardPreviewWebp=t.pathPreviewWebp,t.artboardPreviewThumbPng=t.pathPreviewMini,t.artboardPreviewJS=null):t.artboardPath&&(t.artboardPath="res/".concat(encodeURIComponent(t.artboardPath)),t.artboardPreviewPng=t.artboardPath+"/preview.png",t.artboardPreviewWebp=null,t.artboardPreviewJS=t.artboardPath+"/preview.js",t.artboardPreviewThumbPng=t.artboardPath+"/preview.mini.png");var T=t.mlConfig;T||(T=t.mlConfig={});var j=T.scalesObj={};if(T.linked=e||{},T.sizeMap=i||{},Object(l["h"])(T.scales)){T.scales.forEach((function(t){j[t]=1}));var F=null;[2,3,1.5,1,4].forEach((function(t){null==F&&1===j[t]&&(F=t)})),T.previewScalePath=F?1===F?"":"@".concat(F,"x"):""}}var me=function(t){if(t){var e=t.guid;if(e)if(t.markedForExport){var n="".concat(c["S"].documentGuid,"_").concat(e),r=Object(c["I"])(n,!1);t.mlCustomName=Object(c["N"])(r)}else t.mlCustomName=null}};function pe(t,e,n){n.mlUserSelectDown=!1,e.push(n);var r=n.mlConfig;r||(r=n.mlConfig={});var i=t.artboardPath;if(Object(c["V"])(t)){var a="".concat(n.exportPath).concat(t.mlConfig.previewScalePath,".png");r.pngPreview=Object(c["y"])(t,"".concat(i,"/png/"),a)}else if(Object(c["X"])(t)){var o="".concat(n.exportPath).concat(t.mlConfig.previewScalePath,".webp");r.pngPreview=Object(c["y"])(t,"".concat(i,"/png/"),o)}else if(Object(c["W"])(t)){var s="".concat(n.exportPath,".svg");r.svgPreview=Object(c["y"])(t,"".concat(i,"/svg/"),s)}else if(Object(c["U"])(t)){var l="".concat(n.exportPath,".pdf");r.pdfPreview=Object(c["y"])(t,"".concat(i,"/svg/"),l)}}function be(t){if(t){var e=t;while(null!=(e=e.parentNode))if(e.maskGroup)return e}}function ve(t,e){if(e!==t&&1!==e.types.Artboard&&!e.markedForExport){var n=be(e);if(n){var r=n.globalBounds,i=e.globalBounds;if(!Object(d["e"])(r,i)){var a=Object(d["d"])(r,i);a||(a=new d["a"]);var o=i.x-a.x,s=i.y-a.y,c=e.boundsInArtboard,l=e.boundsInParent;c&&(c.x-=o,c.y-=s,c.width=a.width,c.height=a.height),l&&(l.x-=o,l.y-=s,l.width=a.width,l.height=a.height),i.x=a.x,i.y=a.y,i.width=a.width,i.height=a.height}}}}function ge(t,e,n,r){var i,a;void 0===e.markedForExport&&(e.markedForExport=!1),r||(r=t.mlConfig);var s=null!==(i=null===(a=r)||void 0===a?void 0:a.fileType)&&void 0!==i?i:null;switch(null==s&&(s=o["n"].XD),s){case o["n"].FIGMA:Ht(t,e,n);break;case o["n"].SKETCH:I(t,e,n);break;case o["n"].XD:var c=e.styleRanges;if(Object(l["h"])(c)&&c.length>0){var d=new Set;if(c.forEach((function(t){var e=t.fontStyle,n=t.charSN;if(d.add(null!==n&&void 0!==n?n:null),Object(l["i"])(e)){var r=/(?:\s|^)(thin|hairline|extralight|ultralight|light|regular|book|roman|medium|semibold|demibold|black|heavy|extrabold|ultrabold|bold|bolder|lighter|medium|\d+w?)(?:\s|$)/i.exec(e);if(r)switch(t.fontWeight=r[1],t.fontWeight.toLowerCase()){case"thin":case"hairline":t.fontWeightCss="100";break;case"ultralight":case"extralight":t.fontWeightCss="200";break;case"light":t.fontWeightCss="300";break;case"regular":case"book":case"roman":case"normal":t.fontWeight="normal",t.fontWeightCss="400";break;case"medium":t.fontWeightCss="500";break;case"semibold":case"demibold":t.fontWeightCss="600";break;case"bold":t.fontWeightCss="700";break;case"extrabold":case"ultrabold":t.fontWeightCss="800";break;case"black":case"heavy":t.fontWeightCss="900";break;default:/^\d+w$/i.test(t.fontWeight)?t.fontWeightCss=t.fontWeight.substr(0,t.fontWeight.length-1):t.fontWeightCss=t.fontWeight;break}else t.fontWeight="Normal",t.fontWeightCss="400";r=/(?:\s|^)(italic|oblique)(?:\s|$)/i.exec(e),t.fontItalic=r?r[1].toLowerCase():"normal"}else t.fontWeight="Normal",t.fontWeightCss="400",t.fontItalic="normal"})),!e.charSN&&1===d.size&&c.length>1){var h=Object(u["a"])(d)[0];h&&(e.charSN=h)}}ve(t,e);break}we(t,e,r)}function we(t,e,n){var r,i=t.globalBounds;r=e.markedForExport?e.globalDrawBounds:e.globalBounds;var a=r.x-i.x,o=r.y-i.y,s=r.width,l=r.height;if(c["S"].inCloudMode){e.boundsInArtboardOrigin=(new d["a"]).set(a,o,s,l);var u=n?n.artScale:1;(null==u||u<=0)&&(u=1),1!==u&&(a=Object(d["b"])(a,u,!1),o=Object(d["b"])(o,u,!1),s=Object(d["b"])(r.width,u,e.markedForExport),l=Object(d["b"])(r.height,u,e.markedForExport))}e.boundsInArtboard=(new d["a"]).set(a,o,s,l),e.boundSameWithArtboard=t!==e&&e.boundsInArtboard.isSame(t.boundsInArtboard)}function xe(t,e,n,r,i){var a=n.children||n.layers;a.forEach((function(a){if(a)if(a.parentNode=n,ge(t,a,n),me(a),a.markedForExport){if(pe(t,i,a),e.push(a),r.push(a),Object(l["h"])(a.children||a.layers)){var o=[];xe(t,e,a,o,i),a.children&&(a.children=o),a.layers&&(a.layers=o)}}else Object(l["h"])(a.children||a.layers)&&xe(t,e,a,r,i),a.children=a.layers=null}))}function ye(t,e,n,r){if(!r.markedForExport){var i=r.opacity;if(0!=i||null!=r.shadow||null!=r.innerShadow||null!=r.fill&&r.fillEnabled||null!=r.stroke&&r.strokeEnabled){var a=r.types;if(t){if(!Object(d["f"])(e.boundsInArtboard,r.boundsInArtboard))return r.mlIgnoreEvent=!0,void(r.mlIgnoreLeftSide=!0);if((r.type===o["Q"].Group||r.type===o["Q"].SymbolMaster)&&w(n,r))return void(r.mlIgnoreEvent=!0);if(1===a.Group&&1==i&&null==r.shadow&&null==r.innerShadow&&(null==r.stroke||!r.strokeEnabled)&&(null==r.fill||!r.fillEnabled||r.fill.value))return void(r.mlIgnoreEvent=!0)}(!r.boundSameWithArtboard||1!==a.Group&&(1!==a.Path||null!=r.fill&&r.fillEnabled))&&(1!==i||1!==a.Path&&r.type!==o["Q"].HotSpot&&1!==a.RepeatGrid&&(1!==a.Group||r.maskGroup||a.FigmaInstance)&&(1!==a.SymbolInstance||r.maskGroup)||null!=r.shadow||null!=r.innerShadow||null!=r.fill&&r.fillEnabled||null!=r.stroke&&r.strokeEnabled)&&(1!==i||1!==a.Rectangle||null!=r.shadow||null!=r.innerShadow||null!=r.fill&&r.fillEnabled||null!=r.stroke&&r.strokeEnabled||!n||n.mlIgnoreEvent||!Object(d["g"])(n.boundsInArtboard,r.boundsInArtboard))||(r.mlIgnoreEvent=!0)}else r.mlIgnoreEvent=!0}}function ke(t,e,n,r,i,a){ge(n,t,i),me(t);var o=t.markedForExport;o&&pe(n,r,t);var s=t.children||t.layers;if(Object(l["h"])(s))if(o){var c=[];xe(n,e,t,c,r),t.children=c}else s.forEach((function(i){i.parentNode=t,e.push(i);try{ke(i,e,n,r,t,a),ye(a,n,t,i)}finally{i.mlIgnoreEvent&&!i.mlIgnoreLeftSide&&(i.mlIgnoreLeftSide=!i.children||0===i.children.length)}}))}function Ce(t){var e=0;while(null!=(t=t.parentNode))if(e++,t.types.Artboard)break;return e}var Se=function(t,e){return new Promise((function(n,r){if(t.isLoaded)return n(t);if(t.isFetching)return r(t);var i=t.artboard,s=t.artboardVerData,u=null!==s&&void 0!==s?s:i,h=!!s,f=u.pathData||u.artboardPath+"/data.js";t.isLoaded=!1,t.isFetching=!0,t.isError=!1;var m=t.loadedCache[f];Object(l["s"])(m)?requestAnimationFrame((function(){var e=m.childs,r=m.exportNodes,i=m.artboard;h?t.artboardVerData=i:t.artboard=i,t.childs=e,t.exportNodes=r,t.isLoaded=!0,t.isFetching=!1,t.isError=!1,n(t)})):he(f).then((function(r){var u,m,p=r.artboard,v=r.linked,g=r.sizeMap,w=null!==(u=null===(m=p.mlConfig)||void 0===m?void 0:m.fileType)&&void 0!==u?u:o["n"].XD,x=w===o["n"].SKETCH;x&&b(p),fe(p,v,i,s,g);var y=[p],k=[];ke(p,y,p,k,null,x),Object(d["h"])(p),h?t.artboardVerData=p:t.artboard=p,p.nodeDepthIndex=0;var C=[],S=y.length,O=S-1,I={interactions:[]};if(y.forEach((function(t,e){if(a["a"].set(t,"nodeDepthIndex",Ce(t)),Object(l["h"])(t.interactions)&&I.interactions.push(t),0!==e&&t.markedForExport&&!(e>=O)){for(var n=-1,r=e+1;r<=O;r++){var i=y[r];if(!i)break;if(i.markedForExport||!i.boundsInArtboard||!i.boundsInArtboard.isSame(t.boundsInArtboard))break;n=r}-1!==n&&C.push({from:e,to:n})}})),c["S"].inCloudMode){var A=gt(e);kt(I,w,A)}C.length>0&&C.forEach((function(t){var e=t.from,n=t.to,r=y[e],i=y[n];y[e]=i,y[n]=r})),t.childs=y,t.exportNodes=k,t.isLoaded=!0,t.isFetching=!1,t.isError=!1,t.loadedCache[f]={childs:y,exportNodes:k,artboard:p},n(t)})).catch((function(e){t.isLoaded=!0,t.isError=!0,t.isFetching=!1,t.loadErrMsg=e,console.error("artboard load error",e),r(t)}))}))};function Oe(t){t=Object(u["a"])(t);var e={};return t.forEach((function(t){var n=e[t.docGuid];n||(n=e[t.docGuid]=[]),n.push(t)})),Object.keys(e).forEach((function(n){var r=e[n];if(1!==r.length||r[0].type!==o["x"].Document){var i=r[0],a=i.docGuid,s=i.docName,u=i.fileType,h=[],f=[],m=new Set,p=new Set;if(r.forEach((function(t){t.arts.forEach((function(t){var e,n=null!==(e=t.artboard.guid)&&void 0!==e?e:t.artboard.cid;m.has(n)||(m.add(n),h.push(t))})),Object(l["h"])(t.sections)&&t.sections.length>0&&t.sections.forEach((function(t){var e=t.guid;p.has(e)||(p.add(e),f.push(t))}))})),c["S"].inCloudMode){if(t.find((function(t){return t.type===o["x"].Document&&t.guid===a})))return;var b={arts:h,guid:a,name:s,fileType:u,docFullName:s,sortText:"".concat(s).concat(a),docGuid:a,docName:s,pageGuid:void 0,pageName:void 0,docSeparator:!0,sections:f,type:o["x"].Document};b.maxRect=Object(c["A"])(h,f),b.rect=(new d["a"]).set(0,0,b.maxRect.width,b.maxRect.height),t.push(b)}}else r[0].docSeparator=!0})),t.sort((function(t,e){return Object(c["eb"])(t.sortText,e.sortText)})),t}function Ie(t,e,n,r){var i=r.orderDesc,a=r.sortType;if(a===o["k"].Date)t.sort((function(t,r){n===o["j"].Artboard&&(t=t.artboard,r=r.artboard);var a=t[e]>r[e]?1:-1;return i?-a:a}));else if(a===o["k"].ArtboardRect&&n===o["j"].Artboard){var s={},l=[];t.forEach((function(t){var e=t.artboard,n=e.docName,r=e.docGuid,i=e.pageGuid,a=e.pageName,o=i||r||"",c=a||n||"",u=s[o];u||(u=s[o]={arts:[],guid:o,name:c,fileType:e.fileType,docFullName:"".concat(n).concat(a?"/".concat(a):""),sortText:"".concat(n).concat(r).concat(a?"".concat(a).concat(i):""),docGuid:r,docName:n},l.push(u)),u.arts.push(e)})),s=null;var u=function(t,e){var n=t.boundsInParent||t.frame,r=e.boundsInParent||e.frame;if(t.updateTimeTimes>0&&e.updateTimeTimes>0){var i=(new d["a"]).set(n.x,n.y,n.width,n.height),a=(new d["a"]).set(r.x,r.y,r.width,r.height);if(i.isOverlap(a)){var o=t.updateTimeTimes-e.updateTimeTimes;if(Math.abs(o)>1500){if(o>0)return 1;if(o<0)return-1}}}var s=n.y,c=r.y,l=s-c;if(l>100)return 1;if(l<-100)return-1;var u=n.x,h=r.x,f=u-h;return 0===f?0===l?0:l>0?1:-1:f>0?1:-1};l.sort((function(t,e){var n=Object(c["eb"])(t.sortText,e.sortText);return i?-n:n}));var h=0,f={};l.forEach((function(t){t.arts.sort((function(t,e){var n=u(t,e);return i?-n:n})),t.arts.forEach((function(t){f[t.cid]=h++}))})),t.sort((function(t,e){return f[t.artboard.cid]-f[e.artboard.cid]>0?1:-1}))}else t.sort((function(t,e){n===o["j"].Artboard&&(t=t.artboard,e=e.artboard);var r=Object(c["eb"])(t.name,e.name);return i?-r:r}))}function Ae(t,e,n,r){var i=r.orderDesc,a=r.sortType;t.sort((function(t,r){return n===o["j"].Artboard&&(t=t.artboard,r=r.artboard),t.rootId!==r.rootId||t.deepCount!==r.deepCount?0:(s=a===o["k"].Date?t[e]>r[e]?1:-1:Object(c["eb"])(t.name,r.name),i?-s:s);var s}))}function Te(t,e){Object(l["h"])(t.subFolders)?Ie(t.subFolders,"updateTimes",o["j"].Folder,e):t.subFolders=[],Object(l["h"])(t.subFiles)?(t.subFiles.forEach((function(t){t.name=t.fileName+t.fileExt})),Ie(t.subFiles,"updateTimeTimes",o["j"].File,e)):t.subFiles=[]}function je(t){var e,n;if(!t)return null;var r=t,i=r.parent;while(i)t=i,i=i.parent;return null!==(n=(e=t).name)&&void 0!==n||(e.name="Untitled Section"),t}function Fe(t){var e=t.artboardSections,n=t.artboards;Object(l["s"])(e)&&(Object.keys(e).forEach((function(t){var n=Object(c["sb"])(e[t]);Object(l["s"])(n)?e[t]=n:delete e[t]})),Object(l["h"])(n)&&n.forEach((function(t){var n,r;if(t){var i=t.sectionId,a=t.fileType;if(i){var o=e["".concat(a,":").concat(i)];t.sectionInfo=o||null}else t.sectionId=t.sectionInfo=null;t.topSectionInfo=je(t.sectionInfo),t.topSectionId=null!==(n=null===(r=t.topSectionInfo)||void 0===r?void 0:r.guid)&&void 0!==n?n:null}})))}function Me(t){c["S"].docsMinScale={},t.forEach((function(t){_e(t.artboard)}))}function _e(t){var e=t.boundsInParent,n=t.scale,r=t.docGuid,i=t.pageGuid;if(e&&(("number"!==typeof n||n<=0)&&(n=1),1!==n)){var a=i||r,o=c["S"].docsMinScale[a];null==o&&(o=1),o>n&&(c["S"].docsMinScale[a]=n)}}function Le(t,e){var n=t.artboard,r=e.artboard,i=n.boundsInParentForList||n.boundsInParent||n.frame,a=r.boundsInParentForList||r.boundsInParent||r.frame;if(n.updateTimeTimes>0&&r.updateTimeTimes>0){var o=(new d["a"]).set(i.x,i.y,i.width,i.height),s=(new d["a"]).set(a.x,a.y,a.width,a.height);if(o.isOverlap(s)){var c=n.updateTimeTimes-r.updateTimeTimes;if(Math.abs(c)>1500){if(c>0)return 1;if(c<0)return-1}}}var l=i.y,u=a.y,h=l-u;if(h>100)return 1;if(h<-100)return-1;var f=i.x,m=a.x,p=f-m;return 0===p?0===h?0:h>0?1:-1:p>0?1:-1}function De(t,e){if(!Object(l["s"])(t))return!1;var n=t.fills,r=t.ver,i=t.types,a=t.fill;return 1===(null===i||void 0===i?void 0:i.Section)||!("number"!==typeof r||r<1)&&(e===o["n"].XD?Object(l["s"])(a):!(!Object(l["h"])(n)||n.length<1)&&null!=n.find((function(t){return!(!Object(l["s"])(t)||!t.visible)})))}function Ne(t,e){if(t.splice(0),c["S"].inCloudMode){var n={},r=function(e,r,i,a,s,c,l,u,d,h){var f=n[a];return f||(f=n[a]={arts:[],guid:a,name:i,fileType:r,docFullName:d,sortText:h,docGuid:u,docName:l,pageGuid:c,pageName:s,sections:[],type:e,docSeparator:e===o["x"].Document},t.push(f),f)},i={},a=function(t,e,n,r){if(r){var i=t.findIndex((function(t){return t.guid===e}));-1!=i&&t.splice(i,1)}t.push(n)};return e.forEach((function(t){var e=t.artboard,n=e.docName,c=e.docGuid,d=e.pageGuid,h=e.pageName,f=e.sectionId,m=e.sectionInfo,p=e.topSectionId,b=e.topSectionInfo,v=e.updateTimeTimes,g=e.fileType,w=d||c||"",x=h||n||"",y="".concat(n).concat(h?"/".concat(h):""),k="".concat(n).concat(c).concat(h?"".concat(h).concat(d):"");Qe(e);var C,S=r(Object(l["i"])(d)?o["x"].Page:o["x"].Document,g,x,w,h,d,n,c,y,k);if(S.arts.push(t),p&&Object(l["s"])(b)&&(C=r(o["x"].Section,g,b.name,b.guid,h,d,n,c,"".concat(y,"/").concat(b.name),"".concat(k).concat(b.name).concat(b.guid)),C.arts.push(t)),f&&De(m,g)){var O=i[w];O||(O=i[w]={});var I=!O[f],A=!I&&O[f]<v;if(I||A){var T;if(O[f]=v,1===(null===(T=m.types)||void 0===T?void 0:T.Section))return a(S.sections,f,m,A),void a(C.sections,f,m,A);var j=m.frame,F=m.parent,M=m.fills,_=m.page;Object(l["h"])(M)||(M=m.fills=[]);while(null!=F){var L,D=F,N=D.frame,E=D.fills;if(Object(l["s"])(N)&&(j.x+=N.x,j.y+=N.y),Object(l["h"])(E))(L=M).unshift.apply(L,Object(u["a"])(E));F=F.parent}Object(l["s"])(_)&&Object(l["h"])(_.fills)&&_.fills.forEach((function(t){Object(l["s"])(t)&&(t=Object(s["a"])(Object(s["a"])({},t),{},{fromPage:!0}),M.unshift(t))})),m.boundsInArtboard=m.boundsInParent=j,m.pageGuid=d,m.docGuid=c,m.types={Section:1},Qe(m),g===o["n"].XD?le(m):Jt(m),a(S.sections,f,m,A),a(C.sections,f,m,A)}}})),t.forEach((function(t){var e=t.arts,n=t.sections;e.sort(Le),t.maxRect=Object(c["A"])(e,n),t.rect=(new d["a"]).set(0,0,t.maxRect.width,t.maxRect.height)})),void t.sort((function(t,e){return Object(c["eb"])(t.sortText,e.sortText)}))}if(e.forEach((function(t){var e=t.artboard;e.boundsInParentForList=e.boundsInParent})),c["S"].fileType==o["n"].SKETCH||c["S"].fileType==o["n"].FIGMA){var h={},f=c["S"].documentName,m=c["S"].documentGuid;return e.forEach((function(e){var n=e.artboard,r=n.pageGuid||"",i=n.pageName||f||"",a=h[r];a||(a=h[r]=[],t.push({arts:a,guid:r,name:i,fileType:c["S"].fileType,docFullName:i,sortText:"".concat(i).concat(r),docGuid:m,docName:f,type:n.pageGuid?o["x"].Page:o["x"].Document})),a.push(e)})),h=null,t.forEach((function(t){t.arts.sort(Le),t.maxRect=Object(c["A"])(t.arts,null),t.rect=(new d["a"]).set(0,0,t.maxRect.width,t.maxRect.height)})),void t.sort((function(t,e){return Object(c["eb"])(t.sortText,e.sortText)}))}e.sort(Le);var p=c["S"].documentName,b=c["S"].documentGuid,v=b||"",g=p||"",w=o["n"].XD,x={arts:e,guid:v,name:g,fileType:w,docFullName:"".concat(p).concat(o["n"].getFileExt(w)),sortText:"".concat(p).concat(b),docGuid:b,docName:p};x.arts.sort(Le),x.maxRect=Object(c["A"])(x.arts,null),x.rect=(new d["a"]).set(0,0,x.maxRect.width,x.maxRect.height),t.push(x)}function Ee(t){var e=1;while(t){var n=t,r=n.opacity;null==r&&(r=1),e*=r,t=t.parentNode}return e}function Pe(t){return null==t&&(t=1),Math.round(100*t)+"%"}function Re(t){var e;if(!t)return"";var n=null!==(e=t.artboardCount+t.folderCount+t.fileCount)&&void 0!==e?e:0,r="number"===typeof t.fileCount,i="共 ".concat(n," 项");n>0&&(i+="：".concat(t.artboardCount," 画板，").concat(r?"".concat(t.fileCount," 文件，"):"").concat(t.folderCount," 文件夹"));var a="".concat(t.name,"\n").concat(i).concat(t.updateTimes?"\n最后更新：".concat(Object(l["c"])(t.updateTimes)):"");return a}function Ve(t){var e,n,r;return t?(null!==(e=t.artboardCount)&&void 0!==e?e:0)+(null!==(n=t.folderCount)&&void 0!==n?n:0)+(null!==(r=t.fileCount)&&void 0!==r?r:0):0}function Be(t){if(!t)return"";var e=(null===t||void 0===t?void 0:t.fileType)===o["y"].Url;return"".concat(t.name,"\n文件大小: ").concat(Object(c["vb"])(t.fileSize)).concat(e?"\n链接到: ".concat(t.webLoc):"","\n提交者: ").concat(t.updaterName,"\n提交于: ").concat(Object(l["c"])(t.updateTimeTimes))}function Ue(t){if(!t)return"";var e=t.comments,n=t.replies,r=t.updaterName,i=t.name,a=t.updateTimeTimes,o=(null!==e&&void 0!==e?e:0)+(null!==n&&void 0!==n?n:0);return"".concat(i,"\n提交者: ").concat(r,"\n提交于: ").concat(Object(l["c"])(a)).concat(o>0?"\n评论数: ".concat(o):"")}function He(t){if(!t)return"";var e=t.updaterName,n=t.updateTimeTimes,r=t.updateTimes;return"".concat(Object(l["b"])(null!==n&&void 0!==n?n:r)," ").concat(e)}function We(t){if(!t)return"";var e=t.updateTimeTimes,n=t.updateTimes;return Object(l["b"])(null!==e&&void 0!==e?e:n)}function $e(t,e){var n="";return e&&(n="".concat(t.updaterName," 提交于 ").concat(Object(l["b"])(t.updateTimeTimes),",")),"".concat(n,"双击查看 ").concat(t.name," 标注详情")}function Ge(t){if(!t)return"";var e=t.updaterName,n=t.name,r=t.updateTimeTimes,i=t.updaterEmail,a=t.lastVersionId;return"".concat(n,"\n提交者: ").concat(e).concat(i?"(".concat(i,")"):"","\n提交于: ").concat(Object(l["c"])(r)).concat(a>0?"\n画板版本: ".concat(a):"")}function ze(t){return{artboard:t,childs:[],exportNodes:[],loadErrMsg:null,isLoaded:!1,isFetching:!1,isError:!1,mlUserSelectDown:!0,removed:!1,loadedCache:{},customStatus:o["f"].None,customStatusUpdateTimes:0,historyArtboards:null,artboardVerData:null}}function Ye(t){var e=[];if(Object(l["h"])(t)&&t.length>0){var n=new Map,r=t.filter((function(t){return!t.parent}));t.forEach((function(t){if(t.parent){var e=t.parent.guid;n.has(e)||n.set(e,[]),n.get(e).push(t)}}));var i=function t(e,r){r.push(e);var i=n.get(e.guid)||[];i.forEach((function(e){return t(e,r)}))};r.forEach((function(t){return i(t,e)}))}return e}var Xe={count:0,loaded:0,resolve:null,initdata:[],artboards:null,defaultArtboardGuid:"",permission:!0,fileInfo:null,renderMode:o["C"].Normal,folderNotFound:!1,folderInSpecify:!1,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudUserId:0,cloudUserIsDesigner:!1,cloudUserIsOwner:!1,cloudUserKey:null,cloudName:null,cloudKey:null,cloudVersion:null,cloudFolderUpdateTimes:null,cloudUserFolderSpecifyMemberAuthority:o["s"].ReadWrite,documents:[]};function Ke(t){if(Xe.loaded+=1,t&&t({current:Xe.loaded,count:Xe.count}),Xe.loaded>=Xe.count){var e=Xe.resolve;e&&(Xe.resolve=null,Ne(Xe.documents,Xe.initdata),e())}}function qe(t,e){var n=t||e||"",r=c["S"].docsMinScale[n];return null==r&&(r=1),r}function Qe(t){var e,n=qe(t.pageGuid,t.docGuid),r=t.boundsInParent;r&&(e=Object(s["a"])({},r)),e&&1!==n&&n>0&&(e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.ceil(e.width*n),e.height=Math.ceil(e.height*n)),t.boundsInParentForList=e}function Je(t,e){var n={count:0,loaded:0,resolve:null,artboards:null,defaultArtboardGuid:"",permission:!0,fileInfo:null,folderNotFound:!1,folderInSpecify:!1,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudUserId:0,cloudUserIsDesigner:!1,cloudUserIsOwner:!1,cloudUserKey:null,cloudName:null,cloudKey:null,cloudVersion:null};Xe.documents.splice(0),Xe.initdata.splice(0),Object.keys(n).forEach((function(t){Xe[t]=n[t]})),Object(l["s"])(t)||(t={artboards:[],guid:"No Data",name:"No Data",config:{guid:"",scales:[1,1.5,2,3,4],compressPNG:!0,supportFileProtocol:!1,platform:0}}),null==t.fileType&&(t.fileType=o["n"].XD);var r,i=t.cloudData;if(c["S"].docsMinScale={},c["S"].initTitle=document.title,c["S"].inCloudMode=Object(l["s"])(i),c["S"].fileType=t.fileType,c["S"].inCloudMode){var a,s,u;if(c["S"].documentGuid=i.folderId.toString(),c["S"].documentName=i.folderName,c["S"].config={guid:c["S"].documentGuid,scales:[1,1.5,2,3,4],compressPNG:!0,supportFileProtocol:!0,platform:0},Xe.defaultArtboardGuid=i.artboardGuid,Xe.parentFolder=i.parent,Xe.currentFolderId=i.folderId,i.fileInfo)i.fileInfo.name="".concat(i.fileInfo.fileName).concat(null!==(s=i.fileInfo.fileExt)&&void 0!==s?s:"");if(Xe.fileInfo=i.fileInfo,Xe.renderMode=null!==(a=i.renderMode)&&void 0!==a?a:o["C"].Normal,c["S"].cloudFolderId=i.folderId,Xe.permission=i.permission,Xe.folderNotFound=i.folderNotFound,Xe.folderInSpecify=i.folderInSpecify,Xe.cloudNeedLogin=i.needLogin,Xe.cloudIsLogin=i.isLogin,Xe.cloudNickName=i.nickName,Xe.cloudUserEmail=i.email,Xe.cloudUserId=i.userId,Xe.cloudUserIsDesigner=i.isDesigner,Xe.cloudUserIsOwner=!!i.isOwner,c["S"].userKey=Xe.cloudUserKey=i.userKey,Xe.cloudName=i.cloudName,c["S"].cloudKey=Xe.cloudKey=i.cloudKey,Xe.cloudVersion=i.cloudVersion,Object(l["s"])(i.folderInfo))r=i.folderInfo.artboards,Xe.cloudFolderUpdateTimes=i.folderInfo.updateTimes,Xe.cloudUserFolderSpecifyMemberAuthority=null!==(u=i.folderInfo.userSpecifyMemberAuthority)&&void 0!==u?u:o["s"].ReadWrite,Xe.subFolders=i.folderInfo.folders,Xe.subFiles=i.folderInfo.files,Fe(i.folderInfo)}else switch(c["S"].userKey=null,c["S"].cloudKey=null,c["S"].documentGuid=t.guid,c["S"].documentName=t.name,c["S"].config=t.config,t.fileType){case o["n"].SKETCH:case o["n"].FIGMA:var d=t.pages;r=[],Object(l["h"])(d)&&d.forEach((function(t){t&&Object(l["h"])(t.artboards)&&t.artboards.forEach((function(e){e&&(e.pageGuid=t.guid,e.pageName=t.name,r.push(e))}))}));break;default:r=t.artboards;break}Te(Xe,e),Object(l["h"])(r)||(r=[]),Xe.artboards=r,Xe.count=r.length}var Ze={dataInit:Je,get inCloudMode(){return c["S"].inCloudMode},get documentName(){return c["S"].documentName},get documentGuid(){return c["S"].documentGuid},get config(){return c["S"].config},get permission(){return Xe.permission},get cloudNeedLogin(){return Xe.cloudNeedLogin},get cloudIsLogin(){return Xe.cloudIsLogin},get cloudNickName(){return Xe.cloudNickName},get cloudUserEmail(){return Xe.cloudUserEmail},get cloudUserId(){return Xe.cloudUserId},get cloudUserIsDesigner(){return Xe.cloudUserIsDesigner},get cloudUserIsOwner(){return Xe.cloudUserIsOwner},get cloudUserKey(){return Xe.cloudUserKey},get cloudName(){return Xe.cloudName},get cloudKey(){return Xe.cloudKey},get cloudVersion(){return Xe.cloudVersion},get documentArtboards(){return Xe.initdata},get documents(){return Xe.documents},cloud:{get folderInSpecify(){return Xe.folderInSpecify},get folderNotFound(){return Xe.folderNotFound},get defaultArtboardGuid(){return Xe.defaultArtboardGuid},get parentFolder(){return Xe.parentFolder},get currentFolderId(){return Xe.currentFolderId},get subFolders(){return Xe.subFolders},get subFiles(){return Xe.subFiles},get renderMode(){return Xe.renderMode},get fileInfo(){return Xe.fileInfo},get folderUpdateTimes(){return Xe.cloudFolderUpdateTimes},get userFolderSpecifyMemberAuthority(){return Xe.cloudUserFolderSpecifyMemberAuthority}},allArtboardLoadChecked:function(t){return new Promise((function(e){0!==Xe.count?(Xe.resolve=e,Xe.artboards.forEach((function(e){fe(e),Object(d["h"])(e);var n=ze(e);if(Xe.initdata.push(n),c["S"].inCloudMode)return _e(e),void Ke(t);Se(n,[]).catch((function(t){var e=Xe.initdata.findIndex((function(e){return e===t}));-1!==e&&Xe.initdata.splice(e,1)})).finally((function(){Ke(t)}))}))):e()}))}};n("e5b3"),n("af38");var tn,en=n("7736"),nn={device:{android:/([ ;/)(,]|^)Android([ ;/)(,]|$)/i,iphone:/([ ;/)(,]|^)iPhone([ ;/)(,]|$)/i,ipad:/([ ;/)(,]|^)ipad([ ;/)(,]|$)/i,ios:/([ ;/)(,]|^)ios([ ;/)(,]|$)/i,macos:/([ ;/)(,]|^)mac os([ ;/)(,]|$)/i,windows:/([ ;/)(,]|^)Windows([ ;/)(,]|$)/i,linux:/([ ;/)(,]|^)linux([ ;/)(,]|$)/i},maker:{mot:/([ ;/)(,]|^)mot([ ;/)(,]|$)/i},browser:{uc:/([ ;/)(,]|^)(UCBrowser|UCWEB)([ ;/)(,]|$)/i,safria:/([ ;/)(,]|^)Safari([ ;/)(,]|$)/i,aol:/([ ;/)(,]|^)aol([ ;/)(,]|$)/i,arora:/([ ;/)(,]|^)Arora([ ;/)(,]|$)/i,qqbrowser:/([ ;/)(,]|^)QQBrowser([ ;/)(,]|$)/i,mqqbrowser:/([ ;/)(,]|^)mQQBrowser([ ;/)(,]|$)/i,chrome:/([ ;/)(,]|^)(?:chrome|CriOS)([ ;/)(,]|$)/i,qq:/([ ;/)(,]|^)qq([ ;/)(,]|$)/i,microMessenger:/([ ;/)(,]|^)MicroMessenger([ ;/)(,]|$)/i,sogouMobileBrowser:/([ ;/)(,]|^)sogouMobileBrowser([ ;/)(,]|$)/i,baidubrowser:/([ ;/)(,]|^)baidubrowser([ ;/)(,]|$)/i,weibo:/([ ;/)(,]|^)weibo([ ;/)(,]|$)/i,firefox:/([ ;/)(,]|^)Firefox([ ;/)(,]|$)/i,baiduboxapp:/([ ;/)(,]|^)baiduboxapp([ ;/)(,]|$)/i,msie:/(?:[ ;/)(,]|^)(?:msie|rv)\s*:?\s*([\d.]+)/i,Edge:/(?:[ ;/)(,]|^)(?:Edge)\s*:?\s*([\d.]+)/i}},rn={safria:"Safria",firefox:"Firefox"},an=function(t){if(!t)return"";var e=nn.browser;if(e.uc.test(t))return"UC浏览器";if(e.aol.test(t))return"AOL";if(e.Edge.test(t))return"Edge";if(e.arora.test(t))return"Arora";if(e.sogouMobileBrowser.test(t))return"搜狗浏览器";if(e.baidubrowser.test(t))return"百度浏览器";if(e.baiduboxapp.test(t))return"手机百度";if(e.weibo.test(t))return"微博客户端";if(e.microMessenger.test(t))return nn.device.windows.test(t)||e.qqbrowser.test(t)?"微信电脑端":"微信手机端";if(e.qq.test(t))return"手机QQ";if(e.mqqbrowser.test(t))return"QQ浏览器";if(e.firefox.test(t))return rn.firefox;if(e.chrome.test(t))return"Chrome";if(e.safria.test(t))return rn.safria;var n=e.msie.exec(t);return n?"IE"+n[1]:"Other"},on={android:"Android",iPhone:"iPhone",iPad:"iPad",iOS:"iOS",macOS:"macOS",windows:"Windows",linux:"Linux",other:"Other"},sn=function(t){if(t){var e=nn.device;if(e.android.test(t))return{name:on.android,type:"android"};if(e.iphone.test(t))return{name:on.iPhone,type:"ios"};if(e.ipad.test(t))return{name:on.iPad,type:"ios"};if(e.ios.test(t))return{name:on.iOS,type:"ios"};if(e.macos.test(t))return{name:on.macOS,type:"ios"};if(e.windows.test(t))return{name:on.windows,type:"windows"};if(e.linux.test(t))return{name:on.linux,type:"linux"}}return{name:on.other,type:"other"}},cn=function(t){if(void 0!==tn)return t(tn),void(t=null);var e=new Image,n=function(r){e.onerror=e.onload=null;var i=!(!r||"load"!==r.type)&&1==e.width;tn=i?ln.Support:ln.NotSupport,n=e=null,t(tn),t=null};e.onerror=n,e.onload=n,e.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="},ln={Checking:0,NotSupport:1,Support:2},un=!1,dn=function(){var t=navigator.userAgent,e=sn(t),n=an(t);switch(un=n===rn.firefox,e.name){case on.macOS:case on.iPhone:case on.iPad:case on.iOS:break;default:return!1}return n===rn.safria}(),hn=un,fn=Object(A["a"])((function t(){Object(T["a"])(this,t),Object(j["a"])(this,"X",0),Object(j["a"])(this,"Y",0),Object(j["a"])(this,"Width",0),Object(j["a"])(this,"Height",0),Object(j["a"])(this,"Down",null),Object(j["a"])(this,"Right",null),Object(j["a"])(this,"Used",!1)})),mn=function(){function t(e,n){if(Object(T["a"])(this,t),Object(j["a"])(this,"Root",null),Object(j["a"])(this,"Margin",0),this.Margin=n,null!=e){e=Object(u["a"])(e);var r=0;e.forEach((function(t){r=Math.max(t.rect.width,r)})),e.unshift({rect:(new d["a"]).set(0,0,r,-n)});var i=e.length,a=null,o=null,s=0,c=0,l=2*n;if(!(i>0)){var h=this.Root=new fn;return h.Width=l,h.Height=l,h.X=n,void(h.Y=n)}o=e[0],s=o.rect.width+l,c=o.rect.height+l;var f=this.Root=new fn;f.Width=s,f.Height=c,f.X=n,f.Y=n;for(var m=0;m<i;m++){o=e[m],s=o.rect.width+n,c=o.rect.height+n,a=this.findNode(this.Root,s,c);var p=null;p=null!=a?this.splitNode(a,s,c):this.growNode(s,c),p&&(o.rect.x=p.X-n,o.rect.y=p.Y-n,o.rect.width=p.Width-n,o.rect.height=p.Height-n)}}}return Object(A["a"])(t,[{key:"compareMaxSide",value:function(t,e){var n;return n=this.compareMax_WH(t,e),0!=n?n>0?1:-1:(n=this.compareHeight_Width(t,e),0!=n?n>0?1:-1:1)}},{key:"compareMax_WH",value:function(t,e){var n=Math.max(e.rect.width,e.rect.height)-Math.max(t.rect.width,t.rect.height);return n}},{key:"compareHeight_Width",value:function(t,e){var n=this.compareHeight(t,e);return 0!=n?n>0?1:-1:this.compareWidth(t,e)}},{key:"compareWidth",value:function(t,e){return e.rect.width-t.rect.width}},{key:"compareHeight",value:function(t,e){return e.rect.height-t.rect.height}},{key:"findNode",value:function(t,e,n){if(null==t)return null;if(t.Used){var r=this.findNode(t.Right,e,n);return null!=r?r:this.findNode(t.Down,e,n)}return e<=t.Width&&n<=t.Height?t:null}},{key:"splitNode",value:function(t,e,n){t.Used=!0;var r=t.Right=new fn;r.X=t.X+e,r.Y=t.Y,r.Width=t.Width-e,r.Height=n;var i=t.Down=new fn;return i.X=t.X,i.Y=t.Y+n,i.Width=t.Width,i.Height=t.Height-n,t}},{key:"growNode",value:function(t,e){var n=!1;t<=this.Root.Width&&(n=!0);var r=!1;e<=this.Root.Height&&(r=!0);var i=r&&this.Root.Height>=this.Root.Width+t,a=n&&this.Root.Width>=this.Root.Height+e;return i?this.growRight(t,e):a?this.growDown(t,e):r?this.growRight(t,e):n?this.growDown(t,e):null}},{key:"growRight",value:function(t,e){var n=this.Root,r=this.Root=new fn;r.Used=!0,r.Width=n.Width+t,r.Height=n.Height,r.Y=this.Margin,r.X=this.Margin,r.Down=n;var i=r.Right=new fn;i.X=n.Width,i.Width=t,i.Height=n.Height,i.Y=this.Margin;var a=this.findNode(this.Root,t,e);return null!=a?this.splitNode(a,t,e):null}},{key:"growDown",value:function(t,e){var n=this.Root,r=this.Root=new fn;r.Used=!0,r.Width=n.Width,r.Height=n.Height+e,r.Y=this.Margin,r.X=this.Margin,this.Root.Right=n;var i=this.Root.Down=new fn;i.Y=n.Height,i.Width=n.Width,i.Height=e,i.X=this.Margin;var a=this.findNode(this.Root,t,e);return null!=a?this.splitNode(a,t,e):null}}]),t}(),pn=Object(A["a"])((function t(e){var n=e.name,r=void 0===n?null:n,i=e.list,a=void 0===i?null:i;Object(T["a"])(this,t),Object(j["a"])(this,"name",null),Object(j["a"])(this,"list",null),Object(j["a"])(this,"type",bn.Group),this.name=r,this.list=a})),bn={Group:0,Web:1,Mobile:2,Custom:3},vn=Object(A["a"])((function t(e){var n=e.name,r=void 0===n?null:n,i=e.width,a=void 0===i?0:i,o=e.height,s=void 0===o?0:o,c=e.type,l=void 0===c?bn.Mobile:c,u=e.hasBangs,d=void 0!==u&&u,h=e.iosDynamicIsland,f=void 0!==h&&h;Object(T["a"])(this,t),Object(j["a"])(this,"name",null),Object(j["a"])(this,"type",bn.Mobile),Object(j["a"])(this,"width",0),Object(j["a"])(this,"height",0),Object(j["a"])(this,"hasBangs",!1),Object(j["a"])(this,"iosDynamicIsland",!1),this.name=r,this.type=l,this.width=a,this.height=s,this.hasBangs=d,this.iosDynamicIsland=f})),gn=[new vn({name:"Web",type:bn.Web}),new pn({name:"iPhone",list:[new vn({name:"iPhone 14/15 Pro Max",width:430,height:932,hasBangs:!1,iosDynamicIsland:!0}),new vn({name:"iPhone 14/15 Pro",width:393,height:852,hasBangs:!1,iosDynamicIsland:!0}),new vn({name:"iPhone 13 Pro Max",width:428,height:926,hasBangs:!0}),new vn({name:"iPhone 13 Pro",width:428,height:844,hasBangs:!0}),new vn({name:"iPhone XR",width:414,height:896,hasBangs:!0}),new vn({name:"iPhone X",width:375,height:812,hasBangs:!0}),new vn({name:"iPhone 8 plus",width:414,height:736}),new vn({name:"iPhone SE",width:375,height:667})]}),new pn({name:"Android",list:[new vn({name:"Google Pixel 6 Pro",width:412,height:891}),new vn({name:"OnePlus 9 Pro",width:412,height:919}),new vn({name:"HuaWei Mate40 Pro",width:448,height:924}),new vn({name:"XiaoMi 11",width:412,height:915}),new vn({name:"Oppo 11",width:360,height:780}),new vn({name:"Vivo 11",width:360,height:760})]}),new vn({name:"iPad",width:768,height:1024}),new vn({name:"自定义尺寸",type:bn.Custom})],wn=function(){for(var t="iPhone X",e=0,n=gn.length;e<n;e++){var r=gn[e];if(r)switch(r.type){case bn.Group:var i,a=null===(i=r.list)||void 0===i?void 0:i.find((function(e){return(null===e||void 0===e?void 0:e.name)===t}));if(a)return a;break;default:if(r.name===t)return r}}return null}(),xn=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"historyList",[]),Object(j["a"])(this,"historyIndex",0),Object(j["a"])(this,"onpopstate",null),l["f"]&&this.pushState(null)}return Object(A["a"])(t,[{key:"length",get:function(){return l["f"]?Math.min(this.historyList.length,this.historyIndex+1):history.length}},{key:"state",get:function(){if(l["f"]){var t=this.historyList[this.historyIndex];return t?t.state:null}return history.state}},{key:"href",get:function(){if(l["f"]){var t,e=this.historyList[this.historyIndex];return e&&(null!==(t=e.href)&&void 0!==t)?t:""}return location.href}},{key:"replaceState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(l["f"]){var r=this.historyList,i=this.historyIndex,a=r.length;if(i!=a-1&&r.splice(i+1),n||(n=location.href),r.length>0){var o=r[r.length-1];o.state=t,o.href=n}else r.push({state:t,href:n});this.historyIndex=r.length-1}else n&&history.replaceState(t,e,n)}},{key:"pushState",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(l["f"]){var r=this.historyList,i=this.historyIndex,a=r.length;return i!=a-1&&r.splice(i+1),n||(n=location.href),r.push({state:t,href:n}),void(this.historyIndex=r.length-1)}n&&history.pushState(t,e,n)}},{key:"go",value:function(t){if(l["f"]){if(0===t)return;var e=this.historyList,n=this.historyIndex,r=this.onpopstate,i=e.length,a=t>0?Math.min(n+t,i-1):Math.max(0,n+t);if(n===a)return;this.historyIndex=a;var o=e[a];r&&r({state:o.state,marklion_href:o.href})}else history.go(t)}}]),t}(),yn=new xn;function kn(t,e){if(c["S"].inCloudMode&&Object(l["h"])(e)){var n={};e.forEach((function(t){t&&(t.boundsInParentForList=t.boundsInParent,fe(t),Object(d["h"])(t),n[t.cid]=t)}));var r=[];return t.forEach((function(t,e){if(t){var i=t.artboard;if(i){var a=i.cid,s=i.updateTimeTimes,c=i.versionCount,l=i.topSectionId,u=n[a];if(u){var d=u.updateTimeTimes,h=u.versionCount,f=u.topSectionId;s===d&&c===h&&l===f||r.push({type:o["q"].Change,art:t,newArtboard:u,index:e}),delete n[a]}else r.unshift({type:o["q"].Remove,art:t,index:e})}}})),Object.keys(n).forEach((function(t){r.push({type:o["q"].Add,newArtboard:n[t]})})),r}}var Cn={};function Sn(t,e,n,r){var i=Cn[t];i||(i=Cn[t]={});var a={diff:r,time:Date.now(),value:n};i[e]=a}function On(t,e){var n=Cn[t];n&&delete n[e]}function In(t,e){var n=Cn[t];if(!n)return null;var r=n[e];if(!r)return null;var i=r.time,a=Date.now(),o=a-i;return o<=0||o>=r.diff?(delete n[e],null):r.value}function An(t){return t?"guide.n-".concat(t):"guide.n"}function Tn(){var t=+Object(c["I"])(An(),!1);(isNaN(t)||"number"!==typeof t)&&(t=o["h"].None);var e=o["h"].None;return t>=0&&Object.keys(o["h"]).forEach((function(n){var r=o["h"][n];r!==o["h"].None&&(t&r)===r&&(e|=r)})),e}function jn(t){var e=An();0==t?Object(c["jb"])(e):Object(c["nb"])(e,t.toString())}var Fn={_steps:null,get steps(){var t=this._steps;return null==t&&(t=this._steps=Tn()),t},finishStep:function(t){var e=this.steps;e|=t,this._steps=e,jn(e)},removeStep:function(t){var e=this.steps;e|=t,e^=t,this._steps=e,jn(e)}};a["a"].use(en["a"]);var Mn,_n=!1;function Ln(){if(c["S"].inCloudMode&&history.pushState){var t=function(t){var e,n,r,i,a=t.state,o=t.marklion_href;if(Object(l["s"])(a))e=a.artboardGuid,n=a.nodeGuid,r=a.filterDocumentGuid,i=a.curArtboardExtral;else{var s=o||window.location.href,u=/\/(?:file|interaction)?viewer\/(\d+)(?:\/([\w-]+)(?:\/([\w-]+)\/)?)?/.exec(s);u?(e=u[2],n=u[3]):(n=null,e=null),r=Object(c["hb"])("filterDoc")}if("none"!==r&&Object(l["i"])(r)){if(r){var d=Rn.state.sortDocumentsWithSketchDocument.find((function(t){return t.guid===r}));if(d){var h=Rn.state.documentArtboards.find((function(t){var n=t.artboard;return n.guid===e&&(n.docGuid===d.guid||n.pageGuid===d.guid||n.topSectionId===d.guid)}));e&&!h&&(r=null)}else r=null}}else r=null;var f=null,m=null;e&&(f=Rn.state.documentArtboards.find((function(t){return t.artboard.guid===e})),f&&n&&(m=f.childs.find((function(t){return t.guid===n})))),_n=!0,setTimeout((function(){_n=!1}),50),f!=Rn.state.curArtboard&&Rn.commit("curArtboard",{artboard:f,extral:i}),m!=Rn.state.curNode&&Rn.commit("curNode",m),r!=Rn.state.filterDocumentGuid&&Rn.commit("setFilterDocumentGuid",r)};yn.onpopstate=t,window.addEventListener("popstate",t)}}function Dn(){var t=Rn.state,e=t.cloudNeedLogin,n=t.inCloudMode,r=t.cloudIsLogin,i=t.cloud,a=t.curArtboard,s=t.cloudName,l="";n?(e&&!r||(i.folderInSpecify?l+="没有访问权限 - ":i.folderNotFound?l+="链接已失效 - ":i.renderMode==o["C"].File&&null!=i.fileInfo?l+="".concat(i.fileInfo.name," - ").concat(c["S"].documentName," - "):l+=a?"".concat(a.artboard.name," - ").concat(c["S"].documentName," - "):"".concat(c["S"].documentName," - ")),s&&(l+="".concat(s," - "))):l+=a?"".concat(a.artboard.name," - ").concat(c["S"].documentName," - "):"".concat(c["S"].documentName," - "),document.title=l+c["S"].initTitle}function Nn(t){t.allArtboardLoadChecked?(clearTimeout(Mn),Mn=setTimeout((function(){En(t),Dn()}),33)):Dn()}function En(t){var e=t.curArtboard,n=t.filterDocumentGuid,r=t.curArtboardExtral;if(c["S"].inCloudMode){if(t.cloudNeedLogin&&!t.cloudIsLogin||!t.permission)return;if(!history.pushState)return;if(_n)return;var i,a,s=!1;switch(t.cloud.renderMode){case o["C"].File:i="fileviewer";break;case o["C"].Interaction:i="interactionviewer";break;default:i="viewer",s=!0;break}i="/".concat(i,"/").concat(c["S"].cloudFolderId,"/"),e&&(a=e.artboard.guid,i+="".concat(encodeURIComponent(a),"/"));var u=!1,d=function(t,e){i+="".concat(u?"&":"?").concat(t,"=").concat(encodeURIComponent(e)),u=!0};n&&d("filterDoc",n);var h=yn.href;if(h.indexOf(i)===h.length-i.length)return;var f={artboardGuid:a,nodeGuid:null,filterDocumentGuid:n,curArtboardExtral:r};if(s){var m=/\/(?:file|interaction)?viewer\/(\d+)(?:\/([\w-]+)(?:\/([\w-]+)\/)?)?/.exec(h),p={folderId:null,artboardGuid:null,filterDocumentGuid:null};if(m&&(p.folderId=+m[1],p.artboardGuid=m[2],p.filterDocumentGuid=Object(c["hb"])("filterDoc",h),"none"!==p.filterDocumentGuid&&Object(l["i"])(p.filterDocumentGuid)||(p.filterDocumentGuid=null),p.folderId===c["S"].cloudFolderId&&p.artboardGuid===f.artboardGuid&&p.filterDocumentGuid===f.filterDocumentGuid))return void yn.replaceState(f,null,i)}t.replaceInteractionCurrentState?(t.replaceInteractionCurrentState=!1,yn.replaceState(f,null,i)):yn.pushState(f,null,i)}else{var b,v="#";if(e&&(b=e.artboard.guid,v+="/artboard/".concat(b)),location.hash!==v){var g=/^#\/artboard\/([\w-]+)/.exec(location.hash),w={artboardGuid:null};if(g&&history.replaceState&&(w.artboardGuid=g[1],w.artboardGuid===b))return void history.replaceState(null,null,"".concat(location.origin).concat(location.pathname).concat(location.search).concat(v));location.hash=v}}}function Pn(t){var e;if(!t)return null;var n=t.cid;return null!==(e=Rn.state.documentArtboards.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.cid)===n})))&&void 0!==e?e:null}var Rn=new en["a"].Store({state:{beginnerGuide:{steps:o["h"].None,rects:{}},winRect:{left:0,top:0,width:0,height:0},webViewHidden:Object(c["cb"])(),webViewFocus:!0,folderPrecis:{changeArtboards:[],showArtboardLogNow:0},config:null,allArtboardLoadChecked:!1,replaceInteractionCurrentState:!1,artboardLoadProgress:{current:0,count:1},documentGuid:null,documentName:null,curArtboard:null,curArtboardExtral:null,curNode:null,clickedNode:null,enterNode:null,enterArtboard:null,documentArtboards:[],renderDocumentArtboards:[],documents:[],sortDocumentsWithSketchDocument:[],renderDocuments:[],filterDocumentGuid:null,isSupportWebp:ln.Checking,netdiskUploader:{linkbox:{visible:!1,data:null},filebox:{visible:!1,parentId:0}},scale:{artboard:1,list:1,resetList:0,resetArtboard:0,resetCenterWithRect:null,resetCenterArtboard:null},setting:{color:{items:["rgba","hex","ahex","hexa","hsla"],current:0},numberAutoRound:!1,exportBoxBackground:o["F"].Transparent},platform:{type:o["c"].WEB,customUnit:o["d"].PX,customDocWidth:0},unitTemplate:{template:"",enable:!1},androidUseMipmap:"1"===Object(c["I"])("androidUseMipmap",!1),textTip:{visible:!1,text:"",handle:0},inArtboardMultDownMode:!1,inOutput:!1,artboardMenu:{visible:!1,x:0,y:0,artboard:null},helper:{visible:!1,handle:0},inCloudMode:!1,permission:!0,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudUserId:0,cloudUserIsDesigner:!1,cloudUserIsOwner:!1,cloudUserKey:null,cloudName:null,cloudKey:null,cloudVersion:null,cloudListSort:{sortType:o["k"].Name,orderDesc:!1},cloud:{folderNotFound:!1,folderInSpecify:!1,defaultArtboardGuid:"",parentFolder:null,currentFolderId:0,subFolders:[],subFiles:[],allFoldersBoxVisible:!1,renderMode:o["C"].Normal,fileInfo:null,folderUpdateTimes:null,userFolderSpecifyMemberAuthority:o["s"].ReadWrite},resetScaleSceneCenter:null,selectArtboardChanged:null,artRenderInCanvasMode:!0,artShowInListMode:!1,noviceGuide:{artShowInListMode:!1},artboardShowInteractionLine:!0,rightNavType:o["A"].Property,commentOnlyCurrentVerArtboard:!1,artboardCommentVisible:!1,pointCommentShowAlways:!1,sliceBorderLineHide:!1,editComment:{drawing:!1,instance:null,drawInfo:{action:_.None,histories:[],historyIndex:-1,historyIndexChanges:0,colorIndex:2,fontSize:D,brushSize:N.Normal,selectItem:null,enterItem:null},pointInfo:{preventPoint:{x:0,y:0,enable:!1},point:{x:0,y:0,enable:!1,pointIndex:0},instance:null}},imageViewer:{visible:!1,imgList:null,scale:0,currentIndex:0,resetScale:0},commentEditorVisibleId:0,userNotify:{cloudList:{},visible:!1,location:{top:120,right:0},sysTipIds:{},commentUpdateStates:{},cloudUsersByCloud:{}},autoIntoInfo:{commentId:0,commentArtboardId:0,isReply:!1},artboardDetail:{initedScale:!1,leftSideVisible:"0"!==Object(c["I"])("leftside.visible",!1),artboardVerListVisible:!1,fetchState:c["a"].Normal,errorText:"",refreshDataTicks:0,comments:null,commentUsers:null,maxPointIndex:0,selectComment:null,notScrollList:!1,interactionSet:{hoverGuid:"",headerVisible:"0"!==Object(c["I"])("interaction.header.visible",!1),history:[],verticalAlign:o["u"].Middle,backgroundColor:"#f5f5f5",rectAlwaysVisible:"0"!==Object(c["I"])("interaction.rect-always-visible",!1),pcDeviceSet:{name:"Web",type:bn.Web,width:0,height:0,isHorizontal:!1,hasBangs:!1,iosDynamicIsland:!1},overlayArtboards:[],gobackArtboard:null,gotoArtboard:null,goOverlayArtboard:null}},mobileInteraction:{listFetchState:c["a"].Normal,listConfig:{sortType:o["k"].Name,orderDesc:!1,renderType:o["l"].All},searchText:"",controlVisible:!1,mobileSize:{width:0,height:0},scrollYCache:{}},netdiskFileUploadDatas:{}},mutations:{setBeginnerGuideRect:function(t,e){var n=e.step,r=e.rect,i=t.beginnerGuide.rects;a["a"].set(i,n,r)},setRightNavType:function(t,e){var n=!1;switch(e){case o["A"].Comment:n=!0;break;case o["A"].Slice:break;default:e=o["A"].Property;break}t.rightNavType=e,n?t.artboardCommentVisible=!0:t.artboardDetail.selectComment&&(t.artboardDetail.selectComment=null)},setFolderSubFile:function(t,e){if(t.inCloudMode&&Object(l["s"])(e)){var n=e.files,r=e.folderUpdateTimes;if(Object(l["h"])(n)){var i=t.cloud.subFiles,a=t.cloudListSort,o=t.cloud,s={};i.forEach((function(t,e){s[t.viewUrl]=e})),n.forEach((function(t){var e=s[t.viewUrl];if(null==e)i.push(t);else{var n=i[e];Object.keys(n).forEach((function(e){n[e]=t[e]}))}})),Te({subFiles:i,subFolders:[]},a),r>0&&(o.folderUpdateTimes=r)}}},removeArtboard:function(t,e){if(t.inCloudMode&&Object(l["i"])(e)){var n=t.documentArtboards,r=t.documents,i=-1,a=n.find((function(t,n){var r;return(null===t||void 0===t||null===(r=t.artboard)||void 0===r?void 0:r.guid)===e&&(i=n,!0)}));if(-1!==i){a.removed=!0,n.splice(i,1);var o=!1;Me(n),Ne(r,n),t.sortDocumentsWithSketchDocument=Oe(r);var s=t.filterDocumentGuid;s&&!r.find((function(t){return t.docGuid===s||t.pageGuid===s||t.guid===s}))?this.commit("setFilterDocumentGuid",null):this.commit("setRenderDocuments"),o&&this.commit("setScale",{reset:!0}),wt(n)}}},setFolderPrecis:function(t,e){if(t.inCloudMode&&Object(l["s"])(e)){e.folders||(e.folders=[]),e.artboards||(e.artboards=[]),e.files||(e.files=[]);var n=e.updateTimes,r=e.userSpecifyMemberAuthority,i=e.name,a=t.cloud,s=t.documentArtboards,h=t.documents;if(null!=n){a.folderUpdateTimes=n,t.documentName=i,null!=r&&(a.userFolderSpecifyMemberAuthority=r);var f=a.renderMode,m=a.subFolders,p=a.subFiles;if(f===o["C"].Normal){m.splice(0);var b={subFolders:e.folders,subFiles:e.files};Te(b,t.cloudListSort),Fe(e),b.subFolders.length>0&&m.push.apply(m,Object(u["a"])(b.subFolders)),p.splice(0),b.subFiles.length>0&&p.push.apply(p,Object(u["a"])(b.subFiles))}var v=kn(s,e.artboards),g=[];if((null===v||void 0===v?void 0:v.length)>0){var w,x,y,k=null===(w=t.curArtboard)||void 0===w?void 0:w.artboard;k&&(y=k.cid),null!==(x=y)&&void 0!==x||(y=0);var C=t.folderPrecis.changeArtboards,S={};C.forEach((function(t){S[t.cid]=1}));var O=!1,I=["versionCount","sectionId","sectionInfo","topSectionId","topSectionInfo"];v.forEach((function(t){var e,n,r,i,a,c=null!==(e=t.newArtboard)&&void 0!==e?e:null===(n=t.art)||void 0===n?void 0:n.artboard;switch(c&&(r=c.cid,i=c.guid,a=c.name,On("comment",r),r>0&&!S[r]&&(S[r]=1,C.push({cid:r,guid:i,name:a}))),t.type){case o["q"].Change:var l=t.art,u=t.newArtboard,h=l.artboard.updateTimeTimes===u.updateTimeTimes;if(h){I.forEach((function(t){l.artboard[t]=u[t]}));break}if(!O){var f=l.artboard,m=f.scale,p=f.boundsInParent,b=u.scale,v=u.boundsInParent;m==b&&Object(d["g"])(p,v)||(O=!0)}var w=y===l.artboard.cid&&null!=l.artboardVerData;w||(l.isError=!1,l.isFetching=!1,l.isLoaded=!1,l.loadErrMsg=null),l.artboard=u,l.removed=!1,g.push(l);break;case o["q"].Remove:var x=t.index,k=t.art;k.removed=!0,s.splice(x,1),O=!0;break;case o["q"].Add:var A=t.newArtboard,T=ze(A);s.push(T),O=!0,g.push(T);break}})),C.sort((function(t,e){return Object(c["eb"])(t.name,e.name)})),Me(s),Ne(h,s),t.sortDocumentsWithSketchDocument=Oe(h);var A=t.filterDocumentGuid;A&&!h.find((function(t){return t.docGuid===A||t.pageGuid===A||t.guid===A}))?this.commit("setFilterDocumentGuid",null):this.commit("setRenderDocuments"),O&&this.commit("setScale",{reset:!0}),wt(s,g)}}}},setWebViewFocus:function(t,e){t.webViewFocus=e,Vn()},setWebViewHidden:function(t,e){t.webViewHidden=e,Vn()},setCloudListSortConfig:function(t,e){var n="cloudlist-item-sort",r=t.cloudListSort,i=t.cloud,a=!1;if(Object(l["s"])(e)){if(e.sortType===r.sortType&&null==e.orderDesc)e.orderDesc=!r.orderDesc;else if(e.sortType!==r.sortType&&null==e.orderDesc)switch(e.sortType){case o["k"].Date:e.orderDesc=!0;break;default:e.orderDesc=!1;break}}else Object(c["jb"])(n),a=!0,e={sortType:o["k"].Name,orderDesc:!1};Object.keys(e).forEach((function(t){void 0!==r[t]&&(r[t]=e[t])})),Te(i,r),a||Object(c["nb"])(n,r)},setMobileInteractionListConfig:function(t,e){var n="m-interaction-list-config",r=t.mobileInteraction.listConfig,i=!1;Object(l["s"])(e)||(Object(c["jb"])(n),i=!0,e={sortType:o["k"].Name,orderDesc:!1,renderType:o["l"].All}),Object.keys(e).forEach((function(t){void 0!==r[t]&&(r[t]=e[t])})),i||Object(c["nb"])(n,r)},setPCDeviceSet:function(t,e){if(Object(l["s"])(e)){var n=t.artboardDetail.interactionSet.pcDeviceSet;if(Object.keys(n).forEach((function(t){var r=e[t];void 0!==r&&(n[t]=r)})),n.type===bn.Mobile){var r=Math.max(n.width,n.height),i=Math.min(n.width,n.height);n.isHorizontal?(n.width=r,n.height=i):(n.width=i,n.height=r)}else n.type===bn.Custom&&(n.isHorizontal=n.width>n.height);Object(c["nb"])("interaction.pcdeviceset",n)}},setInteractionRectAlwaysVisible:function(t,e){t.artboardDetail.interactionSet.rectAlwaysVisible!==e&&(t.artboardDetail.interactionSet.rectAlwaysVisible=e,Object(c["nb"])("interaction.rect-always-visible",e?"1":"0"))},setInteractionBackground:function(t,e){t.artboardDetail.interactionSet.backgroundColor!==e&&(t.artboardDetail.interactionSet.backgroundColor=e,Object(c["nb"])("interaction.background",e))},setInteractionHeaderVisible:function(t,e){t.artboardDetail.interactionSet.headerVisible!==e&&(t.artboardDetail.interactionSet.headerVisible=e,Object(c["nb"])("interaction.header.visible",e?"1":"0"))},setInteractionArtboard:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var a,u,d,h,f,m,p,b,v,g,w,x,y,k,C,S,O,I,A,T,j,F,M,_,L,D,N,E;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:if(a=t.artboardDetail.interactionSet,!(a.gotoArtboard||a.gobackArtboard||a.goOverlayArtboard)){r.next=5;break}return r.abrupt("return");case 5:u=a.overlayArtboards,d=null,h=t.cloud.renderMode===o["C"].Interaction,f=e.type,f!==ht.overlay||h||(f=ht.goToArtboard),m=h&&(l["e"]||a.pcDeviceSet.type!==bn.Web),r.t0=f,r.next=r.t0===ht.replace?14:r.t0===ht.closeCurrentOverlay?38:r.t0===ht.goBackAndCloseAllOverlay?54:r.t0===ht.goBack?60:r.t0===ht.goToArtboard?88:r.t0===ht.overlay?110:r.t0===ht.goUrl?128:131;break;case 14:if(d=Pn(e.toArtboardItem),d){r.next=19;break}return n.commit("Tip_showTextTip",{text:"目标画板未上传到私有云"}),r.abrupt("return");case 19:if(0!==u.length){r.next=28;break}if(d.artboard.cid!==(null===(p=t.curArtboard)||void 0===p||null===(p=p.artboard)||void 0===p?void 0:p.cid)){r.next=23;break}return n.commit("Tip_showTextTip",{text:"目标画板和当前画板是同一个画板"}),r.abrupt("return");case 23:return t.replaceInteractionCurrentState=!0,e=Object(s["a"])({},e),e.type=ht.goToArtboard,n.commit("setInteractionArtboard",e),r.abrupt("return");case 28:if(b=u[u.length-1],b.visible=!0,b.renderTapInteraction=e,b.artboard=d,!m){r.next=37;break}return a.goOverlayArtboard={renderTapInteraction:e,fromArtboard:d},r.next=36,Object(c["ub"])(1e3*((null===(v=e.transition)||void 0===v?void 0:v.duration)||0));case 36:a.goOverlayArtboard=null;case 37:return r.abrupt("break",133);case 38:if(h){r.next=41;break}return n.commit("Tip_showTextTip",{text:"关闭当前最顶部遮罩层"}),r.abrupt("return");case 41:if(0!==u.length){r.next=44;break}return n.commit("Tip_showTextTip",{text:"当前画板不是以遮罩层的形式打开的,关闭遮罩的命令无效"}),r.abrupt("return");case 44:if(g=u[u.length-1],!g.visible){r.next=52;break}if(g.visible=!1,!m){r.next=52;break}return a.goOverlayArtboard={renderTapInteraction:g.renderTapInteraction,fromArtboard:Pn(e.toArtboardItem)},r.next=51,Object(c["ub"])(1e3*((null===(w=g.renderTapInteraction.transition)||void 0===w?void 0:w.duration)||0));case 51:a.goOverlayArtboard=null;case 52:return u.splice(u.length-1),r.abrupt("return");case 54:if(h){r.next=57;break}return n.commit("Tip_showTextTip",{text:"返回到原型的上一个画板"}),r.abrupt("return");case 57:return u.length>0&&u.splice(0),n.commit("setInteractionArtboard",{type:ht.goBack}),r.abrupt("return");case 60:if(h){r.next=63;break}return n.commit("Tip_showTextTip",{text:"返回到原型的上一个画板"}),r.abrupt("return");case 63:if(!(u.length>0)){r.next=71;break}if(x=u[u.length-1],!x.visible){r.next=69;break}return x.visible=!1,r.next=69,Object(c["ub"])(1e3*((null===(y=x.renderTapInteraction.transition)||void 0===y?void 0:y.duration)||.3));case 69:return u.splice(0),r.abrupt("return");case 71:if(null!=yn.state){r.next=74;break}return n.commit("Tip_showTextTip",{text:"没有可返回的上一个画板"}),r.abrupt("return");case 74:if(yn.go(-1),k=t.curArtboardExtral,!Object(l["s"])(k)){r.next=87;break}if(C=k.renderTapInteraction,S=k.fromArtboard,!C||!S){r.next=87;break}if(!m){r.next=87;break}return a.gotoArtboard=null,a.goOverlayArtboard=null,a.gobackArtboard={renderTapInteraction:C,fromArtboard:t.curArtboard},r.next=86,Object(c["ub"])(1e3*((null===(O=C.transition)||void 0===O?void 0:O.duration)||.3));case 86:a.gobackArtboard=null;case 87:return r.abrupt("break",133);case 88:if(d=Pn(e.toArtboardItem),d){r.next=92;break}return n.commit("Tip_showTextTip",{text:"目标画板未上传到私有云"}),r.abrupt("return");case 92:if(A=d.artboard.cid,A!==(null===(I=t.curArtboard)||void 0===I?void 0:I.artboard.cid)){r.next=96;break}return n.commit("Tip_showTextTip",{text:"目标画板和当前画板是同一个画板"}),r.abrupt("return");case 96:if(T=t.mobileInteraction.scrollYCache,delete T[A],e=Object(s["a"])({},e),delete e.toArtboardItem,!m){r.next=108;break}return a.gobackArtboard=null,a.goOverlayArtboard=null,a.gotoArtboard={renderTapInteraction:e,fromArtboard:d},r.next=107,Object(c["ub"])(1e3*((null===(j=e.transition)||void 0===j?void 0:j.duration)||.3));case 107:a.gotoArtboard=null;case 108:return n.commit("curArtboard",{artboard:d,extral:{renderTapInteraction:e,fromArtboard:t.curArtboard}}),r.abrupt("break",133);case 110:if(d=Pn(e.toArtboardItem),d){r.next=115;break}return n.commit("Tip_showTextTip",{text:"目标画板未上传到私有云"}),r.abrupt("return");case 115:if(e=Object(s["a"])({},e),delete e.toArtboardItem,!(u.length>0)){r.next=121;break}if(_=u[u.length-1],(null===(F=_.artboard)||void 0===F?void 0:F.cid)!==(null===(M=d.artboard)||void 0===M?void 0:M.cid)){r.next=121;break}return r.abrupt("return");case 121:if(u.push({artboard:d,renderTapInteraction:e,visible:!0}),!m){r.next=127;break}return a.goOverlayArtboard={renderTapInteraction:e,fromArtboard:d},r.next=126,Object(c["ub"])(1e3*((null===(L=e.transition)||void 0===L?void 0:L.duration)||.3));case 126:a.goOverlayArtboard=null;case 127:return r.abrupt("break",133);case 128:return D=e,N=D.toUrl,N?(E=window.open(N),E.opener=null):n.commit("Tip_showTextTip",{text:"无法跳转网址,因为网址参数丢失了"}),r.abrupt("return");case 131:return n.commit("Tip_showTextTip",{text:"未知的原型操作,无法跳转"}),r.abrupt("return");case 133:case"end":return r.stop()}}),i)})))()},setRenderDocuments:function(t){var e,n=t.filterDocumentGuid,r=t.documents,i=t.inCloudMode;e=Object(l["i"])(n)?r.filter((function(t){return t.guid===n||t.docGuid===n||t.pageGuid===n})):t.documents;var a=e.reduce((function(t,e){return t.add("".concat(e.type,":").concat(e.guid)),t}),new Set);e=e.filter((function(t){switch(t.type){case void 0:return!i;case o["x"].Document:return!0;case o["x"].Page:return!a.has("".concat(o["x"].Document,":").concat(t.docGuid));case o["x"].Section:return!a.has("".concat(o["x"].Document,":").concat(t.docGuid))&&!a.has("".concat(o["x"].Page,":").concat(t.pageGuid))}return!1})),e.forEach((function(e){e.maxRect=Object(c["A"])(e.arts,t.inCloudMode?e.sections:null),e.rect=(new d["a"]).set(0,0,e.maxRect.width,e.maxRect.height),Object(l["h"])(e.sections)&&(e.sections=Ye(e.sections))})),e.length>1&&(new mn(e,150),e.forEach((function(t){t.rect.width=t.maxRect.width,t.rect.height=t.maxRect.height}))),t.renderDocuments=e;var s=[],u=new Set;e.forEach((function(t){t&&Object(l["h"])(t.arts)&&t.arts.forEach((function(t){var e,n,r=null!==(e=null!==(n=t.artboard.guid)&&void 0!==n?n:t.artboard.cid)&&void 0!==e?e:null;r&&!u.has(r)&&(u.add(r),s.push(t))}))})),t.renderDocumentArtboards=s},setFilterDocumentGuid:function(t,e){if(t.filterDocumentGuid!=e){if(t.filterDocumentGuid=e,this.commit("setRenderDocuments"),e){var n=t.curArtboard;if(n){var r=n.artboard,i=r.docGuid,a=r.pageGuid,o=r.topSectionId;if(i!==e&&a!==e&&o!==e){var s=t.renderDocumentArtboards[0];return void this.commit("curArtboard",{artboard:s})}}}Nn(t)}},setAllFoldersBoxVisible:function(t,e){t.cloud.allFoldersBoxVisible=e,e?Object(c["pb"])(o["e"],"1"):Object(c["kb"])(o["e"])},leftSideVisible:function(t,e){t.artboardDetail.leftSideVisible!==e&&(t.artboardDetail.leftSideVisible=e,Object(c["nb"])("leftside.visible",e?"1":"0"))},pointCommentShowAlways:function(t,e){t.pointCommentShowAlways=e,Object(c["nb"])("point-comment-showalways",e?"1":"0")},sliceBorderLineHide:function(t,e){t.sliceBorderLineHide=e,Object(c["nb"])("slice-border-line-hide",e?"1":"0")},artboardCommentVisible:function(t,e){t.artboardCommentVisible=e},setSelectComment:function(t,e){e=e||{};var n=e,r=n.comment,i=n.notScrollList,o=n.openEditor,s=t.artboardDetail;r&&(t.artboardCommentVisible=!0),s.notScrollList=!!i,o&&(null===r||void 0===r?void 0:r.id)>0&&a["a"].set(r,"autoOpenEditor",!0),s.selectComment=r},setCommentEditorVisibleId:function(t,e){t.commentEditorVisibleId=e},setImageViewer:function(t,e){var n=t.imageViewer;Object(l["s"])(e)&&Object(l["h"])(e.imgList)&&e.imgList.length>0?(n.imgList=e.imgList.map((function(t){return{imgSrc:t,width:0,height:0}})),n.currentIndex="number"===typeof e.currentIndex&&e.currentIndex>=0&&e.currentIndex<e.imgList.length?e.currentIndex:0,n.visible=!0):(n.currentIndex=0,n.visible=!1,n.imgList=null)},startDraw:function(t,e){var n=t.editComment;n.drawing||(n.instance=e,n.drawing=!0)},artboardShowInteractionLine:function(t,e){Object(c["nb"])("list-interaction-line",e?"1":"0"),t.artboardShowInteractionLine=e},artShowInListMode:function(t,e){Object(c["nb"])("art-in-list",e?"1":"0"),location.reload(!0),setTimeout((function(){t.artShowInListMode=e}),1e3)},artRenderInCanvasMode:function(t,e){Object(c["nb"])("list-view-mode",e?"1":"0"),c["db"].paused=!e,location.reload(!0),setTimeout((function(){t.artRenderInCanvasMode=e}),1e3)},selectArtboardChanged:function(t,e){t.selectArtboardChanged=e},resetScaleSceneCenter:function(t,e){t.resetScaleSceneCenter=e},isSupportWebp:function(t,e){t.isSupportWebp=e},artboardLoadProgress:function(t,e){if(Object(l["s"])(e)){var n=e.current,r=e.count;t.artboardLoadProgress.current=n,t.artboardLoadProgress.count=r}},allArtboardLoadChecked:function(t,e){t.allArtboardLoadChecked=e},setHelperVisible:function(t,e){var n=t.helper;clearTimeout(n.handle),e?n.visible=!0:n.handle=setTimeout((function(){n.visible=!1}),50)},setInOutput:function(t,e){t.inOutput=e},setAndroidUseMipmap:function(t,e){t.androidUseMipmap!==e&&(t.androidUseMipmap=e,Object(c["nb"])("androidUseMipmap",e?"1":"0"))},setArtboardMenu:function(t,e){if(Object(l["s"])(e)){var n=e.visible,r=e.x,i=e.y,a=e.artboard,o=t.artboardMenu;null!=r&&(o.x=Math.max(0,r)),null!=i&&(o.y=Math.max(0,i)),null!=n&&(o.visible=n),!1===n?o.artboard=null:null!=a&&(o.artboard=a)}},setInArtboardMultDownMode:function(t,e){t.inArtboardMultDownMode=e},Tip_showTextTip:function(t,e){var n=e.second,r=void 0===n?5:n,i=e.text,a=t.textTip;a.visible=!0,a.text=i,clearTimeout(a.handle),r>0&&(a.handle=setTimeout((function(t){clearTimeout(t.handle),t.handle=0,t.visible=!1}),1e3*r,a))},Tip_hideTextTip:function(t){var e=t.textTip;e.visible=!1,clearTimeout(e.handle),e.handle=0},setUnitTemplate:function(t,e){var n=e.enable,r=e.template,i=e.fromInited,a=e.guid,o=t.unitTemplate;if((o.enable!=n||o.template!=r)&&(o.enable=n,Object(l["i"])(r)||(r="rem(%num%)"),o.template=r,!i)){var s="unittemplate.".concat(a);o.enable||"rem(%num%)"!=o.template?Object(c["nb"])(s,o):Object(c["jb"])(s)}},setPlatform:function(t,e){var n=e.type,r=e.customUnit,i=e.customDocWidth,a=e.fromInited,s=e.guid,l=t.platform,u=!1;if(null!==n){var d;switch(n){case o["c"].ANDROID:case o["c"].IOS:case o["c"].CUSTOM:case o["c"].WE_CHAT_MINI_PROGRAM:d=n;break;default:d=o["c"].WEB;break}d!==l.type&&(u=!0,l.type=d)}if(null!=r&&null!=i){switch(u=!0,r){case o["d"].DP:case o["d"].PT:case o["d"].RPX:l.customUnit=r;break;default:l.customUnit=o["d"].PX;break}"number"===typeof i&&isFinite(i)&&!isNaN(i)&&i>=1?l.customDocWidth=Math.round(i):l.customDocWidth=0}if(u&&!a){var h="platform.".concat(s);Object(c["nb"])(h,l)}},resetCenterWithRect:function(t,e){t.scale.resetCenterWithRect=e},resetCenterArtboard:function(t,e){t.scale.resetCenterArtboard=e},setScale:function(t,e){if(Object(l["s"])(e)){var n=e.artboard,r=e.list,i=e.reset;null!=n&&(t.scale.artboard=Object(c["x"])(!1,n)),null!=r&&(t.scale.list=Object(c["x"])(!0,r)),!0===i&&(null==t.curArtboard?t.scale.resetList=Date.now():t.scale.resetArtboard=Date.now())}},exportBoxBackgroundType:function(t,e){t.setting.exportBoxBackground=e,Object(c["nb"])("export-box-background",e)},setInteractionArtboardVerticalAlign:function(t,e){t.artboardDetail.interactionSet.verticalAlign=e,Object(c["nb"])("interaction-vertical-align",e)},setNumberAutoRound:function(t,e){t.setting.numberAutoRound=e,Object(c["nb"])("number-auto-round",e?"1":"0")},setSettingColor:function(t,e){var n=t.setting.color;(e<0||e>=n.items.length)&&(e=0),n.current=e,Object(c["nb"])("colortype",e)},setCurArtboardVer:function(t,e){var n;if(Object(l["s"])(e)){var r=e.verId,i=e.noTipWhenCurrentVer,a=t.curArtboard,o=t.curArtboard,s=o.artboard,c=o.historyArtboards;if(r>0&&((null===(n=a.artboardVerData)||void 0===n?void 0:n.lastVersionId)===r||null==a.artboardVerData&&(null===s||void 0===s?void 0:s.lastVersionId)===r))!0!==i&&this.commit("Tip_showTextTip",{text:"当前画板版本已经是#".concat(r)});else{if(!c)return this.commit("Tip_showTextTip",{text:"无法切换到画板版本#".concat(r,",画板版本信息尚未加载")});var u;if(a.artboard.lastVersionId===r)u=null;else{var d=null===c||void 0===c?void 0:c.find((function(t){var e;return(null!==(e=null===t||void 0===t?void 0:t.lastVersionId)&&void 0!==e?e:t.verId)===r}));if(!d)return void this.commit("Tip_showTextTip",{text:"画板版本#".concat(r," 不存在,可能已经被删除")});u=d}a.isError=!1,a.isFetching=!1,a.isLoaded=!1,a.loadErrMsg=null,a.artboardVerData=u,this.commit("Tip_showTextTip",{text:"已切换到画板版本#".concat(r)})}}},curArtboard:function(t,e){var n;e||(e={});var r=e,i=r.artboard,a=r.extral;Object(l["s"])(i)||(i=null);var o=!1;if(null!==(n=i)&&void 0!==n&&n.artboardVerData&&(i.artboardVerData=null,o=!0),t.curArtboard!==i){if(i){var s,u=t.filterDocumentGuid,d=null!==(s=i.artboard)&&void 0!==s?s:{},h=d.docGuid,f=d.pageGuid,m=d.topSectionId;u&&h!==u&&f!==u&&m!==u&&this.commit("setFilterDocumentGuid",null)}if(t.curArtboard=i,t.curArtboardExtral=null!==a&&void 0!==a?a:null,t.curNode=null,t.artboardDetail.interactionSet.overlayArtboards.splice(0),Nn(t),null!=i&&i.isLoaded){var p=i.artboard;if(Object(l["s"])(p)){var b=p.mlConfig;if(Object(l["s"])(b)&&"number"===typeof b.platform){var v=Object(c["E"])(p.docGuid,b.platform);this.commit("setPlatform",v)}var g=Object(c["R"])(p.docGuid);this.commit("setUnitTemplate",g)}}}else o&&this.commit("Tip_showTextTip",{text:"已切换到画板版本#".concat(i.artboard.lastVersionId)})},curNode:function(t,e){Object(l["s"])(e)||(e=null),t.curNode=e,Nn(t)},clickedNode:function(t,e){t.clickedNode=e},enterNode:function(t,e){t.enterNode=e},enterArtboard:function(t,e){t.enterArtboard=e},setCloudNickName:function(t,e){t.cloudNickName=e},setMyState:function(t,e){Object(l["s"])(e)&&(t.permission=e.permission,t.cloudNeedLogin=e.needLogin,t.cloudIsLogin=e.isLogin,t.cloudNickName=e.nickName,t.cloudUserEmail=e.email,t.cloudUserId=e.userId,t.cloudUserIsDesigner=e.isDesigner,t.cloudUserIsOwner=!!e.isOwner,c["S"].userKey=t.cloudUserKey=e.userKey,t.cloudName=e.cloudName,t.cloudVersion=e.cloudVersion)},setUserLogout:function(t){t.cloudIsLogin=!1,t.cloudNickName="",t.cloudUserEmail="",t.cloudUserId=0,t.cloudUserIsDesigner=!1,t.cloudUserIsOwner=!1,c["S"].userKey=t.cloudUserKey=""},setDocument:function(t,e){var n=e.documentName,r=e.documentArtboards,i=e.documentGuid,a=e.config,o=e.permission,s=e.inCloudMode,u=e.cloud,d=e.documents,h=e.cloudNeedLogin,f=e.cloudIsLogin,m=e.cloudNickName,p=e.cloudUserEmail,b=e.cloudUserId,v=e.cloudUserIsDesigner,g=e.cloudUserIsOwner,w=e.cloudUserKey,x=e.cloudName,y=e.cloudKey,k=e.cloudVersion;t.documentArtboards=r,t.documents=d,t.sortDocumentsWithSketchDocument=Oe(d),t.documentName=n,t.documentGuid=i,t.config=a,t.permission=o,t.cloudNeedLogin=h,t.cloudIsLogin=f,t.cloudNickName=m,t.cloudUserEmail=p,t.cloudUserId=b,t.cloudUserIsDesigner=v,t.cloudUserIsOwner=g,c["S"].userKey=t.cloudUserKey=w,t.cloudName=x,t.cloudKey=y,t.cloudVersion=k,t.inCloudMode=s,c["S"].cloudVersion=k;var C=t.cloud;Object(l["s"])(u)&&Object.keys(u).forEach((function(t){C[t]=u[t]})),this.commit("setRenderDocuments");var S=Object(c["E"])(i,a.platform);this.commit("setPlatform",S);var O=Object(c["R"])(i);this.commit("setUnitTemplate",O),Dn()}},actions:{}});function Vn(){var t=Rn.state.artboardDetail.interactionSet,e=Object(c["I"])("interaction.background",!1)||"#f5f5f5";t.backgroundColor!==e&&(t.backgroundColor=e)}function Bn(){var t=parseInt(Object(c["I"])("colortype",!1));if(!(isNaN(t)||!isFinite(t)||t<0)){var e=Rn.state.setting.color;t<e.items.length&&(e.current=t)}}function Un(){var t="1"===Object(c["I"])("number-auto-round",!1);t&&(Rn.state.setting.numberAutoRound=!0)}function Hn(){var t=+Object(c["I"])("interaction-vertical-align",!1);switch(t){case o["u"].Bottom:case o["u"].Top:case o["u"].Middle:break;default:t=o["u"].Middle;break}Rn.state.artboardDetail.interactionSet.verticalAlign=t}function Wn(){var t=+Object(c["I"])("export-box-background",!1);switch(t){case o["F"].Black:case o["F"].Transparent:break;default:t=o["F"].Transparent}t!==o["F"].Transparent&&(Rn.state.setting.exportBoxBackground=t)}function $n(){var t=Object(c["I"])("list-interaction-line");switch(t){case"0":Rn.state.artboardShowInteractionLine=!1;break;default:Rn.state.artboardShowInteractionLine=!0;break}}function Gn(){var t=Object(c["I"])("list-view-mode");switch(t){case"0":Rn.state.artRenderInCanvasMode=!1;break;default:Rn.state.artRenderInCanvasMode=!0;break}}function zn(){var t=Object(c["I"])("art-in-list");switch(t){case"1":Rn.state.artShowInListMode=!0;break;case"0":Rn.state.artShowInListMode=!1;break;default:Rn.state.artShowInListMode=!1,Rn.state.noviceGuide.artShowInListMode=!0;break}}function Yn(){var t=Object(c["I"])("interaction.pcdeviceset",!0);if(Object(l["s"])(t)){!t.hasBangs||"iPhone 14 Pro Max"!==t.name&&"iPhone 14 Pro"!==t.name||(t.hasBangs=!1,t.iosDynamicIsland=!0);var e=Rn.state.artboardDetail.interactionSet.pcDeviceSet;Object.keys(e).forEach((function(n){var r=t[n];void 0!==r&&(e[n]=r)}))}else{var n=wn;n&&Rn.commit("setPCDeviceSet",wn)}}function Xn(){var t=Object(c["I"])("point-comment-showalways");switch(t){case"0":Rn.state.pointCommentShowAlways=!1;break;default:Rn.state.pointCommentShowAlways=!0;break}}function Kn(){var t=Object(c["I"])("slice-border-line-hide");switch(t){case"1":Rn.state.sliceBorderLineHide=!0;break;default:Rn.state.sliceBorderLineHide=!1;break}}function qn(){var t=Rn.state.mobileInteraction.listConfig,e=Object(c["I"])("m-interaction-list-config",!0);Object(l["s"])(e)||(e={}),t.sortType=function(t){switch(t){case o["k"].ArtboardRect:case o["k"].Date:return t;default:return o["k"].Name}}(e.sortType),t.orderDesc=!!e.orderDesc,t.renderType=function(t){switch(t){case o["l"].Artboard:return t;default:return o["l"].All}}(e.renderType)}function Qn(){var t;function e(){var n=Rn.state,r=n.webViewHidden,i=n.webViewFocus,a=document.hasFocus();a!==i&&Rn.commit("setWebViewFocus",a),clearTimeout(t),r||setTimeout(e,200)}document.addEventListener("visibilitychange",(function(){var t=Rn.state.webViewHidden,n=Object(c["cb"])();t!=n&&Rn.commit("setWebViewHidden",n),e()}),!1),e()}function Jn(){var t=Rn.state.cloudListSort,e=Object(c["I"])("cloudlist-item-sort",!0);Object(l["s"])(e)||(e={}),t.sortType=function(t){switch(t){case o["k"].ArtboardRect:case o["k"].Date:return t;default:return o["k"].Name}}(e.sortType),t.orderDesc=!!e.orderDesc}function Zn(){function t(){var t=Rn.state.winRect;t.width=window.innerWidth,t.height=window.innerHeight}window.addEventListener("resize",t),t()}function tr(){}function er(){Rn.state.beginnerGuide.steps=Fn.steps}var nr=Rn;function rr(){Qn(),Vn(),Ln(),Bn(),Un(),Wn(),Gn(),zn(),Yn(),$n(),Xn(),Kn(),qn(),Hn(),Zn(),tr(),er()}var ir=function(){var t=this,e=t._self._c;return e("section",{ref:"main",attrs:{id:"main"}},[!t.cloudNeedLogin||t.cloudIsLogin?e("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked,local:!t.inCloudMode}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]):t._e(),t.cloudNeedLogin&&!t.cloudIsLogin?e("CloudNeedLoginTip"):t.allArtboardLoadChecked?[e("Header"),e("main",[e("FolderNav"),t.cloudFolderNotFound?e("EmptyData",{attrs:{text:t.cloudFolderErrorText,showLoginBtn:t.cloudFolderInSpecify}}):t.permission?t.isEmptyFolder?e("EmptyData",{attrs:{text:t.emptyText}}):t.inNetDiskFileMode?e("NetDiskFileMain"):t.inArtboardMode?e("ArtboardInfo"):t._e():e("Authority",{attrs:{include:!0}}),e("keep-alive",[t.cloudFolderNotFound||!t.permission||t.isEmptyArtboardData||t.inArtboardMode||t.inNetDiskFileMode||t.artShowInListMode?t._e():e("ArtboardList")],1),e("InOutputTip"),e("ArtboardListItemMenu")],1)]:t._e(),t.inNetDiskFileMode?t._e():e("SafariWebpTip"),t.inNetDiskFileMode?t._e():e("ImageViewer"),e("Tip"),e("AutomaticSync"),e("ChangeArtboardsTip"),e("BeginnerGuide")],2)},ar=[],or=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"beginner-guide"},[e("Mark",{attrs:{rect:t.maskRect}}),e("div",{staticClass:"guide-box",class:t.guideBoxClass,style:t.guidBoxStyle},[t.currentStep===t.enumSteps.GlobalCloudFolderBoxMenu?e("div",{staticClass:"guide-popcloudfolder"},[e("div",{staticClass:"bg"}),t._m(0)]):t.currentStep===t.enumSteps.HelperMenu?e("div",{staticClass:"guide-helper"},[t._m(1)]):t.currentStep===t.enumSteps.ArtboardModeMenu?e("div",{staticClass:"guide-artrendermode"},[t.artShowInListMode?[e("div",{staticClass:"bg-art"}),t._m(2)]:[e("div",{staticClass:"bg-list"}),t._m(3)]],2):t.currentStep===t.enumSteps.SliceBorderLineMenu?e("div",{staticClass:"guide-slide-borderline"},[e("div",{staticClass:"bg"}),t._m(4)]):t.currentStep===t.enumSteps.ArtboardDevMode?e("div",{staticClass:"guide-artboard-dev"},[e("div",{staticClass:"bg"}),t._m(5)]):t._e(),e("div",{staticClass:"btns"},[e("div"),e("div",{staticClass:"btn",on:{click:function(e){return t.clickHideCurrentStep()}}},[t._v("我知道了")])])])],1):t._e()},sr=[function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("显示文件夹树")]),e("dd",[t._v("点击可显示文件夹树，快速浏览所有文件夹或内容，快速搜索特定文件或文件夹。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("快捷操作指南")]),e("dd",[t._v("点击这里可查看常用快捷键和操作方法，帮助您更高效地使用标记狮。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("画布视图")]),e("dd",[t._v("点击按钮可切换为以画板为主的画布视图，与设计软件中画板位置一致。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("宫格视图")]),e("dd",[t._v("点击按钮可切换为宫格视图，画板、文件夹和文件整齐排列，方便浏览和管理文件。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("隐藏切图虚线框")]),e("dd",[t._v("点击更多按钮可隐藏切图虚线框，隐藏后[标注]模式下切图图层边缘不会再标识虚线框。")])])},function(){var t=this,e=t._self._c;return e("dl",[e("dt",[t._v("标记画板为待开发")]),e("dd",[t._v("选中画板右键单击可将画板标记为[待开发]状态、便于快速找到所需画板。")])])}],cr=function(){var t=this,e=t._self._c;return e("svg",{staticStyle:{"pointer-events":"none"},attrs:{width:t.winRect.width,height:t.winRect.height,viewBox:t.viewBox}},[e("defs",[e("mask",{attrs:{id:"hole"}},[e("rect",{attrs:{width:"100%",height:"100%",fill:"white"}}),e("rect",{attrs:{x:t.rect.x,y:t.rect.y,width:t.rect.width,height:t.rect.height,rx:"4",ry:"4",fill:"black"}})])]),e("rect",{attrs:{width:"100%",height:"100%",fill:"rgba(0,0,0,0.6)",mask:"url(#hole)"}})])},lr=[],ur={computed:{viewBox:function(){var t=this.winRect;return"0 0 ".concat(t.width," ").concat(t.height)},winRect:function(){return this.$store.state.winRect}},props:{rect:Object}},dr=ur,hr=n("829d"),fr=Object(hr["a"])(dr,cr,lr,!1,null,null,null),mr=fr.exports,pr={components:{Mark:mr},methods:{clickHideCurrentStep:function(){Fn.finishStep(this.currentStep),this.beginnerGuide.steps=Fn.steps}},computed:{guidBoxStyle:function(){var t=this.maskRect,e=t.x,n=t.y,r=t.width,i=t.height,a=t.direction,s=this.winRect,c=10;n+=i+c;var l,u,d=25;switch(a){case o["g"].TopRight:case o["g"].Right:l=Math.round(s.width-e-r/2-d)+"px";break;case o["g"].Left:u=e+r+c+"px",n-=i+d-c;break;default:l=void 0,u=e+Math.round(r/2-d)+"px";break}return{top:n+"px",left:u,right:l}},guideBoxClass:function(){var t=this.visible,e=this.maskRect.direction;if(!t)return null;switch(e){case o["g"].TopRight:return"in-topright";case o["g"].Left:return"in-left";case o["g"].Right:return"in-right";default:return null}},visible:function(){var t=this.maskRect;return t.width>0&&t.height>0},maskRect:function(){var t;return null!==(t=this.currentRect)&&void 0!==t?t:{x:0,y:0,width:0,height:0,direction:o["g"].TopLeft}},beginnerGuide:function(){return this.$store.state.beginnerGuide},steps:function(){return this.beginnerGuide.steps},currentStep:function(){var t=this.steps,e=this.beginnerGuide.rects,n=this.orderStepList,r=n.find((function(n){if((t&n)===n)return!1;var r=e[n];return!(!r||0===r.width||0===r.height)}));return null!==r&&void 0!==r?r:o["h"].None},currentRect:function(){var t,e=this.beginnerGuide.rects,n=this.currentStep;return n===o["h"].None?null:null!==(t=e[n])&&void 0!==t?t:null},enumSteps:function(){return o["h"]},winRect:function(){return this.$store.state.winRect}},data:function(){return{orderStepList:o["h"].getSortValues()}},created:function(){}},br=pr,vr=(n("efde"),Object(hr["a"])(br,or,sr,!1,null,"55520bf4",null)),gr=vr.exports,wr=function(){var t=this,e=t._self._c;return t.visible?e("div"):t._e()},xr=[],yr=1e4,kr={methods:{autoGetArtboardStatusListLater:function(){clearTimeout(this.autoGetArtboardStatusListHandler),this.autoGetArtboardStatusListHandler=setTimeout(this.autoGetArtboardStatusList,500)},autoGetArtboardStatusList:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,s,c,u,d,h,f,m,p,b;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.cloudIsLogin,i=t.documentArtboards,a=t.cloudCurrentFolderId,s=t.autoGetArtboardStatusListHandler,c=t.inCloudViewerMode,u=t.notSupportArtboardStatusVersion,clearTimeout(s),!u){e.next=4;break}return e.abrupt("return");case 4:if(c&&0!==i.length){e.next=6;break}return e.abrupt("return");case 6:if(!t.webViewHidden&&t.webViewFocus){e.next=8;break}return e.abrupt("return");case 8:if(d={status:o["f"].None,updateTimes:0},n){e.next=13;break}return i.forEach((function(t){t.customStatus=d.status,t.customStatusUpdateTimes=d.updateTimes})),e.abrupt("return");case 13:return e.prev=13,f=new FormData,f.append("folderid",a),m="GetArtboardStatusListByWeb",e.next=19,t.fetchPostCloudApi(m,{body:f,abortKey:m});case 19:if(p=e.sent,p.success){e.next=22;break}throw p.errMsg;case 22:b=(null!==(h=p.data)&&void 0!==h?h:[]).reduce((function(t,e){if(Object(l["s"])(e))return t[e.id]=e,t}),{}),i.forEach((function(t){var e,n=null!==(e=b[t.artboard.cid])&&void 0!==e?e:d;t.customStatus=n.status,t.customStatusUpdateTimes=n.updateTimes})),e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](13);case 29:case"end":return e.stop()}}),e,null,[[13,26]])})))()},autoGetFolderPrecis:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(clearTimeout(t.autoGetFolderPrecisHandler),t.inCloudMode){e.next=3;break}return e.abrupt("return");case 3:if(!t.cloudFolderNotFound){e.next=5;break}return e.abrupt("return");case 5:if(!t.cloudIsLogin){e.next=7;break}return e.abrupt("return");case 7:if(!t.inNetDiskFileMode){e.next=9;break}return e.abrupt("return");case 9:if(e.prev=9,!t.webViewHidden&&t.webViewFocus){e.next=12;break}return e.abrupt("return");case 12:return t.lastAutoGetTime=Date.now(),e.next=16,t.getFolderPrecis(t.cloudCurrentFolderId,t.folderUpdateTimes);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](9);case 21:return e.prev=21,t.autoGetFolderPrecisHandler=setTimeout((function(){t.autoGetFolderPrecis()}),yr),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[9,18,21,24]])})))()},autoCheckCloudNotify:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,c,u,d,h,f;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(clearTimeout(t.autoCheckCloudNotifyHandler),t.inCloudMode&&t.cloudIsLogin){e.next=3;break}return e.abrupt("return");case 3:if(e.prev=3,!t.webViewHidden&&t.webViewFocus){e.next=6;break}return e.abrupt("return");case 6:return a=t.cloudKey,o=t.userNotifyCloudList[a],s=0,c=null!==(n=t.sysTipIds[a])&&void 0!==n?n:0,u=null!==(i=t.curArtboardId)&&void 0!==i?i:0,o&&(s=null!==(d=null===(h=o.list[0])||void 0===h?void 0:h.id)&&void 0!==d?d:0),t.lastAutoGetTime=Date.now(),e.prev=14,e.next=17,t.getCloudNotifies(s,u,t.cloudCurrentFolderId,t.folderUpdateTimes);case 17:if(f=e.sent,Object(l["h"])(f)){e.next=20;break}return e.abrupt("return");case 20:if(f=f.filter((function(t){return t.id>c&&!t.readed})),0!==f.length){e.next=23;break}return e.abrupt("return");case 23:e.next=28;break;case 26:e.prev=26,e.t0=e["catch"](14);case 28:e.next=32;break;case 30:e.prev=30,e.t1=e["catch"](3);case 32:return e.prev=32,t.checkUpdateCloudUsers(),t.autoCheckCloudNotifyHandler=setTimeout((function(){t.autoCheckCloudNotify()}),yr),e.finish(32);case 36:case"end":return e.stop()}}),e,null,[[3,30,32,36],[14,26]])})))()},checkUpdateCloudUsers:function(){var t=this;clearTimeout(this.checkUpdateCloudUsersHandler);var e=this.cloudUsersByCloudData,n=e.userListState,a=e.needUpdate;if(a){var o=Object(c["I"])("getcloudusers",!0);Object(l["s"])(o)||(o={});var s=o,u=s.time,d=s.state;d===n&&u>0&&Math.abs(Date.now()-u)<18e4||(this.checkUpdateCloudUsersHandler=setTimeout(Object(i["a"])(Object(r["a"])().mark((function e(){var i,a,o,s,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(c["nb"])("getcloudusers",{time:Date.now(),state:n}),e.prev=1,e.next=4,t.cryptoMarklionWeb2("getcloudusers",{userListState:n},1e4);case 4:i=e.sent,Object(l["s"])(i.data)&&(a=i.data,o=a.cloudUserListNeedUpdate,s=a.cloudUserListState,u=a.cloudUserListTimes,t.updateCloudUsersByCloud({needUpdate:o,userListState:s,times:u})),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])}))),100))}},autoResetArtboardUpdateTimeStr:function(){var t=this.documentArtboards;!this.webViewHidden&&this.webViewFocus&&(null===t||void 0===t||t.forEach((function(t){var e=null===t||void 0===t?void 0:t.artboard;if(e){var n=e.updateTimeTimes;"number"===typeof n&&(e.updateTimeStr=Object(l["b"])(n))}})))}},computed:{notSupportArtboardStatusVersion:function(){return Object(l["j"])(this.cloudVersion)},folderUpdateTimes:function(){return this.inCloudMode?this.$store.state.cloud.folderUpdateTimes:0},cloudUsersByCloudData:function(){var t;return null!==(t=this.$store.state.userNotify.cloudUsersByCloud[this.cloudKey])&&void 0!==t?t:{}},sysTipIds:function(){return this.$store.state.userNotify.sysTipIds},userNotifyCloudList:function(){return this.$store.state.userNotify.cloudList}},watch:{webViewFocus:function(t){if(t){var e=Date.now()-this.lastAutoGetTime;e>=yr&&(this.autoCheckCloudNotify(),this.autoGetFolderPrecis(),this.autoGetArtboardStatusListLater(),this.autoResetArtboardUpdateTimeStr())}},webViewHidden:function(t){if(!t){var e=Date.now()-this.lastAutoGetTime;e>=yr&&(this.autoCheckCloudNotify(),this.autoGetFolderPrecis(),this.autoGetArtboardStatusListLater(),this.autoResetArtboardUpdateTimeStr())}},cloudIsLogin:function(){this.autoCheckCloudNotify(),this.autoGetFolderPrecis(),this.autoGetArtboardStatusListLater()}},data:function(){return{visible:!1,checkUpdateCloudUsersHandler:0,autoCheckCloudNotifyHandler:0,autoGetFolderPrecisHandler:0,lastAutoGetTime:0,autoGetArtboardStatusListHandler:0}},beforeDestroy:function(){clearTimeout(this.autoCheckCloudNotifyHandler),clearTimeout(this.autoGetFolderPrecisHandler),clearTimeout(this.checkUpdateCloudUsersHandler),clearTimeout(this.autoGetArtboardStatusListHandler)},created:function(){this.autoCheckCloudNotifyHandler=setTimeout(this.autoCheckCloudNotify,1e3),this.autoGetFolderPrecisHandler=setTimeout(this.autoGetFolderPrecis,1e3),this.autoGetArtboardStatusListLater()}},Cr=kr,Sr=Object(hr["a"])(Cr,wr,xr,!1,null,null,null),Or=Sr.exports,Ir=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"change-artboards-tip"},[e("div",{staticClass:"box"},[t._v("发现"+t._s(t.changeArtboardsCount)+"个画板有更新"),e("a",{staticClass:"btn-review-log",attrs:{href:"javascript:;"},on:{click:t.clickShowLog}},[t._v("查看日志")]),e("a",{staticClass:"btn-close",attrs:{href:"javascript:;"},on:{click:t.clearChangeArtboards}})])]):t._e()},Ar=[],Tr={methods:{clickShowLog:function(){var t=this;requestAnimationFrame((function(){t.folderPrecis.showArtboardLogNow=Date.now()})),this.clearChangeArtboards()},clearChangeArtboards:function(){this.changeArtboards.splice(0)}},computed:{visible:function(){return this.changeArtboardsCount>0},changeArtboardsCount:function(){return this.changeArtboards.length},folderPrecis:function(){return this.$store.state.folderPrecis},changeArtboards:function(){return this.folderPrecis.changeArtboards}}},jr=Tr,Fr=(n("9fec"),Object(hr["a"])(jr,Ir,Ar,!1,null,"3cef9beb",null)),Mr=Fr.exports,_r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-main"},[t.EnumNetDiskFileType.Pdf===t.fileType?e("ViewPdf"):t.EnumNetDiskFileType.Media===t.fileType?e("ViewMedia"):t.EnumNetDiskFileType.Image===t.fileType?e("ViewImage"):t.EnumNetDiskFileType.Lottie===t.fileType?e("ViewLottie"):t.isDocx?e("ViewDocx"):t.isMarkdown?e("ViewMarkdown"):t.isTextFile?e("ViewText"):e("div",{staticClass:"not-support"},[t._v("暂不支持展示文件["+t._s(t.curNetDiskFile.name)+"],请下载到本地查看:"),e("a",{attrs:{href:t.fileDownloadUrl}},[t._v("下载文件")])])],1)},Lr=[],Dr=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-docx"},[e("ImageViewer",{attrs:{canClose:!0}}),t.fetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[e("b",[t._v("文档打开中...")]),e("span",{domProps:{textContent:t._s("".concat(t.fetchData.current,"/").concat(t.fetchData.total))}})]),e("div",{staticClass:"percentage"},[e("p",{style:{width:t.fetchData.percentage}})])])]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v(t._s(t.errorText))])]):t._e(),e("div",{ref:"container",staticClass:"container"})],1)},Nr=[],Er=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"image-viewer"},[e("div",{staticClass:"header"},[e("div",{staticClass:"control"},[e("div",{staticClass:"btn-prev",class:{disable:0===t.imgList.length||t.currentIndex<1},on:{click:t.clickPrev}}),e("ScaleControl",{attrs:{type:t.EnumScaleType.ImageViewer}}),e("div",{staticClass:"btn-next",class:{disable:0===t.imgList.length||t.currentIndex>=t.imgList.length-1},on:{click:t.clickNext}}),t.canClose?e("div",{staticClass:"line"}):t._e(),t.canClose?e("div",{staticClass:"btn-close",attrs:{title:"关闭 (Esc)"},on:{click:t.clickHide}}):t._e()],1)]),e("div",{staticClass:"main"},[e("ZoomContainer",{attrs:{type:t.EnumScaleType.ImageViewer}})],1)]):t._e()},Pr=[],Rr=function(){var t=this,e=t._self._c;return e("section",{staticClass:"scale-control",class:{light:t.lightTheme}},[e("a",{staticClass:"btn-zoom btn-zoom-out",attrs:{href:"javascript:;"},on:{click:function(e){return t.setScaleZoomOut()}}}),e("span",{staticClass:"text"},[e("a",{attrs:{href:"javascript:;",title:"设置缩放为100%"},on:{click:function(e){return t.setScale(1)}}},[t._v(t._s(t.scaleText))])]),e("a",{staticClass:"btn-zoom btn-zoom-in",attrs:{href:"javascript:;"},on:{click:function(e){return t.setScaleZoomIn()}}}),e("a",{staticClass:"btn-scene-reset",attrs:{href:"javascript:;",title:"重置场景比例和偏移信息"},on:{click:t.clickResetScene}})])},Vr=[],Br=(n("d064"),n("fe80")),Ur={methods:{clickResetScene:function(){switch(this.type){case o["B"].ArtboardList:case o["B"].ArtboardDetail:this.$store.commit("setScale",{reset:!0});break;case o["B"].ImageViewer:this.resetImageViewerScale();break}},quickKey:function(t){var e=t.code||t.key;switch(e){case"-":case"Minus":var n=t.ctrlKey||t.metaKey;n&&(this.setScaleZoomOut(),t.preventDefault());break;case"=":case"Equal":var r=t.ctrlKey||t.metaKey;r&&(this.setScaleZoomIn(),t.preventDefault());break}},setScaleZoomOut:function(){var t=this.scale,e=Math.max(.3*t,.25);e=Math.min(2,e),t-=e,this.setScale(t)},setScaleZoomIn:function(){var t=this.scale,e=Math.max(.3*t,.25);e=Math.min(2,e),t+=e,this.setScale(t)},setScale:function(t){var e=this.type,n=this.scale;switch(t=Object(c["x"])(e===o["B"].ArtboardList,t),e){case o["B"].ArtboardList:this.setScaleList(t),this.resetScaleSceneCenter(t,n);break;case o["B"].ArtboardDetail:this.setScaleArtboard(t),this.resetScaleSceneCenter(t,n);break;case o["B"].ImageViewer:this.setScaleImageViewer(t);break}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},computed:{lightTheme:function(){return this.type===o["B"].ImageViewer},EnumScaleType:function(){return o["B"]},scale:function(){switch(this.type){case o["B"].ArtboardList:return this.scaleList;case o["B"].ArtboardDetail:return this.scaleArtboard;case o["B"].ImageViewer:return this.scaleImageViewer;default:return 0}},scaleText:function(){var t=Br["a"].mul(this.scale,100).toFixed(1);return-1!=t.indexOf(".0")&&(t=t.replace(".0","")),t+"%"}},created:function(){window.addEventListener("keydown",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey)},props:{type:Number}},Hr=Ur,Wr=(n("38d8"),Object(hr["a"])(Hr,Rr,Vr,!1,null,"5ce2f007",null)),$r=Wr.exports,Gr=function(){var t=this,e=t._self._c;return e("section",{ref:"$info",staticClass:"zoom-container",on:{dragstart:function(t){t.preventDefault()},click:function(e){return e.target!==e.currentTarget?null:t.clickZoomContainer(e)},mousedown:function(e){return t.mousedownZoomContainer(e)}}},[t.inCloudMode&&t.inArtboardInfoMode?e("DrawView",{attrs:{sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneX:t.sceneX,sceneY:t.sceneY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY,scale:t.scale}}):t._e(),t.cloudArtInfoMode?e("section",{staticClass:"zoom-box info-canvas"},[e("CanvasModeArtboardInfo",{attrs:{dragging:t.dragging,scale:t.scale,sceneX:t.sceneX+t.infoCanvasOffset.x,sceneY:t.sceneY+t.infoCanvasOffset.y,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneScaleKeepX:t.sceneScaleKeepX,sceneScaleKeepY:t.sceneScaleKeepY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY}})],1):t._e(),e("section",{staticClass:"zoom-box",style:t.zoomBoxOffset,on:{click:function(e){return e.target!==e.currentTarget?null:t.clickZoomContainer(e)}}},[t.cloudArtListMode?e("CanvasModeArtboardList",{ref:"$instance",attrs:{dragging:t.dragging,scale:t.scale,sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneScaleKeepX:t.sceneScaleKeepX,sceneScaleKeepY:t.sceneScaleKeepY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY}}):t.type===t.EnumScaleType.ArtboardList?e("ArtboardList",{ref:"$instance",attrs:{dragging:t.dragging,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight}}):t.inArtboardInfoMode?e("ArtboardInfo",{ref:"$instance",attrs:{dragging:t.dragging,scaling:t.scaling,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight}}):t.inImageViewerMode?e("ViewerBox",{ref:"$instance",attrs:{sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight},on:{setConfig:t.setConfig}}):t._e()],1),t.inCloudMode&&t.inArtboardInfoMode?e("CommentPoints",{attrs:{sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneX:t.sceneX,sceneY:t.sceneY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY,scale:t.scale*t.calcArtScale},on:{setConfig:t.setConfig}}):t._e()],1)},zr=[],Yr=(n("5adb"),function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"draw-view"},[e("DrawControl"),e("canvas",{ref:"canvas_history",class:{move:t.inElementMoveState},attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale},on:{mousedown:t.onMouseDown,mousemove:t.onMouseMoveInCanvas,dragstart:function(t){t.preventDefault()}}}),e("canvas",{ref:"canvas_current",staticClass:"current",attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale}}),e("div",{staticClass:"input"},[t.isCurrentInTextMode?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentDrawData.text,expression:"currentDrawData.text"}],ref:"input",style:t.textareaStyle,attrs:{spellcheck:"false"},domProps:{value:t.currentDrawData.text},on:{input:[function(e){e.target.composing||t.$set(t.currentDrawData,"text",e.target.value)},t.resetTextareaSize],keydown:t.onInputKeyDown,mousedown:function(t){t.stopPropagation()}}}):t._e()])],1):t._e()}),Xr=[],Kr=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"draw-control-box"},[e("div",{staticClass:"draw-control",class:{black:t.artboardDetailSkin},on:{mousedown:function(t){t.stopPropagation()}}},[e("ul",[e("li",{staticClass:"tool_move",class:{on:t.drawAction===t.EnumDrawAction.Move},attrs:{title:"选择对象"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Move)}}}),e("li",{staticClass:"tool_pen",class:{on:t.drawAction===t.EnumDrawAction.Brush},attrs:{title:"画笔"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Brush)}}}),e("li",{staticClass:"tool_text",class:{on:t.drawAction===t.EnumDrawAction.Text},attrs:{title:"文本输入"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Text)}}}),e("li",{staticClass:"tool_rectangle",class:{on:t.drawAction===t.EnumDrawAction.Rectangle},attrs:{title:"矩形"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Rectangle)}}}),e("li",{staticClass:"tool_ellipse",class:{on:t.drawAction===t.EnumDrawAction.Ellipse},attrs:{title:"椭圆"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Ellipse)}}}),e("li",{staticClass:"tool_arrow",class:{on:t.drawAction===t.EnumDrawAction.Arrow},attrs:{title:"箭头"},on:{click:function(e){return t.clickDrawAction(t.EnumDrawAction.Arrow)}}})]),e("ul",[e("li",{staticClass:"his_prev",class:{off:0===t.historyCount||t.historyIndex<0},attrs:{title:"回退到上一步"},on:{click:t.clickHistoryPrev}}),e("li",{staticClass:"his_next",class:{off:0===t.historyCount||t.historyIndex>=t.historyCount-1},attrs:{title:"前进到下一步"},on:{click:t.clickHistoryNext}})]),e("ul",[e("li",{staticClass:"sys_save",attrs:{title:"保存截图"},on:{click:t.clickSave}}),e("li",{staticClass:"sys_cancel",attrs:{title:"取消截图"},on:{click:t.clickCancel}})])]),t.subControlVisible?e("div",{staticClass:"draw-control-sub",class:{black:t.artboardDetailSkin},on:{mousedown:function(t){t.stopPropagation()}}},[e("div",{staticClass:"box"},[t.drawAction===t.EnumDrawAction.Text?e("div",{staticClass:"font-size"},[e("div",{staticClass:"select"},[e("div",{staticClass:"select-text",class:{on:t.fontSizeSelectOpen},on:{click:function(e){t.fontSizeSelectOpen=!t.fontSizeSelectOpen}}},[t._v(t._s(t.drawInfo.fontSize)+"px")]),t.fontSizeSelectOpen?e("ul",{staticClass:"select-list",on:{mousewheel:function(t){t.stopPropagation()},DOMMouseScroll:function(t){t.stopPropagation()}}},t._l(t.DrawFontSize,(function(n,r){return e("li",{key:r,staticClass:"select-item",class:{on:n===t.drawInfo.fontSize},on:{click:function(e){return t.clickFontSize(n)}}},[t._v(t._s(n)+"px")])})),0):t._e()])]):e("ul",{staticClass:"brush-size"},t._l(t.EnumBrushSizeType,(function(n,r){return e("li",{key:r,class:[r,t.drawInfo.brushSize===n?"on":""],on:{click:function(e){t.drawInfo.brushSize=n}}})})),0),e("ul",{staticClass:"colors"},t._l(t.DrawColors,(function(n,r){return e("li",{key:r,class:{on:t.drawInfo.colorIndex===r},on:{click:function(e){t.drawInfo.colorIndex=r}}},[e("span",{style:{borderColor:n.border,backgroundColor:n.color}})])})),0)])]):t._e()]):t._e()},qr=[],Qr=".webp",Jr=[".jpeg",".jpg",".gif",".png",Qr,".bmp"],Zr=10485760,ti=5;function ei(t,e,n,r,i){if(Object(l["s"])(t)&&r){Object(l["i"])(n)&&ri(t,n),0===e.id&&(e.id=t.userId);var a=i[e.id];a?Object.keys(e).forEach((function(t){a[t]=e[t]})):a=i[e.id]=e,t.user=a;var o=0===r.id;return o||(0!=t.replyUserId&&(a=i[t.replyUserId],t.replyUser=a||null),t.parent=r),t.atUsers={},Object(l["h"])(t.atUserIds)&&t.atUserIds.forEach((function(e){t.atUsers[e]=i[e]})),r.comments.push(t),t}}function ni(t,e,n){Object(l["s"])(t)||(t={});var r=t,i=r.list,a=r.users;a||(a=null!==n&&void 0!==n?n:{});var o=Object(l["i"])(e);return Object(l["h"])(i)?i.forEach((function(t){Object(l["s"])(t)&&(t.user=a[t.userId],t.replyUser=null,t.atUsers={},Object(l["h"])(t.atUserIds)&&t.atUserIds.forEach((function(e){t.atUsers[e]=a[e]})),Object(l["h"])(t.comments)&&t.comments.forEach((function(n){n.parent=t,n.user=a[n.userId],n.replyUser=a[n.replyUserId],n.atUsers={},Object(l["h"])(n.atUserIds)&&n.atUserIds.forEach((function(t){n.atUsers[t]=a[t]})),o&&ri(n,e)})),o&&ri(t,e))})):i=[],i}function ri(t,e){var n=t.attachMents;if(Object(l["h"])(n))for(var r=0,i=n.length;r<i;r++){var a=n[r];if(a){var o=a.fold;o&&"/"===o[0]&&(a.fold=e+o.substr(1))}}else t.attachMents=[]}var ii={methods:{clickHistoryPrev:function(){var t=this.historyIndex,e=this.drawInfo;t<0||(t-=1,e.historyIndex=t,e.historyIndexChanges=Date.now())},clickHistoryNext:function(){var t=this.historyIndex,e=this.drawInfo,n=this.histories;t>=n.length-1||(t+=1,e.historyIndex=t,e.historyIndexChanges=Date.now())},clickCleanHistory:function(){this.histories.splice(0),this.drawInfo.historyIndex=-1},clickFontSize:function(t){this.drawInfo.fontSize=t},clickDrawAction:function(t){var e;switch(this.drawAction===t&&(t=_.None),t){case _.Move:e="进入拖拽模式,可拖动对象,选中后可按delete键删除";break}e&&this.showTextTip(e),this.drawInfo.action=t},clickSave:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==t.saving){e.next=2;break}return e.abrupt("return");case 2:if(-1!==t.historyIndex&&0!==t.histories.length){e.next=5;break}return t.alert({text:"没有修改信息,无法保存"}),e.abrupt("return");case 5:if(n=t.curArtboardVerData,i=t.rect,n){e.next=9;break}return t.showTextTip("画板信息异常,无法找到画板信息"),e.abrupt("return");case 9:return e.prev=9,t.saving=!0,e.next=13,ct.save(i,t.pathPreview,t.histories,t.historyIndex);case 13:if(o=e.sent,o&&!(o.size<1)){e.next=17;break}return t.alert({text:"保存信息失败,请联系我们反馈该问题"}),e.abrupt("return");case 17:if(!(o.size>Zr)){e.next=20;break}return t.alert({text:"保存信息失败,图片大小[".concat(Object(c["vb"])(o.size),"]太大,不能超过[").concat(Object(c["vb"])(Zr),"]")}),e.abrupt("return");case 20:o.name="userdraw.jpg",o.lastModified=Date.now(),o.lastModifiedDate=new Date(o.lastModified),null===(a=t.editComment.instance)||void 0===a||a.addAttachMent(o).then((function(){t.showTextTip("图片已添加到评论附件列表")})).catch((function(e){t.showTextTip(e)})),t.editComment.drawing=!1,e.next=30;break;case 27:e.prev=27,e.t0=e["catch"](9),t.showTextTip(e.t0);case 30:return e.prev=30,t.saving=!1,e.finish(30);case 33:case"end":return e.stop()}}),e,null,[[9,27,30,33]])})))()},clickCancel:function(){this.saving=!1,this.editComment.drawing=!1},hideFontSizeSelectLater:function(){this.fontSizeSelectOpen=!1}},computed:{artboardScale:function(){var t,e=null===(t=this.curArtboardVerData)||void 0===t?void 0:t.scale;return e>0?e:1},rect:function(){var t,e=this.curArtboardVerData,n=this.artboardScale,r=null!==(t=null===e||void 0===e?void 0:e.boundsInParent)&&void 0!==t?t:new d["a"];return(new d["a"]).set(0,0,Math.round(r.width*n),Math.round(r.height*n))},curArtboardVerData:function(){var t,e=this.curArtboard;return null!==(t=null===e||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:null===e||void 0===e?void 0:e.artboard},pathPreview:function(){var t,e=this.curArtboardVerData;return e?(this.isSupportWebp&&(t=e.pathPreviewWebp),t||(t=e.pathPreview),t):null},isSupportWebp:function(){return this.$store.state.isSupportWebp===ln.Support},DrawFontSize:function(){return L},EnumBrushSizeType:function(){return N},DrawColors:function(){return E},artboardDetailSkin:function(){return this.$store.state.artboardDetailSkin},drawInfo:function(){return this.editComment.drawInfo},EnumDrawAction:function(){return _},drawAction:function(){return this.drawInfo.action},historyIndex:function(){return this.drawInfo.historyIndex},historyCount:function(){return this.histories.length},histories:function(){return this.drawInfo.histories},subControlVisible:function(){var t=this.drawAction;return t!==_.None&&t!==_.Move},visible:function(){return this.editComment.drawing}},watch:{fontSizeSelectOpen:function(t){var e=this;clearTimeout(this.fontSizeHandle),t?this.fontSizeHandle=setTimeout((function(){window.addEventListener("click",e.hideFontSizeSelectLater)}),66.67):window.removeEventListener("click",this.hideFontSizeSelectLater)}},beforeDestroy:function(){clearTimeout(this.fontSizeHandle),window.removeEventListener("click",this.hideFontSizeSelectLater)},data:function(){return{fontSizeSelectOpen:!1,fontSizeHandle:0,saving:!1}}},ai=ii,oi=(n("103b"),Object(hr["a"])(ai,Kr,qr,!1,null,"b1aae744",null)),si=oi.exports,ci={components:{DrawControl:si},methods:{onCanvasKeyDown:function(t){var e=t.keyCode,n=t.target;if(n){var r=n.tagName;if("INPUT"!==r&&"TEXTAREA"!==r){var i=n,a=document.documentElement;while(null!=i&&i!=a){if(i.isContentEditable)return;i=i.parentNode}if(46===e||8===e){var o=this.drawInfo,s=this.histories,c=this.historyIndex,l=o.selectItem;if(!l)return;o.selectItem=null;var u=new rt;u.action=_.Deleted,u.dragTarget=l,u.drawOffset=new P,u.makePoint(),u.isVaildData(),c<s.length-1&&s.splice(c+1),s.push(u),o.historyIndex=s.length-1;var d=u.dragTarget,h=s.findIndex((function(t){return t===d}));if(-1===h)console.error("异常信息,无法找到原始数据",u);else{var f=0;while(-1!==f){if(f=s.findIndex((function(t){return t.action===_.Move&&t.dragFrom===h})),-1===f)break;var m=s[f];d.dragOn=f,h=f,d=m}u.dragFrom=h,d.dragOn=s.length-1}this.drawAll()}}}},getCanvasDrawNum:function(t){return Math.round(t*this.canvasScale)},getLocation:function(t){var e=t.pageX,n=t.pageY,r=t.sceneX,i=t.sceneY,a=t.scale,o=t.sceneWidth,s=t.sceneHeight,c=e,l=n,u=this.sceneOffsetX,d=this.sceneOffsetY,h=this.rect,f=(o-h.width*a)/2,m=(s-h.height*a)/2;return c-=u,l-=d,c-=f,l-=m,c-=r,l-=i,c=Math.round(c/a),l=Math.round(l/a),new P(c,l)},saveTextToHistory:function(){if(this.isCurrentInTextMode){var t=this.currentDrawData;if(t.isVaildData()){t.makePoint(this.getCurrentContext(),this.currentSceneInfo);var e=this.histories,n=this.historyIndex;n<e.length-1&&e.splice(n+1),e.push(t),this.drawInfo.historyIndex=e.length-1,this.drawHistories(t)}return this.currentDrawData=null,!0}return!1},getHistoryTagetWithDragFrom:function(t){if(null==t)return null;if(t.action!==_.Move)return null;var e=t.dragFrom;if(-1===e)return null;var n=this.histories;while(-1!==e){var r=n[e];if(!r)return null;if(r.action!==_.Move)return r;if(e=r.dragFrom,-1===e)return null}},getHistoryByPointExact:function(t){for(var e=this.histories,n=Math.min(this.historyIndex+1,e.length),r=(new d["a"]).set(t.x,t.y,1,1),i=n-1;i>=0;i--){var a=e[i],o=this.getRectOverlapDrawData(r,e,a,i);if(null!=o)return o}return null},getHistoryByPoint:function(t){for(var e=this.histories,n=Math.min(this.historyIndex+1,e.length),r=(new d["a"]).set(t.x,t.y,1,1),i=n-1;i>=0;i--){var a=e[i],o=this.getRectOverlapDrawData(r,e,a,i);if(null!=o)return o}return null},getRectOverlapDrawData:function(t,e,n,r){var i,a=n.action,o=null!==(i=n.dragOffset)&&void 0!==i?i:new P;if(a===_.Deleted)return null;if(a===_.Move){if(-1!==n.dragOn){var s=e[n.dragOn];if(s&&(s.action===_.Move||s.action===_.Deleted)&&s.dragFrom===r)return null}var c=this.getHistoryTagetWithDragFrom(n);if(!c)return null;var l=c.eventRect;if(!l)return null;var u=(new d["a"]).set(l.x+o.x,l.y+o.y,l.width,l.height);if(u.isOverlap(t))return{target:c,offset:o}}else{var h=ct.getHistoryTagetWithDragOn(e,n,this.historyIndex);if(h&&h.action===_.Deleted)return null;h||(h=n);var f,m=n.eventRect;if(h===n)return m&&m.isOverlap(t)?{target:h,offset:new P}:null;o=null!==(f=h.dragOffset)&&void 0!==f?f:new P;var p=(new d["a"]).set(m.x+o.x,m.y+o.y,m.width,m.height);if(p.isOverlap(t))return{target:n,offset:o}}return null},onMouseMoveInCanvas:function(t){var e=this.currentDrawData,n=this.drawInfo,r=this.inDrawAndNotMove,i=this.histories,a=this.moveInfo,o=n.action;if(o===_.Move&&!e&&0!==i.length){var s=this.inMacOS?t.metaKey:t.ctrlKey;if(!r||!s){a.pageX=t.pageX,a.pageY=t.pageY,a.scale=this.scale,a.sceneX=this.sceneX,a.sceneY=this.sceneY,a.sceneWidth=this.sceneWidth,a.sceneHeight=this.sceneHeight;var c=this.getLocation(a),l=this.getHistoryByPointExact(c),u=n.enterItem,d=null===l||void 0===l?void 0:l.target;u!=d&&(n.enterItem=d,this.drawAll())}}},onMouseDown:function(t){var e=this.inMacOS?t.metaKey:t.ctrlKey,n=this.startInfo,r=this.inDrawAndNotMove,i=this.drawAction,a=this.drawInfo;if(r){if(e)return;t.stopPropagation()}if(i!==_.Text||!this.saveTextToHistory()){switch(i){case _.Move:case _.Brush:case _.Text:case _.Rectangle:case _.Ellipse:case _.Arrow:n.pageX=t.pageX,n.pageY=t.pageY,n.scale=this.scale,n.sceneX=this.sceneX,n.sceneY=this.sceneY,n.sceneWidth=this.sceneWidth,n.sceneHeight=this.sceneHeight;break;default:return}var o=this.getLocation(n),s=new rt;if(i===_.Move){var c=this.getHistoryByPoint(o);if(null==c)return void(a.selectItem&&(a.selectItem=null,this.drawAll()));if(c.action===_.Deleted)return;s.dragTarget=c.target,s.dragOffset=c.offset}switch(this.currentDrawData=s,s.action=i,s.color=this.currentColor.color,i!==_.Move&&this.cleanCurrent(),i){case _.Move:s.startPoint=s.endPoint=o,this.drawHistories(),this.drawCurrent();break;case _.Brush:s.brushSize=this.currentBrushSize,s.points=[o];break;case _.Rectangle:case _.Ellipse:case _.Arrow:s.brushSize=this.currentBrushSize,s.startPoint=o;break;case _.Text:return s.startPoint=o,s.text="",s.fontSize=this.currentFontSize,s.lineHeight=s.fontSize+2,s.textareaSize=new Y(K,s.lineHeight),void(s.family=l["d"]?'-apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n\t\t"Helvetica Neue", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"':'-apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "PingFang SC", "Hiragino Sans GB",\n\t\t\t"Helvetica Neue", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji"')}window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}},onMouseMove:function(t){var e=this.currentDrawData;if(e){var n=e.action;if(n!==_.Text){var r=this.getCurrentContext();if(r){var i=this.getLocation({pageX:t.pageX,pageY:t.pageY,scale:this.scale,sceneX:this.sceneX,sceneY:this.sceneY,sceneWidth:this.sceneWidth,sceneHeight:this.sceneHeight}),a=this.currentSceneInfo;switch(n){case _.Move:e.endPoint=i,this.drawCurrent();break;case _.Brush:e.points.push(i),this.cleanCurrent(r),ct.drawBrush(r,e,a,!1,!1,null);break;case _.Rectangle:e.endPoint&&this.cleanCurrent(r),e.endPoint=i,ct.drawRectangle(r,e,a);break;case _.Ellipse:e.endPoint&&this.cleanCurrent(r),e.endPoint=i,ct.drawEllipse(r,e,a);break;case _.Arrow:e.endPoint&&this.cleanCurrent(r),e.endPoint=i,ct.drawArrow(r,e,a);break;default:return}}}}},onMouseUp:function(t){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp);var e=this.currentDrawData;this.currentDrawData=null;var n=this.drawInfo;if(e&&e.isVaildData()){e.makePoint();var r=this.histories,i=this.historyIndex;if(i<r.length-1&&r.splice(i+1),r.push(e),n.historyIndex=r.length-1,e.action===_.Move){var a=e.dragTarget,o=r.findIndex((function(t){return t===a}));if(-1===o)console.error("异常信息,无法找到原始数据",e);else{var s=0;while(-1!==s){if(s=r.findIndex((function(t){return t.action===_.Move&&t.dragFrom===o})),-1===s)break;var c=r[s];a.dragOn=s,o=s,a=c}e.dragFrom=o,a.dragOn=r.length-1}n.selectItem=this.getDrawDataFromMouse(t)}this.drawHistories(e.action===_.Move?null:e),this.cleanCurrent()}else e.action===_.Move&&(n.selectItem=this.getDrawDataFromMouse(t),this.drawHistories(),this.cleanCurrent())},getDrawDataFromMouse:function(t){var e=this.getLocation({pageX:t.pageX,pageY:t.pageY,scale:this.scale,sceneX:this.sceneX,sceneY:this.sceneY,sceneWidth:this.sceneWidth,sceneHeight:this.sceneHeight}),n=this.getHistoryByPointExact(e);return null===n||void 0===n?void 0:n.target},getDrawTarget:function(){},drawHistories:function(t){var e,n=this.getHistoryContext();if(n){var r,i=!t,a=this.histories,o=this.historyIndex,s=this.drawInfo;if(i){if(n.clearRect(0,0,this.getCanvasDrawNum(this.sceneWidth),this.getCanvasDrawNum(this.sceneHeight)),-1===o)return;if(r=o>=a.length-1?a:a.slice(0,o+1),0===r.length)return}else r=[t];var c=this.currentSceneInfo,l=null===(e=this.currentDrawData)||void 0===e?void 0:e.dragTarget;r.forEach((function(t){if(t!==l){var e,r=s.action===_.Move,i=r&&t==s.enterItem,u=r&&t==s.selectItem,d=t.action;switch(d){case _.Brush:case _.Rectangle:case _.Ellipse:case _.Arrow:case _.Text:var h=ct.getHistoryTagetWithDragOn(a,t,o);if(h){if(h.action===_.Deleted)return;e=h.dragOffset}break}switch(d){case _.Brush:var f=!1;ct.drawBrush(n,t,c,i,u,e,f);break;case _.Rectangle:ct.drawRectangle(n,t,c,i,u,e);break;case _.Ellipse:ct.drawEllipse(n,t,c,i,u,e);break;case _.Arrow:ct.drawArrow(n,t,c,i,u,e);break;case _.Text:ct.drawText(n,t,c,i,u,e);break;default:return}}}))}},cleanCurrent:function(t){(t||(t=this.getCurrentContext(),t))&&t.clearRect(0,0,this.getCanvasDrawNum(this.sceneWidth),this.getCanvasDrawNum(this.sceneHeight))},drawCurrent:function(){var t=this.currentDrawData;if(t){var e=this.getCurrentContext();if(e){this.cleanCurrent(e);var n=this.currentSceneInfo,r=t.action,i=r!==_.Move,a=!i;switch(r){case _.Move:var o=t.dragTarget;if(!o)return;var s=t.startPoint,c=t.endPoint,l=t.dragOffset;if(!s||!c)return;var u=new P(c.x-s.x+l.x,c.y-s.y+l.y);switch(o.action){case _.Brush:var d=!1;ct.drawBrush(e,o,n,i,a,u,d);break;case _.Rectangle:ct.drawRectangle(e,o,n,i,a,u);break;case _.Ellipse:ct.drawEllipse(e,o,n,i,a,u);break;case _.Arrow:ct.drawArrow(e,o,n,i,a,u);break;case _.Text:ct.drawText(e,o,n,i,a,u);break}break;case _.Brush:ct.drawBrush(e,t,n,!1,!1,null);break;case _.Rectangle:ct.drawRectangle(e,t,n);break;case _.Ellipse:ct.drawEllipse(e,t,n);break;case _.Arrow:ct.drawArrow(e,t,n);break;default:return}}}},getHistoryContext:function(){var t=this.$refs.canvas_history;if(t){var e=t.getContext("2d");return e}},getCurrentContext:function(){var t=this.$refs.canvas_current;if(t){var e=t.getContext("2d");return e}},drawAll:function(){var t=this;this.visible&&(cancelAnimationFrame(this.handleDraw),this.handleDraw=requestAnimationFrame((function(){try{t.drawCurrent(),t.drawHistories()}finally{}})))},measureTextSize:function(t,e,n){var r,i=this.currentSceneInfo,a=i.scale;a=1;var o=Math.max(12,Math.round(e.fontSize*a*1e3)/1e3);t.font="".concat(o,"px ").concat(null!==(r=e.family)&&void 0!==r?r:"sans-serif");for(var s=e.lineHeight,c=n||e.text,l=new Y(0,s),u=0,d=Math.round(Q*a),h={},f=0,m=c.length;f<m;f++){var p=c[f];if("\n"!==p){if("\r"!==p){var b=h[p];b||(b=h[p]=Math.ceil(t.measureText(p).width));var v=u+b+1;v>d?(l.width=Math.max(u,l.width),l.height+=s,u=b):u=v}}else l.width=Math.max(u,l.width),u=0,l.height+=s}return l.width=Math.ceil(Math.max(u,l.width)/a),l},resetTextareaSize:function(){var t=this.currentDrawData;if(t&&t.action===_.Text){var e=this.$refs.input;if(e){var n=this.getCurrentContext();if(n){var r=this.measureTextSize(n,t,e.value);r.width=Math.max(r.width,K),t.textareaSize=r}}}},onInputKeyDown:function(t){var e=t.keyCode;switch(e){case 27:this.isCurrentInTextMode&&(this.currentDrawData=null)}},resetData:function(){this.currentDrawData=null;var t=this.drawInfo,e=this.histories;e.splice(0),t.historyIndex=-1,t.action=_.None}},watch:{inElementSelect:function(t){t?window.addEventListener("keydown",this.onCanvasKeyDown):window.removeEventListener("keydown",this.onCanvasKeyDown)},artboardInComment:function(t){t||(this.editComment.drawing=!1)},historyIndexChanges:function(){this.drawAll()},visible:function(t){t&&this.resetData()},curArtboardId:function(){this.editComment.drawing=!1},"curArtboardVerData.lastVersionId":function(){this.editComment.drawing=!1},currentFontSize:function(t){var e=this;if(this.isCurrentInTextMode){var n=this.currentDrawData;n&&(n.fontSize=t,n.lineHeight=n.fontSize+2,requestAnimationFrame((function(){e.resetTextareaSize();var t=e.$refs.input;t&&t.focus()})))}},scale:function(){var t=this;requestAnimationFrame((function(){t.resetTextareaSize()}))},currentColor:function(t){var e=this;if(this.isCurrentInTextMode){var n=this.currentDrawData;n&&(n.color=t.color,requestAnimationFrame((function(){var t=e.$refs.input;t&&t.focus()})))}},isCurrentInTextMode:function(t){var e=this;t&&this.$nextTick((function(){requestAnimationFrame((function(){var t=e.$refs.input;t&&t.focus()}))}))},drawAction:function(t,e){if(e===_.Text&&this.saveTextToHistory(),e===_.Move||t===_.Move){var n=this.drawInfo;n.enterItem=n.selectItem=null,this.drawAll()}},"histories.length":function(t,e){t<e&&this.drawAll()},currentSceneInfo:function(){this.drawAll()}},computed:{inElementSelect:function(){var t=this.drawInfo,e=t.action;return e===_.Move&&null!=t.selectItem},inElementMoveState:function(){var t=this.drawInfo,e=t.action;return e===_.Move&&null!=t.enterItem},historyIndexChanges:function(){return this.drawInfo.historyIndexChanges},isCurrentInTextMode:function(){var t=this.currentDrawData;return t&&t.action===_.Text},currentSceneInfo:function(){var t=new at,e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=this.canvasScale,s=this.sceneOffsetX,c=this.sceneOffsetY,l=this.getLocation({pageX:s,pageY:c,sceneX:e,sceneY:n,scale:r,sceneWidth:i,sceneHeight:a});return t.offset=l,t.scale=r,t.canvasScale=o,t.sceneWidth=i,t.sceneHeight=a,t},currentBrushSize:function(){return this.drawInfo.brushSize},currentFontSize:function(){return this.drawInfo.fontSize},textareaStyleLeft:function(){var t=this.currentSceneInfo,e=this.currentDrawData;return Math.round((e.startPoint.x-t.offset.x-q)*this.scale)},textareaStyle:function(){if(this.isCurrentInTextMode){var t=this.currentDrawData,e=this.currentSceneInfo,n=this.scale,r=Math.max(1,Math.round(t.lineHeight*n)),i=Math.max(1,Math.round(t.fontSize*n*1e3)/1e3),a=1,o=12;return i<o&&(a=i/o,i=o),{backgroundColor:this.currentTextBackgroundColor,borderColor:this.currentColor.color,color:this.currentColor.color,fontSize:i+"px",transform:"scale(".concat(a.toFixed(5),")"),lineHeight:r+"px",left:this.textareaStyleLeft+"px",top:Math.round((t.startPoint.y-e.offset.y-t.lineHeight/2-q+1)*n)+"px",padding:Math.round(q*n)+"px",height:Math.max(1,Math.round(t.textareaSize.height*n))+"px",width:Math.max(1,Math.round((t.textareaSize.width+2)*n/a))+"px"}}},currentTextBackgroundColor:function(){var t=this.currentColor.color,e=this.drawAction;return e===_.Text&&(t=J(t,.2)),t},currentColor:function(){var t;return null!==(t=E[this.drawInfo.colorIndex])&&void 0!==t?t:E[0]},artboardDetail:function(){return this.$store.state.artboardDetail},curArtboardVerData:function(){var t,e=this.curArtboard,n=this.artboard;return null!==(t=null===e||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:n},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardScale:function(){var t,e=null===(t=this.curArtboardVerData)||void 0===t?void 0:t.scale;return e>0?e:1},rect:function(){var t,e=this.curArtboardVerData,n=this.artboardScale,r=null!==(t=null===e||void 0===e?void 0:e.boundsInParent)&&void 0!==t?t:new d["a"];return(new d["a"]).set(0,0,Math.round(r.width*n),Math.round(r.height*n))},inDrawAndNotMove:function(){var t=this.drawAction;switch(t){case _.None:return!1;default:return!0}},drawInfo:function(){return this.editComment.drawInfo},EnumDrawAction:function(){return _},drawAction:function(){return this.drawInfo.action},histories:function(){return this.drawInfo.histories},historyIndex:function(){return this.drawInfo.historyIndex},visible:function(){return this.editComment.drawing}},data:function(){return{handleDraw:0,canvasScale:Object(c["L"])(),startInfo:{pageX:0,pageY:0,sceneX:0,sceneY:0,scale:1,sceneWidth:0,sceneHeight:0},moveInfo:{pageX:0,pageY:0,sceneX:0,sceneY:0,scale:1,sceneWidth:0,sceneHeight:0},currentDrawData:null}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number,sceneOffsetX:Number,sceneOffsetY:Number,scale:Number},created:function(){this.resetData()},beforeDestroy:function(){this.editComment.drawing=!1,cancelAnimationFrame(this.handleDraw),window.removeEventListener("keydown",this.onCanvasKeyDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)}},li=ci,ui=(n("cd9d"),Object(hr["a"])(li,Yr,Xr,!1,null,"8d8faf70",null)),di=ui.exports,hi=function(){var t=this,e=t._self._c;return e("div",{ref:"box",staticClass:"viewer-box",style:t.style,on:{contextmenu:function(t){t.preventDefault()}}},[t.fetchState===t.FetchState.Fetching?e("div",{staticClass:"loading"},[t._v("图片加载中...")]):t.fetchState===t.FetchState.Error?e("div",{staticClass:"error"},[t._v(" 图片加载失败,"),e("a",{attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v("重新加载")])]):t._e(),e("img",{directives:[{name:"show",rawName:"v-show",value:t.fetchState===t.FetchState.Success,expression:"fetchState===FetchState.Success"}],staticClass:"preview",attrs:{src:t.currentImgShowSrc},on:{load:t.onImgLoad,error:t.onImgError}})])},fi=[],mi={methods:{clickReload:function(){this.fetchState=c["a"].Fetching,this.randomUrl=Date.now()},clickZoomContainer:function(){},canEmitEvent:function(){return this.fetchState===c["a"].Success},onSceneResize:function(t,e,n){var r=this.canScale&&0!==this.scale;if(!r||n){var i=this.rect;if(i&&0!==t&&0!==e){var a=i.width/t,o=i.height/e,s=Math.max(a,o);0!==s&&(s=.92/s,s>2&&(s=2),this.setScaleImageViewer(s))}}},onImgLoad:function(t){var e=this.currentImg;if(e){var n=t.target;if(n){this.fetchState=c["a"].Success;var r=this.currentImgSrcBlobUrl||this.currentImgSrc,i=n.src;-1!==i.indexOf(r)&&(e.width=n.naturalWidth,e.height=n.naturalHeight),this.resetImageViewerScale(),this.disposeBlobUrl()}}},onImgError:function(){this.fetchState=c["a"].Error,this.disposeBlobUrl()},disposeBlobUrl:function(t){var e=this.currentImgSrcBlobUrl;e&&(URL.revokeObjectURL(e),t&&(this.currentImgSrcBlobUrl=null))},createBlobUrl:function(t){(t instanceof File||t instanceof Blob)&&(this.currentImgSrcBlobUrl=URL.createObjectURL(t))}},computed:{FetchState:function(){return c["a"]},rect:function(){if(this.canScale){var t=this.currentImg;return(new d["a"]).set(0,0,t.width,t.height)}},canScale:function(){var t=this.currentImg;return!!t&&(0!==t.width||0!==t.height)},imgList:function(){return this.imageViewer.imgList},currentIndex:function(){return this.imageViewer.currentIndex},currentImg:function(){var t=this.imgList;return t?t[this.currentIndex]:null},currentImgSrc:function(){var t,e;return null!==(t=null===(e=this.currentImg)||void 0===e?void 0:e.imgSrc)&&void 0!==t?t:""},currentImgShowSrc:function(){var t=this.currentImgSrcBlobUrl||this.currentImgSrc;if(!t)return t;var e=this.randomUrl;return 0===e?t:"".concat(t,"?r=").concat(e)},imageViewer:function(){return this.$store.state.imageViewer},scale:function(){return this.scaleImageViewer},style:function(){var t=this.scale,e=this.currentImg;return e?this.fetchState!==c["a"].Success?{transform:"translate3d(".concat(-this.sceneX,"px, ").concat(-this.sceneY,"px, 1px)")}:{width:Math.ceil(e.width*t)+"px",height:Math.ceil(e.height*t)+"px"}:null}},watch:{currentImgSrc:function(t){this.disposeBlobUrl(!0),this.fetchState=c["a"].Fetching,this.randomUrl=0,this.$emit("setConfig",{sceneX:0,sceneY:0}),this.createBlobUrl(t)}},data:function(){return{fetchState:c["a"].Normal,randomUrl:0,currentImgSrcBlobUrl:""}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number},beforeDestroy:function(){this.disposeBlobUrl(!0)},created:function(){var t=this.currentImgSrc;t&&(this.fetchState=c["a"].Fetching,this.createBlobUrl(t))}},pi=mi,bi=(n("0c4e"),Object(hr["a"])(pi,hi,fi,!1,null,"ff3b7fe6",null)),vi=bi.exports,gi=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"commentPoints",staticClass:"comment-points",class:{prevent:t.preventPointEnable,"in-drawing":t.inDrawing},on:{mousedown:t.onMouseDownInScene}},[t._l(t.renderPointComments,(function(n){return e("CommentPointItem",{key:n.id,attrs:{comment:n,text:n.pointIndex,pointX:n.pointX,pointY:n.pointY,sceneInfo:t.currentSceneInfo,artboardRect:t.rect},on:{onLocationChange:t.onLocationChangeComment,setConfig:t.setConfig}})})),t.pointInfo.point.enable?e("CommentPointItem",{attrs:{comment:null,text:t.nextPointIndex,pointX:t.pointInfo.point.x,pointY:t.pointInfo.point.y,sceneInfo:t.currentSceneInfo,artboardRect:t.rect},on:{onLocationChange:t.onLocationChangeEditor,setConfig:t.setConfig}}):t._e(),t.preventPointEnable?e("CommentPointItem",{attrs:{comment:null,text:t.nextPointIndex,pointX:t.pointInfo.preventPoint.x,pointY:t.pointInfo.preventPoint.y,prevent:!0,artboardRect:t.rect,sceneInfo:t.currentSceneInfo}}):t._e()],2):t._e()},wi=[],xi=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"comment-point",class:{prevent:t.prevent,on:t.isSelectCurrent,canMove:t.canMove},style:t.style},[e("div",{staticClass:"text",class:{on:t.isSelectCurrent},on:{mousedown:function(e){return e.stopPropagation(),t.onMouseDown.apply(null,arguments)},click:t.onClick}},[t._v(t._s(t.text))]),t.comment&&t.popMsg.visible?e("CommentPointItemCommentContent",{attrs:{comment:t.comment,popMsg:t.popMsg},on:{clickGoComment:t.setSelectComment,clickIgnore:t.ignoreThisClickPopMsg}}):t._e()],1):t._e()},yi=[],ki=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-detail",on:{"!click":function(e){return t.clickIgnore.apply(null,arguments)}}},[e("div",{staticClass:"content"},[e("div",{staticClass:"summary"},[e("span",{domProps:{innerHTML:t._s(t.summaryHTML)}})]),t.attachMentImgs.length>0?e("ul",{staticClass:"attachments"},t._l(t.attachMentImgs,(function(n,r){return e("li",{key:r,on:{click:function(e){return e.preventDefault(),t.clickAttach(n)}}},[e("BlobImage",{attrs:{image:n.preview}})],1)})),0):t._e(),e("div",{staticClass:"date"},[t.artboardVer?e("span",{staticClass:"artboard-ver",attrs:{title:"评论的画板版本#".concat(t.comment.artboardVer)},domProps:{textContent:t._s(t.artboardVer)},on:{click:function(e){return t.setCurArtboardVer(t.comment.artboardVer)}}}):t._e(),t._v(t._s(t.comment.dateStr))])]),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[e("UserFace2",{attrs:{self:t.isSelfComment,tourist:t.isTourist,title:t.userFaceTitle,text:t.userFaceText}}),e("span",{staticClass:"name-value",attrs:{title:t.userFaceTitle}},[t._v(t._s(t.userNickName))])],1),e("a",{attrs:{href:"javascript:;"},on:{click:t.clickGoComment}},[t._v("回复")])])])},Ci=[],Si=function(){var t=this,e=t._self._c;return e("div",{staticClass:"image"},[t.loadState===t.FetchState.Fetching?e("div",{staticClass:"loading"}):t.loadState===t.FetchState.Error?e("div",{staticClass:"error",attrs:{title:"图片加载失败"}}):t._e(),t.localUrl&&t.loadState!==t.FetchState.Error?e("img",{class:{on:t.loadState===t.FetchState.Success},attrs:{src:t.localUrl},on:{load:t.onImageLoad,error:t.onImgError}}):t._e()])},Oi=[],Ii={methods:{onImageLoad:function(){this.loadState=c["a"].Success,this.disposeBlobUrl()},onImgError:function(){this.loadState=c["a"].Error,this.disposeBlobUrl()},loadImage:function(){var t=this.image;if(t){if(Object(l["i"])(t))return this.localUrl=t,void(this.loadState=c["a"].Fetching);this.loadState=c["a"].Fetching;try{this.localUrl=URL.createObjectURL(t)}catch(e){this.loadState=c["a"].Error,this.localUrl=""}}},disposeBlobUrl:function(){var t=this.localUrl;t&&0===t.indexOf("blob:")&&URL.revokeObjectURL(t)},unloadImage:function(){var t=this.localUrl;t&&0===t.indexOf("blob:")&&(URL.revokeObjectURL(t),this.localUrl="",this.loadState=c["a"].Normal)}},computed:{FetchState:function(){return c["a"]}},watch:{image:function(){this.unloadImage(),this.loadImage()}},beforeDestroy:function(){this.unloadImage()},created:function(){this.loadImage()},data:function(){return{localUrl:"",loadState:c["a"].Normal}},props:{image:{type:[File,Blob,String]}}},Ai=Ii,Ti=(n("1491"),Object(hr["a"])(Ai,Si,Oi,!1,null,"a98298fc",null)),ji=Ti.exports,Fi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userface",class:{self:t.self,tourist:t.tourist},attrs:{title:t.title}},[t._v(" "+t._s(t.text)+" ")])},Mi=[],_i={props:{title:String,text:String,self:Boolean,tourist:Boolean}},Li=_i,Di=(n("4d32"),Object(hr["a"])(Li,Fi,Mi,!1,null,"1eb5422f",null)),Ni=Di.exports,Ei=[{name:"solve",text:"确认",enumValue:7},{name:"lookat",text:"看这",enumValue:8},{name:"great",text:"哇",enumValue:9},{name:"compare",text:"对比",enumValue:10},{name:"zhenbang",text:"赞",enumValue:6},{name:"aixin",text:"爱心",enumValue:1},{name:"wenhao",text:"问号",enumValue:4},{name:"666",text:"666",enumValue:11},{name:"tanhao",text:"惊叹",enumValue:3},{name:"zantong",text:"+1",enumValue:5},{name:"haode",text:"OK",enumValue:2},{name:"tuding",text:"图钉",enumValue:12}],Pi={};function Ri(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(t.length<=e)return t;var n="...",r=e-n.length,i=t.substring(0,r)+n;return i}Ei.forEach((function(t){Pi[t.text]=t,t.texts&&t.texts.forEach((function(e){Pi[e]=t}))}));var Vi=Object(c["lb"])();function Bi(t,e){var n=t.index++;return t[n]=e,"\\--".concat(Vi,"-{map:").concat(n,"}--\\")}function Ui(t,e){return"string"!==typeof e?e:$i(e).replace(/\\--([\w]+)-{map:(\d+)}--\\/gi,(function(e,n,r){var i;return n!==Vi?e:null!==(i=t[r])&&void 0!==i?i:""}))}function Hi(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(l["i"])(e)?e.replace(/\[([^\]]{1,4})\]/g,(function(e,r){var i=Pi[r];return i?n?"":Bi(t,'<span class="icon-emoji emoji-'.concat(i.name,'"></span>')):e})):e}function Wi(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.replace(/https?:\/\/([\w-]+\.)+[\w-]+(:\d+)?(\/[\w-+./?%&=#]*)?/gi,(function(e){var r=e;return n&&(r=Ri(e)),Bi(t,'<a class="out-link" target="_blank" title="'.concat(e,'" href="').concat(e,'">').concat(r,"</a>"))}))}function $i(t){return t.replace(/[&<>"']/g,(function(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#39;";default:return t}}))}function Gi(t){if(!Object(l["i"])(t))return t;var e={index:0};return Ui(e,Wi(e,t,!0))}function zi(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object(l["i"])(t)?(r=r||{index:0},n||(t=Hi(r,t),t=Wi(r,t)),Object(l["s"])(e)&&(t=t.replace(/\[@uid:(\d+);\]/g,(function(t,i){var a=e[i];if(!a)return t;var o=$i(a.nickName);return n?"@".concat(o):Bi(r,'<span class="at-user-item" title="'.concat(o,"(").concat(a.email,')">@').concat(o,"</span>"))}))),Ui(r,t)):t}var Yi={components:{UserFace2:Ni,BlobImage:ji},methods:{clickGoComment:function(){this.$emit("clickGoComment",this.comment,!0)},clickIgnore:function(){this.$emit("clickIgnore")},setCommentEditorVisibleId:function(t){this.$store.commit("setCommentEditorVisibleId",t)},clickAttach:function(t){var e=this.attachMentImgs.map((function(t){return t.imgSrc})),n=e.findIndex((function(e){return e===t.imgSrc}));-1===n&&(n=0),this.$store.commit("setImageViewer",{imgList:e,currentIndex:n})}},computed:{isReply:function(){var t=this.comment;return!!t&&0!==t.commentId},artboardVer:function(){var t=this.comment.artboardVer,e=this.isReply;return null==t||e?null:"#".concat(t)},summaryHTML:function(){return zi(this.comment.summary,this.comment.atUsers)},users:function(){var t;return null!==(t=this.$store.state.artboardDetail.commentUsers)&&void 0!==t?t:{}},selectComment:function(){return this.$store.state.artboardDetail.selectComment},attachMentImgs:function(){var t,e=null===(t=this.comment)||void 0===t?void 0:t.attachMents,n=[];return e?(e.forEach((function(t){if(t){var e=t.thumbFileName||t.fileName;e&&n.push({imgSrc:t.fold+t.fileName,preview:t.fold+e})}})),n):n},userFaceTitle:function(){var t=this.comment;if(!t)return null;var e=t.user;return e?"".concat(e.nickName,"(").concat(e.email,")"):null},userNickName:function(){var t=this.comment;if(!t)return"-";var e=t.user;if(!e)return"-";var n=e.nickName;return n||"-"},isSelfComment:function(){var t=this.comment;if(!t)return!1;var e=t.user;return!!e&&e.userKey===this.cloudUserKey},isTourist:function(){var t=this.comment;if(!t)return!1;var e=t.user;if(!e)return!1;switch(e.authority){case o["m"].Admin:case o["m"].Designer:return!1}return!0},userFaceText:function(){var t=this.userNickName;return t[t.length-1]}},props:{popMsg:Object,comment:Object}},Xi=Yi,Ki=(n("4c8d"),Object(hr["a"])(Xi,ki,Ci,!1,null,"607c677e",null)),qi=Ki.exports,Qi=300,Ji=227,Zi=270,ta={components:{CommentPointItemCommentContent:qi},methods:{onMouseDown:function(t){this.moving=!1,window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp);var e=this.moveData;e.startX=t.clientX,e.startY=t.clientY},onMouseMove:function(t){var e=this.moveData;e.endX=t.clientX,e.endY=t.clientY,!this.moving&&(Math.abs(e.endX-e.startX)>=3||Math.abs(e.endY-e.startY)>=3)&&(this.moving=!0,this.canMove||this.showTextTip("只能移动自己发表的评注,请联系评论发布者或管理员")),this.canMove||(e.endX=e.startX,e.endY=e.startY)},onMouseUp:function(t){var e=this;window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp);var n=this.moveData,r=this.moving,i=this.canMove;if(i){if(r&&!this.prevent){n.endX=t.clientX,n.endY=t.clientY;var a=new P(this.pointX,this.pointY);if(!this.prevent){var o=this.moveData;a=ct.getCanvasLocation(this.sceneInfo,a),this.moving&&(a.left+=o.endX-o.startX,a.top+=o.endY-o.startY)}requestAnimationFrame((function(){e.$emit("onLocationChange",e.comment,a.x,a.y)}))}}else requestAnimationFrame((function(){e.moving=!1}))},onClick:function(){var t=this,e=this.comment,n=this.moving;if(!n)if(e){if(this.pointCommentShowAlways&&!this.artboardInComment)return void setTimeout((function(){var e=t.popMsg;e.ignoreThisClick=!1,e.visible=!0,t.pointInView||t.movePointToSceneCenter()}),10);this.setSelectComment(e)}else{this.showTextTip("待提交的评论评注"),this.artboardInComment||this.$store.commit("setRightNavType",o["A"].Comment);var r=300;this.artboardCommentVisible&&(r=50),this.$store.commit("artboardCommentVisible",!0),setTimeout((function(){var e=t.pointInfo.instance;e&&e.focus()}),r)}},setSelectComment:function(t,e){this.artboardInComment||this.$store.commit("setRightNavType",o["A"].Comment),this.$store.commit("setSelectComment",{comment:t,openEditor:e})},movePointToSceneCenter:function(){var t=this.sceneInfo,e=this.artboardRect,n=this.pointX,r=this.pointY,i=t.scale,a=(e.width/2-n)*i,o=(e.height/2-r)*i;this.$emit("setConfig",{sceneX:a,sceneY:o})},ignoreThisClickPopMsg:function(){var t=this.popMsg;t.ignoreThisClick=!0},hidePopMsg:function(){var t=this.popMsg;this.moving||(clearTimeout(t.handleHide),t.handleHide=setTimeout((function(){t.ignoreThisClick?t.ignoreThisClick=!1:t.visible=!1}),50))}},beforeDestroy:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("click",this.popMsg.hidePopMsg,!0),clearTimeout(this.popMsg.handleHide)},computed:{pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},commentVisible:function(){return this.artboardInComment&&this.artboardCommentVisible},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},leftVisible:function(){return this.$store.state.artboardDetail.leftSideVisible},pointInfo:function(){return this.$store.state.editComment.pointInfo},isSelectCurrent:function(){var t=this.comment,e=this.selectComment;return e===t&&null!=t},selectComment:function(){return this.$store.state.artboardDetail.selectComment},canMove:function(){return!this.prevent&&(this.isSelfComment||this.cloudUserIsOwner)},isSelfComment:function(){var t=this.comment;if(!t)return!0;var e=t.user;return!!e&&e.userKey===this.cloudUserKey},pointInView:function(){var t=this.location,e=this.pointRadius/2,n=this.sceneInfo,r=n.sceneWidth,i=n.sceneHeight,a=(new d["a"]).set(e,e,r-2*e,i-2*e);this.leftVisible&&(a.x+=Ji),this.commentVisible?a.width-=Qi:this.artboardInComment||(this.curNode&&(a.width-=Qi),a.width-=Zi,a.width+=2*e);var o=(new d["a"]).set(t.x,t.y,1,1);return o.isOverlap(a)},visible:function(){if(this.prevent)return!0;if(this.isSelectCurrent)return!0;if(this.moving)return!0;var t=this.location,e=2*this.pointRadius,n=this.sceneInfo,r=n.sceneWidth,i=n.sceneHeight,a=(new d["a"]).set(0,0,r,i),o=(new d["a"]).set(t.x-e,t.y-e,2*e,2*e);return o.isOverlap(a)},location:function(){var t=new P(this.pointX,this.pointY);if(!this.prevent){var e=this.moveData,n=this.sceneInfo;t=ct.getCanvasLocation(n,t),this.moving&&(t.left+=e.endX-e.startX,t.top+=e.endY-e.startY)}return t},style:function(){var t=this.location,e=this.pointRadius;return{top:t.top-e+"px",left:t.left-e+"px"}}},watch:{"popMsg.visible":function(t){t?window.addEventListener("click",this.hidePopMsg,!0):window.removeEventListener("click",this.hidePopMsg,!0)},artboardInComment:function(t){t&&(this.popMsg.visible=!1)},isSelectCurrent:function(t){t&&(this.pointInView||this.movePointToSceneCenter())},pointX:function(){this.moving=!1},pointY:function(){this.moving=!1}},props:{artboardRect:{type:Object,default:null},sceneInfo:{type:Object,default:null},comment:{type:Object,default:null},text:[String,Number],pointX:Number,pointY:Number,prevent:{type:Boolean,default:!1}},data:function(){return{popMsg:{visible:!1,handleHide:0,ignoreThisClick:!1},pointRadius:15,moving:!1,moveData:{startX:0,startY:0,endX:0,endY:0}}}},ea=ta,na=(n("d00b"),Object(hr["a"])(ea,xi,yi,!1,null,"b1fbea4a",null)),ra=na.exports,ia={components:{CommentPointItem:ra},methods:{setConfig:function(t){this.$emit("setConfig",t)},onLocationChangeComment:function(t,e,n){var a=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var o,s,c,u,d,h,f;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:if(o=a.getLocation({pageX:e+a.sceneOffsetX,pageY:n+a.sceneOffsetY}),o.x!==t.pointX||o.y!==t.pointY){r.next=5;break}return r.abrupt("return");case 5:return t.pointX=o.x,t.pointY=o.y,s=t.id,c=t.artboardId,u=t.commentId,d=t.pointX,h=t.pointY,r.prev=8,r.next=11,a.fetchPostCloudApi("setcommentpointbyweb",{body:{id:s,commentId:u,artboardId:c,pointEnable:!0,pointX:d,pointY:h}});case 11:if(f=r.sent,Object(l["s"])(f)){r.next=14;break}return r.abrupt("return");case 14:if(f.success){r.next=16;break}throw new Error(f.errMsg);case 16:r.next=21;break;case 18:r.prev=18,r.t0=r["catch"](8),a.showTextTip("移动评注失败:".concat(r.t0));case 21:case"end":return r.stop()}}),i,null,[[8,18]])})))()},onLocationChangeEditor:function(t,e,n){var r=this.pointInfo.point,i=this.getLocation({pageX:e+this.sceneOffsetX,pageY:n+this.sceneOffsetY});i.x===r.x&&i.y===r.y||(r.x=i.x,r.y=i.y)},getLocation:function(t){var e=t.pageX,n=t.pageY,r=e,i=n,a=this.sceneOffsetX,o=this.sceneOffsetY,s=this.rect,c=this.sceneX,l=this.sceneY,u=this.scale,d=this.sceneWidth,h=this.sceneHeight,f=(d-s.width*u)/2,m=(h-s.height*u)/2;return r-=a,i-=o,r-=f,i-=m,r-=c,i-=l,r=Math.round(r/u),i=Math.round(i/u),new P(r,i)},onMouseMove:function(t){if(this.preventPointEnable){var e=this.pointInfo.preventPoint;e.x=t.clientX,e.y=t.clientY}},onMouseDownInScene:function(t){if(this.preventPointEnable){var e=this.getLocation({pageX:t.clientX,pageY:t.clientY}),n=this.pointInfo,r=n.point,i=n.preventPoint,a=n.instance;i.enable=!1,r.pointIndex=this.nextPointIndex,r.enable=!0,r.x=e.x,r.y=e.y,requestAnimationFrame((function(){a&&a.focus()}))}},onMouseDown:function(){var t=this.pointInfo.preventPoint;t.enable=!1}},watch:{nextPointIndex:function(t){var e=this.pointInfo.point;e.enable&&(e.pointIndex=t)},preventPointEnable:function(t){t?(window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mousedown",this.onMouseDown)):(window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mousedown",this.onMouseDown))}},computed:{initedScale:function(){return this.artboardDetail.initedScale},currentSceneInfo:function(){var t=new at,e=this.scale,n=this.sceneWidth,r=this.sceneHeight,i=this.sceneOffsetX,a=this.sceneOffsetY,o=this.getLocation({pageX:i,pageY:a});return t.offset=o,t.scale=e,t.canvasScale=1,t.sceneWidth=n,t.sceneHeight=r,t},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardDetail:function(){return this.$store.state.artboardDetail},curArtboardVerData:function(){var t,e=this.curArtboard,n=this.artboard;return null!==(t=null===e||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:n},rect:function(){var t,e=this.curArtboardVerData,n=this.calcArtScale,r=null!==(t=null===e||void 0===e?void 0:e.boundsInArtboard)&&void 0!==t?t:new d["a"],i=r.width,a=r.height;return n>0&&(i=Math.round(i/n),a=Math.round(a/n)),(new d["a"]).set(0,0,i,a)},preventPointEnable:function(){return this.pointInfo.preventPoint.enable},pointInfo:function(){return this.$store.state.editComment.pointInfo},comments:function(){return this.$store.state.artboardDetail.comments},maxPointIndex:function(){return this.$store.state.artboardDetail.maxPointIndex},nextPointIndex:function(){var t=this.pointComments,e=this.maxPointIndex;if(e>0)return e+1;var n=t[t.length-1];return n?n.pointIndex+1:1},commentOnlyCurrentVerArtboard:function(){return!this.notSupportArtboardVerCloudVersion&&this.$store.state.commentOnlyCurrentVerArtboard},pointComments_onlyCurrentVer:function(){var t,e,n=this.artboardVerId;return null!==(t=null===(e=this.pointComments)||void 0===e?void 0:e.filter((function(t){return t.artboardVer===n})))&&void 0!==t?t:[]},renderPointComments:function(){var t=this.pointComments,e=this.pointComments_onlyCurrentVer,n=this.commentOnlyCurrentVerArtboard;return n?e:null!==t&&void 0!==t?t:[]},artboardVerId:function(){var t,e;return null!==(t=null===(e=this.curArtboardVerData)||void 0===e?void 0:e.lastVersionId)&&void 0!==t?t:0},pointComments:function(){var t=[],e=this.comments;return Object(l["h"])(e)?(e.forEach((function(e){Object(l["s"])(e)&&(e.pointEnable&&t.push(e),Object(l["h"])(e.comments)&&e.comments.forEach((function(e){Object(l["s"])(e)&&e.pointEnable&&t.push(e)})))})),t.sort((function(t,e){var n=t.pointIndex,r=e.pointIndex;return n===r&&(n=t.id,r=e.id),n>r?1:-1})),t):t},visible:function(){var t=this.sceneWidth,e=this.sceneHeight,n=this.rect;return 0!==t&&0!==e&&0!==n.width&&0!==n.height&&(this.artboardInComment||!this.inMultDownMode&&this.pointCommentShowAlways)},inDrawing:function(){var t=this.$store.state.editComment;return t.drawing},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},notSupportArtboardVerCloudVersion:function(){return Object(l["j"])(this.cloudVersion)}},props:{sceneWidth:Number,sceneHeight:Number,sceneX:Number,sceneY:Number,sceneOffsetX:Number,sceneOffsetY:Number,scale:Number},beforeDestroy:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mousedown",this.onMouseDown)},created:function(){0}},aa=ia,oa=(n("b259"),Object(hr["a"])(aa,gi,wi,!1,null,"14a681b4",null)),sa=oa.exports,ca=function(){var t=this,e=t._self._c;return e("section",{ref:"box",staticClass:"art-info",class:{dragging:t.dragging,scaling:t.scaling,canvas:t.useCanvasMode,figma:t.isFigmaArtboard},style:t.style,on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},click:t.clickInfoBox}},[e("div",{staticClass:"info",on:{click:function(e){t.currentClickInInfo=!0}}},[e("div",{staticClass:"name",attrs:{title:t.title}},[t.curArtboardLoadedVerData.lastVersionId?e("div",{staticClass:"ver",domProps:{textContent:t._s(t.verShowtext)},on:{click:t.clickShowVerList}}):t._e(),e("div",{staticClass:"text",domProps:{textContent:t._s(t.curArtboardLoadedVerData.name)}})]),t.artboardInDevStatus?e("div",{staticClass:"dev"}):t._e()]),t.useCanvasMode?t._e():[e("img",{staticClass:"preview",class:{loading:t.imgLoading},attrs:{src:t.artboardPreviewPng},on:{load:t.onImgLoad,error:t.onImgError}}),t.imgLoading?e("div",{staticClass:"img-loading"},[e("div",{staticClass:"loading"},[t._v("正在加载画板预览图...")])]):t._e()],t.artboardInComment||t.scaling?t._e():[e("NodeItem",{attrs:{parentRect:t.parentRect,item:t.curArtboardLoadedVerData,shiftKey:t.shiftKey}}),t._l(t.exportNodes,(function(t,n){return e("SliceTip",{key:"".concat(n,"+").concat(t.guid),attrs:{node:t}})})),e("NodeInfoCurrent"),e("NodeIntersectInfo",{attrs:{width:t.rect.width,height:t.rect.height}})]],2)},la=[],ua=function(){var t=this,e=t._self._c;return t.visibleMax?e("div",{staticClass:"node-item-wrap",class:{master:t.visibleOutChild},style:t.style},[t.item.mlIgnoreEvent?t._e():e("div",{staticClass:"node-item",on:{click:function(e){return e.stopPropagation(),t.clickNode.apply(null,arguments)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterNode.apply(null,arguments)},mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveNode.apply(null,arguments)}}}),t._l(t.children,(function(n,r){return e("NodeItem",{key:"".concat(r,"_").concat(n.guid),attrs:{parentRect:t.item.boundsInArtboard,item:n,shiftKey:t.shiftKey}})}))],2):t.visibleMin?e("div",{staticClass:"node-item-wrap on",class:{hotspot:t.isHotSpot},style:t.style,on:{click:function(e){return e.stopPropagation(),t.clickNode.apply(null,arguments)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterNode.apply(null,arguments)},mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveNode.apply(null,arguments)}}}):t._e()},da=[],ha={name:"NodeItem",methods:{mouseLeaveNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(null)},mouseEnterNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(this.item)},getNodesFromPoint:function(t){var e=t.target;if(e){var n,r=t.offsetX;null==r?(r=t.layerX,n=t.layerY):n=t.offsetY;var i=this.scale;r/=i,n/=i;var a="".concat(r,"_").concat(n),o=this.cachePointNodes;if(o.key===a)return o.nodes;var s=this.item.boundsInArtboard,c=(new d["a"]).set(s.x+r,s.y+n,1,1),l=this.curArtboard.childs,u=[];return l.forEach((function(t){if(t&&t.visible&&!t.mlIgnoreEvent){var e=t.boundsInArtboard;if(e.width<=2||e.height<=2){var n=e,r=n.x,i=n.y,a=n.width,o=n.height;e=(new d["a"]).set(r,i,a,o),e.width<=2&&(e.width+=2,e.x-=1),e.height<=2&&(e.height+=2,e.y-=1)}Object(d["f"])(e,c)&&u.push(t)}})),o.key=a,o.nodes=u,u}},clickNode:function(t){var e=this.item;if(this.inMultDownMode)e.markedForExport&&(e.mlUserSelectDown=!e.mlUserSelectDown);else{var n=this.curNode,r=!1;if(null!=n&&this.shiftKey&&(n=this.enterNode,r=!0),null!=n&&this.clickedNode===e&&Math.abs(this.clickPageX-t.pageX)<2&&Math.abs(this.clickPageY-t.pageY)<2){var i=this.getNodesFromPoint(t),a=i.findIndex((function(t){return t===n}));if(-1===a)a=i.length-1;else{var o=n.boundsInArtboard;while(a--&&a>=0){var s=i[a],c=s.boundsInArtboard;if(!Object(d["g"])(c,o)||s.markedForExport||s.renderTapInteraction||1===s.types.Artboard||1!==s.types.GraphicNode&&1!==s.types.Group&&1!==s.types.SymbolMaster&&1!==s.types.SymbolInstance||s.fillEnabled||s.strokeEnable||s.shadow||s.innerShadow)break}a<0&&(a=i.length-1)}var l=i[a];n=l||e}else n=e;this.clickPageX=t.pageX,this.clickPageY=t.pageY,r?this.setEnterNode(n):this.setCurNode(n),this.setClickedNode(e)}}},computed:{visibleOutChild:function(){var t;return 1===(null===(t=this.item.types)||void 0===t?void 0:t.GroupVisibleOutChild)},children:function(){return this.item.children||[]},visibleMax:function(){return this.visible&&this.children.length>0},visibleMin:function(){return!this.visibleMax&&this.visible&&!this.item.mlIgnoreEvent&&!this.item.mlIgnoreScene},visible:function(){var t=this.item;return!!t&&(!!t.visible&&!t.mlIgnoreLeftSide)},isHotSpot:function(){var t=this.item;return!!t&&t.type===o["Q"].HotSpot},scale:function(){return this.scaleArtboard},style:function(){var t=this.item.boundsInArtboard,e=this.parentRect,n=this.scale,r=Math.ceil(Math.max(1,t.width*n)),i=Math.ceil(Math.max(1,t.height*n)),a=Math.round((t.y-e.y)*n),o=Math.round((t.x-e.x)*n);return r<3&&(r+=2,o-=1),i<3&&(i+=2,a-=1),{top:a+"px",left:o+"px",width:r+"px",height:i+"px"}}},props:{item:Object,shiftKey:Boolean,parentRect:Object},data:function(){return{clickPageX:0,clickPageY:0,cachePointNodes:{nodes:null,key:""}}}},fa=ha,ma=(n("eb67"),Object(hr["a"])(fa,ua,da,!1,null,"99582a32",null)),pa=ma.exports,ba=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"node-info-current",class:{"only-enter":null==t.curNode},style:t.showNodeStyle},[t.curNode?t._l(t.borRadios,(function(n){return e("div",{key:n,class:["bor bor-"+n],style:t.borderStyle})})):t._e(),t.showNodeSize?[e("div",{staticClass:"item width",style:t.nodeWidthStyle},[e("span",[t._v(t._s(t.nodeRect.showWidth))])]),e("div",{staticClass:"item height",style:t.nodeHeightStyle},[e("span",[t._v(t._s(t.nodeRect.showHeight))])])]:t._e()],2):t._e()},va=[],ga={computed:{showNodeSize:function(){var t=this.curNode,e=this.enterNode;return t?!e||e===t:!!e},nodeRect:function(){if(!this.showNodeSize)return{width:0,height:0,top:0,left:0};var t=this.showNode,e=t.boundsInArtboard,n=this.scaleArtboard,r=t.markedForExport,i={width:Math.ceil(e.width*n),height:Math.ceil(e.height*n),left:Math.floor(e.x*n),top:Math.floor(e.y*n),showWidth:this.getCalcPlatformValue(e.width,{markedForExport:r}),showHeight:this.getCalcPlatformValue(e.height,{markedForExport:r})};return i},nodeWidthStyle:function(){var t=this.nodeRect;return{left:Math.ceil(t.width/2)+"px"}},nodeHeightStyle:function(){var t=this.nodeRect;return{left:t.width+1+"px",top:Math.ceil(t.height/2)+"px"}},borderStyle:function(){var t=this.borderWidth;return"width:".concat(t,";height:").concat(t,";")},borderWidth:function(){var t=2.3*this.scaleArtboard+3;return t=Math.round(t),t+"px"},borRadios:function(){return[0,1,2,3]},visible:function(){if(this.inMultDownMode)return!1;var t=this.showNode;return!!t},showNode:function(){var t=this.curNode;return t||(t=this.enterNode),t},showNodeStyle:function(){var t=this.showNode;if(t){var e=t.boundsInArtboard,n=this.scaleArtboard;return{top:Math.floor(e.y*n)+"px",left:Math.floor(e.x*n)+"px",width:Math.ceil(Math.max(1,e.width)*n)+"px",height:Math.ceil(Math.max(1,e.height)*n)+"px"}}}}},wa=ga,xa=(n("4ea7"),Object(hr["a"])(wa,ba,va,!1,null,"b0c4333c",null)),ya=xa.exports,ka=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"node-info"},[e("div",{staticClass:"enter-item-box",style:t.enterNodeStyle}),t._l(t.markLines,(function(n){return e("div",{key:n.id,staticClass:"item",class:{horizintal:n.isHorizintal,vertical:!n.isHorizintal,dashed:n.isDashed},style:t.getMarkStyle(n)},[n.text?e("span",[t._v(t._s(n.text))]):t._e()])}))],2):t._e()},Ca=[],Sa={methods:{getMarkStyle:function(t){var e=this.scale,n=this.markScale;0===n&&(n=1),e/=n;var r,i,a=t.rect,o={top:Math.floor(a.top*e)+"px",left:Math.floor(a.left*e)+"px"};return t.isHorizintal?(r="height",i="width"):(r="width",i="height"),o[r]=a[r]+"px",o[i]=Math.ceil(a[i]*e)+"px",o},getMarkLines:function(){var t=this;if(!this.visible)return[];var e=this.curNode,n=this.enterNode,r=e.boundsInArtboard,i=n.boundsInArtboard,a=(new d["a"]).set(r.x,r.y,r.width,r.height),o=(new d["a"]).set(i.x,i.y,i.width,i.height),s={width:this.getCalcValue(this.width),height:this.getCalcValue(this.height)},c=e.markedForExport;a.x=this.getCalcValue(a.x),a.y=this.getCalcValue(a.y),a.width=this.getCalcValue(a.width,c),a.height=this.getCalcValue(a.height,c);var l=n.markedForExport;return o.x=this.getCalcValue(o.x),o.y=this.getCalcValue(o.y),o.width=this.getCalcValue(o.width,l),o.height=this.getCalcValue(o.height,l),this.markScale=this.getCalcRectScale(),Object(d["c"])(a,o,s,(function(e){return t.getCalcUnitTemplateValue(e)}))}},watch:{curNode:function(){this.markLines=this.getMarkLines()},enterNode:function(){this.markLines=this.getMarkLines()},visible:function(t){t&&(this.markLines=this.getMarkLines())}},computed:{enterNodeStyle:function(){var t=this.enterNode;if(t){var e=t.boundsInArtboard,n=this.scaleArtboard;return{top:Math.floor(e.y*n)+"px",left:Math.floor(e.x*n)+"px",width:Math.ceil(Math.max(1,e.width)*n)+"px",height:Math.ceil(Math.max(1,e.height)*n)+"px"}}},scale:function(){return this.scaleArtboard},visible:function(){return!this.inMultDownMode&&null!=this.curNode&&null!=this.enterNode&&this.enterNode!==this.curNode}},props:{width:Number,height:Number},data:function(){return{markScale:1,markLines:[]}},mounted:function(){this.markLines=this.getMarkLines()}},Oa=Sa,Ia=(n("54a6"),Object(hr["a"])(Oa,ka,Ca,!1,null,"4c9291f4",null)),Aa=Ia.exports,Ta=function(){var t=this,e=t._self._c;return t.visibleSelected?e("div",{staticClass:"slice-tip",class:{out:!t.inArtboard||t.inMultDownMode},style:t.style,on:{click:function(e){e.stopPropagation(),t.node.mlUserSelectDown=!1}}},[e("div",{staticClass:"name",attrs:{title:"点击取消选择\n".concat(t.nodeName)}},[t._v(" "+t._s(t.nodeName)+" ")])]):t.visibleMin?e("div",{staticClass:"slice-tip-min",class:{off:!t.inMultDownMode&&(t.curNode==t.node||t.enterNode==t.node),out:!t.inArtboard||t.inMultDownMode},style:t.style,on:{click:t.clickSliceTipMin}}):t._e()},ja=[],Fa={methods:{clickSliceTipMin:function(){(this.inMultDownMode||this.inArtboard)&&(this.node.mlUserSelectDown=!0)}},computed:{sliceBorderLineHide:function(){return this.$store.state.sliceBorderLineHide},visibleMin:function(){var t=this.inMultDownMode,e=this.sliceBorderLineHide,n=this.inArtboard;return t||!e&&n},visibleSelected:function(){var t=this.inMultDownMode,e=this.node;return t&&e.mlUserSelectDown},nodeName:function(){return Object(c["J"])(this.node)},style:function(){var t=this.node.boundsInArtboard,e=this.scaleArtboard;return{top:Math.floor(t.y*e)+"px",left:Math.floor(t.x*e)+"px",width:Math.ceil(Math.max(1,t.width)*e)+"px",height:Math.ceil(Math.max(1,t.height)*e)+"px"}},inArtboard:function(){var t=this.node.boundsInArtboard,e=Object(d["f"])(t,this.curArtboardLoadedVerData.boundsInArtboard);return e}},props:{node:Object}},Ma=Fa,_a=(n("6da1"),Object(hr["a"])(Ma,Ta,ja,!1,null,"59263cd7",null)),La=_a.exports,Da={components:{NodeItem:pa,NodeIntersectInfo:Aa,NodeInfoCurrent:ya,SliceTip:La},methods:{clickShowVerList:function(){this.artboardDetail.artboardVerListVisible=!0},onImgLoad:function(){this.imgState=c["a"].Success},onImgError:function(){this.imgState=c["a"].Error},setSelectComment:function(t){this.$store.commit("setSelectComment",t)},onContextmenu:function(t){var e=this,n=t.pageX,r=t.pageY,i=this.curArtboard;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:r,artboard:i})}))},setArtboardCommentVisible:function(t){this.$store.commit("artboardCommentVisible",t)},clickInfoBox:function(){this.currentClickInInfo?this.currentClickInInfo=!1:(this.setSelectComment(null),this.setArtboardCommentVisible(!0))},clickZoomContainer:function(){this.artboardInComment?(this.setSelectComment(null),this.setArtboardCommentVisible(!1)):this.inMultDownMode||this.setCurNode(null)},onSceneResize:function(t,e,n){if(!this.initedScale||n){var r=this.rect;if(r&&0!==t&&0!==e){var i=r.width/t,a=r.height/e,o=Math.max(i,a);0!==o&&(this.artboardDetail.initedScale=!0,this.setScaleArtboard(.92/o))}}},quickKey:function(t){this.shiftKey=t.shiftKey}},computed:{artboardDetail:function(){return this.$store.state.artboardDetail},initedScale:function(){return this.artboardDetail.initedScale},verShowtext:function(){var t,e=this.curArtboardLoadedVerData,n=this.curArtboard;return e&&n?"".concat(e.lastVersionId===(null===(t=n.artboard)||void 0===t?void 0:t.lastVersionId)?"最新":"历史","版本 #").concat(e.lastVersionId):null},title:function(){return Ue(this.curArtboardLoadedVerData)},artboardInDevStatus:function(){var t=this.curArtboard,e=this.inCloudViewerMode;return e&&t.customStatus===o["f"].Dev},isFigmaArtboard:function(){return this.fileType===o["n"].FIGMA},fileType:function(){var t,e,n=this.artboard;return null!==(t=null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)&&void 0!==t?t:n.fileType},artRenderInCanvasMode:function(){return this.$store.state.artRenderInCanvasMode},useCanvasMode:function(){return this.inCloudMode&&this.artRenderInCanvasMode},imgLoading:function(){return this.imgState===c["a"].Fetching},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},exportNodes:function(){var t=this.curArtboard;if(!t)return[];var e=t.exportNodes;return e||[]},rect:function(){var t=this.parentRect,e=o["b"]/2;if(!t)return new d["a"];var n=t.x+t.width,r=t.y+t.height;return(new d["a"]).set(0,-e,n,r+e)},parentRect:function(){var t,e,n,r=this.curArtboardLoadedVerData,i=this.artboard;return null!==(t=null!==(e=null!==(n=r.boundsInArtboard)&&void 0!==n?n:null===i||void 0===i?void 0:i.boundsInArtboard)&&void 0!==e?e:r.boundsInParent)&&void 0!==t?t:null},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardPreviewPng:function(){var t,e=this.inCloudMode,n=this.curArtboardLoadedVerData;return e&&this.isSupportWebp&&(t=n.artboardPreviewWebp,t)?t:(t=n.artboardPreviewPng,e?t:"".concat(t,"?").concat(n.mlOutputTime))},isSupportWebp:function(){return this.$store.state.isSupportWebp===ln.Support},style:function(){var t,e=this.useCanvasMode,n=this.curArtboardLoadedVerData,r=this.scale,i=this.parentRect,a=null!==i&&void 0!==i?i:{width:0,height:0};if(!e&&n.fill&&n.fillEnabled){var o=n.fill.value;o&&(t=Object(h["i"])(o).value)}return{backgroundColor:t,width:Math.ceil(a.width*r)+"px",height:Math.ceil(a.height*r)+"px"}},scale:function(){return this.scaleArtboard}},watch:{artboardPreviewPng:function(t){t&&(this.imgState=c["a"].Fetching)},curArtboardLoadedVerData:function(){this.artboardDetail.initedScale=!1}},data:function(){return{imgState:c["a"].Normal,previewImage:null,shiftKey:!1,currentClickInInfo:!1}},props:{sceneWidth:Number,sceneHeight:Number,dragging:Boolean,scaling:Boolean},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKey);var t=this.previewImage;t&&(t.src=null,t=null)}},Na=Da,Ea=(n("23fb"),Object(hr["a"])(Na,ca,la,!1,null,"055e6b82",null)),Pa=Ea.exports,Ra=function(){var t=this,e=t._self._c;return e("section",{ref:"box",staticClass:"art-list",class:{dragging:t.dragging},style:t.style},[e("div",{staticClass:"box-size",style:t.boxSize}),t._l(t.renderDocuments,(function(n){return e("div",{key:n.guid,staticClass:"art-doc"},[n.sections?t._l(n.sections,(function(r){return e("SectionItem",{key:n.guid+r.guid,attrs:{sectionItem:r,maxRect:{x:n.maxRect.x-n.rect.x+t.rect.x,y:n.maxRect.y-n.rect.y+t.rect.y}}})})):t._e(),t._l(n.arts,(function(r){return e("ArtboardListItem",{key:n.guid+r.artboard.guid,attrs:{item:r,maxRect:{x:n.maxRect.x-n.rect.x+t.rect.x,y:n.maxRect.y-n.rect.y+t.rect.y}}})}))],2)}))],2)},Va=[],Ba=function(){var t=this,e=t._self._c;return e("section",{ref:"$item",staticClass:"item",class:{on:t.selected,figma:t.isFigmaArtboard},style:t.style},[e("div",{staticClass:"info"},[e("div",{staticClass:"name",attrs:{title:t.title}},[e("div",{staticClass:"text",domProps:{textContent:t._s(t.artboard.name)}})]),t.artboardInDevStatus?e("div",{staticClass:"dev"}):t._e()]),e("div",{staticClass:"img",style:t.imgStyle,attrs:{title:t.goInfoTip},on:{mouseenter:t.onMouseEnter,dblclick:function(e){return t.dlbClickArtboard()},click:t.clickArtboard,mouseleave:t.onMouseLevel,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[t.artboard.flowStart?e("div",{staticClass:"interaction-home"}):t._e(),t.errorText?e("div",{staticClass:"error"},[t._v(t._s(t.errorText))]):e("img",{attrs:{src:t.artboardPreviewPng}})]),t.interactionVisible?e("artboard-item-interactions",{attrs:{renderInteractions:t.renderInteractions,item:t.item}}):t._e()],1)},Ua=[],Ha=function(){var t=this,e=t._self._c;return t.visible?e("svg",{staticClass:"artboard-interaction-list",class:{light:t.light}},[t._l(t.arrows,(function(n){return[e("path",{key:n.key+"_rect",class:t.getPathCls(n,"rect"),attrs:{d:n.item.nodeRect}}),e("path",{key:n.key+"_line",class:t.getPathCls(n,"line"),attrs:{d:n.item.curve}}),e("image",{key:n.key+"_arrow_icon",attrs:{x:n.item.arrowIcon.x,y:n.item.arrowIcon.y,width:n.item.arrowIcon.width,height:n.item.arrowIcon.height,href:t.isLightArrow(n)?n.item.arrowIcon.href:n.item.arrowIcon.href_default}})]}))],2):t._e()},Wa=[],$a={methods:{isLightArrow:function(t){var e,n=this.enterArtboard,r=this.light;return!!r||null!=t.toArtboardItem&&null!=n&&(null===(e=n.artboard)||void 0===e?void 0:e.cid)===t.toArtboardItem.cid},getPathCls:function(t,e){var n,r=[];e&&(Object(l["h"])(e)||(e=[e]),r.push.apply(r,Object(u["a"])(e)));var i=this.enterArtboard;return null!=t.toArtboardItem&&null!=i&&(null===(n=i.artboard)||void 0===n?void 0:n.cid)===t.toArtboardItem.cid&&r.push("light"),r}},computed:{light:function(){var t=this.enterArtboard,e=this.item;return t===e},enterArtboard:function(){return this.$store.state.enterArtboard},visible:function(){return!this.inArtboardMultDownMode&&this.arrows.length>0},arrows:function(){var t=[],e=this.item.artboard,n=this.renderDocuments,r=this.filterDocumentType,i=r===o["x"].Section,a=e.pageGuid||e.docGuid,s=e.boundsInParentForList;return this.renderInteractions.forEach((function(r){var o,c=At(n,r,s,a,{inSection:i,topSectionId:e.topSectionId});c&&t.push({item:c,key:r.guid,toArtboardItem:null===(o=r.renderTapInteraction)||void 0===o?void 0:o.toArtboardItem})})),t}},props:{renderInteractions:Array,item:Object}},Ga=$a,za=(n("dbb2"),Object(hr["a"])(Ga,Ha,Wa,!1,null,"63ff2ae6",null)),Ya=za.exports,Xa={components:{ArtboardItemInteractions:Ya},methods:{onMouseEnter:function(){this.$store.commit("enterArtboard",this.item)},onMouseLevel:function(){this.$store.commit("enterArtboard",null)},onContextmenu:function(t){var e=this,n=t.pageX,r=t.pageY,i=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:r,artboard:i})}))},dlbClickArtboard:function(){clearTimeout(this.tipHandle),this.inArtboardMultDownMode||(this.hideTextTip(),this.setCurArtboard(this.item))},clickArtboard:function(){var t=this;clearTimeout(this.tipHandle),this.inArtboardMultDownMode?this.item.mlUserSelectDown=!this.item.mlUserSelectDown:this.tipHandle=setTimeout((function(){t.showTextTip(t.goInfoTip2,7)}),200)},loadedImage:function(t){if(null==t)return this.imgErrored=!0,void(this.imgLoaded=!1);this.imgErrored=!1,this.imgLoaded=!0},loadImage:function(){var t=this.artboardPreviewPng;t&&(this.imgErrored=!1,this.imgLoaded=!1,c["db"].add(t,this.loadedImage))}},beforeDestroy:function(){clearTimeout(this.tipHandle),c["db"].remove(this.artboardPreviewPng,this.loadedImage)},created:function(){this.loadImage()},watch:{artboardPreviewPng:function(t,e){this.imgErrored=!1,c["db"].remove(e,this.loadedImage),this.loadImage()}},computed:{title:function(){return Ue(this.artboard)},artboardInDevStatus:function(){var t=this.item,e=this.inCloudViewerMode;return e&&t.customStatus===o["f"].Dev},isFigmaArtboard:function(){return this.fileType===o["n"].FIGMA},fileType:function(){var t,e,n=this.artboard;return null!==(t=null===(e=n.mlConfig)||void 0===e?void 0:e.fileType)&&void 0!==t?t:n.fileType},artboardShowInteractionLine:function(){return this.$store.state.artboardShowInteractionLine},renderInteractions:function(){var t;if(!this.inCloudMode)return null;var e=this.item.artboard.interactionInfo;if(!e)return null;if(e.fetchState!==c["a"].Success)return null;var n=null===(t=e.data)||void 0===t?void 0:t.renderInteractions;return Object(l["h"])(n)&&n.length>0?n:null},interactionVisible:function(){return this.artboardShowInteractionLine&&!!this.renderInteractions},errorText:function(){return this.imgErrored?"画板预览图加载失败":this.imgLoaded?null:"预览图加载中..."},outlineWidth:function(){if(this.inArtboardMultDownMode)return Math.ceil(3/this.scaleList)+"px"},selected:function(){return this.inArtboardMultDownMode&&this.item.mlUserSelectDown},goInfoTip2:function(){return $e(this.item.artboard,this.inCloudMode)},goInfoTip:function(){if(this.inArtboardMultDownMode)return"单击选中/取消选中";var t=this.item.artboard;return this.inCloudMode?Ue(t):"双击查看 ".concat(t.name," 标注详情")},style:function(){var t=o["b"]/2,e=this.artboard.boundsInParentForList,n=this.maxRect,r=Math.floor(e.y-n.y-t),i=Math.floor(e.x-n.x),a=Math.ceil(e.width),s=Math.ceil(e.height+t);return"top:".concat(r,"px;left:").concat(i,"px;width:").concat(a,"px;height:").concat(s,"px;")},imgStyle:function(){var t=this.artboard.boundsInParentForList;return"height:".concat(t.height,"px;outline-width:").concat(this.outlineWidth)},artboardPreviewPng:function(){var t,e=this.inCloudMode,n=this.artboard;return e&&this.isSupportWebp&&(t=n.artboardPreviewWebp,t)?t:(t=n.artboardPreviewPng,e?t:"".concat(t,"?").concat(n.mlOutputTime))},isSupportWebp:function(){return this.$store.state.isSupportWebp===ln.Support},artboard:function(){return this.item.artboard}},data:function(){return{tipHandle:0,imgErrored:!1,imgLoaded:!1}},props:{item:Object,maxRect:Object}},Ka=Xa,qa=(n("706c"),Object(hr["a"])(Ka,Ba,Ua,!1,null,"3b0ca67c",null)),Qa=qa.exports,Ja=function(){var t=this,e=t._self._c;return e("div",{staticClass:"section-item",style:t.style},[e("div",{staticClass:"title"},[t._v(t._s(t.sectionItem.name))])])},Za=[],to={computed:{style:function(){var t,e,n=this.sectionItem,r=0,i=n.boundsInParentForList,a=this.maxRect,o=Math.floor(i.y-a.y-r)+"px",c=Math.floor(i.x-a.x)+"px",l=Math.ceil(i.width)+"px",u=Math.ceil(i.height+r)+"px";return Object(s["a"])(Object(s["a"])({},null!==(t=null===(e=n.cssStyle)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),{},{top:o,left:c,width:l,height:u})}},props:{maxRect:Object,sectionItem:Object}},eo=to,no=(n("2a09"),Object(hr["a"])(eo,Ja,Za,!1,null,"29c65c03",null)),ro=no.exports,io={components:{ArtboardListItem:Qa,SectionItem:ro},methods:{quickKey:function(t){if(!this.inArtboardMode){var e=t.keyCode||t.which;switch(e){case 112:case 113:case 114:t.preventDefault();break}}},onSceneResize:function(t,e,n){if(!this.initScale||n){var r=this.rect;if(r&&0!==t&&0!==e){this.initScale=!0;var i=r.width/t,a=r.height/e,o=Math.max(i,a);if(0!==o){o=.96/o;var s=this.scale;this.setScaleList(o),o=this.scale,this.resetScaleSceneCenter(o,s)}}}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},created:function(){window.addEventListener("keydown",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey)},data:function(){return{initScale:!1}},computed:{rect:function(){var t=o["b"],e=this.renderDocuments,n=[];e.forEach((function(t){n.push({artboard:{boundsInParent:t.rect}})}));var r=Object(c["A"])(n);return r.y-=t,r.height+=t,r},scale:function(){return this.scaleList},style:function(){var t=this.rect;if(t)return{transform:"scale(".concat(this.scale,") translate3d(0,0,0)")}},boxSize:function(){var t=this.rect;if(t)return{width:t.width+"px",height:t.height+"px"}}},props:{sceneWidth:Number,sceneHeight:Number,dragging:Boolean}},ao=io,oo=(n("7ec1"),Object(hr["a"])(ao,Ra,Va,!1,null,"77e90ec6",null)),so=oo.exports,co=function(){var t=this,e=t._self._c;return e("div",{staticClass:"canvas-box",attrs:{title:t.mouseenterArtboardTitle},on:{mousemove:t.onMouseMove,mouseleave:t.onMouseLeave,dblclick:t.dblClickCanvas,click:t.clickCanvas,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[t.sectionVisible?e("canvas",{ref:"canvasSection",style:t.canvasStyleSection,attrs:{width:t.canvasWidth,height:t.canvasHeight}}):t._e(),e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.canvasWidth,height:t.canvasHeight}}),t.mouseenterArtboardStyle?e("div",{staticClass:"artboard-hover",style:t.mouseenterArtboardStyle}):t._e()])},lo=[],uo={methods:{getInViewerInteractions:function(){var t=[];if(!this.artboardShowInteractionLine)return t;var e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=this.artboardInteractions,c=this.mouseenterArtboard;if(0===r||0===i||0===a)return t;var u=(new d["a"]).set(-e/r,-n/r,i/r,a/r);return Object.keys(o).forEach((function(e){var n=o[e];Object(l["h"])(n)&&0!==n.length&&n.forEach((function(e){var n,r,i=Object(s["a"])({},e.canvasData.drawRect);i.x+=e.art.rect.x,i.y+=e.art.rect.y,e.isEnter=null!=c&&(c===e.art||(null===(n=e.toArtboardItem)||void 0===n?void 0:n.cid)===(null===(r=c.artboard)||void 0===r||null===(r=r.artboard)||void 0===r?void 0:r.cid));var a=Object(d["f"])(i,u);a&&t.push(e)}))})),t.sort((function(t,e){return t.isEnter&&e.isEnter?0:t.isEnter?1:e.isEnter?-1:0})),t},attachImgs:function(t,e){var n=this;Object(l["h"])(t)&&(e?t.forEach((function(t){c["db"].add(t.imgSrc,n.imgLoaded,t),c["db"].add(t.miniImgSrc,n.miniImgLoaded,t)})):t.forEach((function(t){c["db"].remove(t.imgSrc,n.imgLoaded,t),c["db"].remove(t.miniImgSrc,n.miniImgLoaded,t),t.img=null,t.loaded=!1})))},getRenderInteractions:function(t){var e;if(!this.inCloudMode)return null;var n=t.interactionInfo;if(!n)return null;if(n.fetchState!==c["a"].Success)return null;var r=null===(e=n.data)||void 0===e?void 0:e.renderInteractions;return Object(l["h"])(r)&&r.length>0?r:null},onContextmenu:function(t){var e=this,n=this.mouseenterArtboard;if(n){var r=t.pageX,i=t.pageY;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:r,y:i,artboard:n.artboard})}))}},dblClickCanvas:function(){var t=this.mouseenterArtboard,e=this.inArtboardMultDownMode;!e&&t&&(clearTimeout(this.tipHandle),this.hideTextTip(),this.setCurArtboard(t.artboard))},clickCanvas:function(){var t=this,e=Math.abs(Date.now()-this.draggingTime);if(!(e<66)){clearTimeout(this.tipHandle);var n=this.mouseenterArtboard,r=this.inArtboardMultDownMode;if(n){if(r)return n.artboard.mlUserSelectDown=!n.artboard.mlUserSelectDown,void this.draw(n,!0);var i=n.artboard;this.tipHandle=setTimeout((function(){t.showTextTip(t.goInfoTip2(i),7)}),200)}}},goInfoTip2:function(t){return $e(t.artboard,this.inCloudMode)},onMouseMove:function(t){var e=this.mouseLoc;e.x=t.layerX,e.y=t.layerY,null==e.x&&(e.x=t.pageX-this.sceneOffsetX,e.y=t.pageY-this.sceneOffsetY)},onMouseLeave:function(){var t=this.mouseLoc;t.x=t.y=-10},quickKey:function(t){var e=t.keyCode||t.which;switch(e){case 112:case 113:case 114:t.preventDefault();break}},drawAllDelay:function(){var t=this,e=Date.now();e-this.drawAllTime>=100?(this.drawAllTime=e,clearTimeout(this.handleDrawAllDelay),this.draw(null,!0)):(clearTimeout(this.handleDrawAllDelay),this.handleDrawAllDelay=setTimeout((function(){clearTimeout(t.handleDrawAllDelay),t.draw(null,!0)}),66.67))},drawSection:function(t,e){var n=this;if(t||e)requestAnimationFrame((function(){n._drawSection(t,e)}));else{var r=this.sceneInfoSection,i=this.sceneWidth,a=this.sceneHeight,o=r.sceneWidth!==i||r.sceneHeight!==a||Date.now()-this.sceneDelayTimes.section>100?1:0;if(o)return clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),void(this.handleSection=requestAnimationFrame((function(){n._drawSection(t)})));clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),this.sceneDelayHandleSection=setTimeout((function(){cancelAnimationFrame(n.handleSection),n.handleSection=requestAnimationFrame((function(){n._drawSection(t)}))}),33)}},draw:function(t,e){var n=this;if(t||e)requestAnimationFrame((function(){n._draw(t,e)}));else{var r=this.sceneInfo,i=this.sceneWidth,a=this.sceneHeight,o=this.inArtboardMultDownMode,s=r.sceneWidth!==i||r.sceneHeight!==a||Date.now()-this.sceneDelayTimes.artboard>100?1:0;if(s||o!=r.inArtboardMultDownMode)return clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),void(this.handle=requestAnimationFrame((function(){n._draw(t)})));clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),this.sceneDelayHandle=setTimeout((function(){cancelAnimationFrame(n.handle),n.handle=requestAnimationFrame((function(){n._draw(t)}))}),33)}},getRectSections:function(t){var e=[],n=null===t||void 0===t?void 0:t.rect;if(!n)return e;n=(new d["a"]).set(n.x,n.y,n.width,n.height);var r=this.inViewerSections;return r.forEach((function(t){var r=(new d["a"]).set(t.rect.x,t.rect.y,t.rect.width,t.rect.height);r.isOverlap(n)&&e.push(t)})),e},getRectArtboards:function(t){var e,n=this,r=[],i=null===t||void 0===t?void 0:t.rect;if(!i)return r;i=(new d["a"]).set(i.x,i.y,i.width,i.height),t.artboard.artboard.flowStart&&(e=this.getFlowStartIconRect(t),e=(new d["a"]).set(e.x,e.y,e.width,e.height));var a=this.inViewerArtboards;return a.forEach((function(t){var a=(new d["a"]).set(t.rect.x,t.rect.y,t.rect.width,t.rect.height);if(a.isOverlap(i))r.push(t);else if(e&&e.isOverlap(a))r.push(t);else if(t.artboard.artboard.flowRect){var o=n.getFlowStartIconRect(t);if(o=(new d["a"]).set(o.x,o.y,o.width,o.height),o.isOverlap(i))return void r.push(t);if(e&&e.isOverlap(o))return void r.push(t)}})),r},_drawSection:function(t,e){var n=this;clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),this.sceneDelayTimes.section=Date.now();var r=this.sceneX,i=this.sceneY,a=this.scale,o=this.sceneWidth,s=this.sceneHeight,c=this.sceneInfoSection,l=this.drawInfoSection;if(c.sceneX=r,c.sceneY=i,c.scale=a,c.sceneWidth=o,c.sceneHeight=s,0!==a&&0!==o&&0!==s){var u=!t,h=!(l.scale===a&&l.sceneX===r&&l.sceneY===i&&l.sceneWidth===o&&l.sceneHeight===s);if(!u||h||e){var f=this.$refs.canvasSection;if(f){l.scale=a,l.sceneX=r,l.sceneY=i,l.sceneWidth=o,l.sceneHeight=s;var m,p=f.getContext("2d"),b=!1;u||h?(this.drawAllTimeSection=Date.now(),p.clearRect(0,0,this.getCanvasDrawNum(o),this.getCanvasDrawNum(s)),m=this.inViewerSections,b=!0):m=this.getRectSections(t);var v=(new d["a"]).set(-r,-i,o,s),g=(new d["a"]).set(v.x/a,v.y/a,v.width/a,v.height/a);!b&&m.forEach((function(t){n._cleanBackgroundSection(p,t,v,a)})),m.forEach((function(t){n._drawSectionItem(p,v,g,a,t)}))}}}},_draw:function(t,e){var n=this;clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),this.sceneDelayTimes.artboard=Date.now();var r=this.sceneX,i=this.sceneY,a=this.scale,o=this.sceneWidth,s=this.sceneHeight,c=this.sceneInfo,l=this.inArtboardMultDownMode;if(c.sceneX=r,c.sceneY=i,c.scale=a,c.sceneWidth=o,c.sceneHeight=s,c.inArtboardMultDownMode=l,0!==a&&0!==o&&0!==s){var u=this.drawInfo,h=!t,f=!(u.scale===a&&u.sceneX===r&&u.sceneY===i&&u.sceneWidth===o&&u.sceneHeight===s&&u.inArtboardMultDownMode===l);if(!h||f||e){var m=this.$refs.canvas;if(m){u.scale=a,u.sceneX=r,u.sceneY=i,u.sceneWidth=o,u.sceneHeight=s,u.inArtboardMultDownMode=l;var p,b=m.getContext("2d"),v=!1;h||f?(this.drawAllTime=Date.now(),b.clearRect(0,0,this.getCanvasDrawNum(o),this.getCanvasDrawNum(s)),p=this.inViewerArtboards,v=!0):p=this.getRectArtboards(t);var g=(new d["a"]).set(-r,-i,o,s),w=(new d["a"]).set(g.x/a,g.y/a,g.width/a,g.height/a),x=Math.max(2,Math.min(6,Math.ceil(3*this.scale)));!v&&p.forEach((function(t){n._cleanBackground(b,t,g,a)}));var y=this.artboardShowInteractionLine&&!l;if(p.forEach((function(t){n._drawArtboard(b,g,w,a,t,l,x)})),y){var k=this.getInViewerInteractions();k.forEach((function(t){var e=t.canvasData.drawRect,r=t.art.rect,i=(new d["a"]).set(r.x+e.x,r.y+e.y,e.width,e.height),o=Object(d["f"])(i,w);o&&n._drawInteraction(b,t.art,t,g,w,a)}))}}}}},_cleanBackgroundSection:function(t,e,n,r){var i=this._getScaleRect(e.rect.x,e.rect.y,e.rect.width,e.rect.height,n,r),a=Math.round(this.titleHeight*r);t.clearRect(this.getCanvasDrawNum(i.x),this.getCanvasDrawNum(i.y-a),this.getCanvasDrawNum(i.width),this.getCanvasDrawNum(i.height+a))},_cleanBackground:function(t,e,n,r){var i=this._getScaleRect(e.rect.x,e.rect.y,e.rect.width,e.rect.height,n,r),a=Math.round(this.titleHeight*r);t.clearRect(this.getCanvasDrawNum(i.x),this.getCanvasDrawNum(i.y-a),this.getCanvasDrawNum(i.width),this.getCanvasDrawNum(i.height+a));var o=e.artboard.artboard.flowStart;o&&(i=this.getFlowStartIconRect(e),i=this._getScaleRect(i.x,i.y,i.width,i.height,n,r),t.clearRect(this.getCanvasDrawNum(i.x),this.getCanvasDrawNum(i.y),this.getCanvasDrawNum(i.width),this.getCanvasDrawNum(i.height)))},getFlowStartIconRect:function(t){var e=t.rect,n=e.x,r=e.y;n-=16;var i=16,a=26;return{x:n,y:r,width:i,height:a}},_drawSectionBackground:function(t,e,n,r){var i=this,a=n.cssStyle,o=n.name,s=null===a||void 0===a?void 0:a.render.backgrounds,c=function(t){return i.getCanvasDrawNum(t)};if(s){var l=s.length-1;s.forEach((function(n,i){try{l===i&&(t.shadowBlur=Math.max(5*r,5),t.shadowColor="rgba(24, 134, 255, 0.08)"),n.render&&n.render(t,e,c),l===i&&(t.shadowBlur=0,t.shadowColor="")}catch(a){}}))}if(o){var u=Math.round(this.titleHeight*r),h=Math.min(Math.max(2,Math.round(14*r)),24);if(h<4)return;t.font="".concat(this.getCanvasDrawNum(h),"px Arial");var f=a.nameSize[h];if(null==f){var m=t.measureText(o),p=m.width;f=a.nameSize[h]={width:p}}var b=Math.round(.1*f.width),v=Math.ceil(2*b+f.width),g=this.getCanvasDrawNum(3*r),w=this.getCanvasDrawNum(Math.min(2*h,u-g)),x=this.getCanvasDrawNum(e.x),y=this.getCanvasDrawNum(e.y)-w-g;t.fillStyle="#404040",Rt(t,(new d["a"]).set(x,y,v,w),5),t.fillStyle="#fff",t.textAlign="left",t.textBaseline="middle",t.fillText(o,x+b,y+w/2,this.getCanvasDrawNum(e.width))}},_drawArtboardBackground:function(t,e,n,r,i,a){var s=Math.round(this.titleHeight*i),c=a===o["n"].FIGMA;c?(t.lineWidth=Math.max(1*i,1),t.strokeStyle="rgba(166,169,180, 0.1)",t.strokeRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height))):(t.fillStyle="#fff",t.fillRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height)));var l=r===o["f"].Dev,u={width:0,height:0,naturalWidth:0,naturalHeight:0};if(l){var d=_t.imgs.dev,h=_t.sizes.dev;d&&(u.width=this.getCanvasDrawNum(i*h.width),u.height=this.getCanvasDrawNum(i*h.height),u.naturalWidth=h.width,u.naturalHeight=h.height,t.drawImage(d,0,0,u.naturalWidth,u.naturalHeight,this.getCanvasDrawNum(e.x+e.width-u.width),this.getCanvasDrawNum(e.y-s/2)-Math.round(u.height/2),u.width,u.height))}if(n){var f=this.getCanvasDrawNum(Math.min(Math.max(2,Math.round(12*i)),1024));if(f>3){t.fillStyle="#71717a",t.textAlign="left",t.textBaseline="middle",t.font="".concat(f,"px Arial");var m=this.getCanvasDrawNum(e.width)-(u.width>0?u.width+5:0),p=Ut(t,f,n,m);t.fillText(p.text,this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y-s/2))}}u.img=null},_drawArtboardText:function(t,e,n){t.textAlign="center",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(6,Math.min(n.width,n.height)/15),36)),"px Arial"),t.fillText(e,this.getCanvasDrawNum(Math.floor(n.x+n.width/2)),this.getCanvasDrawNum(Math.ceil(n.y+n.height/2)),this.getCanvasDrawNum(n.width))},_getScaleRect:function(t,e,n,r,i,a){var o={x:t,y:e,width:n,height:r};return o.x=o.x*a-i.x,o.y=o.y*a-i.y,o.width=o.width*a,o.height=o.height*a,o},_drawInteraction:function(t,e,n,r,i,a){var o=e.rect,c="#1886ff",l="#cdcdda",u="rgba(24, 134, 255, 0.05)",h=n.canvasData,f=n.isEnter;t.lineWidth=1,t.lineWidth=.5;var m=Object(s["a"])({},h.nodeRect);m.x+=o.x,m.y+=o.y,Object(d["f"])(m,i)&&(t.setLineDash([5,2]),t.lineDashOffset=2,m=this._getScaleRect(m.x,m.y,m.width,m.height,r,a),f&&(t.fillStyle=u,t.fillRect(this.getCanvasDrawNum(m.x),this.getCanvasDrawNum(m.y),this.getCanvasDrawNum(m.width),this.getCanvasDrawNum(m.height))),t.fillStyle=t.strokeStyle=f?c:l,t.strokeRect(this.getCanvasDrawNum(m.x),this.getCanvasDrawNum(m.y),this.getCanvasDrawNum(m.width),this.getCanvasDrawNum(m.height))),t.strokeStyle=f?c:l,t.lineWidth=Math.max(Math.min(2*a,2),.5),t.setLineDash([]),t.lineDashOffset=0;var p=h.curve;m=(new d["a"]).set(p.start.x+o.x,p.start.y+o.y,1,1),t.beginPath(),m=this._getScaleRect(m.x,m.y,m.width,m.height,r,a),t.moveTo(this.getCanvasDrawNum(m.x),this.getCanvasDrawNum(m.y));var b=this._getScaleRect(p.p1.x+o.x,p.p1.y+o.y,1,1,r,a),v=this._getScaleRect(p.p2.x+o.x,p.p2.y+o.y,1,1,r,a),g=this._getScaleRect(p.end.x+o.x,p.end.y+o.y,1,1,r,a);t.bezierCurveTo(this.getCanvasDrawNum(b.x),this.getCanvasDrawNum(b.y),this.getCanvasDrawNum(v.x),this.getCanvasDrawNum(v.y),this.getCanvasDrawNum(g.x),this.getCanvasDrawNum(g.y)),t.stroke();var w=h.arrowIcon;m=(new d["a"]).set(w.x+o.x,w.y+o.y,w.width,w.height);var x=f?w.img:w.img_default;Object(d["f"])(m,i)&&x&&(m=this._getScaleRect(m.x,m.y,m.width,m.height,r,a),t.drawImage(x,0,0,w.width,w.height,this.getCanvasDrawNum(m.x),this.getCanvasDrawNum(m.y),this.getCanvasDrawNum(m.width),this.getCanvasDrawNum(m.height)))},_drawSectionItem:function(t,e,n,r,i){var a=Object(d["f"])(i.rect,n);if(a){var o=this._getScaleRect(i.rect.x,i.rect.y,i.rect.width,i.rect.height,e,r);this._drawSectionBackground(t,o,i.section,r)}},_drawArtboard:function(t,e,n,r,i,a,o){var s,c,l=Object(d["f"])(i.rect,n);if(l){var u=this._getScaleRect(i.rect.x,i.rect.y,i.rect.width,i.rect.height,e,r);this._drawArtboardBackground(t,u,i.artboard.artboard.name,i.artboard.customStatus,r,null!==(s=null===(c=i.artboard.artboard.mlConfig)||void 0===c?void 0:c.fileType)&&void 0!==s?s:i.artboard.artboard.fileType);var h=i.miniImgSize,f=i.miniImg,m=i.img,p=this.isDrawMiniImg(i);if(p)t.drawImage(f,0,0,h.width,h.height,this.getCanvasDrawNum(u.x),this.getCanvasDrawNum(u.y),this.getCanvasDrawNum(u.width),this.getCanvasDrawNum(u.height));else if(i.loaded)if(m){var b=i.imgSize;t.drawImage(m,0,0,b.width,b.height,this.getCanvasDrawNum(u.x),this.getCanvasDrawNum(u.y),this.getCanvasDrawNum(u.width),this.getCanvasDrawNum(u.height))}else this._drawArtboardText(t,"预览图加载失败",u);else this._drawArtboardText(t,"画板预览图加载中...",u);var v=i.artboard.artboard.flowStart;if(v){var g=_t.imgs.flowStartIcon,w=_t.sizes.flowStartIcon;g&&(u=this.getFlowStartIconRect(i),u=this._getScaleRect(u.x,u.y,u.width,u.height,e,r),t.drawImage(g,0,0,w.width,w.height,this.getCanvasDrawNum(u.x),this.getCanvasDrawNum(u.y),this.getCanvasDrawNum(u.width),this.getCanvasDrawNum(u.height)))}if(a&&i.artboard.mlUserSelectDown){var x=Math.round(o/2);t.strokeStyle="#1886ff",t.setLineDash([]),t.lineDashOffset=2,t.lineWidth=this.getCanvasDrawNum(o),t.strokeRect(this.getCanvasDrawNum(u.x+x),this.getCanvasDrawNum(u.y+x),this.getCanvasDrawNum(u.width-o),this.getCanvasDrawNum(u.height-o))}}},getCanvasDrawNum:function(t){return Math.round(t*this.canvasScale)},isDrawMiniImg:function(t){return t.miniLoaded&&t.loaded&&t.miniImg&&t.img&&2*t.miniImgSize.width/3>this.scale*t.rect.width},imgLoaded:function(t,e){if(e.loaded=!0,e.img=t,t){var n=e.imgSize;n.width=t.width,n.height=t.height;var r=this.isDrawMiniImg(e);if(r&&!e.miniLoaded)return}this.drawAllDelay(e)},miniImgLoaded:function(t,e){if(e.miniLoaded=!0,e.miniImg=t,t){var n=e.miniImgSize;n.width=t.width,n.height=t.height;var r=this.isDrawMiniImg(e);if(!r&&e.loaded&&e.img)return}this.drawAllDelay(e)},onSceneResize:function(t,e,n){if(!this.initScale||n){var r=this.rect;if(r&&0!==t&&0!==e){this.initScale=!0;var i=r.width/t,a=r.height/e,o=Math.max(i,a);if(0!==o){o=.96/o;var s=this.scale;this.setScaleList(o),o=this.scale,this.resetScaleSceneCenter(o,s)}}}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},computed:{sectionVisible:function(){return this.sections.length>0},artboardInteractions:function(){var t=this,e={},n=this.artboards,r=this.renderDocuments,i=this.filterDocumentType,a=i===o["x"].Section;return n.forEach((function(n){var i=n.artboard.artboard,o=i.boundsInParentForList,s=i.pageGuid||i.docGuid,c=i.topSectionId,l=t.getRenderInteractions(i),u=[];l&&l.forEach((function(t){var e,i=It(r,t,o,s,!0,{inSection:a,topSectionId:c});i&&u.push({art:n,canvasData:i,key:t.guid,toArtboardItem:null===(e=t.renderTapInteraction)||void 0===e?void 0:e.toArtboardItem,isEnter:!1})})),u.length>0&&(e[i.cid]=u)})),e},selectNodeCount:function(){var t=0;return this.renderDocumentArtboards.forEach((function(e){e.mlUserSelectDown&&(t+=1)})),t},mouseenterArtboardTitle:function(){var t=this.mouseenterArtboard,e=this.inArtboardMultDownMode;if(t){if(e)return"单击选中/取消选中";var n=t.artboard.artboard;return this.inCloudMode?Ue(n):"双击查看 ".concat(n.name," 标注详情")}},mouseenterArtboardStyle:function(){var t=this.canvasStyle;if(t)return null;var e=this.mouseenterArtboard;if(!e)return null;var n=this.sceneX,r=this.sceneY,i=this.scale,a=e.rect,o={};o.left=Math.floor(a.x*i+n)+"px",o.top=Math.floor(a.y*i+r)+"px",o.width=Math.ceil(a.width*i)+"px",o.height=Math.ceil(a.height*i)+"px";var s=Math.min(20,Math.max(5,Math.round(6*i)));return o.webkitBoxShadow=o.boxShadow="0 0 ".concat(s,"px rgba(24, 134, 255, 0.3)"),o},canvasWidth:function(){var t=this.sceneWidth,e=this.canvasScale;return t*e},canvasHeight:function(){var t=this.sceneHeight,e=this.canvasScale;return t*e},canvasStyleSection:function(){var t=this.sceneInfoSection;if(0!==t.scale){var e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=Math.round(e-t.sceneX),s=Math.round(n-t.sceneY),c=r/t.scale;if(0!==o||0!==s||1!==c||t.sceneWidth!==i||t.sceneHeight!==a){var l={transform:""};return 1!==c?(o=t.sceneX/t.scale*r-e,s=t.sceneY/t.scale*r-n,o=-Math.round(o),s=-Math.round(s),l.transform+="translate3d(".concat(o,"px, ").concat(s,"px, 0px) scale(").concat(c.toFixed(5),")")):0===o&&0===s||(l.transform+=" translate3d(".concat(o,"px, ").concat(s,"px, 0px)")),l}}},canvasStyle:function(){var t=this.sceneInfo;if(0!==t.scale){var e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=Math.round(e-t.sceneX),s=Math.round(n-t.sceneY),c=r/t.scale;if(0!==o||0!==s||1!==c||t.sceneWidth!==i||t.sceneHeight!==a){var l={transform:""};return 1!==c?(o=t.sceneX/t.scale*r-e,s=t.sceneY/t.scale*r-n,o=-Math.round(o),s=-Math.round(s),l.transform+="translate3d(".concat(o,"px, ").concat(s,"px, 0px) scale(").concat(c.toFixed(5),")")):0===o&&0===s||(l.transform+=" translate3d(".concat(o,"px, ").concat(s,"px, 0px)")),l}}},rect:function(){var t=this.titleHeight,e=this.renderDocuments,n=[];e.forEach((function(t){n.push({artboard:{boundsInParent:t.rect}})}));var r=Object(c["A"])(n);return r.y-=t,r.height+=t,r},isSupportWebp:function(){return this.$store.state.isSupportWebp===ln.Support},artboardShowInteractionLine:function(){return this.$store.state.artboardShowInteractionLine},mouseenterArtboard:function(){if(this.dragging)return null;var t=this.mouseLoc,e=this.scale,n=this.sceneX,r=this.sceneY,i=this.inViewerArtboards,a=i.length;if(0===a)return null;for(var o=(new d["a"]).set((t.x-n)/e,(t.y-r)/e,1,1),s=a-1;s>=0;s--){var c=i[s];if(Object(d["f"])(c.rect,o))return c}return null},inViewerSections:function(){var t=[],e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=this.sections;if(0===r||0===i||0===a)return t;var s=(new d["a"]).set(-e/r,-n/r,i/r,a/r);return o.forEach((function(e){var n=Object(d["f"])(e.rect,s);n&&t.push(e)})),t},inViewerArtboards:function(){var t=[],e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=this.artboards;if(0===r||0===i||0===a)return t;var s=(new d["a"]).set(-e/r,-n/r,i/r,a/r);return o.forEach((function(e){var n=Object(d["f"])(e.rect,s);n&&t.push(e)})),t},sections:function(){var t=[],e=this.renderDocuments;return Object(l["h"])(e)?(e.forEach((function(e){var n=e.maxRect.x-e.rect.x,r=e.maxRect.y-e.rect.y,i=e.sections;Object(l["h"])(i)&&i.forEach((function(e){var i,a=null!==(i=e.boundsInParentForList)&&void 0!==i?i:e.boundsInParent,o={rect:{x:Math.floor(a.x-n),y:Math.floor(a.y-r),width:Math.ceil(a.width),height:Math.ceil(a.height)},section:e};t.push(o)}))})),t):t},artboards:function(){var t=[],e=this.renderDocuments;if(!Object(l["h"])(e))return t;var n=this.isSupportWebp;return e.forEach((function(e){var r=e.maxRect.x-e.rect.x,i=e.maxRect.y-e.rect.y,a=e.arts;Object(l["h"])(a)&&a.forEach((function(e){var a,o=e.artboard;if(o){var s,c=null!==(a=o.boundsInParentForList)&&void 0!==a?a:o.boundsInParent;n&&(s=o.pathPreviewWebp),s||(s=o.pathPreview);var l=o.pathPreviewMini,u={rect:{x:Math.floor(c.x-r),y:Math.floor(c.y-i),width:Math.ceil(c.width),height:Math.ceil(c.height)},imgSrc:s,imgSize:{width:0,height:0},img:null,miniImgSrc:l,miniImgSize:{width:0,height:0},miniImg:null,miniLoaded:!1,loaded:!1,artboard:e};t.push(u)}}))})),t},selectArtboardChanged:function(){return this.$store.state.selectArtboardChanged},customStatusKey:function(){return this.inViewerArtboards.map((function(t){return"".concat(t.artboard.artboard.cid,":").concat(t.artboard.customStatus)})).join(":")}},watch:{mouseenterArtboard:function(t,e){if(!this.dragging&&this.artboardShowInteractionLine){var n=null===t||void 0===t?void 0:t.artboard.artboard.cid,r=null===e||void 0===e?void 0:e.artboard.artboard.cid;n!==r&&this.draw(null,!0)}},artboardShowInteractionLine:function(){this.draw(null,!0)},artboardInteractions:function(){this.artboardShowInteractionLine&&this.drawAllDelay()},selectArtboardChanged:function(t){var e=this;t&&0!==t.length&&(t.length>10?this.draw(null,!0):this.inViewerArtboards.forEach((function(n){var r=n.artboard.artboard.guid;t[r]&&e.draw(n)})))},dragging:function(){this.draggingTime=Date.now()},sections:function(){this.drawSection(null,!0)},artboards:function(t,e){var n={},r={};null===e||void 0===e||e.forEach((function(t){var e,r=null===t||void 0===t||null===(e=t.artboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid;r&&(n[r]=t)})),null===t||void 0===t||t.forEach((function(t){var e,n=null===t||void 0===t||null===(e=t.artboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid;n&&(r[n]=t)}));var i=null===e||void 0===e?void 0:e.filter((function(t){var e,n=null===t||void 0===t||null===(e=t.artboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid;return!r[n]})),a=null===t||void 0===t?void 0:t.filter((function(t){var e,r=null===t||void 0===t||null===(e=t.artboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid,i=n[r];if(!i)return!0;var a=i.miniImg,o=i.miniLoaded,s=i.miniImgSrc,c=i.img,l=i.loaded,u=i.imgSrc,d=i.imgSize,h=i.miniImgSize,f=t.miniImgSrc,m=t.imgSrc;return!o||!l||s!==f||u!==m||(t.miniImg=a,t.miniLoaded=!0,t.miniImgSize=h,t.img=c,t.loaded=!0,t.imgSize=d,!1)}));this.attachImgs(i,!1),this.attachImgs(a,!0)},scale:function(){this.drawSection(),this.draw()},sceneX:function(){this.drawSection(),this.draw()},sceneY:function(){this.drawSection(),this.draw()},sceneWidth:function(){this.drawSection(),this.draw()},sceneHeight:function(){this.drawSection(),this.draw()},customStatusKey:function(){this.draw(null,!0)},inArtboardMultDownMode:function(){this.draw()}},data:function(){return{handleDrawAllDelay:0,drawAllTime:0,drawAllTimeSection:0,canvasScale:Object(c["L"])(),mouseLoc:{x:-10,y:-10},drawInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0},sceneInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},drawInfoSection:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0},sceneInfoSection:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},sceneDelayTimes:{artboard:0,section:0},sceneDelayHandle:-1,sceneDelayHandleSection:-1,titleHeight:o["b"],initScale:!1,handle:0,handleSection:-1,context:null,useOffscreen:!1,worker:null,workerInited:!1,tipHandle:0,draggingTime:0}},beforeDestroy:function(){clearTimeout(this.tipHandle),clearTimeout(this.sceneDelayHandleSection),cancelAnimationFrame(this.handleSection),clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),window.removeEventListener("keydown",this.quickKey),this.attachImgs(this.artboards,!1)},created:function(){window.addEventListener("keydown",this.quickKey),this.attachImgs(this.artboards,!0)},props:{scale:Number,sceneX:Number,sceneY:Number,sceneWidth:Number,sceneHeight:Number,dragging:Boolean,sceneScaleKeepX:Number,sceneScaleKeepY:Number,sceneOffsetX:Number,sceneOffsetY:Number}},ho=uo,fo=(n("5f3a"),Object(hr["a"])(ho,co,lo,!1,null,"68727400",null)),mo=fo.exports,po=function(){var t=this,e=t._self._c;return e("div",{staticClass:"canvas-box"},[e("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale}})])},bo=[],vo={methods:{draw:function(t,e){var n=this;if(t||e)requestAnimationFrame((function(){n._draw(t,e)}));else{var r=this.sceneInfo,i=this.sceneWidth,a=this.sceneHeight,o=r.sceneWidth!==i||r.sceneHeight!==a?1:0;if(o)return clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),void(this.handle=requestAnimationFrame((function(){n._draw(t)})));clearTimeout(this.sceneDelayHandle),this.sceneDelayHandle=setTimeout((function(){cancelAnimationFrame(n.handle),n.handle=requestAnimationFrame((function(){n._draw(t)}))}),33)}},_draw:function(t,e){var n=this;clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle);var r=this.sceneX,i=this.sceneY,a=this.scale,o=this.sceneWidth,s=this.sceneHeight,c=this.sceneInfo;if(c.sceneX=r,c.sceneY=i,c.scale=a,c.sceneWidth=o,c.sceneHeight=s,0!==a&&0!==o&&0!==s){var l=this.drawInfo,u=!t,h=!(l.scale===a&&l.sceneX===r&&l.sceneY===i&&l.sceneWidth===o&&l.sceneHeight===s);if(!u||h||e){var f=this.$refs.canvas;if(f){l.scale=a,l.sceneX=r,l.sceneY=i,l.sceneWidth=o,l.sceneHeight=s;var m,p=f.getContext("2d"),b=!1;u||h?(p.clearRect(0,0,this.getCanvasDrawNum(o),this.getCanvasDrawNum(s)),m=this.inViewerArtboards,b=!0):m=[t];var v=(new d["a"]).set(-r,-i,o,s),g=(new d["a"]).set(v.x/a,v.y/a,v.width/a,v.height/a),w=Math.max(2,Math.min(6,Math.ceil(3*this.scale)));p.strokeStyle="#1886ff",p.lineWidth=this.getCanvasDrawNum(w),m.forEach((function(t){n._drawArtboard(p,v,g,a,t,b,w)}))}}}},_drawArtboardBackground:function(t,e,n,r,i){var a,s,c,l=null,u=Math.round(this.titleHeight*i);if(n||t.clearRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y-u),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height+u)),r.fill&&r.fillEnabled){var d=r.fill.value;d&&(c=Object(h["i"])(d).value)}var f=null!==(a=null===(s=r.mlConfig)||void 0===s?void 0:s.fileType)&&void 0!==a?a:r.fileType,m=f===o["n"].FIGMA;c||m||(c="#fff"),c&&(t.fillStyle=c,t.fillRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height))),t.fillStyle="#a6a9b4",t.textAlign="left",t.textBaseline="bottom",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(2,14*i),24)),"px Arial"),l&&t.fillText(l,this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(Math.round(e.y-Math.min(u/2,8*i))),this.getCanvasDrawNum(e.width))},_drawArtboardText:function(t,e,n){t.textAlign="center",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(6,Math.min(n.width,n.height)/15),36)),"px Arial"),t.fillText(e,this.getCanvasDrawNum(Math.floor(n.x+n.width/2)),this.getCanvasDrawNum(Math.ceil(n.y+n.height/2)),this.getCanvasDrawNum(n.width))},_drawArtboard:function(t,e,n,r,i,a){var o,s=Object(d["f"])(i.rect,n);if(s){var c=Object.assign({},i.rect);c.x=Math.round(c.x*r-e.x),c.y=Math.round(c.y*r-e.y),c.width=Math.round(c.width*r),c.height=Math.round(c.height*r),this._drawArtboardBackground(t,c,a,null!==(o=i.artboard.artboardVerData)&&void 0!==o?o:i.artboard.artboard,r);var l=i.miniImgSize,u=i.miniImg,h=i.img,f=this.isDrawMiniImg(i);if(f)t.drawImage(u,0,0,l.width,l.height,this.getCanvasDrawNum(c.x),this.getCanvasDrawNum(c.y),this.getCanvasDrawNum(c.width),this.getCanvasDrawNum(c.height));else if(i.loaded)if(h){var m=i.imgSize;t.drawImage(h,0,0,m.width,m.height,this.getCanvasDrawNum(c.x),this.getCanvasDrawNum(c.y),this.getCanvasDrawNum(c.width),this.getCanvasDrawNum(c.height))}else this._drawArtboardText(t,"预览图加载失败",c);else this._drawArtboardText(t,"画板预览图加载中...",c)}},getCanvasDrawNum:function(t){return Math.round(t*this.canvasScale)},isDrawMiniImg:function(t){return t.miniLoaded&&t.loaded&&t.miniImg&&t.img&&2*t.miniImgSize.width/3>this.scale*t.rect.width},imgLoaded:function(t,e){if(e.loaded=!0,e.img=t,t){var n=e.imgSize;n.width=t.width,n.height=t.height;var r=this.isDrawMiniImg(e);if(r&&!e.miniLoaded)return}this.draw(e)},miniImgLoaded:function(t,e){if(e.miniLoaded=!0,e.miniImg=t,t){var n=e.miniImgSize;n.width=t.width,n.height=t.height;var r=this.isDrawMiniImg(e);if(!r&&e.loaded&&e.img)return}this.draw(e)},attachImgs:function(t,e){var n=this;Object(l["h"])(t)&&(e?t.forEach((function(t){c["db"].add(t.imgSrc,n.imgLoaded,t),c["db"].add(t.miniImgSrc,n.miniImgLoaded,t)})):t.forEach((function(t){c["db"].remove(t.imgSrc,n.imgLoaded,t),c["db"].remove(t.miniImgSrc,n.miniImgLoaded,t),t.img=null,t.loaded=!1})))}},computed:{artboard:function(){var t=this.curArtboard;if(!t)return null;var e=t.artboard,n=t.artboardVerData;return null!==n&&void 0!==n?n:e},canvasStyle:function(){var t=this.sceneInfo;if(0!==t.scale){var e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=Math.round(e-t.sceneX),s=Math.round(n-t.sceneY),c=r/t.scale;if(0!==o||0!==s||1!==c||t.sceneWidth!==i||t.sceneHeight!==a){var l={transform:""};return 1!==c?(o=t.sceneX/t.scale*r-e,s=t.sceneY/t.scale*r-n,o=-Math.round(o),s=-Math.round(s),l.transform+="translate3d(".concat(o,"px, ").concat(s,"px, 0px) scale(").concat(c.toFixed(5),")")):0===o&&0===s||(l.transform+=" translate3d(".concat(o,"px, ").concat(s,"px, 0px)")),l}}},rect:function(){var t=this.titleHeight,e=this.artboard,n=e.boundsInArtboard;return(new d["a"]).set(0,0-t,n.width,n.height+t)},isSupportWebp:function(){return this.$store.state.isSupportWebp===ln.Support},inViewerArtboards:function(){var t=[],e=this.sceneX,n=this.sceneY,r=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=this.artboards;if(0===r||0===i||0===a)return t;var s=(new d["a"]).set(-e/r,-n/r,i/r,a/r);return o.forEach((function(e){var n=Object(d["f"])(e.rect,s);n&&t.push(e)})),t},artboards:function(){var t=[],e=this.isSupportWebp,n=this.curArtboard;return n?(function(n){var r=n.artboard,i=n.artboardVerData,a=null!==i&&void 0!==i?i:r;if(a){var o=a.boundsInArtboard;if(o){var s;e&&(s=a.pathPreviewWebp),s||(s=a.pathPreview);var c=a.pathPreviewMini,l={rect:{x:0,y:0,width:Math.ceil(o.width),height:Math.ceil(o.height)},imgSrc:s,imgSize:{width:0,height:0},img:null,miniImgSrc:c,miniImgSize:{width:0,height:0},miniImg:null,miniLoaded:!1,loaded:!1,artboard:n};t.push(l)}}}(n),t):t},refreshKey:function(){var t=this.scale,e=this.sceneX,n=this.sceneY,r=this.sceneWidth,i=this.sceneHeight;return"".concat(t,":").concat(e,":").concat(n,":").concat(r,":").concat(i)}},watch:{dragging:function(){this.draggingTime=Date.now()},artboards:function(t,e){this.attachImgs(e,!1),this.attachImgs(t,!0)},refreshKey:function(){this.draw()}},data:function(){return{canvasScale:Object(c["L"])(),mouseLoc:{x:-10,y:-10},drawInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0},sceneInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},sceneDelayHandle:-1,titleHeight:0,handle:0,draggingTime:0}},beforeDestroy:function(){this.attachImgs(this.artboards,!1)},created:function(){this.attachImgs(this.artboards,!0)},props:{scale:Number,sceneX:Number,sceneY:Number,sceneWidth:Number,sceneHeight:Number,dragging:Boolean,sceneScaleKeepX:Number,sceneScaleKeepY:Number,sceneOffsetX:Number,sceneOffsetY:Number}},go=vo,wo=(n("c088"),Object(hr["a"])(go,po,bo,!1,null,"540d7b54",null)),xo=wo.exports,yo={passive:!1},ko={passive:!1,capture:!0},Co={x:0,y:0,sceneX:0,sceneY:0},So={components:{ArtboardInfo:Pa,ArtboardList:so,CanvasModeArtboardList:mo,CanvasModeArtboardInfo:xo,ViewerBox:vi,DrawView:di,CommentPoints:sa},created:function(){var t=this;window.addEventListener("wheel",this.mouseWheel,yo),window.addEventListener("resize",this.resizeNextTick,yo),this.$nextTick((function(){(t.type===o["B"].ArtboardDetail||t.allArtboardLoadChecked)&&(t.resize(),t.resetSceneLocation())}))},beforeDestroy:function(){var t=document.documentElement;t.removeEventListener("mousemove",this.mouseMove,ko),t.removeEventListener("mouseup",this.mouseUp,ko),window.removeEventListener("wheel",this.mouseWheel,yo),window.removeEventListener("resize",this.resizeNextTick,yo),clearTimeout(this.scalingChangeHandle)},watch:{resetCenterWithRect:function(t){t&&(this.type===o["B"].ArtboardList&&this.setRectToCenterAndScale(t),this.$store.commit("resetCenterWithRect",null))},resetCenterArtboard:function(t){t&&(this.type!==o["B"].ArtboardList||this.artShowInListMode||this.setArtboardToCenterAndScale(t),this.$store.commit("resetCenterArtboard",null))},"imageViewer.resetScale":function(){this.inImageViewerMode&&this.resetSceneLocation()},scale:function(){this.changeInfoCanvasOffset(),this.setScaling()},sceneWidth:function(){this.changeInfoCanvasOffset()},sceneHeight:function(){this.changeInfoCanvasOffset()},rightNavType:function(){this.resizeNextTick()},resetScaleSceneCenter:function(t){var e,n;t&&(e=Math.round(this.sceneOffsetX+this.sceneWidth/2),n=Math.round(this.sceneOffsetY+this.sceneHeight/2),this.resetScaleScene(e,n,t.oldScale,t.newScale))},curArtboard:function(t){null==t?this.type===o["B"].ArtboardList&&this.resetSceneLocation():this.type===o["B"].ArtboardDetail&&this.resetSceneLocation()},curArtboardLoadedVerData:function(t){t&&this.type===o["B"].ArtboardDetail&&this.resetSceneLocation()},resetList:function(){this.type===o["B"].ArtboardList&&this.resetSceneLocation()},resetArtboard:function(){this.type===o["B"].ArtboardDetail&&this.resetSceneLocation()},filterDocumentGuid:function(){this.type===o["B"].ArtboardList&&this.resetSceneLocation()},allArtboardLoadChecked:function(t){this.type===o["B"].ArtboardList&&t&&this.resizeNextTick()}},computed:{rightNavType:function(){return this.$store.state.rightNavType},imageViewer:function(){return this.$store.state.imageViewer},inImageViewerMode:function(){return this.type===o["B"].ImageViewer},EnumScaleType:function(){return o["B"]},artRenderInCanvasMode:function(){return this.$store.state.artRenderInCanvasMode},resetScaleSceneCenter:function(){return this.$store.state.resetScaleSceneCenter},cloudArtListMode:function(){return this.type===o["B"].ArtboardList&&this.useCanvasMode},cloudArtInfoMode:function(){return this.inArtboardInfoMode&&this.useCanvasMode},useCanvasMode:function(){return this.inCloudMode&&this.artRenderInCanvasMode},zoomBoxOffset:function(){return this.cloudArtListMode?null:{transform:"translate3d(".concat(this.sceneX,"px,").concat(this.sceneY,"px,1px)")}},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},scale:function(){switch(this.type){case o["B"].ArtboardList:return this.scaleList;case o["B"].ArtboardDetail:return this.scaleArtboard;case o["B"].ImageViewer:return this.scaleImageViewer;default:return 0}},resetList:function(){return this.$store.state.scale.resetList},resetCenterArtboard:function(){return this.$store.state.scale.resetCenterArtboard},resetCenterWithRect:function(){return this.$store.state.scale.resetCenterWithRect},resetArtboard:function(){return this.$store.state.scale.resetArtboard},inArtboardInfoMode:function(){return this.type===o["B"].ArtboardDetail}},data:function(){return{infoCanvasOffset:{x:0,y:0},sceneX:0,sceneY:0,sceneWidth:0,sceneHeight:0,sceneOffsetX:0,sceneOffsetY:0,dragging:!1,scaling:!1,sceneScaleKeepX:0,sceneScaleKeepY:0,draggedNotclick:!1,scalingChangeHandle:0}},props:{type:Number},methods:{setScaling:function(){var t=this;clearTimeout(this.scalingChangeHandle),this.scaling=!0,this.scalingChangeHandle=setTimeout((function(){t.scaling=!1}),360)},changeInfoCanvasOffset:function(){var t=this.cloudArtInfoMode,e=this.infoCanvasOffset;if(t){var n=this.getInfoCanvasOffset();e.x=n.x,e.y=n.y}},getInfoCanvasOffset:function(){var t=this.scale,e=this.childRect(),n={};return e?(n.x=-(e.width/2+e.x/2)*t+this.sceneWidth/2,n.y=-(e.height/2+e.y/2)*t+this.sceneHeight/2):n.x=n.y=0,n},setConfig:function(t){if(Object(l["s"])(t)){var e=t.scale,n=t.sceneX,r=t.sceneY;"number"===typeof e&&this.setScale(e),"number"===typeof n&&(this.sceneX=n),"number"===typeof r&&(this.sceneY=r)}},resetSceneLocation:function(){if(this.resize(!0),this.sceneX=this.sceneY=0,this.cloudArtListMode){var t=this.getInfoCanvasOffset();this.sceneX=t.x,this.sceneY=t.y}else this.cloudArtInfoMode&&this.changeInfoCanvasOffset()},mouseMove:function(t){t.preventDefault();var e=t.clientX-Co.x,n=t.clientY-Co.y;this.sceneX=Math.round(Co.sceneX+e),this.sceneY=Math.round(Co.sceneY+n),!this.dragging&&(Math.abs(e)>=3||Math.abs(n)>=3)&&(this.dragging=!0,this.draggedNotclick=!0)},mouseUp:function(t){t.preventDefault(),this.dragging&&Object(c["ib"])(),this.dragging=!1;var e=document.documentElement;e.removeEventListener("mousemove",this.mouseMove,ko),e.removeEventListener("mouseup",this.mouseUp,ko)},mousedownZoomContainer:function(t){if(0===t.button){this.draggedNotclick=!1,this.dragging=!1,Co.x=t.clientX,Co.y=t.clientY,Co.sceneX=this.sceneX,Co.sceneY=this.sceneY;var e=document.documentElement;e.addEventListener("mousemove",this.mouseMove,ko),e.addEventListener("mouseup",this.mouseUp,ko)}},setScale:function(t){switch(t>.92&&t<1.08&&(t=1),this.type){case o["B"].ArtboardList:this.setScaleList(t);break;case o["B"].ArtboardDetail:this.setScaleArtboard(t);break;case o["B"].ImageViewer:this.setScaleImageViewer(t);break}},clickZoomContainer:function(t){var e=this.$refs.$instance;if(e)if(this.draggedNotclick)this.draggedNotclick=!1;else{var n=e.clickZoomContainer;n&&n(t)}},inBox:function(t){var e=this.$refs.$info;if(!e)return!0;while(null!=t){if(t===e)return!0;t=t.parentNode}return!1},canEmitEvent:function(t,e){var n=t.target;e.target=n;var r=this.$refs.$instance;if(!r)return!1;var i=r.canEmitEvent;return!(i&&!i(e))&&(!!e.isScale||this.inBox(n))},childRect:function(){var t=this.$refs.$instance;if(t){var e=t.rect;return e?e.toJSON():null}},canEmitWindowEvent:function(){switch(this.type){case o["B"].ArtboardList:if(this.inArtboardMode)return!1;break;case o["B"].ArtboardDetail:if(!this.inArtboardMode)return!1;break;case o["B"].ImageViewer:return!0}return!0},resizeNextTick:function(t){var e=this;this.$nextTick((function(){e.resize(t)}))},resize:function(t){if(this.canEmitWindowEvent()){var e=!0===t,n=this.$refs.$info;if(n){var r=n.getBoundingClientRect();this.sceneWidth=r.width,this.sceneHeight=r.height,this.sceneOffsetX=r.left,this.sceneOffsetY=r.top;var i=this.$refs.$instance;if(i){var a=i.onSceneResize;a&&a(this.sceneWidth,this.sceneHeight,e)}}}},setArtboardToCenterAndScale:function(t){var e=this;if(t){var n=t.docGuid,r=t.pageGuid,i=t.name,a=t.topSectionId,o=this.filterDocumentGuid;o&&n!==o&&r!==o&&a!==o&&this.$store.commit("setFilterDocumentGuid",null),this.$nextTick((function(){var n,r=e.renderDocuments;r.find((function(e){var r,i=e.maxRect.x-e.rect.x,a=e.maxRect.y-e.rect.y,o=null===(r=e.arts)||void 0===r?void 0:r.find((function(e){return e.artboard.cid===t.cid}));if(o){var s,c=o.artboard,l=null!==(s=c.boundsInParentForList)&&void 0!==s?s:c.boundsInParent;return n=(new d["a"]).set(Math.floor(l.x-i),Math.floor(l.y-a),Math.ceil(l.width),Math.ceil(l.height)),!0}})),n?(e.setRectToCenterAndScale(n),e.showTextTip("已定位到画板[".concat(i,"]"))):e.showTextTip("无法定位到画板[".concat(i,"]"))}))}},setRectToCenterAndScale:function(t){if(t){var e=this.sceneWidth,n=this.sceneHeight,r=this.cloudArtListMode;if(0!==e&&0!==n){var i=t,a=i.x,s=i.y,c=i.width,l=i.height,u=o["b"],d=c/e,h=(l+u)/n,f=Math.max(d,h);if(0!==f){f=.96/f,this.setScale(f),f=this.scale,t=this.childRect();var m=new P;m.x-=(c/2+a)*f,m.y-=(l/2+s)*f,r?(m.x+=e/2,m.y+=n/2+u/2):(m.x+=t.width/2*f,m.y+=t.height/2*f,m.x=-(c/2+a-t.width/2)*f,m.y=-(l/2+s-t.height/2+u/2)*f),this.sceneX=Math.round(m.x),this.sceneY=Math.round(m.y)}}}},getBoxLocation:function(t,e,n,r){var i=0,a=0,o=r.width,s=r.height,c=(new d["a"]).set(this.sceneOffsetX+this.sceneX,this.sceneOffsetY+this.sceneY,this.sceneWidth,this.sceneHeight);if(this.cloudArtListMode)return t-=this.sceneOffsetX,e-=this.sceneOffsetY,i=this.sceneX,a=this.sceneY,t-=i,e-=a,o*=n,s*=n,{x:t/o,y:e/s};o*=n,s*=n,i=c.x,a=c.y,i+=c.width/2,a+=c.height/2,i-=o/2,a-=s/2;var l=(new d["a"]).set(i,a,o,s);return 0!==l.width&&0!==l.height?(t-=l.x,e-=l.y,t/=l.width,e/=l.height,{x:t,y:e}):void 0},resetScaleScene:function(t,e,n,r){var i=this.$refs.$instance;if(i){var a=this.childRect(),o=this.getBoxLocation(t,e,n,a);if(o){var s=this.getBoxLocation(t,e,r,a);if(s){this.sceneScaleKeepX=t-this.sceneOffsetX,this.sceneScaleKeepY=e-this.sceneOffsetY;var c=s.x-o.x,l=s.y-o.y,u=c*a.width*r,d=l*a.height*r;this.sceneX+=Math.round(u),this.sceneY+=Math.round(d)}}}},mouseWheel:function(t){if(this.canEmitWindowEvent()){var e=t.ctrlKey||t.metaKey,n=t.shiftKey;if(this.inBox(t.target))if(this.canEmitEvent(t,{isScale:e,isMove:!e})){t.preventDefault();var r=t.deltaX,i=t.deltaY,a=t.deltaMode;if(0===a){var o=Math.abs(r),s=Math.abs(i),c=s>50&&i===Math.ceil(i),l=i>0?-1:1,u=t.altKey?5:1;if(e){var d,h=this.scale;d=h<.1?.01:h<=.2?.03:h<=.3?.05:.11,c||(d*=Math.min(1,s/10));var f=h+l*d*u,m=f-h;if(0===m)return;this.setScale(f),this.resetScaleScene(t.pageX,t.pageY,h,this.scale)}else if(c&&0===r)this[n?"sceneX":"sceneY"]+=Math.round(50*l*u);else{var p=r<0?1:0===r?0:-1,b=i<0?1:0===i?0:-1;p*=Math.min(2.5,o/10),b*=Math.min(2.5,s/10),0!==p&&(this.sceneX+=Math.round(10*p*u)),0!==b&&(this.sceneY+=Math.round(10*b*u))}}}else e&&t.preventDefault();else e&&t.preventDefault()}}}},Oo=So,Io=(n("7c79"),Object(hr["a"])(Oo,Gr,zr,!1,null,"71414f88",null)),Ao=Io.exports,To={components:{ZoomContainer:Ao,ScaleControl:$r},methods:{clickHide:function(){this.canClose&&this.$store.commit("setImageViewer",null)},clickPrev:function(){var t=this.currentIndex-1;t<0&&(t=0),this.imageViewer.currentIndex=t,this.imageViewer.resetScale=Date.now()},clickNext:function(){var t=this.currentIndex+1,e=this.imgList.length-1;t>=e&&(t=e),this.imageViewer.currentIndex=t,this.imageViewer.resetScale=Date.now()},onKeyup:function(t){var e=t.keyCode||t.which;27===e&&this.clickHide()}},computed:{EnumScaleType:function(){return o["B"]},visible:function(){return this.imageViewer.visible&&Object(l["h"])(this.imgList)},imgList:function(){return this.imageViewer.imgList},currentIndex:function(){return this.imageViewer.currentIndex},imageViewer:function(){return this.$store.state.imageViewer}},props:{canClose:{type:Boolean,default:!0}},beforeDestroy:function(){window.removeEventListener("keyup",this.onKeyup,!0)},created:function(){window.addEventListener("keyup",this.onKeyup,!0)}},jo=To,Fo=(n("45cf"),Object(hr["a"])(jo,Er,Pr,!1,null,"42f20b58",null)),Mo=Fo.exports,_o={jszip:Object(lt["createLoadGlobalLibraryFunc"])("JSZip","jszip.min.js",!1),docx:Object(lt["createLoadGlobalLibraryFunc"])("docx","docx-preview.min.js")};function Lo(t,e,n,r){return Do.apply(this,arguments)}function Do(){return Do=Object(i["a"])(Object(r["a"])().mark((function t(e,n,a,o){var s,c,l,u;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(lt["fetchWithProgress"])(n,a,o),Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,_o.jszip.loadAsync();case 2:return t.next=4,_o.docx.loadAsync();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))()]);case 2:return s=t.sent,c=Object(Pt["a"])(s,2),l=c[0],u=c[1],t.next=8,u.renderAsync(l,e);case 8:case"end":return t.stop()}}),t)}))),Do.apply(this,arguments)}var No={components:{ImageViewer:Mo},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error}},methods:{getImgUrl:function(t){var e,n,r=t.tagName.toUpperCase();return"IMG"===r?t.src:"IMAGE"===r?null!==(e=t.getAttribute("href"))&&void 0!==e?e:null===(n=t.href)||void 0===n?void 0:n.baseVal:null},tryRemoveBlobUrl:function(){var t=this;try{var e=this.$refs.container;if(!e)return;var n=Object(u["a"])(e.querySelectorAll("img,image")).map((function(e){return t.getImgUrl(e)})).filter((function(t){return Object(l["i"])(t)&&0===t.indexOf("blob:")}));n.forEach((function(t){URL.revokeObjectURL(t)}))}catch(r){}},initListener:function(t){var e=this.$refs.container;e&&e[t?"addEventListener":"removeEventListener"]("click",this.checkImageEvent)},checkImageEvent:function(t){var e,n=null!==(e=t.target)&&void 0!==e?e:t.srcElement;if(n){var r=this.getImgUrl(n);Object(l["i"])(r)&&this.viewImage(r)}},viewImage:function(t){Object(l["i"])(t)&&this.$store.commit("setImageViewer",{imgList:[t],currentIndex:0})},loadDataAsync:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.curNetDiskFile,i=t.fileDownloadUrl,a=t.fetchData,t.fetchState=c["a"].Fetching,t.errorText=null,e.prev=3,e.next=6,Lo(t.$refs.container,i,(function(t){if(Object(l["s"])(t)){var e=t.percentage,n=void 0===e?"":e,r=t.total,i=void 0===r?"":r,o=t.current,s=void 0===o?"":o;a.total=i,a.percentage=n,a.current=s}}),null!==(o=n.fileSize)&&void 0!==o?o:-1);case 6:t.fetchState=c["a"].Success,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](3),t.errorText="文档加载失败: ".concat(e.t0.toString()),t.fetchState=c["a"].Error;case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()}},data:function(){return{fetchState:c["a"].Normal,errorText:null,fetchData:{percentage:"",current:"",total:""}}},mounted:function(){this.initListener(!0),this.loadDataAsync()},beforeDestroy:function(){this.initListener(!1),this.$store.commit("setImageViewer",null),this.tryRemoveBlobUrl()}},Eo=No,Po=(n("32e1"),Object(hr["a"])(Eo,Dr,Nr,!1,null,"694b25ea",null)),Ro=Po.exports,Vo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-pdf"},[e("object",{staticClass:"object",attrs:{data:t.fileViewUrl,type:t.contentType}},[t._v(" 当前浏览器不支持预览PDF文件,请下载PDF到本地查看:"),e("a",{attrs:{href:t.fileDownloadUrl}},[t._v("下载 PDF")])])])},Bo=[],Uo={computed:{},data:function(){return{contentType:dn?null:"application/pdf"}}},Ho=Uo,Wo=(n("d2eb"),Object(hr["a"])(Ho,Vo,Bo,!1,null,"273b8108",null)),$o=Wo.exports,Go=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-media"},[e("video",{staticClass:"video",attrs:{src:t.fileViewUrl,autoplay:"",controls:""}},[t._v(" 当前浏览器不支持预览媒体文件,请下载到本地查看:"),e("a",{attrs:{href:t.fileDownloadUrl}},[t._v("下载 媒体文件")])])])},zo=[],Yo={computed:{}},Xo=Yo,Ko=(n("b8be"),Object(hr["a"])(Xo,Go,zo,!1,null,"20e5bee7",null)),qo=Ko.exports,Qo=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-image"},[e("ImageViewer",{attrs:{canClose:!1}})],1)},Jo=[],Zo={components:{ImageViewer:Mo},methods:{initImage:function(){this.$store.commit("setImageViewer",{imgList:[this.fileViewUrl],currentIndex:0})}},computed:{},created:function(){this.initImage()}},ts=Zo,es=(n("55a0"),Object(hr["a"])(ts,Qo,Jo,!1,null,"23d0597a",null)),ns=es.exports,rs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-lottie"},[t.lottieError||t.lottieIniting?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在加载lottie文件...",errorText:"lottie文件加载失败,请刷新重试",isLoading:t.lottieIniting,isError:t.lottieError,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t._e(),e("div",{ref:"lottiebox",staticClass:"lottie-box",class:{off:t.lottieError||t.lottieIniting},style:t.lottieBoxStyle})])},is=[],as=function(){var t=this,e=t._self._c;return t.isLoading?e("div",{staticClass:"n-loading",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"text"},[t._v(t._s(t.loadText))])]):t.isError?e("div",{staticClass:"n-error",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"text"},[t._v(t._s(t.errorText))]),t.reLoadText?e("div",[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v(t._s(t.reLoadText))])]):t._e(),t.showCustomService&&t.canShowContactUs?e("div",[e("a",{staticClass:"contactus",attrs:{href:"javascript:;"},on:{click:t.clickContactUS}},[t._v("联系我们")])]):t._e()]):t._e()},os=[],ss={methods:{clickReload:function(){this.$emit("reload")},clickContactUS:function(){this.setContactUsVisible(!0)}},props:{isLoading:Boolean,loadText:{type:String,default:"数据加载中..."},isError:Boolean,errorText:{validator:function(){return!0}},reLoadText:{type:String,default:"重新加载"},showCustomService:{type:Boolean,default:!1}}},cs=ss,ls=(n("7970"),Object(hr["a"])(cs,as,os,!1,null,"6bfca491",null)),us=ls.exports,ds=Object(lt["createLoadGlobalLibraryFunc"])(["bodymovin","lottie"],"lottie.min.js"),hs=function(t,e,n,r,i){"string"===typeof r&&(r=+r),"string"===typeof i&&(i=+i);var a=0,o=0,s=e/n,c=r/i;s!==c&&(s>c?(a=Math.ceil((e-c*n)/2),e-=a):s<c&&(o=Math.ceil((n-e/c)/2),n-=o));for(var l=Math.floor(e/6),u=Math.floor(n/6),d=!0,h=a;h<e;h+=l)for(var f=o;f<n;f+=u){var m=Object(Pt["a"])(t.getImageData(h,f,1,1).data,4),p=m[0],b=m[1],v=m[2],g=m[3];if(0!==p||255!==b||0!==v||255!==g){d=!1;break}}return d},fs={_data:{},clear:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._data,n=Object.keys(e);t>0&&t>n.length||(n.forEach((function(t){try{var n=e[t];if(n&&n.lottie){try{n.lottie.pause()}catch(r){}try{n.lottie.destroy()}catch(r){}n.lottie=null}}catch(r){}})),delete this._data,this._data={})},_getId:function(t){var e,n,r,i=t.viewUrl,a=t.fileName;i&&(n=null!==(r=Object(c["H"])(i))&&void 0!==r?r:i);return n=null!==(e=n)&&void 0!==e?e:a,"lottie-".concat(t.parentId,"-").concat(n)},unbind:function(t){var e=this._getId(t),n=this._data[e];if(n){var r=n.lottie;try{r.stop(),r.wrapper=null}catch(i){try{r.destroy()}catch(i){}delete this._data[e]}}},remove:function(t){var e=this._getId(t),n=this._data[e];if(n){var r=n.lottie;if(r){try{r.pause()}catch(i){}try{r.destroy()}catch(i){}}delete this._data[e]}},get:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new Promise((function(i,a){try{var o=n._getId(e),s=n._data[o];if(s&&s.fetchState!==c["a"].Error){var l=s.lottie;if(l.container){var u=!1;return l.wrapper!==t&&(l.wrapper=t,t.appendChild(l.container),l.resize(),u=!0),l.play(),i({lottie:l,resized:u})}}var d=e.viewUrl;ds.loadAsync().then((function(s){var l=s.loadAnimation({container:t,path:"".concat(d,"?type=res"),renderer:r,loop:!0,autoplay:!0,name:o,rendererSettings:{}});l.setSubframe(!1);var u=n._data[o]={lottie:l,fetchState:c["a"].Fetching},h=function(){if(u){if(h&&(l.removeEventListener("drawnFrame",h),h=null),f&&(l.removeEventListener("data_failed",f),f=null),"canvas"===r){var s=t.querySelector("canvas");if(s){var d=s.width,m=s.height,p=s.getContext("2d",{willReadFrequently:!0}),b=l.animationData,v=hs(p,d,m,b.w,b.h);if(v){try{l.pause()}catch(g){}try{l.destroy()}catch(w){}return l=null,void n.get(t,e,"svg").then(i).catch(a)}}}i({lottie:u.lottie,resized:!0}),u.fetchState=c["a"].Success,u=o=null}},f=function(){u&&(h&&(l.removeEventListener("drawnFrame",h),h=null),f&&(l.removeEventListener("data_failed",f),f=null),u.fetchState=c["a"].Error,delete n._data[o],a(new Error("lottie data failed")),u=o=null)};l.addEventListener("drawnFrame",h),l.addEventListener("data_failed",f)})).catch((function(t){a(t)}))}catch(h){a(h)}}))}};function ms(){var t,e=c["g"];function n(){var t=document.createElement("div");return t.style.cssText="width:1px!important;height:1px!important;position:absolute!important;z-index: -1!important;top:0;left:0;overflow: hidden!important;pointer-events: none!important;",document.body.appendChild(t),t}function a(t){var e,n,r=null!==(e=null===(n=t.animationData)||void 0===n?void 0:n.fr)&&void 0!==e?e:30,i=t.totalFrames;if(0==i)return[];var a=Math.round(i/r*4);if(a<=1)return[0,i-1];var o=6;a>o&&(a=o);var s=Math.ceil(i/(a-1)),c=[],l=0;do{c.push(l),l+=s}while(l<i);return c.length<a&&c.push(i-1),c}function o(t,e,n,r,i,a,o,s,c,l){return new Promise((function(u,d){l&&(o=t);var h=function(){o.toBlob((function(t){u(t)}),"image/png")},f=function(){e.removeEventListener("drawnFrame",f),f=null;try{if(l){if(r<2){s||(s=o.getContext("2d",{willReadFrequently:!0}));var n=Math.floor(i/8),u=Math.floor(a/8);i-=n,a-=u;for(var m=!0,p=n;p<i;p+=n)for(var b=u;b<a;b+=u){var v=Object(Pt["a"])(s.getImageData(p,b,1,1).data,4),g=v[0],w=v[1],x=v[2],y=v[3];if(0!==g||255!==w||0!==x||255!==y){m=!1;break}}m&&d("canvas not good")}h()}else{var k=function(){S&&URL.revokeObjectURL(S),S=void 0},C=new Blob([t.outerHTML],{type:"image/svg+xml;charset=utf-8"}),S=URL.createObjectURL(C);c.onload=function(t){s.clearRect(0,0,i,a),s.drawImage(t.target,0,0,i,a),k(),h()},c.onerror=function(){k(),d("load svg to image failed")},c.src=S}}catch(O){d(O)}};e.currentFrame!==n?(e.addEventListener("drawnFrame",f),e.goToAndStop(n,!0)):f()}))}return function(){var s=Object(i["a"])(Object(r["a"])().mark((function s(u){var d,h,f,m=arguments;return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(d=m.length>1&&void 0!==m[1]?m[1]:"canvas",null!=u){s.next=3;break}throw"file missing";case 3:return h=document.createElement("div"),h.style.cssText="width: ".concat(e,"px;"),t||(t=n(e)),t.appendChild(h),s.next=9,ds.loadAsync();case 9:return f=s.sent,s.next=12,new Promise((function(n,s){var m="lottie-g-".concat(Object(c["lb"])()),p=URL.createObjectURL(u),b=f.loadAnimation({container:h,path:p,renderer:d,loop:!1,autoplay:!1,name:m,rendererSettings:{id:m}});b.setSubframe(!1);var v="canvas"===d;function g(){w||(w=!0,p&&(URL.revokeObjectURL(p),p=null),b&&(b.destroy(),b=null),h&&(t.removeChild(h),h=null))}var w=!1;function x(t){return y.apply(this,arguments)}function y(){return y=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n(e);case 1:case"end":return t.stop()}}),t)}))),y.apply(this,arguments)}function k(){return C.apply(this,arguments)}function C(){return C=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:s("failed");case 1:case"end":return t.stop()}}),t)}))),C.apply(this,arguments)}b.addEventListener("data_failed",(function(){w||(g(),k())})),b.addEventListener("DOMLoaded",Object(i["a"])(Object(r["a"])().mark((function t(){var i,c,d,f,m,p,y,C,S,O,I,A,T;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!w){t.next=2;break}return t.abrupt("return");case 2:t.prev=2,i=b.animationData,c=i.w,d=i.h,f=Math.ceil(d/c*e),h.style.height=f+"px",b.resize(),m=h.querySelector(v?"canvas":"svg"),p=a(b),v||(C=document.createElement("canvas"),C.width=e,C.height=f,S=C.getContext("2d",{willReadFrequently:!0}),O=new Image(e,f)),I=0;case 12:if(!(I<p.length)){t.next=21;break}return A=p[I],t.next=16,o(m,b,A,I,e,f,C,S,O,v);case 16:T=t.sent,y?y.size<T.size&&(y=T):y=T;case 18:I++,t.next=12;break;case 21:if(C=S=O=void 0,y){t.next=26;break}return k(),t.abrupt("return");case 26:return t.next=28,x(y);case 28:y=null,t.next=36;break;case 32:t.prev=32,t.t0=t["catch"](2),"canvas not good"===t.t0?l(u,"svg").then(n).catch(s):k();case 36:return t.prev=36,g(),t.finish(36);case 39:case"end":return t.stop()}}),t,null,[[2,32,36,39]])}))))}));case 12:return s.abrupt("return",s.sent);case 13:case"end":return s.stop()}}),s)})));function l(t){return s.apply(this,arguments)}return l}()}var ps=ms(),bs={components:{NetworkLoading:us},methods:{clickReload:function(){window.location.reload()},resize:function(){var t=this;this.$nextTick((function(){var e=t.$lottie;null===e||void 0===e||e.resize()}))},initLottie:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.lottieIniting&&!t.$lottie){e.next=2;break}return e.abrupt("return");case 2:return t.lottieLoadState=c["a"].Fetching,t.$lottie=null,e.prev=4,e.next=7,fs.get(t.$refs.lottiebox,t.curNetDiskFile);case 7:n=e.sent,i=n.lottie,t.$lottie=i,t.lottieSize=t.getLottieSize(i),t.lottieLoadState=c["a"].Success,e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](4),t.lottieSize=new Y,t.lottieLoadState=c["a"].Error;case 18:case"end":return e.stop()}}),e,null,[[4,14]])})))()},getLottieSize:function(t){var e=new Y(0,0);if(!t)return e;var n=t.animationData;if(!n)return e;var r=n.w,i=n.h;return"string"===typeof r&&(r=+r),"string"===typeof i&&(i=+i),e.width=r,e.height=i,e}},computed:{lottieError:function(){return this.lottieLoadState===c["a"].Error},lottieIniting:function(){return this.lottieLoadState===c["a"].Fetching},lottieBoxStyle:function(){var t=this.lottieSize;return{width:t.width>0?t.width+"px":"100%",height:t.height>0?t.height+"px":"100%"}}},watch:{lottieSize:function(){this.resize()},webViewHidden:function(t){var e=this.$lottie;e&&(t?e.pause():e.play())}},data:function(){return{lottieLoadState:c["a"].Normal,lottieSize:new Y}},beforeDestroy:function(){window.removeEventListener("resize",this.resize),fs.unbind(this.curNetDiskFile),this.$lottie=null},mounted:function(){var t=this;this.$nextTick((function(){t.initLottie()}))},created:function(){window.addEventListener("resize",this.resize)}},vs=bs,gs=(n("6161"),Object(hr["a"])(vs,rs,is,!1,null,"909c6874",null)),ws=gs.exports,xs=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-docx"},[e("ImageViewer",{attrs:{canClose:!0}}),t.fetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[e("b",[t._v("文档打开中...")]),e("span",{domProps:{textContent:t._s("".concat(t.fetchData.current,"/").concat(t.fetchData.total))}})]),e("div",{staticClass:"percentage"},[e("p",{style:{width:t.fetchData.percentage}})])])]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v(t._s(t.errorText))])]):t._e(),e("div",{ref:"container",staticClass:"container"},[e("div",{staticClass:"markdown-box markdown-reset",domProps:{innerHTML:t._s(t.fetchData.markdownHTML)}})])],1)},ys=[],ks={codemirror:Object(lt["createLoadGlobalLibraryFunc"])("CodeMirror","codemirror/codemirror.min.js"),modemeta:Object(lt["createLoadGlobalLibraryFunc"])(null,"codemirror/mode/meta.min.js")},Cs=!1,Ss={},Os=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Ss[e],n||(n=Ss[e]=Object(lt["createLoadGlobalLibraryFunc"])(null,"codemirror/mode/".concat(e,"/").concat(e,".min.js"))),t.prev=2,t.next=5,n.loadAsync();case 5:return t.abrupt("return",t.sent);case 8:return t.prev=8,t.t0=t["catch"](2),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}();function Is(t,e){if(!t)return null;if(!Object(l["i"])(e))return null;var n=e.toLowerCase(),r=t.modeInfo;if(!Object(l["h"])(r))return null;var i=r.find((function(t){var r;return!!t&&(t.mode===e||((null===(r=t.name)||void 0===r?void 0:r.toLowerCase())===n||(t.mime==n||(!(!Object(l["h"])(t.alias)||-1===t.alias.findIndex((function(t){return(null===t||void 0===t?void 0:t.toLocaleLowerCase())===n})))||(!(!Object(l["h"])(t.mimes)||-1===t.mimes.findIndex((function(t){return t===n})))||!(!Object(l["h"])(t.ext)||-1===t.ext.findIndex((function(t){return t===n}))))))))}));if(!i){var a=/\+(xml|json)$/.exec(n);a&&(i=t.findModeByMIME("application/".concat(a[1])))}return i}function As(t,e){return Ts.apply(this,arguments)}function Ts(){return Ts=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(l["s"])(n)||(n={}),t.next=3,js(n.mode,n.theme);case 3:return i=t.sent,a=i.mode,o=i.CodeMirror,delete n.mode,t.abrupt("return",o(e,Object(s["a"])(Object(s["a"])({lineNumbers:!0,gutters:["CodeMirror-linenumbers"],lineWrapping:!0,readOnly:!0,cursorBlinkRate:-1,dragDrop:!1},n),{},{mode:null!==a&&void 0!==a?a:null})));case 8:case"end":return t.stop()}}),t)}))),Ts.apply(this,arguments)}function js(t,e){return Fs.apply(this,arguments)}function Fs(){return Fs=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Cs){t.next=12;break}return t.next=3,Object(lt["loadCssFileAsync"])("codemirror/codemirror.css");case 3:if(!n||"default"===n){t.next=11;break}return t.prev=4,t.next=7,Object(lt["loadCssFileAsync"])("codemirror/theme/".concat(n,".css"));case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](4);case 11:Cs=!0;case 12:return t.next=14,ks.codemirror.loadAsync();case 14:return i=t.sent,window.CodeMirror=i,t.prev=16,t.next=19,ks.modemeta.loadAsync();case 19:if(e=null===(a=Is(i,e))||void 0===a?void 0:a.mode,e){t.next=22;break}return t.abrupt("return",{CodeMirror:i,mode:e});case 22:return t.next=24,Os(e);case 24:t.prev=24,window.CodeMirror=void 0;try{delete window.CodeMirror}catch(r){}return t.finish(24);case 28:return t.abrupt("return",{CodeMirror:i,mode:e});case 29:case"end":return t.stop()}}),t,null,[[4,9],[16,,24,28]])}))),Fs.apply(this,arguments)}n("b7a2");var Ms=n("751a"),_s=Ms.createLoadGlobalLibraryFunc,Ls=Ms.fetchWithProgress,Ds=_s("DOMPurify","purify.min.js"),Ns=_s("marked","marked.min.js");function Es(t,e,n){return Ps.apply(this,arguments)}function Ps(){return Ps=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var a,o,s,l,u,d;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Ls(e,n,i),Ds.loadAsync(),Ns.loadAsync()]);case 2:return a=t.sent,o=Object(Pt["a"])(a,3),s=o[0],l=o[1],u=o[2],t.next=9,Object(c["i"])(s);case 9:return d=t.sent,t.abrupt("return",l.sanitize(u.parse(d)));case 11:case"end":return t.stop()}}),t)}))),Ps.apply(this,arguments)}function Rs(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"language-";if(null==t)return null;var r=null===(e=Object(u["a"])(t.classList).find((function(t){return Object(l["i"])(t)&&t.startsWith(n)})))||void 0===e?void 0:e.substring(n.length);return r||null}var Vs={components:{ImageViewer:Mo},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error}},methods:{parseHightlightCode:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,a,o,s,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$refs.container,n){e.next=3;break}return e.abrupt("return");case 3:if(a=n.querySelectorAll('pre code[class^="language-"]'),0!==a.length){e.next=6;break}return e.abrupt("return");case 6:o=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=(null!==(n=e.textContent)&&void 0!==n?n:"").replace(/\r?\n$/,""),Object(l["i"])(i)){t.next=3;break}return t.abrupt("return");case 3:return a=Rs(e),t.next=6,As((function(t){var n=e.parentNode;n.insertBefore(t,e),n.removeChild(e);var r=n.classList;r.add("cm-wrapper"),r.add("cm-mode-".concat(a))}),{value:i,mode:a,lineNumbers:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=0;case 8:if(!(s<a.length)){e.next=15;break}return c=a[s],e.next=12,o(c);case 12:s++,e.next=8;break;case 15:case"end":return e.stop()}}),e)})))()},getImgUrl:function(t){var e,n,r=t.tagName.toUpperCase();return"IMG"===r?t.src:"IMAGE"===r?null!==(e=t.getAttribute("href"))&&void 0!==e?e:null===(n=t.href)||void 0===n?void 0:n.baseVal:null},tryRemoveBlobUrl:function(){var t=this;try{var e=this.$refs.container;if(!e)return;var n=Object(u["a"])(e.querySelectorAll("img,image")).map((function(e){return t.getImgUrl(e)})).filter((function(t){return Object(l["i"])(t)&&0===t.indexOf("blob:")}));n.forEach((function(t){URL.revokeObjectURL(t)}))}catch(r){}},initListener:function(t){var e=this.$refs.container;e&&e[t?"addEventListener":"removeEventListener"]("click",this.checkImageEvent)},checkImageEvent:function(t){var e,n=null!==(e=t.target)&&void 0!==e?e:t.srcElement;if(n){var r=this.getImgUrl(n);Object(l["i"])(r)&&this.viewImage(r)}},viewImage:function(t){Object(l["i"])(t)&&this.$store.commit("setImageViewer",{imgList:[t],currentIndex:0})},loadDataAsync:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.curNetDiskFile,i=t.fileDownloadUrl,a=t.fetchData,t.fetchState=c["a"].Fetching,t.errorText=null,e.prev=3,e.next=6,Es(i,(function(t){if(Object(l["s"])(t)){var e=t.percentage,n=void 0===e?"":e,r=t.total,i=void 0===r?"":r,o=t.current,s=void 0===o?"":o;a.total=i,a.percentage=n,a.current=s}}),null!==(o=n.fileSize)&&void 0!==o?o:-1);case 6:a.markdownHTML=e.sent,t.fetchState=c["a"].Success,t.$nextTick((function(){t.parseHightlightCode()})),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](3),t.errorText="文档加载失败: ".concat(e.t0.toString()),t.fetchState=c["a"].Error;case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))()}},data:function(){return{fetchState:c["a"].Normal,errorText:null,fetchData:{percentage:"",current:"",total:"",markdownHTML:""}}},mounted:function(){this.initListener(!0),this.loadDataAsync()},beforeDestroy:function(){this.initListener(!1),this.$store.commit("setImageViewer",null),this.tryRemoveBlobUrl()}},Bs=Vs,Us=(n("1afc"),Object(hr["a"])(Bs,xs,ys,!1,null,"2309cfc9",null)),Hs=Us.exports,Ws=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdiskfile-docx"},[t.fetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[e("b",[t._v("文档打开中...")]),e("span",{domProps:{textContent:t._s("".concat(t.fetchData.current,"/").concat(t.fetchData.total))}})]),e("div",{staticClass:"percentage"},[e("p",{style:{width:t.fetchData.percentage}})])])]):t.isError?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v(t._s(t.errorText))])]):t._e(),e("div",{staticClass:"container"},[t.fetchData.textHTML?e("CodeMirror",{attrs:{value:t.fetchData.textHTML,mode:t.codemirrorMode}}):t._e()],1)])},$s=[],Gs=function(){var t=this,e=t._self._c;return e("div",{ref:"container",class:["cm-wrapper","cm-mode-".concat(t.mode)]})},zs=[],Ys={methods:{initEditor:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$refs.container,o=t.value,s=t.mode,a){e.next=3;break}return e.abrupt("return");case 3:return s=null!==(n=s)&&void 0!==n?n:null,o=null!==(i=o)&&void 0!==i?i:"",e.next=7,As((function(t){a.appendChild(t)}),{value:o,mode:s});case 7:t.$curEditor=e.sent;case 9:case"end":return e.stop()}}),e)})))()},disposeEditor:function(){var t=this.$curEditor;if(t){var e;if(t.setValue(""),t.clearHistory(),t.display&&(e=t.display.wrapper)){var n=e.parentNode;n&&(n.removeChild(e),n=null),e=null}this.$curEditor=null}}},watch:{value:function(t){var e;null!==(e=t)&&void 0!==e||(t="");var n=this.$curEditor;n&&(n.setValue(t),n.clearHistory())}},mounted:function(){var t=this;this.$nextTick((function(){t.initEditor()}))},beforeDestroy:function(){this.disposeEditor()},props:{mode:{type:String,default:null},value:String}},Xs=Ys,Ks=Object(hr["a"])(Xs,Gs,zs,!1,null,null,null),qs=Ks.exports,Qs={components:{CodeMirror:qs},computed:{fetching:function(){return this.fetchState===c["a"].Fetching},isError:function(){return this.fetchState===c["a"].Error},codemirrorMode:function(){var t,e=this.curNetDiskFile;if(!e)return null;var n=null!==(t=e.fileExt)&&void 0!==t?t:Object(c["G"])(null===e||void 0===e?void 0:e.name);return(null===n||void 0===n?void 0:n.length)>1?n.substring(1):n}},methods:{loadDataAsync:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.curNetDiskFile,i=t.fileDownloadUrl,a=t.fetchData,t.fetchState=c["a"].Fetching,t.errorText=null,e.prev=3,e.next=6,Object(lt["fetchTextWithProgress"])(i,(function(t){if(Object(l["s"])(t)){var e=t.percentage,n=void 0===e?"":e,r=t.total,i=void 0===r?"":r,o=t.current,s=void 0===o?"":o;a.total=i,a.percentage=n,a.current=s}}),null!==(o=n.fileSize)&&void 0!==o?o:-1);case 6:a.textHTML=e.sent,t.fetchState=c["a"].Success,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](3),t.errorText="文档加载失败: ".concat(e.t0.toString()),t.fetchState=c["a"].Error;case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))()}},data:function(){return{fetchState:c["a"].Normal,errorText:null,fetchData:{percentage:"",current:"",total:"",textHTML:""}}},mounted:function(){this.loadDataAsync()}},Js=Qs,Zs=(n("a704"),Object(hr["a"])(Js,Ws,$s,!1,null,"ed986836",null)),tc=Zs.exports,ec={components:{ViewPdf:$o,ViewMedia:qo,ViewImage:ns,ViewLottie:ws,ViewDocx:Ro,ViewMarkdown:Hs,ViewText:tc},computed:{EnumNetDiskFileType:function(){return o["y"]},fileType:function(){var t,e=this.curNetDiskFile;return null!==(t=null===e||void 0===e?void 0:e.fileType)&&void 0!==t?t:o["y"].Other},isDocx:function(){var t,e=this.curNetDiskFile;return o["y"].isDocxFile(null===e||void 0===e?void 0:e.fileType,null!==(t=null===e||void 0===e?void 0:e.fileExt)&&void 0!==t?t:null===e||void 0===e?void 0:e.name)},isMarkdown:function(){var t,e=this.curNetDiskFile;return o["y"].isMarkdownFile(null===e||void 0===e?void 0:e.fileType,null!==(t=null===e||void 0===e?void 0:e.fileExt)&&void 0!==t?t:null===e||void 0===e?void 0:e.name)},isTextFile:function(){var t=this.isMarkdown,e=this.curNetDiskFile;return!t&&o["y"].isTextFile(null===e||void 0===e?void 0:e.fileType)}},created:function(){}},nc=ec,rc=(n("ef21"),Object(hr["a"])(nc,_r,Lr,!1,null,"11b5f44e",null)),ic=rc.exports,ac=function(){var t=this,e=t._self._c;return e("div",{staticClass:"needlogin-tip",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"logo"}),e("div",{staticClass:"box"},[e("div",{staticClass:"container"},[e("div",{staticClass:"cloudname"},[t._v("您正在访问"),e("b",[t._v(t._s(t.title))])]),e("div",{staticClass:"text"},[t._v("请先登录验证权限")]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("立即登录")])])])])])},oc=[],sc={computed:{title:function(){var t=this.cloudName;return t||"标记狮设计协作平台私有云服务"}}},cc=sc,lc=(n("fa0c"),Object(hr["a"])(cc,ac,oc,!1,null,"5f420963",null)),uc=lc.exports,dc=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"menu",staticClass:"menu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[t.inCloudViewerMode&&!t.notSupportArtboardStatusVersion?e("div",{staticClass:"menu-item",domProps:{textContent:t._s(t.artboardInDevStatus?"取消待开发状态":"标记为待开发")},on:{click:t.clickSetArtboardStatus}}):t._e(),e("div",{staticClass:"menu-item",on:{click:t.clickGoArtboardSlice}},[t._v("查看画板全部切图")]),e("div",{staticClass:"menu-item",on:{click:function(e){return t.clickDownPreview(1)}}},[t._v("下载画板预览图"+t._s(t.inCloudMode?"@2x":""))]),t.inCloudMode?e("div",{staticClass:"menu-item",on:{click:function(e){return t.clickDownPreview(.5)}}},[t._v("下载画板预览图@1x")]):t._e(),t.inCloudMode&&t.cloudUserIsDesigner?e("div",{staticClass:"menu-item",class:{off:t.fileReadOnly,light:!t.fileReadOnly},on:{click:t.clickRemoveItem}},[t._v("删除")]):t._e()]):t._e()},hc=[];function fc(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(){n("read error")},r.readAsText(t)}))}function mc(t,e){return pc.apply(this,arguments)}function pc(){return pc=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o,s,c,l,u,d,h,f,m,p;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fc(e);case 2:if(s=t.sent,c=new DOMParser,l=c.parseFromString(s,"image/svg+xml"),u=null!==(i=null===l||void 0===l?void 0:l.documentElement)&&void 0!==i?i:null===l||void 0===l?void 0:l.rootElement,d=null!==(a=null===u||void 0===u||null===(o=u.viewBox)||void 0===o?void 0:o.baseVal)&&void 0!==a?a:{},h=d.width,f=d.height,!("number"!==typeof h||"number"!==typeof f||h<=0||f<=0)){t.next=9;break}throw"error svg";case 9:if(m=+u.getAttribute("width"),p=+u.getAttribute("height"),!(m>0&&p>0)){t.next=13;break}return t.abrupt("return",e);case 13:return(isNaN(m)||m<=0)&&(m=n),(isNaN(p)||p<=0)&&(p=Math.round(m/h*f)),u.setAttribute("width",m),u.setAttribute("height",p),t.abrupt("return",new Blob([u.outerHTML],{type:"image/svg+xml"}));case 18:case"end":return t.stop()}}),t)}))),pc.apply(this,arguments)}function bc(t,e,n,r,i){return vc.apply(this,arguments)}function vc(){return vc=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,a,o){var s,c,l,u,d,h,f,m,p,b,v,g;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o){t.next=9;break}return t.prev=1,t.next=4,mc(e,n);case 4:e=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](1);case 9:return t.next=11,new Promise((function(t,r){var i=URL.createObjectURL(e),a=new Image;a.onerror=function(t){var e=t.target;e.onerror=e.onload=null,i&&URL.revokeObjectURL(i),r("img load error")},a.onload=function(e){var n=e.target;n.onerror=n.onload=null,i&&URL.revokeObjectURL(i),t(n)},a.width=n,a.src=i}));case 11:return l=t.sent,u=null!==(s=l.naturalWidth)&&void 0!==s?s:l.width,d=null!==(c=l.naturalHeight)&&void 0!==c?c:l.height,h=n/u,m="function"===typeof window.OffscreenCanvas,t.prev=16,f=m?new window.OffscreenCanvas(10,10):document.createElement("canvas"),m||(f.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(f)),p=f.getContext("2d"),t.next=22,Uc(l,f,p,m,h,i);case 22:if(b=t.sent,a){t.next=25;break}return t.abrupt("return",b);case 25:return t.next=27,new Promise((function(t,e){var n=new FileReader;n.addEventListener("load",(function(e){t(e.target.result)})),n.addEventListener("error",(function(){e("blob转换成base64失败")})),n.readAsDataURL(b)}));case 27:return b=t.sent,v=Math.max(Math.round(d*h),1),t.abrupt("return",new Blob(['<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'.concat(n,'" height="').concat(v,'" viewBox="0 0 ').concat(n," ").concat(v,'"><image width="').concat(n,'" height="').concat(v,'" xlink:href="').concat(b,'"/></svg>')],{type:"image/svg+xml"}));case 30:return t.prev=30,f&&(g=f.parentNode,g&&g.removeChild(f)),f=null,t.finish(30);case 34:case"end":return t.stop()}}),t,null,[[1,7],[16,,30,34]])}))),vc.apply(this,arguments)}var gc=Object(lt["createLoadGlobalLibraryFunc"])("zip","zip-full.min.js"),wc=function(){function t(){Object(T["a"])(this,t)}return Object(A["a"])(t,null,[{key:"getSketchFileImgPreviewAsync",value:function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(n,i){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.geZipFileImgPreviewAsync(n,i,["previews/preview.png"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"getXDFileImgPreviewAsync",value:function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(n,i){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.geZipFileImgPreviewAsync(n,i,["preview.png","thumbnail.png"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"getFigmaFileImgPreviewAsync",value:function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(n,i){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.geZipFileImgPreviewAsync(n,i,["thumbnail.png"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function n(t,n){return e.apply(this,arguments)}return n}()},{key:"geZipFileImgPreviewAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var a,o,s,u,d,h,f,m,p,b;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n.file=null,t.next=4,gc.loadAsync();case 4:return a=t.sent,o=null,s=new a.ZipReader(new a.BlobReader(e)),u=!1,t.prev=8,t.next=11,s.getEntries();case 11:if(d=t.sent,!(d.length<1)){t.next=14;break}return t.abrupt("return",!1);case 14:h={},f={},i.forEach((function(t){f[t]=1})),d.forEach((function(t){var e,n=null===(e=t.filename)||void 0===e?void 0:e.toLowerCase();Object(l["i"])(n)&&f[n]&&(h[n]=t)})),p=0;case 19:if(!(p<i.length)){t.next=27;break}if(b=i[p],m=h[b],!m){t.next=24;break}return t.abrupt("break",27);case 24:p++,t.next=19;break;case 27:if(m){t.next=29;break}return t.abrupt("return",!1);case 29:return t.next=31,m.getData(new a.BlobWriter);case 31:o=t.sent;case 32:return t.prev=32,u||s.close(),t.finish(32);case 35:if(null!=o){t.next=37;break}return t.abrupt("return",!1);case 37:return t.next=39,bc(o,c["g"],.6,!1,!1);case 39:return n.file=t.sent,t.abrupt("return",null!=n.file);case 43:return t.prev=43,t.t0=t["catch"](0),t.abrupt("return",!1);case 46:case"end":return t.stop()}}),t,null,[[0,43],[8,,32,35]])})));function e(e,n,r){return t.apply(this,arguments)}return e}()}]),t}(),xc=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"files",[]),Object(j["a"])(this,"ZipLib",null)}return Object(A["a"])(t,[{key:"init",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,gc.loadAsync();case 2:this.ZipLib=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"start",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o,s,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.files.length){t.next=2;break}throw"文件列表为空";case 2:return i=this.ZipLib,a=new i.BlobWriter,o=new i.ZipWriter(a),s=!1,t.prev=6,t.next=9,this.fetch(o,n);case 9:return t.next=11,o.close();case 11:return s=!0,t.next=14,a.getData();case 14:return l=t.sent,Object(c["v"])(e,l),t.abrupt("return","success");case 19:throw t.prev=19,t.t0=t["catch"](6),s||o.close(),t.t0;case 23:case"end":return t.stop()}}),t,this,[[6,19]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"fetch",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this.ZipLib,a=this.files.splice(0,1)[0],void 0!==a){t.next=4;break}return t.abrupt("return");case 4:if(!a.isPdf||!n){t.next=10;break}return t.next=7,n(a.resSrc,a.scale,a.isPdf);case 7:o=t.sent,t.next=20;break;case 10:return t.next=12,Object(c["w"])(a.resSrc,a.base64ResSrc);case 12:if(o=t.sent,"string"!==typeof o){t.next=16;break}t.next=20;break;case 16:if(!n){t.next=20;break}return t.next=19,n(o,a.scale,a.isPdf);case 19:o=t.sent;case 20:return t.next=22,e.add(a.filename,"string"===typeof o?new i.Data64URIReader(o):new i.BlobReader(o));case 22:return t.next=24,this.fetch(e,n);case 24:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"addFile",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.files.push({filename:t,resSrc:e,base64ResSrc:n,scale:r,isPdf:i})}}]),t}(),yc=n("5945");n("4809"),n("f0fe"),n("a5cb"),n("dc4c"),n("1a43"),n("b048"),n("216f"),n("2276"),n("20b4"),n("97a5"),n("d3c5"),n("0274"),n("c88e"),n("a932"),n("4c0c"),n("b0cc"),n("9b5a"),n("db09"),n("85bf"),n("aedb"),n("1bf9"),n("e38e"),n("684f"),n("1afe"),n("37d6"),n("601e"),n("b510"),n("6b16"),n("d80c"),n("60bd"),n("d569"),n("36e7");function kc(t){return Cc.apply(this,arguments)}function Cc(){return Cc=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(lt["createFetch"])(e,{method:"GET"});case 2:n=t.sent,t.t0=n.status,t.next=200===t.t0?6:500===t.t0||403===t.t0?10:404===t.t0?14:15;break;case 6:return t.next=8,n.text();case 8:return i=t.sent,t.abrupt("return",Object(c["p"])(i));case 10:return t.next=12,n.text();case 12:throw a=t.sent,"[".concat(n.status,"] ").concat(a);case 14:throw"[404] 资源不存在";case 15:throw"请求失败:".concat(e);case 16:case"end":return t.stop()}}),t)}))),Cc.apply(this,arguments)}var Sc={ANDROID_MIPMAP:[{name:"mdpi",minname:"mdpi",scale:1,filepath:"mipmap-mdpi/{$name$}.png",resname:"{$name$}.png",errorField:"exportErrPng"},{name:"hdpi",minname:"hdpi",scale:1.5,filepath:"mipmap-hdpi/{$name$}.png",resname:"{$name$}@1.5x.png",errorField:"exportErrPng@1.5x"},{name:"xhdpi",minname:"xhdpi",scale:2,filepath:"mipmap-xhdpi/{$name$}.png",resname:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"xxhdpi",minname:"xxhdpi",scale:3,filepath:"mipmap-xxhdpi/{$name$}.png",resname:"{$name$}@3x.png",errorField:"exportErrPng@3x"},{name:"xxxhdpi",minname:"xxxhdpi",scale:4,filepath:"mipmap-xxxhdpi/{$name$}.png",resname:"{$name$}@4x.png",errorField:"exportErrPng@4x"}],ANDROID:[{name:"mdpi",minname:"mdpi",scale:1,filepath:"drawable-mdpi/{$name$}.png",resname:"{$name$}.png",errorField:"exportErrPng"},{name:"hdpi",minname:"hdpi",scale:1.5,filepath:"drawable-hdpi/{$name$}.png",resname:"{$name$}@1.5x.png",errorField:"exportErrPng@1.5x"},{name:"xhdpi",minname:"xhdpi",scale:2,filepath:"drawable-xhdpi/{$name$}.png",resname:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"xxhdpi",minname:"xxhdpi",scale:3,filepath:"drawable-xxhdpi/{$name$}.png",resname:"{$name$}@3x.png",errorField:"exportErrPng@3x"},{name:"xxxhdpi",minname:"xxxhdpi",scale:4,filepath:"drawable-xxxhdpi/{$name$}.png",resname:"{$name$}@4x.png",errorField:"exportErrPng@4x"}],IOS:[{name:"标准尺寸 @1x",scale:1,filepath:"{$name$}.png",errorField:"exportErrPng"},{name:"视网膜 @2x",scale:2,filepath:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"高清视网膜 @3x",scale:3,filepath:"{$name$}@3x.png",errorField:"exportErrPng@3x"}],WEB:[{name:"Web @1x",scale:1,filepath:"{$name$}.png",errorField:"exportErrPng"},{name:"Web @2x",scale:2,filepath:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"Web @3x",scale:3,filepath:"{$name$}@3x.png",errorField:"exportErrPng@3x"}],WeChatMiniProgram:[{name:"标准尺寸 @1x",scale:1,filepath:"{$name$}.png",errorField:"exportErrPng"},{name:"视网膜 @2x",scale:2,filepath:"{$name$}@2x.png",errorField:"exportErrPng@2x"},{name:"高清视网膜 @3x",scale:3,filepath:"{$name$}@3x.png",errorField:"exportErrPng@3x"}]},Oc={name:"SVG",scale:1,filepath:"{$name$}.svg",errorField:"exportErrSvg"},Ic={name:"PDF",scale:1,filepath:"{$name$}.pdf",errorField:"exportErrPdf"},Ac=[{scale:1,ext:".png"},{scale:1,ext:".svg"},{scale:2,ext:"@2x.png"},{scale:3,ext:"@3x.png"},{scale:4,ext:"@4x.png"},{scale:1.5,ext:"@1.5x.png"}],Tc=function(t,e,n,r,i,a,s){if(r)return[{value:Oc,enabled:!0}];if(i)return[{value:Ic,enabled:!0}];var c;switch(e){case o["c"].ANDROID:c=n?Sc.ANDROID_MIPMAP:Sc.ANDROID;break;case o["c"].IOS:c=Sc.IOS;break;case o["c"].WE_CHAT_MINI_PROGRAM:c=Sc.WeChatMiniProgram;break;default:c=Sc.WEB;break}var l=t.artboard.mlConfig.scalesObj;return c.map((function(t){return{value:t,enabled:a&&1===t.scale||s&&1===t.scale||!a&&!s&&1===l[t.scale]}}))},jc=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o,s,u,d,h,f,m,p,b,v,g;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(c["l"])(n.artboard)){t.next=2;break}return t.abrupt("return");case 2:if(Object(l["h"])(e)&&0!==e.length){t.next=4;break}throw"至少需要选中一个节点才能激活下载";case 4:if(i=Object(c["U"])(n.artboard),i){t.next=7;break}throw"设计狮没有为该画板导出[PDF]格式的切图";case 7:if(a=0,o={},s=[],e.forEach((function(t){if(Object(l["s"])(t)&&t.markedForExport){var e=Object(c["J"])(t);if(Object(l["i"])(e)){var n=Object(c["N"])(e),r=Ic.filepath;r=r.replace("{$name$}",n);var i=o[r];if(i){var u=++i.index;r=Ic.filepath,r=r.replace("{$name$}","".concat(n,"(").concat(u,")"))}else o[r]={index:0};s.push({filepath:r,node:t,nodeName:e}),a+=1}}})),0!==s.length){t.next=15;break}throw"至少需要选中一个节点才能激活下载";case 15:if(1!==s.length){t.next=24;break}return u=s[0],d=u.node,h=u.nodeName,f=Qc(n.artboard,d),m=f.png,p=f.base64Png,b="".concat(h,".pdf"),t.next=21,Object(c["t"])(b,m,p);case 21:return t.abrupt("return",t.sent);case 24:return v=new xc,t.next=27,v.init();case 27:return s.forEach((function(t){var e=t.node,r=t.filepath,i=Qc(n.artboard,e),a=i.png,o=i.base64Png;v.addFile(r,a,o)})),g=1===a?s[0].nodeName:n.artboard.name,t.next=31,v.start("pdf_".concat(g,".zip"));case 31:return t.abrupt("return",t.sent);case 32:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function Fc(t,e){return Mc.apply(this,arguments)}function Mc(){return Mc=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(c["l"])(n.artboard)){t.next=2;break}return t.abrupt("return");case 2:if(Object(l["s"])(e)&&e.markedForExport){t.next=4;break}return t.abrupt("return");case 4:return i=qc(n.artboard,e),a=i.png,o=i.base64Png,t.abrupt("return",kc(null!==a&&void 0!==a?a:o));case 6:case"end":return t.stop()}}),t)}))),Mc.apply(this,arguments)}var _c=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o,s,u,d,h,f,m,p,b,v,g;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(c["l"])(n.artboard)){t.next=2;break}return t.abrupt("return");case 2:if(Object(l["h"])(e)&&0!==e.length){t.next=4;break}throw"至少需要选中一个节点才能激活下载";case 4:if(i=Object(c["W"])(n.artboard),i){t.next=7;break}throw"设计狮没有为该画板导出[SVG]格式的切图";case 7:if(a=0,o={},s=[],e.forEach((function(t){if(Object(l["s"])(t)&&t.markedForExport){var e=Object(c["J"])(t);if(Object(l["i"])(e)){var n=Object(c["N"])(e),r=Oc.filepath;r=r.replace("{$name$}",n);var i=o[r];if(i){var u=++i.index;r=Oc.filepath,r=r.replace("{$name$}","".concat(n,"(").concat(u,")"))}else o[r]={index:0};s.push({filepath:r,node:t,nodeName:e}),a+=1}}})),0!==s.length){t.next=15;break}throw"至少需要选中一个节点才能激活下载";case 15:if(1!==s.length){t.next=24;break}return u=s[0],d=u.node,h=u.nodeName,f=qc(n.artboard,d),m=f.png,p=f.base64Png,b="".concat(h,".svg"),t.next=21,Object(c["t"])(b,m,p);case 21:return t.abrupt("return",t.sent);case 24:return v=new xc,t.next=27,v.init();case 27:return s.forEach((function(t){var e=t.node,r=t.filepath,i=qc(n.artboard,e),a=i.png,o=i.base64Png;v.addFile(r,a,o)})),g=1===a?s[0].nodeName:n.artboard.name,t.next=31,v.start("svg_".concat(g,".zip"));case 31:return t.abrupt("return",t.sent);case 32:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function Lc(t){return Dc.apply(this,arguments)}function Dc(){return Dc=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,a,o,s,l,u,d;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,n){var r=new Image;r.onerror=function(t){var e=t.target;e.onerror=e.onload=null,n("img load error")},r.onload=function(e){var n=e.target;n.onerror=n.onload=null,t(n)},r.src=e}));case 2:if(i=t.sent,a=null!==(n=i.naturalWidth)&&void 0!==n?n:i.width,o=c["g"]/a,!(o>=1)){t.next=7;break}return t.abrupt("return",e);case 7:return l="function"===typeof window.OffscreenCanvas,t.prev=8,s=l?new window.OffscreenCanvas(10,10):document.createElement("canvas"),l||(s.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(s)),u=s.getContext("2d"),t.next=14,Vc(i,s,u,l,o);case 14:return t.abrupt("return",t.sent);case 15:return t.prev=15,s&&(d=s.parentNode,d&&d.removeChild(s)),s=null,t.finish(15);case 19:case"end":return t.stop()}}),t,null,[[8,,15,19]])}))),Dc.apply(this,arguments)}function Nc(t,e,n,r){return Ec.apply(this,arguments)}function Ec(){return Ec=Object(i["a"])(Object(r["a"])().mark((function t(e,n,a,o){var s,l,u=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=u.length>4&&void 0!==u[4]?u[4]:1,Object(c["l"])(o)){t.next=3;break}return t.abrupt("return");case 3:return c["S"].inCloudMode||(s=1),1!==s&&(l=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,a,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="function"===typeof window.OffscreenCanvas,t.prev=1,n=i?new window.OffscreenCanvas(10,10):document.createElement("canvas"),i||(n.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(n)),a=n.getContext("2d"),t.next=7,Vc(e,n,a,i,s);case 7:return t.abrupt("return",t.sent);case 8:return t.prev=8,n&&(o=n.parentNode,o&&o.removeChild(n)),n=null,t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[1,,8,12]])})));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",Object(c["t"])(e,n,a,l));case 6:case"end":return t.stop()}}),t)}))),Ec.apply(this,arguments)}function Pc(t,e,n){return Rc.apply(this,arguments)}function Rc(){return Rc=Object(i["a"])(Object(r["a"])().mark((function t(e,n,a){var o,s,u,d,h,f,m,p,b,v,g,w;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(l["h"])(n)&&0!==n.length){t.next=2;break}throw"至少需要选中一个画板才能激活下载";case 2:if(o=[],s={},n.forEach((function(t){if(Object(c["l"])(t)){var e=Object(c["N"])(t.name),n=e,r=s[n],i=t.artboardPreviewPng,a=Object(l["i"])(i)&&/\.webp$/i.test(i)?".webp":".png",u=t.artboardPreviewJS;if(r){var d=++r.index;n="".concat(e,"(").concat(d,")")}else s[n]={index:0};n+=a,o.push({filename:n,pngurl:i,jsurl:u})}})),0!==o.length){t.next=9;break}throw"至少需要选中一个画板才能激活下载";case 9:if(1!==o.length){t.next=16;break}return u=o[0],d=u.filename,h=u.pngurl,f=u.jsurl,t.next=13,Object(c["t"])(d,h,f);case 13:return t.abrupt("return",t.sent);case 16:return m=new xc,t.next=19,m.init();case 19:return o.forEach((function(t){var e=t.filename,n=t.pngurl,r=t.jsurl;m.addFile(e,n,r)})),b="function"===typeof window.OffscreenCanvas,t.prev=21,1!==a&&(p=b?new window.OffscreenCanvas(10,10):document.createElement("canvas"),b||(p.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(p)),g=p.getContext("2d"),v=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Vc(e,p,g,b,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=25,m.start(e+".zip",v);case 25:return t.abrupt("return",t.sent);case 26:return t.prev=26,p&&(w=p.parentNode,w&&w.removeChild(p)),p=null,t.finish(26);case 30:case"end":return t.stop()}}),t,null,[[21,,26,30]])}))),Rc.apply(this,arguments)}function Vc(t,e,n,r,i){return Bc.apply(this,arguments)}function Bc(){return Bc=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,a,o){var s,c,l,u,d,h,f=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=f.length>5&&void 0!==f[5]?f[5]:.7,1!==o){t.next=3;break}return t.abrupt("return",e);case 3:return t.next=5,U(e);case 5:if(c=t.sent,l=c.naturalWidth||c.width,u=c.naturalHeight||c.height,d=Math.round(l*o),h=Math.round(u*o),n.width=d,n.height=h,i.drawImage(c,0,0,l,u,0,0,d,h),!a||!n.convertToBlob){t.next=17;break}return t.next=16,n.convertToBlob({type:"image/png",quality:s});case 16:return t.abrupt("return",t.sent);case 17:return t.next=19,st(n,"image/png",s);case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)}))),Bc.apply(this,arguments)}function Uc(t,e,n,r,i){return Hc.apply(this,arguments)}function Hc(){return Hc=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,a,o){var s,c,l,u,d,h,f=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=f.length>5&&void 0!==f[5]?f[5]:.7,t.next=3,U(e);case 3:if(c=t.sent,l=c.naturalWidth||c.width,u=c.naturalHeight||c.height,d=Math.round(l*o),h=Math.round(u*o),n.width=d,n.height=h,i.drawImage(c,0,0,l,u,0,0,d,h),!a||!n.convertToBlob){t.next=15;break}return t.next=14,n.convertToBlob({type:"image/png",quality:s});case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,st(n,"image/png",s);case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}}),t)}))),Hc.apply(this,arguments)}function Wc(t,e,n,r,i){return $c.apply(this,arguments)}function $c(){return $c=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,a,o){var s,c,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,U(e);case 2:if(s=t.sent,c=s.naturalWidth||s.width,l=s.naturalHeight||s.height,n.width=c,n.height=l,i.fillStyle="#fff",i.fillRect(0,0,c,l),i.drawImage(s,0,0,c,l,0,0,c,l),!a||!n.convertToBlob){t.next=14;break}return t.next=13,n.convertToBlob({type:"image/jpeg",quality:o});case 13:return t.abrupt("return",t.sent);case 14:return t.next=16,st(n,"image/jpeg",o);case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t)}))),$c.apply(this,arguments)}var Gc,zc,Yc=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,a,s,u,d){var h,f,m,p,b,v,g,w,x,y,k,C,S,O,I,A,T,j,F,M,_,L,D,N,E,P;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(c["l"])(u.artboard)){t.next=2;break}return t.abrupt("return");case 2:if(Object(l["h"])(s)&&0!==s.length){t.next=4;break}throw"至少需要选中一个节点才能激活下载";case 4:if(Object(l["s"])(a)){t.next=6;break}throw"至少需要选中一个图片规格才能激活下载";case 6:if(!Object(c["V"])(u.artboard)){t.next=10;break}h=o["I"].PNG,t.next=23;break;case 10:if(!Object(c["X"])(u.artboard)){t.next=14;break}h=o["I"].WEBP,t.next=23;break;case 14:if(!Object(c["W"])(u.artboard)){t.next=18;break}h=o["I"].SVG,t.next=23;break;case 18:if(!Object(c["U"])(u.artboard)){t.next=22;break}h=o["I"].PDF,t.next=23;break;case 22:throw"设计狮没有为该画板导出任何格式的切图";case 23:if(f=h===o["I"].SVG,m=h===o["I"].PDF,p=[],f||m?a[1]&&p.push(1):(b=u.artboard.mlConfig.scalesObj,Object.keys(a).forEach((function(t){b[t]&&a[t]&&p.push(t)}))),0!==p.length){t.next=29;break}throw"至少需要选中一个图片规格才能激活下载";case 29:if(v=Tc(u,e,n,!1,!1,f,m),g=[],w={},x={},p.forEach((function(t){var e=v.find((function(e){return e.enabled&&e.value.scale==t}));if(null==e)throw"意外的程序性异常,丢失downloadType";w[t]=e.value.filepath})),y=!f&&!m&&h===o["I"].WEBP,k=0,s.forEach((function(t){if(Object(l["s"])(t)&&t.markedForExport){var e=Object(c["J"])(t);if(Object(l["i"])(e)){var n=Object(c["N"])(e);p.forEach((function(r){var i=w[r];i=i.replace("{$name$}",n).replace(/\.(png|svg|pdf)$/i,".jpg");var a=x[i];if(a){var o=++a.index;i=w[r],i=i.replace("{$name$}","".concat(n,"(").concat(o,")")).replace(/\.(png|svg|pdf)$/i,".jpg")}else x[i]={index:0};g.push({filepath:i,node:t,scale:r,nodeName:e})})),k+=1}}})),0!==g.length){t.next=39;break}throw"至少需要选中一个节点才能激活下载";case 39:if(S="function"===typeof window.OffscreenCanvas,t.prev=40,C=S?new window.OffscreenCanvas(10,10):document.createElement("canvas"),S||(C.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",document.body.appendChild(C)),O=C.getContext("2d"),1!==g.length){t.next=55;break}if(I=g[0],A=I.node,T=I.scale,j=I.nodeName,F=m?Qc(u.artboard,A):f?qc(u.artboard,A):Kc(u.artboard,A,T,y),M=F.png,_=F.base64Png,L=Object(c["F"])(e,T,j,o["I"].JPG),!m){t.next=50;break}return t.abrupt("return",Object(c["s"])(L,M,d,[T]));case 50:return t.next=52,Object(c["u"])(L,M,_,function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wc(e,C,O,S,d);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 52:return t.abrupt("return",t.sent);case 55:return D=new xc,t.next=58,D.init();case 58:g.forEach((function(t){var e=t.node,n=t.scale,r=t.filepath,i=m?Qc(u.artboard,e):f?qc(u.artboard,e):Kc(u.artboard,e,n,y),a=i.png,o=i.base64Png;D.addFile(r,a,o,n,m)})),N=1===k?g[0].nodeName:u.artboard.name,t.t0=e,t.next=t.t0===o["c"].ANDROID?63:t.t0===o["c"].IOS?65:t.t0===o["c"].WE_CHAT_MINI_PROGRAM?67:69;break;case 63:return E="android_",t.abrupt("break",71);case 65:return E="ios_",t.abrupt("break",71);case 67:return E="wxmp_",t.abrupt("break",71);case 69:return E="web_",t.abrupt("break",71);case 71:return t.next=73,D.start(E+N+".zip",function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i){t.next=4;break}return t.next=3,Object(yc["a"])(e,d,[n]);case 3:return t.abrupt("return",t.sent[0]);case 4:return t.next=6,Wc(e,C,O,S,d);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}());case 73:return t.abrupt("return",t.sent);case 74:return t.prev=74,C&&(P=C.parentNode,P&&P.removeChild(C)),C=null,t.finish(74);case 78:case"end":return t.stop()}}),t,null,[[40,,74,78]])})));return function(e,n,r,i,a,o){return t.apply(this,arguments)}}(),Xc=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,a,s,u){var d,h,f,m,p,b,v,g,w,x,y,k,C,S,O,I,A,T,j;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(c["l"])(s.artboard)){t.next=2;break}return t.abrupt("return");case 2:if(Object(l["h"])(a)&&0!==a.length){t.next=4;break}throw"至少需要选中一个节点才能激活下载";case 4:if(Object(l["s"])(i)){t.next=6;break}throw"至少需要选中一个图片规格才能激活下载";case 6:if(!u){t.next=12;break}if(d=Object(c["X"])(s.artboard),d){t.next=10;break}throw"设计狮没有为该画板导出[WEBP]格式的切图";case 10:t.next=15;break;case 12:if(d=Object(c["V"])(s.artboard),d){t.next=15;break}throw"设计狮没有为该画板导出[PNG]格式的切图";case 15:if(h=[],f=s.artboard.mlConfig.scalesObj,Object.keys(i).forEach((function(t){f[t]&&i[t]&&h.push(t)})),0!==h.length){t.next=20;break}throw"至少需要选中一个图片规格才能激活下载";case 20:if(m=Tc(s,e,n,!1,!1,!1,!1),p=[],b={},v={},h.forEach((function(t){var e=m.find((function(e){return e.enabled&&e.value.scale==t}));if(null==e)throw"意外的程序性异常,丢失downloadType";b[t]=e.value.filepath})),g=0,a.forEach((function(t){if(Object(l["s"])(t)&&t.markedForExport){var e=Object(c["J"])(t);if(Object(l["i"])(e)){var n=Object(c["N"])(e);h.forEach((function(r){var i=b[r];i=i.replace("{$name$}",n),u&&(i=i.replace(/\.png$/i,".webp"));var a=v[i];if(a){var o=++a.index;i=b[r],i=i.replace("{$name$}","".concat(n,"(").concat(o,")")),u&&(i=i.replace(/\.png$/i,".webp"))}else v[i]={index:0};p.push({filepath:i,node:t,scale:r,nodeName:e})})),g+=1}}})),0!==p.length){t.next=31;break}throw"至少需要选中一个节点才能激活下载";case 31:if(1!==p.length){t.next=40;break}return w=p[0],x=w.node,y=w.scale,k=w.nodeName,C=Kc(s.artboard,x,y,u),S=C.png,O=C.base64Png,I=Object(c["F"])(e,y,k,u?o["I"].WEBP:o["I"].PNG),t.next=37,Object(c["t"])(I,S,O);case 37:return t.abrupt("return",t.sent);case 40:return A=new xc,t.next=43,A.init();case 43:p.forEach((function(t){var e=t.node,n=t.scale,r=t.filepath,i=Kc(s.artboard,e,n,u),a=i.png,o=i.base64Png;A.addFile(r,a,o)})),T=1===g?p[0].nodeName:s.artboard.name,t.t0=e,t.next=t.t0===o["c"].ANDROID?48:t.t0===o["c"].IOS?50:t.t0===o["c"].WE_CHAT_MINI_PROGRAM?52:54;break;case 48:return j="android_",t.abrupt("break",56);case 50:return j="ios_",t.abrupt("break",56);case 52:return j="wxmp_",t.abrupt("break",56);case 54:return j="web_",t.abrupt("break",56);case 56:return t.next=58,A.start(j+T+".zip");case 58:return t.abrupt("return",t.sent);case 59:case"end":return t.stop()}}),t)})));return function(e,n,r,i,a,o){return t.apply(this,arguments)}}(),Kc=function(t,e,n,r){if(!t||!e)return{};var i,a=t.artboardPath,o=e.exportPath,s=Object(c["O"])(n),l=r?".webp":".png",u=Object(c["y"])(t,"".concat(a,"/png/"),"".concat(o).concat(s).concat(l));return i=r?u.replace(/\/png\/(.*)\.webp$/,"/base64/$1.webp.js"):u.replace(/\/png\/(.*)\.png$/,"/base64/$1.js"),{png:u,base64Png:i}},qc=function(t,e){if(!t||!e)return{};var n=t.artboardPath,r=e.exportPath,i=Object(c["y"])(t,"".concat(n,"/svg/"),"".concat(r,".svg")),a=i.replace(/\/svg\/(.*)\.svg$/,"/base64/$1@svg.js");return{png:i,base64Png:a}},Qc=function(t,e){if(!t||!e)return{};var n=t.artboardPath,r=e.exportPath,i=Object(c["y"])(t,"".concat(n,"/svg/"),"".concat(r,".pdf")),a=i.replace(/\/svg\/(.*)\.pdf$/,"/base64/$1@pdf.js");return{png:i,base64Png:a}},Jc={methods:{clickSetArtboardStatus:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,s,c,u,d,h,f;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.notSupportArtboardStatusVersion,i=t.artboardInDevStatus,a=t.artboard,s=t.cloudCurrentFolderId,!n){e.next=3;break}return e.abrupt("return");case 3:if(c=i?o["f"].None:o["f"].Dev,e.prev=4,t.checkLoginThrow()){e.next=7;break}return e.abrupt("return");case 7:return u=a.artboard.cid,d=new FormData,d.append("folderid",s),d.append("artboardid",u),d.append("status",c),h="SetArtboardStatusByWeb",e.next=15,t.fetchPostCloudApi(h,{body:d,abortKey:"".concat(h,":").concat(u)});case 15:if(f=e.sent,f.success){e.next=18;break}throw f.errMsg;case 18:if(Object(l["s"])(f.data)){e.next=20;break}return e.abrupt("return");case 20:if(f=f.data,f.id===u){e.next=23;break}return e.abrupt("return");case 23:a.customStatus=f.status,a.customStatusUpdateTimes=f.updateTimes,t.showTextTip(c===o["f"].Dev?"已标记画板[".concat(a.artboard.name,"]为待开发"):"已取消画板[".concat(a.artboard.name,"]的待开发状态")),e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](4),-1===(null===e.t0||void 0===e.t0?void 0:e.t0.toString().indexOf(" aborted "))&&t.showTextTip(e.t0);case 32:case"end":return e.stop()}}),e,null,[[4,28]])})))()},clickRemoveItem:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,c,l,u,d;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.artboard,i=t.cloudNotSupportEdit,a=t.cloudVersion,o=t.fileReadOnly,s=t.cloudCurrentFolderId,c=t.cloudUserIsDesigner,n){e.next=3;break}return e.abrupt("return");case 3:if(!i){e.next=6;break}return t.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(a,"),请先升级私有云部署包")),e.abrupt("return");case 6:if(l=n.artboard,u=l.guid,d=l.name,!o&&c){e.next=10;break}return t.showTextTip("您没有权限删除画板[".concat(d,"]")),e.abrupt("return");case 10:return e.next=12,t.confirm({title:"删除确认",text:"是否确认将画板[".concat(d,"]从当前文件夹中删除?")});case 12:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,t.removeCloudItem({parentId:s,artboardGuid:u});case 16:if(!e.sent){e.next=18;break}t.$store.commit("removeArtboard",u);case 18:case"end":return e.stop()}}),e)})))()},clickDownPreview:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.artboard,i){n.next=3;break}return n.abrupt("return");case 3:if(i=i.artboard,i){n.next=6;break}return n.abrupt("return");case 6:return e.setInOutput(!0),n.prev=7,n.next=10,Nc("".concat(i.name,"@").concat(2*t,"x.png"),i.artboardPreviewPng,i.artboardPreviewJS,i,t);case 10:n.next=16;break;case 12:n.prev=12,n.t0=n["catch"](7),console.error(n.t0),e.showTextTip(n.t0);case 16:return n.prev=16,e.setInOutput(!1),n.finish(16);case 19:case"end":return n.stop()}}),n,null,[[7,12,16,19]])})))()},clickGoArtboardSlice:function(){this.setCurArtboard(this.artboard),this.$store.commit("setRightNavType",o["A"].Slice)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.$store.commit("setArtboardMenu",{visible:!1})}),120))},fixedLocation:function(){var t=this;this.$nextTick((function(){if(t.visible){var e=t.$refs.menu,n=t.artboardMenu,r=n.x,i=n.y,a=t.location;if(e){var o=window,s=o.innerWidth,c=o.innerHeight,l=e.offsetWidth,u=e.offsetHeight,d=s-l-5,h=c-u-5;a.left=Math.min(r,d)+"px",a.top=Math.min(i,h)+"px"}}}))}},watch:{resetLocationKey:function(){this.fixedLocation()},"artboardMenu.x":function(){clearTimeout(this.handle)},"artboardMenu.y":function(){clearTimeout(this.handle)},"artboardMenu.artboard":function(t){null!=t&&clearTimeout(this.handle)},visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},created:function(){this.visible&&(window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0))},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},data:function(){return{needOpen:!1,handle:0,location:{top:null,left:0}}},computed:{notSupportArtboardStatusVersion:function(){return Object(l["j"])(this.cloudVersion)},artboardInDevStatus:function(){var t=this.artboard,e=this.inCloudViewerMode;return e&&t.customStatus===o["f"].Dev},resetLocationKey:function(){var t=this.artboardMenu,e=this.visible;return"".concat(e,":").concat(t.x,":").concat(t.y)},visible:function(){var t=this.artboardMenu,e=t.artboard,n=t.visible;return n&&!!e},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case o["s"].Admin:case o["s"].ParentOwner:case o["s"].Owner:case o["s"].ReadWrite:return!0}return!1},fileReadOnly:function(){return this.cloudNotSupportEdit||!this.canChangeFile},cloudNotSupportEdit:function(){return Object(l["p"])(this.cloudVersion)},artboard:function(){return this.artboardMenu.artboard},menuStyle:function(){var t=this.location;return t},artboardMenu:function(){return this.$store.state.artboardMenu}}},Zc=Jc,tl=(n("d1cf"),Object(hr["a"])(Zc,dc,hc,!1,null,"08d9c954",null)),el=tl.exports,nl=function(){var t=this,e=t._self._c;return t.tipVisible?e("div",{staticClass:"pop-tip-text"},[e("p",[t._v(t._s(t.tipText)),e("span",{staticClass:"btn-close",on:{click:function(e){return t.hideTextTip()}}},[t._v("我知道了")])])]):t._e()},rl=[],il={computed:{tipText:function(){return this.$store.state.textTip.text},tipVisible:function(){return this.$store.state.textTip.visible}}},al=il,ol=(n("2d13"),Object(hr["a"])(al,nl,rl,!1,null,"5c4bb38c",null)),sl=ol.exports,cl=function(){var t=this,e=t._self._c;return t.visibleMin?e("FolderNavMini",{attrs:{isSupportNetDiskFile:t.isSupportNetDiskFile,miniFoldersOpen:t.miniFoldersOpen},on:{clickMiniFoldersOpen:t.clickMiniFoldersOpen}}):t.visible?e("FolderNavMax",{attrs:{isSupportNetDiskFile:t.isSupportNetDiskFile,subFilesOpen:t.subFilesOpen&&!t.inArtboardMultDownMode,subFoldersOpen:t.subFoldersOpen&&!t.inArtboardMultDownMode,subArtboardsOpen:t.subArtboardsOpen||t.inArtboardMultDownMode},on:{clickSubFoldersOpen:t.clickSubFoldersOpen,clickSubFilesOpen:t.clickSubFilesOpen,clickSubArtboardsOpen:t.clickSubArtboardsOpen}}):t._e()},ll=[],ul=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-folders",class:{allfolders:t.allFoldersBoxVisible}},[e("div",{staticClass:"header"},[e("div",{staticClass:"name"}),e("div",{staticClass:"m"},[e("FolderNavSortMenu"),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",attrs:{type:"text",placeholder:"搜索当前文件夹",maxlength:"50",spellcheck:"false"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t.searchText?e("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:t.clickClearSearchText}}):t._e()])],1)]),e("div",{ref:"$list",staticClass:"list",class:{usetab:t.needShowFile},on:{scroll:t.onListScroll}},[t.needShowFile?e("div",{staticClass:"list-tab",class:{on:t.subFoldersOpen}},[e("span",{on:{click:t.clickSubFoldersOpen}},[t._v("文件夹("+t._s(t.renderCloudSubFolders.length)+")")])]):t._e(),t.hasSubFolders?e("div",{ref:"$folders",staticClass:"list-item",class:{off:!t.folderListVisible},style:{height:t.renderFolderHeight+"px"}},[e("div",{staticClass:"list-box",class:{scrolling:t.scrolling},style:{"padding-top":t.renderFolderLazyList.paddingTop}},t._l(t.renderFolderLazyList.items,(function(n){return e("FoldNavFolderItem",{key:n.id,attrs:{isSupportNetDiskFile:t.isSupportNetDiskFile,folder:n},on:{contextMenuFolder:t.contextMenuFolder}})})),1)]):t._e(),t.needShowFile&&!t.hasSubFolders?e("div",{directives:[{name:"show",rawName:"v-show",value:t.subFoldersOpen,expression:"subFoldersOpen"}],staticClass:"empty"},[t._v(t._s(t.hasSearchText?"未找到包含 “".concat(t.searchText,"” 的文件夹"):"没有文件夹"))]):t._e(),t.artShowInListMode&&t.needShowFile&&t.documentArtboards.length>0?[e("div",{staticClass:"list-tab",class:{on:t.subArtboardsOpen}},[e("span",{on:{click:t.clickSubArtboardsOpen}},[t._v("画板("+t._s(t.renderCloudSubArtboards.length)+")")])]),t.hasSubArtboards?e("div",{ref:"$artboards",staticClass:"list-item",class:{off:!t.subArtboardsOpen},style:{height:t.renderArtboardHeight+"px"}},[e("div",{staticClass:"list-box",class:{scrolling:t.scrolling},style:{"padding-top":t.renderArtboardLazyList.paddingTop}},t._l(t.renderArtboardLazyList.items,(function(n){return e("FoldNavArtboardItem",{key:n.artboard.cid,attrs:{item:n,lightArtboardId:t.lightArtboardId}})})),1)]):e("div",{directives:[{name:"show",rawName:"v-show",value:t.subArtboardsOpen,expression:"subArtboardsOpen"}],staticClass:"empty"},[t._v(t._s(t.hasSearchText?"未找到包含 “".concat(t.searchText,"” 的画板"):"当前文件夹不存在画板"))])]:t._e(),t.needShowFile?e("div",{staticClass:"list-tab",class:{on:t.subFilesOpen}},[e("span",{on:{click:t.clickSubFilesOpen}},[t._v("文件("+t._s(t.renderCloudSubFiles.length)+")")])]):t._e(),t.needShowFile&&t.hasSubFiles?e("div",{ref:"$files",staticClass:"list-item",class:{off:!t.subFilesOpen},style:{height:t.renderFileHeight+"px"}},[e("div",{staticClass:"list-box",class:{scrolling:t.scrolling},style:{"padding-top":t.renderFileLazyList.paddingTop}},t._l(t.renderFileLazyList.items,(function(n){return e("FoldNavFileItem",{key:n.viewUrl,attrs:{file:n},on:{contextMenuFile:t.contextMenuFile}})})),1)]):t.needShowFile?e("div",{directives:[{name:"show",rawName:"v-show",value:t.subFilesOpen,expression:"subFilesOpen"}],staticClass:"empty"},[t._v(t._s(t.hasSearchText?"未找到包含 ".concat(t.searchText," 的文件"):"没有文件"))]):t._e()],2),e("FileItemContextMenu",{attrs:{fileContextMenuData:t.fileContextMenuData}}),e("FolderItemContextMenu",{attrs:{folderContextMenuData:t.folderContextMenuData}}),t.artShowInListMode?e("MultArtboardDownload"):t._e()],1)},dl=[],hl=function(){var t=this,e=t._self._c;return t.inArtboardMultDownMode&&t.exportNodeCount?e("section",{staticClass:"mult-download"},[e("div",{staticClass:"text"},[0!==t.exportNodeCount?e("Checkbox",{attrs:{text:"全选",selected:t.allSelected},on:{click:t.clickAllSelectBtn}}):t._e(),e("div",{staticClass:"info"},[t._v("已选中"+t._s(t.selectNodeCount)+"/"+t._s(t.exportNodeCount)+"个画板")])],1),e("div",{staticClass:"btns"},[t.inCloudMode?e("Select",{attrs:{options:t.previewScaleSelectOptions},on:{changed:t.onPreviewScaleSelectChanged}}):t._e(),e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickDownSelectAll()}}},[t._v("下载")]),e("a",{staticClass:"btn-close",attrs:{href:"javascript:;"},on:{click:function(e){return t.setInArtboardMultDownMode(!1)}}})],1)]):t._e()},fl=[],ml=function(){var t=this,e=t._self._c;return e("dl",{staticClass:"select",class:{expandUp:t.expandUp||t.showDDInTop}},[e("dt",{class:{on:t.visible,light:t.light},attrs:{title:t.title},on:{click:function(e){e.stopPropagation(),t.visible=!t.visible}}},[t._v(t._s(t.selectName))]),t.visible?e("dd",[e("ul",{ref:"ul"},t._l(t.options,(function(n,r){return e("li",{key:r,class:{on:t.selected===n,disabled:n.disabled},on:{click:function(e){return t.clickOption(n)}}},[t._v(t._s(n.name))])})),0)]):t._e()])},pl=[],bl={methods:{checkRect:function(){var t=this,e=this.visible,n=this.expandUp;e&&(n||(this.showDDInTop=!1,this.$nextTick((function(){var e=t.$refs.ul;if(e){var n=e.getBoundingClientRect(),r=window.innerHeight-t.checkShowUpFixedHeight,i=n.bottom;i>r&&(t.showDDInTop=!0)}}))))},clickOption:function(t){if(Object(l["s"])(t)){var e=this.selected;e!==t&&(null!=e&&(e.selected=!1),t.selected=!0,this.visible=!1,this.$emit("changed",t))}},onVisibleClick:function(){var t=this;requestAnimationFrame((function(){t.visible=!1}))}},watch:{visible:function(t){t?(this.checkRect(),window.addEventListener("click",this.onVisibleClick,!0)):window.removeEventListener("click",this.onVisibleClick,!0)}},computed:{title:function(){var t=this.selected;return t&&t.title||""},selectName:function(){var t=this.selected;return t?t.name:""},selected:function(){var t=this.options,e=t.find((function(t){return Object(l["s"])(t)&&t.selected}));return null==e&&(e=t[0]),e}},beforeDestroy:function(){window.removeEventListener("click",this.onVisibleClick,!0)},data:function(){return{visible:!1,showDDInTop:!1}},props:{options:Array,expandUp:{default:!1,type:Boolean},checkShowUpFixedHeight:{default:0,type:Number},light:Boolean}},vl=bl,gl=(n("bd84"),Object(hr["a"])(vl,ml,pl,!1,null,"e412cfbc",null)),wl=gl.exports,xl=function(){var t=this,e=t._self._c;return e("label",{staticClass:"checkbox",class:{on:t.selected},on:{click:t.click}},[t.text?e("i",[t._v(t._s(t.text))]):t._e()])},yl=[],kl={props:{text:String,selected:Boolean},methods:{click:function(){this.$emit("click",!this.selected)}}},Cl=kl,Sl=Object(hr["a"])(Cl,xl,yl,!1,null,null,null),Ol=Sl.exports,Il={components:{Checkbox:Ol,Select:wl},methods:{onPreviewScaleSelectChanged:function(t){Object(l["s"])(t)&&(this.exportScale=t.value,Object(c["nb"])("artboard.previews.scale",this.exportScale))},clickAllSelectBtn:function(t){t=!this.allSelected&&(this.exportNodeCount,!0);var e={length:0};this.renderDocumentArtboards.forEach((function(n){n.mlUserSelectDown!==t&&(n.mlUserSelectDown=t,e[n.artboard.guid]=1,e.length++)})),this.$store.commit("selectArtboardChanged",e)},clickDownSelectAll:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.exportNodeCount){e.next=3;break}return t.showTextTip("当前文件夹不存在画板"),e.abrupt("return");case 3:return t.setInOutput(!0),e.prev=4,e.next=7,Pc(t.documentName,t.selectArtboards,t.exportScale);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](4),t.showTextTip(e.t0);case 12:return e.prev=12,t.setInOutput(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[4,9,12,15]])})))()}},computed:{previewScaleSelectOptions:function(){var t=this.exportScale,e=[{value:1,name:"2x",selected:1===t,disabled:!1}];return this.inCloudMode&&e.push({value:.5,name:"1x",selected:.5===t,disabled:!1}),e},allSelected:function(){return 0!==this.exportNodeCount&&this.exportNodeCount===this.selectNodeCount},selectNodeCount:function(){var t=0;return this.renderDocumentArtboards.forEach((function(e){e.mlUserSelectDown&&(t+=1)})),t},selectArtboards:function(){var t=this.renderDocumentArtboards,e=[];return t.forEach((function(t){t.mlUserSelectDown&&e.push(t.artboard)})),e},exportNodeCount:function(){return this.renderDocumentArtboards.length}},data:function(){return{exportScale:1}},created:function(){this.exportScale=this.inCloudMode&&"0.5"===Object(c["I"])("artboard.previews.scale",!1)?.5:1}},Al=Il,Tl=(n("7289"),Object(hr["a"])(Al,hl,fl,!1,null,"f5921864",null)),jl=Tl.exports,Fl=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"menu",staticClass:"fileitem-contextmenu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[t.canOnlineView?e("div",{on:{click:function(e){return t.clickNetDiskFile(t.file)}}},[t._v("在线查看")]):t._e(),e("div",{on:{click:function(e){return t.copyNetdiskFileViewUrl(t.file)}}},[t._v("复制链接")]),e("div",{on:{click:function(e){return t.clickDownloadNetDiskFile(t.file)}}},[t._v("下载文件")]),t.isUrlFile?e("div",{class:{off:t.fileReadOnly},on:{click:t.clickEditNetDiskLink}},[t._v("编辑链接")]):t._e(),e("div",{class:{off:t.fileReadOnly},on:{click:t.clickFileReName}},[t._v("重命名")]),e("div",{class:{light:!0,off:t.fileReadOnly},on:{click:t.clickRemoveItem}},[t._v("删除")])]):t._e()},Ml=[],_l={methods:{clickEditNetDiskLink:function(){var t,e=this.linkbox,n=this.file,r=this.cloudNotSupportEdit,i=this.cloudVersion,a=this.userCanEdit,o=this.fileReadOnly;n&&(r?this.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(i,"),请先升级私有云部署包")):a?o?this.showTextTip("您没有权限编辑当前文件夹中的链接"):(e.data={id:n.id,link:null!==(t=n.webLoc)&&void 0!==t?t:"",name:n.fileName,parentId:n.parentId,secId:Object(c["H"])(n.viewUrl)},e.visible=!0):this.showTextTip("您无法编辑其他成员提交的网盘链接"))},clickRemoveItem:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,l,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.file,i=t.cloudNotSupportEdit,a=t.userCanEdit,o=t.cloudVersion,s=t.fileReadOnly,n){e.next=3;break}return e.abrupt("return");case 3:if(!i){e.next=6;break}return t.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(o,"),请先升级私有云部署包")),e.abrupt("return");case 6:if(a){e.next=9;break}return t.showTextTip("您没有权限删除其他成员提交的文件"),e.abrupt("return");case 9:if(!s){e.next=12;break}return t.showTextTip("您没有权限删除文件[".concat(n.name,"]")),e.abrupt("return");case 12:return e.next=14,t.confirm({title:"删除确认",text:"是否确认将文件[".concat(n.name,"]从当前文件夹中删除?")});case 14:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,t.removeCloudItem({parentId:t.cloudCurrentFolderId,fileSecId:Object(c["H"])(n.viewUrl)});case 18:if(!e.sent){e.next=22;break}l=t.cloudSubFiles,u=l.findIndex((function(t){return t.viewUrl===n.viewUrl})),-1!==u&&l.splice(u,1);case 22:case"end":return e.stop()}}),e)})))()},clickFileReName:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,u,d,h;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.file,i=t.cloudNotSupportEdit,a=t.userCanEdit,o=t.cloudVersion,s=t.fileReadOnly,n){e.next=3;break}return e.abrupt("return");case 3:if(!i){e.next=6;break}return t.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(o,"),请先升级私有云部署包")),e.abrupt("return");case 6:if(a){e.next=9;break}return t.showTextTip("您没有权限重命名其他成员提交的文件"),e.abrupt("return");case 9:if(!s){e.next=12;break}return t.showTextTip("您没有权限重命名当前文件夹中的文件"),e.abrupt("return");case 12:return e.prev=12,e.next=15,t.prompt({title:"重命名文件",text:n.fileName,placeholder:"请输入新的文件名",beforeYes:function(e){return!!Object(l["i"])(e.trim())&&(!/[\\/:*?"<>|]/.test(e)||(t.showTextTip("文件名含有非法字符,请修正文件名"),!1))},maxLength:256,noText:"取消",yesText:"确认"});case 15:u=e.sent.trim(),e.next=21;break;case 18:return e.prev=18,e.t0=e["catch"](12),e.abrupt("return");case 21:if(e.prev=21,Object(l["i"])(u)){e.next=24;break}throw new Error("请输入新的文件名");case 24:if(u!==n.fileName){e.next=26;break}throw"文件名无变更";case 26:return d=new FormData,d.append("secId",Object(c["H"])(n.viewUrl)),d.append("fileName",u),e.next=31,t.fetchPostCloudApi("netdiskfilerenamebyweb",{timeout:1e4,body:d});case 31:if(h=e.sent,Object(l["s"])(h)){e.next=34;break}throw new Error("返回值异常,无法解析数据:".concat(h));case 34:if(h.success){e.next=36;break}throw new Error(h.errMsg);case 36:t.showTextTip("文件[".concat(u,"]重命名成功")),h=h.data,t.$store.commit("setFolderSubFile",{files:[h.data],folderUpdateTimes:h.folderUpdateTimes}),e.next=44;break;case 41:e.prev=41,e.t1=e["catch"](21),t.showTextTip(e.t1);case 44:case"end":return e.stop()}}),e,null,[[12,18],[21,41]])})))()},checkLocaltionLater:function(t){if(this.visible&&(!this.locFixing||t)){var e=this.x,n=this.y,r=this.fileContextMenuData,i=this.boxSize,a=window.innerWidth,o=window.innerHeight,s=3,c=3,l=a-i.width-3,u=o-i.height-3;e>l?(this.locFixing=!0,r.x=l):e<s&&(this.locFixing=!0,r.x=s),n>u&&(this.locFixing=!0,r.y=u),n<c&&(this.locFixing=!0,r.y=c)}},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.fileContextMenuData.visible=!1}),120))},resetBoxSize:function(){var t=this;this.visible&&this.$nextTick((function(){var e=t.$refs.menu,n=t.boxSize;if(e){var r=e.getBoundingClientRect();n.width=r.width,n.height=r.height}}))}},watch:{"boxSize.height":function(){this.checkLocaltionLater(!0)},canOnlineView:function(){this.resetBoxSize()},x:function(){clearTimeout(this.handle),this.checkLocaltionLater()},y:function(){clearTimeout(this.handle),this.checkLocaltionLater()},file:function(t){null!=t&&clearTimeout(this.handle)},visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0),this.resetBoxSize()):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))},locFixing:function(t){var e=this;clearTimeout(this.locFixingHandle),t&&(this.locFixingHandle=setTimeout((function(){e.locFixing=!1}),50))}},beforeDestroy:function(){clearTimeout(this.handle),clearTimeout(this.locFixingHandle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},mounted:function(){this.visible&&(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)),this.resetBoxSize(),this.checkLocaltionLater()},props:{fileContextMenuData:Object},data:function(){return{handle:0,locFixing:!1,locFixingHandle:0,boxSize:{width:0,height:0}}},computed:{canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case o["s"].Admin:case o["s"].ParentOwner:case o["s"].Owner:case o["s"].ReadWrite:return!0}return!1},netdiskUploader:function(){return this.$store.state.netdiskUploader},linkbox:function(){return this.netdiskUploader.linkbox},isUrlFile:function(){return this.file.fileType===o["y"].Url},canOnlineView:function(){return this.isNetdiskFileCanOnlineView(this.file)},visible:function(){return this.fileContextMenuData.visible&&this.file},file:function(){return this.fileContextMenuData.file},x:function(){return this.fileContextMenuData.x},y:function(){return this.fileContextMenuData.y},fileReadOnly:function(){return!this.userCanEdit||this.cloudNotSupportEdit||!this.canChangeFile},userCanEdit:function(){return this.cloudUserIsDesigner||this.file.updaterId===this.cloudUserId},cloudNotSupportEdit:function(){return Object(l["p"])(this.cloudVersion)},menuStyle:function(){return{top:this.y+"px",left:this.x+"px"}}}},Ll=_l,Dl=(n("ad22"),Object(hr["a"])(Ll,Fl,Ml,!1,null,"3bbb578d",null)),Nl=Dl.exports,El=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"menu",staticClass:"folderitem-contextmenu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[e("div",{on:{click:function(e){return t.clickGoFolder(t.folder)}}},[t._v("打开文件夹")]),e("div",{on:{click:function(e){return t.copyViewUrl(t.folder)}}},[t._v("复制链接")])]):t._e()},Pl=[],Rl={methods:{checkLocaltionLater:function(t){if(this.visible&&(!this.locFixing||t)){var e=this.x,n=this.y,r=this.folderContextMenuData,i=this.boxSize,a=window.innerWidth,o=window.innerHeight,s=3,c=3,l=a-i.width-3,u=o-i.height-3;e>l?(this.locFixing=!0,r.x=l):e<s&&(this.locFixing=!0,r.x=s),n>u&&(this.locFixing=!0,r.y=u),n<c&&(this.locFixing=!0,r.y=c)}},clickGoFolder:function(t){Object(c["T"])(t.id)},copyViewUrl:function(t){var e=Object(c["C"])(t.id,!0);Object(c["p"])(e)?this.showTextTip("链接已复制到剪切板"):this.showTextTip("链接复制到剪切板失败")},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.folderContextMenuData.visible=!1}),120))},resetBoxSize:function(){var t=this;this.visible&&this.$nextTick((function(){var e=t.$refs.menu,n=t.boxSize;if(e){var r=e.getBoundingClientRect();n.width=r.width,n.height=r.height}}))}},watch:{"boxSize.height":function(){this.checkLocaltionLater(!0)},x:function(){clearTimeout(this.handle),this.checkLocaltionLater()},y:function(){clearTimeout(this.handle),this.checkLocaltionLater()},file:function(t){null!=t&&clearTimeout(this.handle)},visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0),this.resetBoxSize()):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))},locFixing:function(t){var e=this;clearTimeout(this.locFixingHandle),t&&(this.locFixingHandle=setTimeout((function(){e.locFixing=!1}),50))}},beforeDestroy:function(){clearTimeout(this.handle),clearTimeout(this.locFixingHandle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},mounted:function(){this.visible&&(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)),this.resetBoxSize(),this.checkLocaltionLater()},props:{folderContextMenuData:Object},data:function(){return{handle:0,locFixing:!1,locFixingHandle:0,boxSize:{width:0,height:0}}},computed:{visible:function(){return this.folderContextMenuData.visible&&this.folder},folder:function(){return this.folderContextMenuData.folder},x:function(){return this.folderContextMenuData.x},y:function(){return this.folderContextMenuData.y},menuStyle:function(){return{top:this.y+"px",left:this.x+"px"}}}},Vl=Rl,Bl=(n("0d14"),Object(hr["a"])(Vl,El,Pl,!1,null,"0177fc1c",null)),Ul=Bl.exports,Hl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item max",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},click:function(e){return t.clickGoFolder(t.folder)}}},[t.hasMultPreview?e("div",{staticClass:"imgs"},t._l(t.folder.pathPreviews,(function(t,n){return e("FolderItemIcon",{key:n,attrs:{pathPreview:t,mini:!0}})})),1):t.hasPreview?e("div",{staticClass:"img"},[e("FolderItemIcon",{attrs:{pathPreview:t.folder.pathPreviews[0],mini:!1}})],1):t._e(),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",[t._v(t._s(t.folder.name))]),t.isFolderSharePrivateCode?e("div",{staticClass:"lock-max"}):t._e(),t.isFolderShareSpecifyMembers?e("div",{staticClass:"share-sm-max"}):t._e()]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},Wl=[],$l=function(){var t=this,e=t._self._c;return t.isNetDiskIcon?e("div",{staticClass:"preview folder-fileicon",class:{max:!t.mini}},[e("div",{staticClass:"img icon-netdiskfile",class:t.iconCls})]):e("ArtboardPreviewImg",{attrs:{pathPreview:t.pathPreview,imgHeight:0}})},Gl=[],zl=function(){var t=this,e=t._self._c;return e("div",{staticClass:"preview",style:t.imgStyle},[t.imgSrc?e("img",{directives:[{name:"show",rawName:"v-show",value:!t.errored,expression:"!errored"}],staticClass:"img",attrs:{src:t.imgSrc},on:{error:t.onError,load:t.onLoad}}):t._e()])},Yl=[],Xl={methods:{onLoad:function(t){var e=t.target;this.width=e.naturalWidth,this.height=e.naturalHeight,this.$emit("resize",this.width,this.height)},onError:function(){this.errored||(this.errored=!0)}},watch:{pathPreview:function(){this.errored=!1}},computed:{imgStyle:function(){var t=this.imgHeight;return t>0?"height:".concat(t,"px;"):null},imgSrc:function(){var t=this.pathPreview;return t}},data:function(){return{errored:!1,width:0,height:0}},props:{pathPreview:String,imgHeight:Number}},Kl=Xl,ql=(n("145a"),Object(hr["a"])(Kl,zl,Yl,!1,null,"1bd115e0",null)),Ql=ql.exports,Jl={components:{ArtboardPreviewImg:Ql},computed:{iconCls:function(){return o["y"].getName(this.netdiskFileType,this.mini?o["z"].Normal:o["z"].Big)},netdiskFileType:function(){var t=this.pathPreview;if(!Object(l["i"])(t))return null;var e=/^netdisk:\/\/(\d+)\//.exec(t);return e?+e[1]:null},isNetDiskIcon:function(){return"number"===typeof this.netdiskFileType}},props:{pathPreview:String,mini:Boolean}},Zl=Jl,tu=(n("5c3c"),Object(hr["a"])(Zl,$l,Gl,!1,null,"4628005e",null)),eu=tu.exports,nu={components:{FolderItemIcon:eu},methods:{onContextmenu:function(t){this.$emit("contextMenuFolder",t,this.folder)},clickGoFolder:function(t){Object(c["T"])(t.id)}},computed:{useTimeSort:function(){return this.$store.state.cloudListSort.sortType===o["k"].Date},info:function(){var t=this.folder.updateTimes,e=this.folder,n=this.useTimeSort;return n?Object(l["b"])(t):"共".concat(Ve(e),"项")},isFolderSharePrivateCode:function(){return this.folder.shareMode===o["r"].PrivateCode},isFolderShareSpecifyMembers:function(){return this.folder.shareMode===o["r"].SpecifyMembers},itemClass:function(){var t=this.folder,e=this.isFolderSharePrivateCode,n=this.isFolderShareSpecifyMembers,r={};if(e?r.private=1:n&&(r["share-sm"]=1),null!=t.color){var i=o["p"].getName(t.color);i&&(r[i]=1)}return r},title:function(){return Re(this.folder)},hasPreview:function(){var t=this.folder;return Object(l["h"])(t.pathPreviews)&&t.pathPreviews.length>0},hasMultPreview:function(){var t=this.folder;return this.hasPreview&&0===t.previewArtboardId&&t.pathPreviews.length>1}},props:{folder:Object,isSupportNetDiskFile:Boolean}},ru=nu,iu=(n("810e"),Object(hr["a"])(ru,Hl,Wl,!1,null,"a940281e",null)),au=iu.exports,ou=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item max",class:{"non-mask":t.isLottieFile},attrs:{title:t.itemTitle},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},mouseenter:function(e){t.mouseenter=!0},mouseleave:t.onMouseOutImg}},[e("div",{ref:"img",staticClass:"img",class:{mini:t.isMiniImage,lottie:t.isLottieFile,mouseenter:t.mouseenter,lottieloading:t.lottieLoading},on:{click:function(e){return t.clickNetDiskFile(t.file)}}},[0===t.imgSize.width&&0===t.imgSize.height?e("div",{staticClass:"icon-netdiskfile",class:t.iconCls}):t._e(),t.imgVisible?e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.file.previewImage},on:{resize:t.onPreviewImgResize}}):t._e(),t.isLottieFile?e("div",{ref:"lottiebox",staticClass:"lottie-box"}):t._e()],1),t.imgVisible&&t.thumbImgVisible?e("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseenter,expression:"mouseenter"}],staticClass:"thumbimg",style:t.thumbImgStyle,on:{mouseenter:function(e){t.mouseInThumb=!0},mouseleave:function(e){t.mouseInThumb=!1},mousemove:t.onMouseMoveImg}},[e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.file.previewImage}})],1):t._e(),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"pre"},[e("span",[t._v(t._s(t.file.fileName))])]),e("span",{staticClass:"ext"},[t._v(t._s(t.fileExt))])]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},su=[],cu={components:{ArtboardPreviewImg:Ql},methods:{onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e},onMouseOutImg:function(){this.imgScrollTop=0,this.mouseenter=!1},onMouseMoveImg:function(t){var e=this.file;if(e&&this.viewHeight>0&&this.viewHeight<this.viewRealHeight){var n=t.layerY,r=n/this.thumbViewHeight,i=.2,a=.2;r=r<=i?0:r>=1-a?1:(r-i)/(1-a-i);var o=this.viewRealHeight-this.viewHeight,s=Math.round(r*o);this.imgScrollTop=s}},onContextmenu:function(t){this.$emit("contextMenuFile",t,this.file)},initLottie:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLottieFile){e.next=2;break}return e.abrupt("return");case 2:if(!t.lottieLoading&&!t.lottie){e.next=4;break}return e.abrupt("return");case 4:return t.lottieLoadState=c["a"].Fetching,e.prev=5,e.next=8,fs.get(t.$refs.lottiebox,t.file);case 8:n=e.sent,i=n.lottie,t.lottie=i,t.lottieLoadState=c["a"].Success,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),t.lottieLoadState=c["a"].Error;case 17:case"end":return e.stop()}}),e,null,[[5,14]])})))()}},watch:{"file.updateTimeTimes":function(t){if(t){fs.remove(this.file);var e=this.lottie;e&&(e.destroy(),this.lottie=null),this.lottieLoadState=c["a"].Normal,this.mouseenter&&this.initLottie()}},mouseenter:function(t){var e=this.lottie;t?e?e.play():this.initLottie():null===e||void 0===e||e.stop()},imgScrollTop:function(t){var e=this.$refs.img;e&&e.scrollTo({top:t,behavior:0===t?"smooth":"instant"})}},computed:{info:function(){return He(this.file)},lottieLoading:function(){return this.lottieLoadState===c["a"].Fetching},lottieLoadSuccess:function(){return this.lottieLoadState===c["a"].Success},isLottieFile:function(){var t=this.file,e=t.fileType;return e===o["y"].Lottie},imgVisible:function(){var t=this.fileRect,e=this.viewRect;return!!window||!(!t||!e)&&t.isOverlap(e)},fileExt:function(){var t,e,n=this.file;if(!n)return null;var r=null!==(t=null===(e=n.fileExt)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"";return"."===r[0]&&(r=r.substr(1)),r},iconCls:function(){var t=this.file;return t?o["y"].getName(t.fileType,o["z"].Big):null},isMiniPreviewFile:function(){var t=this.file,e=t.fileType;switch(e){case o["y"].XD:case o["y"].Sketch:case o["y"].Figma:case o["y"].PhotoShop:return!0}return!1},isMiniImage:function(){var t=this.imgSize,e=this.boxWidth,n=this.boxHeight,r=this.isLottieFile,i=this.isMiniPreviewFile;if(r)return!0;if(i)return!0;if(0===t.width)return!0;if(t.width<=e)return!0;if(t.height<=n)return!0;var a=e/t.width*t.height;return a<=n},viewWidth:function(){var t=this.imgSize.width,e=this.boxWidth;return this.isMiniImage?Math.min(e,t):e},viewHeight:function(){if(this.isMiniImage)return this.imgSize.height;var t=1,e=this.viewWidth,n=this.viewRealHeight,r=Math.round(e/t);return Math.min(r,n)},viewRealHeight:function(){var t=this.viewWidth,e=this.imgSize;return 0==e.width||0==e.height?0:Math.round(t/e.width*e.height)},thumbViewHeight:function(){var t=this.viewRealHeight;if(0==t)return 0;var e=375/812,n=this.viewWidth/t;n=Math.max(e,n);var r=this.thumbViewWidth,i=Math.round(r/n);return i},thumbImgStyle:function(){return{width:this.thumbViewWidth+"px",height:this.thumbViewHeight+"px"}},thumbImgVisible:function(){if(!this.imgVisible)return!1;if(this.isMiniImage)return!1;var t=this.file;if(!t)return!1;var e=this.viewHeight,n=this.boxHeight;return e>0&&e<this.imgSize.height&&n<this.viewRealHeight},itemTitle:function(){return Be(this.file)}},beforeDestroy:function(){this.isLottieFile&&(fs.unbind(this.file),this.lottie=null)},data:function(){return{mouseenter:!1,imgScrollTop:0,mouseInThumb:!1,imgSize:{width:0,height:0},thumbViewWidth:36,boxWidth:185,boxHeight:185,lottie:null,lottieLoadState:c["a"].Normal}},props:{file:Object}},lu=cu,uu=(n("3528"),Object(hr["a"])(lu,ou,su,!1,null,"54bfcdda",null)),du=uu.exports,hu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item",class:t.itemClass,attrs:{title:t.itemTitle},on:{click:t.clickSelect,contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},mouseenter:function(e){t.mouseenter=!0},mouseleave:t.onMouseOutImg}},[t.fetching?e("div",{staticClass:"loading"},[t._v(t._s(t.loadingText))]):t._e(),t.artboard.flowStart?e("div",{staticClass:"interaction-home",attrs:{title:t.interactionHomeTitle}}):t._e(),e("div",{ref:"img",staticClass:"img",style:{height:t.artboard.boundsInParent.viewHeight+"px"}},[t.imageSrc?e("ArtboardPreviewImg",{attrs:{imgHeight:t.imgRealHeight,pathPreview:t.imageSrc}}):t._e()],1),t.tipVisible?e("div",{staticClass:"count-tip"},[t.commentReplyCount>0?e("div",{staticClass:"comment-count",attrs:{title:t.commentReplyTitle}}):t._e()]):t._e(),t.thumbImgVisible?e("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseenter,expression:"mouseenter"}],staticClass:"thumbimg",style:t.thumbImgStyle,on:{mouseenter:function(e){t.mouseInThumb=!0},mouseleave:function(e){t.mouseInThumb=!1},mousemove:t.onMouseMoveImg}},[t.imageSrc?e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.imageSrc}}):t._e()],1):t._e(),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"t",domProps:{textContent:t._s(t.artboard.name)}}),t.artboardInDevStatus?e("span",{staticClass:"dev",attrs:{title:"待开发"}}):t._e()]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},fu=[],mu={components:{ArtboardPreviewImg:Ql},methods:{onMouseOutImg:function(){this.imgScrollTop=0,this.mouseenter=!1},onMouseMoveImg:function(t){if(this.viewModeMax){var e=this.artboard;if(e){var n=e.boundsInParent;if(n.viewHeight>0&&n.viewHeight<n.viewRealHeight){var r=t.layerY,i=r/n.thumbViewHeight,a=.2,o=.2;i=i<=a?0:i>=1-o?1:(i-a)/(1-o-a);var s=n.viewRealHeight-n.viewHeight,c=Math.round(i*s);this.imgScrollTop=c}}}},onContextmenu:function(t){var e=this,n=t.pageX,r=t.pageY,i=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:r,artboard:i})}))},clickSelect:function(){this.inArtboardMultDownMode?this.item.mlUserSelectDown=!this.item.mlUserSelectDown:(this.hideTextTip(),this.setCurArtboard(this.item))},checkImage:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.pathPreviewMini,i=t.pathPreview,a=t.artboard,!n){e.next=4;break}return t.imageSrc=n,e.abrupt("return");case 4:if(e.prev=4,s=a.pathPreviewBlob,s){e.next=15;break}return e.next=9,Lc(i);case 9:if(s=e.sent,"string"!==typeof s){e.next=14;break}return a.pathPreviewMini=s,t.imageSrc=s,e.abrupt("return");case 14:a.pathPreviewBlob=s;case 15:o=URL.createObjectURL(s),t.imageSrc=o,e.next=25;break;case 19:return e.prev=19,e.t0=e["catch"](4),a.pathPreviewMini=i,t.imageSrc=i,e.abrupt("return");case 25:return e.prev=25,o&&t.$nextTick((function(){setTimeout((function(){try{URL.revokeObjectURL(o)}catch(t){}}),600)})),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,19,25,28]])})))()}},watch:{pathPreviewWebp:function(t){var e=this;t&&!this.pathPreviewMini&&this.$nextTick((function(){e.checkImage()}))},pathPreview:function(t){var e=this;t&&!this.pathPreviewMini&&this.$nextTick((function(){e.checkImage()}))},pathPreviewMini:function(){var t=this;this.$nextTick((function(){t.checkImage()}))},imgScrollTop:function(t){var e=this.$refs.img;e&&e.scrollTo({top:t,behavior:0===t?"smooth":"instant"})}},computed:{artboardInDevStatus:function(){var t=this.item,e=this.inCloudViewerMode;return e&&t.customStatus===o["f"].Dev},light:function(){var t=this.lightArtboardId,e=this.artboard;return t>0&&(null===e||void 0===e?void 0:e.cid)===t},selected:function(){return this.inArtboardMultDownMode&&this.item.mlUserSelectDown},tipVisible:function(){return this.commentReplyCount>0},interactionHomeTitle:function(){return Et(this.artboard)},commentReplyCount:function(){var t,e,n=this.artboard;return n&&null!==(t=null!==(e=n.comments)&&void 0!==e?e:0+n.replies)&&void 0!==t?t:0},itemTitle:function(){return this.mouseInThumb?null:Ue(this.artboard)},commentReplyTitle:function(){var t=this.commentReplyCount;return 0==t?null:"".concat(t," 条评论")},thumbImgVisible:function(){if(!this.viewModeMax)return!1;var t=this.artboard;if(!t)return!1;var e=t.boundsInParent;return e.viewHeight>0&&e.viewHeight<e.viewRealHeight},thumbImgStyle:function(){var t=this.artboard;if(t){var e=t.boundsInParent;return{width:e.thumbViewWidth+"px",height:e.thumbViewHeight+"px"}}},itemClass:function(){var t={},e=this.viewModeMax,n=this.selected,r=this.light;return t[e?"max":"min"]=1,n&&(t.selected=1),r&&(t.light=1),t},isSupportWebp:function(){return this.$store.state.isSupportWebp===ln.Support},pathPreview:function(){var t=this.artboard,e=this.isSupportWebp,n=this.pathPreviewMini;return t?n||(e?t.pathPreviewWebp:null)||t.pathPreview:null},pathPreviewMini:function(){return this.artboard?this.artboard.pathPreviewMini:null},imgRealHeight:function(){if(!this.viewModeMax)return 0;var t=this.artboard;if(!t)return 0;var e=t.boundsInParent;return e.viewHeight>0&&e.viewHeight<e.viewRealHeight?e.viewRealHeight:0},imgStyle:function(){var t=this.artboard;if(t){var e=t.boundsInParent;return"width:".concat(e.viewWidth,"px;height:").concat(e.viewHeight,"px;")}},info:function(){return He(this.artboard)},artboard:function(){return this.item.artboard}},data:function(){return{loadingText:"",fetching:!1,imgScrollTop:0,mouseenter:!1,mouseInThumb:!1,viewModeMax:!0,imageSrc:null}},mounted:function(){this.checkImage()},props:{item:Object,multipleMode:Boolean,lightArtboardId:Number}},pu=mu,bu=(n("c61e"),Object(hr["a"])(pu,hu,fu,!1,null,"e750ea82",null)),vu=bu.exports,gu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-list-sort-menu"},[e("div",{staticClass:"sort-order",class:{desc:!t.orderDesc},attrs:{title:t.orderDesc?"切换为升序":"切换为降序"},on:{click:function(e){return t.clickOrderDesc(!t.orderDesc)}}}),e("div",{staticClass:"sort-mode"},[t.mini?t._e():e("span",{staticClass:"name",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickOrderDesc(!t.orderDesc)}}},[t._v("按"+t._s(t.sortType===t.EnumCloudListSortType.Name?"名称":t.sortType===t.EnumCloudListSortType.Date?"时间":"坐标")+"排序")]),e("div",{staticClass:"options"},[e("div",{class:{on:t.sortType===t.EnumCloudListSortType.Name||!t.supportRectSort&&t.sortType===t.EnumCloudListSortType.ArtboardRect},on:{click:function(e){return t.clickSortType(t.EnumCloudListSortType.Name)}}},[t._v("名称排序")]),e("div",{class:{on:t.sortType===t.EnumCloudListSortType.Date},on:{click:function(e){return t.clickSortType(t.EnumCloudListSortType.Date)}}},[t._v("时间排序")]),t.supportRectSort?e("div",{class:{on:t.sortType===t.EnumCloudListSortType.ArtboardRect},attrs:{title:"1.画板列表按画板在文档中的坐标从上到下,从左到右排序\n2.文件夹和文件按名称排序"},on:{click:function(e){return t.clickSortType(t.EnumCloudListSortType.ArtboardRect)}}},[t._v("坐标排序")]):t._e(),e("p",{staticClass:"line"}),e("div",{class:{on:!t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!1)}}},[t._v("升序")]),e("div",{class:{on:t.orderDesc},on:{click:function(e){return t.clickOrderDesc(!0)}}},[t._v("降序")])])])])},wu=[],xu={methods:{clickSortType:function(t){this.$store.commit("setCloudListSortConfig",{sortType:t})},clickOrderDesc:function(t){this.$store.commit("setCloudListSortConfig",{orderDesc:t})}},computed:{EnumCloudListSortType:function(){return o["k"]},cloudListSort:function(){return this.$store.state.cloudListSort},sortType:function(){return this.cloudListSort.sortType},orderDesc:function(){return this.cloudListSort.orderDesc}},data:function(){return{optionsVisible:!1}},props:{mini:{type:Boolean,default:!1},supportRectSort:{type:Boolean,default:!0}}},yu=xu,ku=(n("0393"),Object(hr["a"])(yu,gu,wu,!1,null,"4d98de7b",null)),Cu=ku.exports,Su=200,Ou={folderMax:{margin:{top:20,right:20,bottom:20,left:2},width:192,height:198},fileMax:{margin:{top:20,right:23,bottom:20,left:6},width:185,height:233},artboardMax:{margin:{top:20,right:23,bottom:20,left:6},width:185,height:0,textHeight:48}},Iu={components:{FoldNavFolderItem:au,FoldNavFileItem:du,FoldNavArtboardItem:vu,FileItemContextMenu:Nl,MultArtboardDownload:jl,FolderNavSortMenu:Cu,FolderItemContextMenu:Ul},methods:{onListScroll:function(t){this.scrollY=t.target.scrollTop},getRenderLazyList:function(t,e,n,r,i){var a={items:[],rects:[],startIndex:-1,paddingTop:"0px"};if(!r||!t)return a;if(e.length!==n.length)return a;for(var o=-1,s=0,c=n.length;s<c;s++){var l=e[s],u=t.isOverlap(l);if(-1===a.startIndex&&u)a.startIndex=s;else if(i&&-1!==a.startIndex&&!u)break;u&&(o=s)}var d=e[a.startIndex];if(d&&a.startIndex>0)for(var h=a.startIndex-1;h>=0;h--){var f=e[h];if(d.y!=f.y)break;a.startIndex=h}var m=Ou.folderMax;if(-1!=a.startIndex){a.items=n.slice(a.startIndex,o+1),a.rects=e.slice(a.startIndex,o+1);var p=a.rects[0];a.paddingTop=p.y-m.margin.top+"px"}return a},onResize:function(){this.resetArtboardsBoundingClientRect("onResize")},resetArtboardsBoundingClientRectDelay:function(t){var e=this;cancelAnimationFrame(this.handle_resetArtboardsBoundingClientRect),this.handle_resetArtboardsBoundingClientRect=requestAnimationFrame((function(){e.resetArtboardsBoundingClientRect(t+".delay")}))},resetArtboardsBoundingClientRect:function(t){var e=this;cancelAnimationFrame(this.handle_resetArtboardsBoundingClientRect);var n=this.viewRect;n.width=window.innerWidth,n.height=window.innerHeight,this.$nextTick((function(){var t=e.$refs.$list,n=e.$refs.$files,r=e.$refs.$artboards,i=e.$refs.$folders;if(t){var a=t.getBoundingClientRect(),o=e.listBoundingClientRect;o.x=a.x,o.y=a.y,o.width=a.width,o.height=a.height;var s=o.y;if(i){var c=i.getBoundingClientRect();if(0!==c.height||0!==c.width){var l=e.foldersBoundingClientRect;l.x=c.x,l.y=c.y,l.width=c.width,l.height=c.height,l.marginTop=c.y-s}}if(n){var u=n.getBoundingClientRect();if(0!==u.height||0!==u.width){var d=e.filesBoundingClientRect;d.x=u.x,d.y=u.y,d.width=u.width,d.height=u.height,d.marginTop=u.y-s}}if(r){var h=r.getBoundingClientRect();if(0!==h.height||0!==h.width){var f=e.artboardsBoundingClientRect;f.x=h.x,f.y=h.y,f.width=h.width,f.height=h.height,f.marginTop=h.y-s}}}}))},clickClearSearchText:function(){this.searchText=""},contextMenuFolder:function(t,e){var n=t.pageX,r=t.pageY,i=this.folderContextMenuData;requestAnimationFrame((function(){i.x=n,i.y=r,i.folder=e,i.visible=!0}))},contextMenuFile:function(t,e){var n=t.pageX,r=t.pageY,i=this.fileContextMenuData;requestAnimationFrame((function(){i.x=n,i.y=r,i.file=e,i.visible=!0}))},clickSubFoldersOpen:function(){this.$emit("clickSubFoldersOpen")},clickSubFilesOpen:function(){this.$emit("clickSubFilesOpen")},clickSubArtboardsOpen:function(){this.$emit("clickSubArtboardsOpen")},getArtboardViewRect:function(t){if(!t)return null;var e=this.renderArtboardRects,n=this.renderArtboardsWithCurrentPage;return e[n.findIndex((function(e){var n;return(null===e||void 0===e||null===(n=e.artboard)||void 0===n?void 0:n.cid)===t}))]},cleanLightArtboardId:function(){this.lightArtboardId=0},setArtboardToCenterAndLight:function(t){var e=this,n=t.docGuid,r=t.pageGuid,i=t.name,a=t.topSectionId,o=this.filterDocumentGuid;o&&n!==o&&r!==o&&a!==o&&this.$store.commit("setFilterDocumentGuid",null),this.subArtboardsOpen||this.clickSubArtboardsOpen(),this.$nextTick((function(){var n=e.getArtboardViewRect(t.cid);if(!n)return e.showTextTip("无法定位到画板[".concat(i,"]"));var r=n.y,a=n.height,o=e.scrollY,s=e.artboardsBoundingClientRect,c=s.marginTop+o,l=e.listBoundingClientRect.height,u=r+c+a/2-l/2;e.lightArtboardId=t.cid;var d=e.$refs.$list;d&&(d.scrollTop=u),e.showTextTip("已定位到画板[".concat(i,"]"))}))}},watch:{lightArtboardId:function(t){var e=this;t>0?requestAnimationFrame((function(){window.addEventListener("mousedown",e.cleanLightArtboardId,!0)})):window.removeEventListener("mousedown",this.cleanLightArtboardId,!0)},resetCenterArtboard:function(t){this.artShowInListMode&&t&&(this.setArtboardToCenterAndLight(t),this.$store.commit("resetCenterArtboard",null))},renderArtboardViewRect:function(){var t=this.artboardsBoundingClientRect.height;0==t&&this.resetArtboardsBoundingClientRectDelay("renderArtboardViewRect")},renderFolderHeight:function(){this.resetArtboardsBoundingClientRectDelay("renderFolderHeight")},renderArtboardHeight:function(){this.resetArtboardsBoundingClientRectDelay("renderArtboardHeight")},subFoldersOpen:function(){this.resetArtboardsBoundingClientRect("subFoldersOpen")},subFilesOpen:function(){this.resetArtboardsBoundingClientRect("subFilesOpen")},subArtboardsOpen:function(){this.resetArtboardsBoundingClientRect("subArtboardsOpen")},allFoldersBoxVisible:function(){this.resetArtboardsBoundingClientRect("allFoldersBoxVisible")},"renderCloudSubFolders.length":function(){this.resetArtboardsBoundingClientRectDelay("renderCloudSubFolders.length")},"renderCloudSubFiles.length":function(){this.resetArtboardsBoundingClientRectDelay("'renderCloudSubFiles.length")},"renderCloudSubArtboards.length":function(){this.resetArtboardsBoundingClientRectDelay("'renderCloudSubArtboards.length")},renderFolderViewRect:function(){var t=this.foldersBoundingClientRect.height;0==t&&this.resetArtboardsBoundingClientRectDelay("renderFolderViewRect")},renderFileViewRect:function(){var t=this.filesBoundingClientRect.height;0==t&&this.resetArtboardsBoundingClientRectDelay("renderFileViewRect")},scrollY:function(){var t=this;this.resetArtboardsBoundingClientRectDelay("scrollY"),clearTimeout(this.scrollingHandle),this.scrolling=!0,this.scrollingHandle=setTimeout((function(){t.scrolling=!1}),100)}},computed:{folderListVisible:function(){var t=this.subFoldersOpen,e=this.needShowFile;return t||!e},resetCenterArtboard:function(){return this.$store.state.scale.resetCenterArtboard},renderArtboardsWithCurrentPage:function(){var t=this.renderCloudSubArtboards,e=this.filterDocumentGuid;return Object(l["i"])(e)?t.filter((function(t){var n=t.artboard;return n.pageGuid===e||n.docGuid===e||n.topSectionId===e})):t},renderArtboardHeight:function(){var t=this.renderArtboardRects,e=t.length;if(0==e)return 0;for(var n=t[e-1],r=n.y,i=n.bottom,a=e-2;a>=0;a--){var o=t[a];if(o.y!==r)break;i=Math.max(i,o.bottom)}var s=Ou.artboardMax;return i+s.margin.bottom},renderFileHeight:function(){var t=this.renderFileRects,e=t.length;if(0==e)return 0;for(var n=t[e-1],r=n.y,i=n.bottom,a=e-2;a>=0;a--){var o=t[a];if(o.y!==r)break;i=Math.max(i,o.bottom)}var s=Ou.fileMax;return i+s.margin.bottom},renderFolderHeight:function(){var t=this.renderFolderRects,e=t.length;if(0==e)return 0;for(var n=t[e-1],r=n.y,i=n.bottom,a=e-2;a>=0;a--){var o=t[a];if(o.y!==r)break;i=Math.max(i,o.bottom)}var s=Ou.folderMax;return i+s.margin.bottom},renderFolderViewRect:function(){var t=this.viewRect,e=this.foldersBoundingClientRect,n=Object(d["d"])(t,e);return n&&(n.x=0,e.y>0?n.y-=e.y:n.y-=e.marginTop),n},renderFileViewRect:function(){var t=this.viewRect,e=this.filesBoundingClientRect,n=Object(d["d"])(t,e);return n&&(n.x=0,e.y>0?n.y-=e.y:n.y-=e.marginTop),n},renderArtboardViewRect:function(){var t=this.viewRect,e=this.artboardsBoundingClientRect,n=Object(d["d"])(t,e);return n&&(n.x=0,e.y>0?n.y-=e.y:n.y-=e.marginTop),n},renderFolderLazyList:function(){var t=this.renderFolderViewRect,e=this.renderFolderRects,n=this.renderCloudSubFolders,r=this.folderListVisible;return this.getRenderLazyList(t,e,n,r,!0)},renderFileLazyList:function(){var t=this.renderFileViewRect,e=this.renderFileRects,n=this.renderCloudSubFiles,r=this.subFilesOpen;return this.getRenderLazyList(t,e,n,r,!0)},renderArtboardLazyList:function(){var t=this.renderArtboardViewRect,e=this.renderArtboardRects,n=this.renderArtboardsWithCurrentPage,r=this.subArtboardsOpen;return this.getRenderLazyList(t,e,n,r,!1)},renderFolderRects:function(){var t=this.renderCloudSubFolders,e=this.foldersBoundingClientRect;if(0===e.width)return[];var n={x:0,y:0,width:e.width,height:e.height},r=[],i=Ou.folderMax,a=i.margin.left,o=a,s=i.margin.top,c=Math.floor(n.width/Su);return t.forEach((function(t,e){var n=new d["a"];n.set(o,s,i.width,i.height),r.push((new d["a"]).set(n.x,n.y,n.width,n.height)),n.x=n.right+i.margin.left+i.margin.right,1===c||e>0&&(e+1)%c===0?(s+=i.height,s+=i.margin.top+i.margin.bottom,o=a):o=n.x})),r},renderFileRects:function(){var t=this.renderCloudSubFiles,e=this.filesBoundingClientRect;if(0===e.width)return[];var n={x:0,y:0,width:e.width,height:e.height},r=[],i=Ou.fileMax,a=i.margin.left,o=a,s=i.margin.top,c=Math.floor(n.width/Su);return t.forEach((function(t,e){var n=new d["a"];n.set(o,s,i.width,i.height),r.push((new d["a"]).set(n.x,n.y,n.width,n.height)),n.x=n.right+i.margin.left+i.margin.right,1===c||e>0&&(e+1)%c===0?(s+=i.height,s+=i.margin.top+i.margin.bottom,o=a):o=n.x})),r},renderArtboardRects:function(){var t=this.renderArtboardsWithCurrentPage,e=this.artboardsBoundingClientRect;if(0===e.width)return[];var n={x:0,y:0,width:e.width,height:e.height},r=[],i=Ou.artboardMax,a=i.margin.left,o=a,s=i.margin.top,c=Math.floor(n.width/Su),l=0;return t.forEach((function(t,e){var n=new d["a"];if(0===i.height){var u=t.artboard.boundsInParent.viewHeight;void 0===u&&(Object(d["h"])(t.artboard),u=t.artboard.boundsInParent.viewHeight);var h=i.textHeight+u;isNaN(h)&&(h=i.textHeight),n.set(o,s,i.width,h),l=Math.max(l,n.height)}else n.set(o,s,i.width,i.height);r.push((new d["a"]).set(n.x,n.y,n.width,n.height)),n.x=n.right+i.margin.left+i.margin.right,1===c||e>0&&(e+1)%c===0?(0===i.height?(s+=l,l=0):s+=i.height,s+=i.margin.top+i.margin.bottom,o=a):o=n.x})),r},hasSearchText:function(){return Object(l["i"])(this.searchText)},needShowFile:function(){return this.inCloudMode&&this.cloudCurrentFolderId>0},renderCloudSubFolders:function(){var t=this.cloudSubFolders,e=this.hasSearchText,n=this.searchText;return t&&0!==t.length?e?(n=n.toLowerCase(),t.filter((function(t){var e,r,i=null!==(e=null===(r=t.name)||void 0===r?void 0:r.toLowerCase())&&void 0!==e?e:"";return-1!==i.indexOf(n)}))):t:[]},renderCloudSubFiles:function(){var t=this.cloudSubFiles,e=this.hasSearchText,n=this.searchText;return t&&0!==t.length?e?(n=n.toLowerCase(),t.filter((function(t){var e,r,i=null!==(e=null===(r=t.name)||void 0===r?void 0:r.toLowerCase())&&void 0!==e?e:"";return-1!==i.indexOf(n)}))):t:[]},cloudListSort:function(){return this.$store.state.cloudListSort},sortRenderDocumentArtboards:function(){var t=this.renderDocumentArtboards,e=this.cloudListSort;return t=Object(u["a"])(t),Ie(t,"updateTimeTimes",o["j"].Artboard,e),t},renderCloudSubArtboards:function(){var t=this.sortRenderDocumentArtboards,e=this.hasSearchText,n=this.searchText;return t&&0!==t.length?e?(n=n.toLowerCase(),t.filter((function(t){var e,r,i=null!==(e=null===(r=t.artboard)||void 0===r||null===(r=r.name)||void 0===r?void 0:r.toLowerCase())&&void 0!==e?e:"";return-1!==i.indexOf(n)}))):t:[]},hasSubFolders:function(){return this.renderCloudSubFolders.length>0},hasSubFiles:function(){return this.renderCloudSubFiles.length>0},hasSubArtboards:function(){return this.renderCloudSubArtboards.length>0}},data:function(){return{lightArtboardId:0,scrollY:0,scrolling:!1,scrollingHandle:0,handle_resetArtboardsBoundingClientRect:0,viewRect:{x:0,y:0,width:0,height:0},listBoundingClientRect:{x:0,y:0,width:0,height:0},foldersBoundingClientRect:{x:0,y:0,width:0,height:0,marginTop:0},filesBoundingClientRect:{x:0,y:0,width:0,height:0,marginTop:0},artboardsBoundingClientRect:{x:0,y:0,width:0,height:0,marginTop:0},fileContextMenuData:{visible:!1,x:0,y:0,file:null},folderContextMenuData:{visible:!1,x:0,y:0,file:null},searchText:""}},props:{subFoldersOpen:Boolean,subFilesOpen:Boolean,subArtboardsOpen:Boolean,isSupportNetDiskFile:Boolean},created:function(){window.addEventListener("resize",this.onResize)},mounted:function(){this.resetArtboardsBoundingClientRect("mounted")},beforeDestroy:function(){cancelAnimationFrame(this.handle_resetArtboardsBoundingClientRect),clearTimeout(this.scrollingHandle),window.removeEventListener("resize",this.onResize)}},Au=Iu,Tu=(n("3eb4"),Object(hr["a"])(Au,ul,dl,!1,null,"d7bc9a20",null)),ju=Tu.exports,Fu=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-nav",class:{on:t.miniFoldersOpen,allfolders:t.allFoldersBoxVisible}},[e("dl",{staticClass:"subfolders",class:{on:t.miniFoldersOpen}},[e("dt",{on:{click:function(e){return e.target!==e.currentTarget?null:t.clickMiniFoldersOpen.apply(null,arguments)}}},[e("div",{staticClass:"title",on:{click:t.clickMiniFoldersOpen}},[t._v("文件夹/文件"),e("span",{staticClass:"count"},[t._v(t._s(t.totalCount))])]),t.miniFoldersOpen?e("div",{staticClass:"c"},[e("div",{staticClass:"search",class:{on:t.inSearchMode}},[e("div",{staticClass:"btn-search",attrs:{title:"搜索当前文件夹"},on:{click:t.showSearch}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",attrs:{type:"text",maxlength:"50",spellcheck:"false"},domProps:{value:t.searchText},on:{blur:t.onSearchInputBlur,input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t.hasSearchText?e("div",{staticClass:"btn-clear",on:{click:t.clickClearSearchText}}):t._e()]),e("FolderNavSortMenu",{attrs:{mini:!0,supportRectSort:!1}})],1):t._e()]),e("dd",{ref:"box",class:{"on-scroll":t.hasScroll},on:{scroll:t.onScroll,mousewheel:t.onMouseWheel}},[t.hasSearchText&&0===t.miniRenderList.length?e("div",{staticClass:"empty"},[t._v("未找到包含 “"+t._s(t.searchText)+"” 的子文件夹或文件")]):t._e(),e("div",{staticClass:"brace",class:{off:t.miniListOpt.mousewheelTimes>0},style:t.braceStyle},[e("div",{staticClass:"front",style:{paddingTop:t.miniFrontMarginTop}},[t._l(t.lazyMiniRenderList,(function(n){return[n.isFolder?e("FolderNavSubFolderItem",{key:n.key,attrs:{folder:n.item,isSupportNetDiskFile:t.isSupportNetDiskFile},on:{contextMenuFolder:t.contextMenuFolder}}):t._e(),n.isFile?e("FolderNavSubFileItem",{key:n.key,attrs:{file:n.item},on:{contextMenuFile:t.contextMenuFile}}):t._e()]}))],2)])])]),e("FileItemContextMenu",{attrs:{fileContextMenuData:t.fileContextMenuData}}),e("FolderItemContextMenu",{attrs:{folderContextMenuData:t.folderContextMenuData}})],1)},Mu=[],_u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-item",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)},click:function(e){return t.clickGoFolder()}}},[e("div",{staticClass:"icon"}),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(t.folder.name))]),e("div",{staticClass:"art-count"},[t._v(t._s(t.info))])])])},Lu=[],Du={methods:{onContextmenu:function(t){this.$emit("contextMenuFolder",t,this.folder)},clickGoFolder:function(){Object(c["T"])(this.folder.id)}},computed:{useTimeSort:function(){return this.$store.state.cloudListSort.sortType===o["k"].Date},info:function(){var t=this.folder.updateTimes,e=this.folder,n=this.useTimeSort;return n?Object(l["b"])(t):"共".concat(Ve(e),"项")},itemClass:function(){var t=this.folder,e={};if(t.shareMode===o["r"].PrivateCode?e.private=1:t.shareMode===o["r"].SpecifyMembers&&(e["share-sm"]=1),null!=t.color){var n=o["p"].getName(t.color);n&&(e[n]=1)}return e},countText:function(){var t,e=this.folder;return e.artboardCount+(null!==(t=e.fileCount)&&void 0!==t?t:0)+e.folderCount},title:function(){return Re(this.folder)}},props:{folder:Object,isSupportNetDiskFile:Boolean}},Nu=Du,Eu=(n("aef2"),Object(hr["a"])(Nu,_u,Lu,!1,null,"4ef32542",null)),Pu=Eu.exports,Ru=function(){var t=this,e=t._self._c;return e("div",{staticClass:"file-item",attrs:{title:t.title},on:{click:function(e){return t.clickNetDiskFile(t.file)},contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",{ref:"img",staticClass:"img"},[0===t.imgSize.width&&0===t.imgSize.height?e("div",{staticClass:"icon-netdiskfile",class:t.iconCls}):t._e(),e("ArtboardPreviewImg",{attrs:{imgHeight:0,pathPreview:t.file.previewImage},on:{resize:t.onPreviewImgResize}})],1),e("div",{staticClass:"text"},[e("div",{staticClass:"name"},[e("span",{staticClass:"pre"},[e("span",[t._v(t._s(t.file.fileName)+".")])]),e("span",{staticClass:"ext"},[t._v(t._s(t.fileExt))])]),e("div",{staticClass:"info"},[t._v(t._s(t.info))])])])},Vu=[],Bu={components:{ArtboardPreviewImg:Ql},methods:{onPreviewImgResize:function(t,e){var n=this.imgSize;n.width=t,n.height=e},onContextmenu:function(t){this.$emit("contextMenuFile",t,this.file)}},computed:{info:function(){return We(this.file)},fileExt:function(){var t,e,n=this.file;if(!n)return null;var r=null!==(t=null===(e=n.fileExt)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"";return"."===r[0]&&(r=r.substring(1)),r},iconCls:function(){var t=this.file;return t?o["y"].getName(t.fileType,o["z"].Normal):null},title:function(){return Be(this.file)}},props:{file:Object},data:function(){return{imgSize:{width:0,height:0}}}},Uu=Bu,Hu=(n("27a0"),Object(hr["a"])(Uu,Ru,Vu,!1,null,"b87dbf78",null)),Wu=Hu.exports,$u={components:{FileItemContextMenu:Nl,FolderItemContextMenu:Ul,FolderNavSubFolderItem:Pu,FolderNavSubFileItem:Wu,FolderNavSortMenu:Cu},methods:{contextMenuFolder:function(t,e){var n=t.pageX,r=t.pageY,i=this.folderContextMenuData;requestAnimationFrame((function(){i.x=n,i.y=r,i.folder=e,i.visible=!0}))},contextMenuFile:function(t,e){var n=t.pageX,r=t.pageY,i=this.fileContextMenuData;requestAnimationFrame((function(){i.x=n,i.y=r,i.file=e,i.visible=!0}))},onMouseWheel:function(t){var e;this.miniListOpt.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onScroll:function(t){this.miniListOpt.scrollTop=t.target.scrollTop},resize:function(){if(this.useMiniList){var t=this.$refs.box;if(t){var e=this.miniListOpt;e.boxHeight=t.offsetHeight}}},onSearchInputBlur:function(){var t=this;clearTimeout(this.searchHandle),this.searchHandle=setTimeout((function(){t.searchInputfocus=!1}),100)},clickClearSearchText:function(){this.searchText="",this.showSearch()},showSearch:function(){var t=this;clearTimeout(this.searchHandle),this.searchInputfocus=!0,this.$nextTick((function(){var e;null===(e=t.$refs.searchInput)||void 0===e||e.focus()}))},clickMiniFoldersOpen:function(){this.$emit("clickMiniFoldersOpen",!this.miniFoldersOpen)}},computed:{totalCount:function(){var t,e,n,r,i=null!==(t=null===(e=this.cloudSubFolders)||void 0===e?void 0:e.length)&&void 0!==t?t:0,a=null!==(n=null===(r=this.cloudSubFiles)||void 0===r?void 0:r.length)&&void 0!==n?n:0;return"(".concat(i+a,")")},lazyMiniRenderList:function(){var t=this.miniRenderList,e=this.lazyMiniStartIndex,n=this.lazyMiniLength;return t.slice(e,e+n)},lazyMiniStartIndex:function(){var t=this.miniRenderList,e=this.miniListOpt,n=e.scrollTop,r=e.itemHeight,i=e.boxHeight,a=t.length-Math.floor(i/r);return Math.max(0,Math.min(a,Math.floor(n/r)-1))},lazyMiniLength:function(){var t=this.miniRenderList,e=this.lazyMiniStartIndex,n=this.miniListOpt,r=n.boxHeight,i=n.itemHeight;return Math.min(t.length-e,Math.ceil(r/i)+2)},miniFrontMarginTop:function(){return this.lazyMiniStartIndex*this.miniListOpt.itemHeight+"px"},miniBoxRealHeight:function(){return this.miniListOpt.itemHeight*this.miniRenderList.length},braceStyle:function(){return{height:this.miniBoxRealHeight+"px"}},hasScroll:function(){return this.miniListOpt.boxHeight<this.miniBoxRealHeight},useMiniList:function(){return 0!==this.renderDocumentArtboards.length},miniRenderList:function(){var t=this.cloudSubFolders,e=this.cloudSubFiles,n=this.hasSearchText,r=this.searchText,i=[];return r=n?r.toLowerCase():null,t&&t.forEach((function(t){var e,a;n&&-1==(null!==(e=null===(a=t.name)||void 0===a?void 0:a.toLowerCase())&&void 0!==e?e:"").indexOf(r)||i.push({isFolder:!0,item:t,key:"ml_folder_".concat(t.id)})})),e&&e.forEach((function(t){var e,a,o;n&&-1==(null!==(e=null===(a=t.name)||void 0===a?void 0:a.toLowerCase())&&void 0!==e?e:"").indexOf(r)||i.push({isFile:!0,item:t,key:"ml_file_".concat(null!==(o=t.id)&&void 0!==o?o:t.viewUrl)})})),i},inSearchMode:function(){return this.searchInputfocus||this.hasSearchText},hasSearchText:function(){return Object(l["i"])(this.searchText)}},watch:{"miniListOpt.mousewheelTimes":function(t){var e=this;clearTimeout(this.miniListOpt.mousewheelHandle),t&&(this.miniListOpt.mousewheelHandle=setTimeout((function(){e.miniListOpt.mousewheelTimes=!1}),200))},miniFoldersOpen:function(t){var e=this;t||(this.searchText=""),this.$nextTick((function(){e.resize()}))}},props:{isSupportNetDiskFile:Boolean,miniFoldersOpen:Boolean},data:function(){return{searchHandle:0,folderContextMenuData:{visible:!1,x:0,y:0,file:null},fileContextMenuData:{visible:!1,x:0,y:0,file:null},searchText:"",searchInputfocus:!1,miniListOpt:{scrollTop:0,boxHeight:0,mousewheelTimes:0,mousewheelHandle:0,itemHeight:68}}},beforeDestroy:function(){clearTimeout(this.searchHandle),clearTimeout(this.miniListOpt.mousewheelHandle),window.removeEventListener("resize",this.resize)},created:function(){window.addEventListener("resize",this.resize)},mounted:function(){var t=this;this.$nextTick((function(){t.resize()}))}},Gu=$u,zu=(n("0378"),Object(hr["a"])(Gu,Fu,Mu,!1,null,"7be1ac6f",null)),Yu=zu.exports,Xu={components:{FolderNavMax:ju,FolderNavMini:Yu},methods:{clickSubFoldersOpen:function(){this.inArtboardMultDownMode||(this.subFoldersOpen=!this.subFoldersOpen,Object(c["nb"])("subfolderopen",this.subFoldersOpen?"1":"0"))},clickSubFilesOpen:function(){this.inArtboardMultDownMode||(this.subFilesOpen=!this.subFilesOpen,Object(c["nb"])("subFilesOpen",this.subFilesOpen?"1":"0"))},clickSubArtboardsOpen:function(){this.inArtboardMultDownMode&&this.subArtboardsOpen||(this.subArtboardsOpen=!this.subArtboardsOpen,Object(c["nb"])("subartboardsopen",this.subArtboardsOpen?"1":"0"))},clickMiniFoldersOpen:function(t){this.miniFoldersOpen=t}},computed:{useMiniList:function(){return!this.artShowInListMode&&0!==this.renderDocumentArtboards.length},isSupportNetDiskFile:function(){return this.inCloudMode&&!Object(l["o"])(this.cloudVersion)},visible:function(){return this.inCloudMode&&!this.inArtboardMode&&!this.cloudFolderNotFound&&(this.hasSubFolders||this.hasSubFiles||this.artShowInListMode&&this.hasSubArtboards)},visibleMin:function(){return this.visible&&this.useMiniList},hasSubFolders:function(){var t=this.cloudSubFolders;return t&&t.length>0},hasSubFiles:function(){var t=this.cloudSubFiles;return t&&t.length>0},hasSubArtboards:function(){return this.renderDocumentArtboards.length>0},cloudListSort:function(){return this.$store.state.cloudListSort}},watch:{visible:function(t){t||(this.miniFoldersOpen=!1)}},data:function(){var t="0"!==Object(c["I"])("subfolderopen",!1),e="0"!==Object(c["I"])("subFilesOpen",!1),n="0"!==Object(c["I"])("subartboardsopen",!1),r=!1;return{subFoldersOpen:t,subFilesOpen:e,subArtboardsOpen:n,miniFoldersOpen:r}}},Ku=Xu,qu=(n("d078"),Object(hr["a"])(Ku,cl,ll,!1,null,"3caf645f",null)),Qu=qu.exports,Ju=function(){var t=this,e=t._self._c;return t.tipVisible?e("div",{staticClass:"pop-tip-text"},[e("p",[e("span",{staticClass:"loading"}),t._v(" "+t._s(t.tipText)+" ")])]):t._e()},Zu=[],td={computed:{tipText:function(){return"正在导出切图资源中,请稍后..."},tipVisible:function(){return this.$store.state.inOutput}}},ed=td,nd=(n("597f"),Object(hr["a"])(ed,Ju,Zu,!1,null,"960b11d8",null)),rd=nd.exports,id=function(){var t=this,e=t._self._c;return e("header",[e("PathNav"),!t.setVisible||!t.inArtboardMode&&t.artShowInListMode?e("div"):e("div",{staticClass:"view-mode"},[e("div",{staticClass:"container"},[e("BtnContainerColor"),e("ScaleControl",{attrs:{type:t.inArtboardMode?1:0}})],1)]),e("div",{staticClass:"set"},[t.setVisible?[t.inArtboardMode?t._e():e("div",{staticClass:"btn-download",class:{on:t.inArtboardMultDownMode},attrs:{title:"批量下载画板预览图"},on:{click:function(e){return t.setInArtboardMultDownMode(!t.inArtboardMultDownMode)}}}),t.canShowUpload?e("BtnUpload"):t._e(),t.inCloudMode&&!t.inArtboardMode?e("BtnArtRenderMode"):t._e(),t.inCloudMode&&!t.inArtboardMode||t.canShowUpload?e("div",{staticClass:"line line-left"}):t._e(),e("div",{ref:"btnHelp",staticClass:"helper",class:{on:t.helperVisible},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickHelper(!t.helperVisible)}}},[e("Helper")],1),t.inCloudMode?e("BtnGoInteraction"):t._e(),t.inCloudMode&&t.inArtboardMode?e("ArtboardVersion"):t._e()]:t.inCloudMode&&!t.cloudFolderNotFound&&t.permission&&t.canShowUpload?[e("BtnUpload"),e("div",{staticClass:"line line-left"})]:t._e(),t.curNetDiskFile&&t.fileDownloadUrl?e("div",{staticClass:"btn-download",attrs:{title:"下载文件"},on:{click:function(e){return t.clickDownloadNetDiskFile(t.curNetDiskFile)}}}):t._e(),t.canShowLog?e("CloudFolderLogs"):t._e(),t.inCloudMode&&t.cloudIsLogin?e("UserNotifyButton"):t._e(),e("UserInfo",{attrs:{setVisible:t.setVisible}})],2),t.inCloudMode?e("UserNotify"):t._e()],1)},ad=[],od=function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn-container-color"},[e("a",{staticClass:"btn-color",style:{backgroundColor:t.backgroundColor},attrs:{href:"javascript:;",title:"设置预览场景背景色"},on:{click:function(e){t.boxVisible=!t.boxVisible}}}),t.boxVisible?e("div",{staticClass:"box"},[e("h5",{attrs:{"data-unhide":"1"}},[t._v("场景背景色")]),e("div",{staticClass:"list",attrs:{"data-unhide":"1"}},[e("div",{staticClass:"item item-color-picker",class:{on:t.usedColorPicker},attrs:{"data-unhide":"1"},on:{click:function(e){return t.clickColorPicker()}}},[e("input",{ref:"colorPicker",attrs:{title:"自定义背景色","data-unhide":"1",type:"color"},on:{input:t.onColorPickerChange}})]),e("div",{staticClass:"line",attrs:{"data-unhide":"1"}}),t._l(t.recommendedColors,(function(n,r){return e("div",{key:r,staticClass:"item",class:{on:t.backgroundColor===n},style:{"background-color":n},attrs:{"data-unhide":"1"},on:{click:function(e){return t.clickRecommendColor(n)}}})}))],2)]):t._e()])},sd=[],cd={methods:{onColorPickerChange:function(t){var e,n=null===(e=t.target)||void 0===e?void 0:e.value;n&&this.clickRecommendColor(n)},clickColorPicker:function(){var t=this.$refs.colorPicker;t&&(t.value=this.backgroundColor)},clickRecommendColor:function(t){this.$store.commit("setInteractionBackground",t)},hideContextmenu:function(t){var e,n=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),"1"!==(null===(e=t.target)||void 0===e?void 0:e.getAttribute("data-unhide"))&&(this.handle=setTimeout((function(){n.boxVisible=!1}),100)))}},watch:{boxVisible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},computed:{recommendedColors:function(){return["#000000","#282828","#ffffff","#eeeeee","#f5f5f5"]},usedColorPicker:function(){var t=this.recommendedColors,e=this.backgroundColor;return!t.find((function(t){return t===e}))},backgroundColor:function(){return this.interactionSet.backgroundColor},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet}},data:function(){return{handle:0,boxVisible:!1}},beforeDestroy:function(){window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0),clearTimeout(this.handle)}},ld=cd,ud=(n("c2cb"),Object(hr["a"])(ld,od,sd,!1,null,"6dc98455",null)),dd=ud.exports,hd=function(){var t=this,e=t._self._c;return t.notSupportArtboardVerCloudVersion?t._e():e("div",{staticClass:"artboard-version-info"},[e("div",{staticClass:"btn-art-verison",class:{on:t.artboardDetail.artboardVerListVisible},attrs:{title:"画板版本列表"},on:{click:function(e){t.artboardDetail.artboardVerListVisible=!t.artboardDetail.artboardVerListVisible}}}),e("ArtboardVersionList",{ref:"artboardVersionList",attrs:{readonlyCurrentFolder:t.fileReadOnly,artboardVerId:t.artboardVerId,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion},on:{artboardVerRemove:t.artboardVerRemove}})],1)},fd=[],md=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"artboard-version-list",on:{click:function(e){t.notClickClose=!0}}},[t.fetchDetailState===t.FetchState.Fetching||t.fetchDetailState===t.FetchState.Error?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取版本信息...",errorText:t.artboardDetail.errorText,isLoading:t.fetchDetailState===t.FetchState.Fetching,isError:t.fetchDetailState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t.artboardDetailData?[e("div",{staticClass:"base"},[e("div",{staticClass:"tab"},[t._v("最新版本")]),e("ArtboardVersionItem",{attrs:{notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion,readonlyCurrentFolder:t.readonlyCurrentFolder,artboardVerData:t.artboardDetailData.artboard,selected:t.lastVersionSelected,artboardDetailData:t.artboardDetailData},on:{artboardVerRemove:t.artboardVerRemove,setInConfirm:t.setInConfirm}}),e("div",{staticClass:"tab"},[t._v("历史版本("+t._s(t.histories.length)+")")])],1),t.histories.length>0?e("div",{staticClass:"list"},[e("LazyList",{ref:"lazyList",attrs:{list:t.histories,lineHeight:t.itemLineHeight},scopedSlots:t._u([{key:"default",fn:function(n){return n.item?e("ArtboardVersionItem",{key:"".concat(n.item.lastVersionId,":").concat(n.item.id),attrs:{notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion,readonlyCurrentFolder:t.readonlyCurrentFolder,artboardVerData:n.item,selected:t.artboardVerId===n.item.lastVersionId,artboardDetailData:t.artboardDetailData},on:{artboardVerRemove:t.artboardVerRemove,setInConfirm:t.setInConfirm}}):t._e()}}],null,!0)})],1):t.notSupportArtboardVerCloudVersion?e("div",{staticClass:"cloudversion-tip",domProps:{textContent:t._s("私有云部署包版本过低(".concat(t.currentCloudVersion,"),请更新私有云部署包"))}}):e("div",{staticClass:"empty"})]:t._e()],2):t._e()},pd=[],bd=function(){var t=this,e=t._self._c;return e("div",{ref:"lazyList",staticClass:"common-lazy-list",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"real-height",style:{height:t.boxRealHeight}},[e("div",{staticClass:"front",style:t.frontStyle},[t._l(t.showList,(function(e,n){return t._t("default",null,{index:n,realIndex:e.realIndex,item:e.item})}))],2)])])},vd=[],gd={methods:{scrollToTop:function(){var t=this.$refs.lazyList;if(!t)return!1;t.scrollTop=0},scrollTo:function(t){if("function"!==typeof t)return!1;var e=this.list,n=this.$refs.lazyList,r=this.lineHeight,i=this.boxHeight,a=this.boxScrollTop;if(!n)return!1;var o=e.findIndex(t);if(-1===o)return!1;var s=r*o,c=(new d["a"]).set(0,a,100,i),l=(new d["a"]).set(0,s,100,r);return c.isContans(l)||(s-=i/2-r/2,n.scrollTop=s),!0},resetBoxData:function(){var t=this;this.$nextTick((function(){var e=t.$refs.lazyList;e&&(t.boxHeight=e.offsetHeight,t.boxScrollTop=e.scrollTop)}))},onBoxScroll:function(){var t=this.$refs.lazyList;t&&(this.boxScrollTop=t.scrollTop)}},computed:{boxRealHeight:function(){return this.list.length*this.lineHeight+2+"px"},frontStyle:function(){var t=this.showList,e=this.lineHeight,n=0;return t.length>0&&(n=t[0].realIndex*e),{"margin-top":n+"px"}},showList:function(){var t=this.list,e=this.preloadCount,n=this.lineHeight,r=this.boxScrollTop,i=this.boxHeight,a=e*n,o=new d["a"],s=(new d["a"]).set(0,r-a,100,i+2*a);return t.map((function(t,e){return o.set(0,e*n,100,n),Object(d["f"])(o,s)?{item:t,realIndex:e}:null})).filter((function(t){return null!=t}))},winRectChangeKey:function(){var t=this.winRect;return"".concat(t.width,"x").concat(t.height)},winRect:function(){return this.$store.state.winRect}},watch:{winRectChangeKey:function(){this.resetBoxData()}},mounted:function(){this.resetBoxData()},beforeDestroy:function(){},props:{list:Array,lineHeight:Number,preloadCount:{type:Number,default:1}},data:function(){return{boxScrollTop:0,boxHeight:0}}},wd=gd,xd=(n("0eb7"),Object(hr["a"])(wd,bd,vd,!1,null,"1c34f551",null)),yd=xd.exports,kd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-version-item",class:{on:t.selected},attrs:{title:t.userFaceTitle},on:{click:t.clickItem}},[e("div",{staticClass:"date",domProps:{textContent:t._s(t.dateStr)}}),e("div",{staticClass:"user"},[e("div",{staticClass:"name",domProps:{textContent:t._s(t.userNickName)}})]),e("div",{staticClass:"ver",domProps:{textContent:t._s(t.artboardVerId)}}),t.notSupportArtboardVerCloudVersion||t.readonlyCurrentFolder||!t.cloudUserIsDesigner?t._e():e("div",{staticClass:"btn-del",attrs:{title:"删除该版本"},on:{click:t.clickDelArtboardVer}})])},Cd=[],Sd={methods:{setInConfirm:function(t){this.$emit("setInConfirm",t)},clickDelArtboardVer:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,c,u,d,h,f;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.artboardVerData,i=t.readonlyCurrentFolder,a=t.parentId,o=t.cloudUserIsDesigner,n){e.next=3;break}return e.abrupt("return");case 3:if(s=n.lastVersionId,c=n.name,u=n.guid,!i&&o){e.next=6;break}return e.abrupt("return",t.showTextTip("您没有权限删除画板[".concat(c,"]")));case 6:if(e.prev=6,t.checkLoginThrow()){e.next=9;break}return e.abrupt("return");case 9:return d="是否确认删除画板版本#".concat(s," ?"),t.setInConfirm(!0),e.next=13,t.confirm({text:d});case 13:if(e.sent){e.next=15;break}return e.abrupt("return");case 15:return h=new FormData,h.append("guid",u),h.append("verId",s),h.append("parentId",a),e.next=21,t.fetchPostCloudApi("removeartboardverbyweb",{body:h});case 21:if(f=e.sent,Object(l["s"])(f)){e.next=24;break}throw new Error("返回值异常:".concat(f));case 24:if(f.success){e.next=26;break}throw new Error(f.errMsg);case 26:t.showTextTip("画板版本#".concat(s," 已删除")),t.$emit("artboardVerRemove",s),e.next=33;break;case 30:e.prev=30,e.t0=e["catch"](6),t.showTextTip(e.t0);case 33:return e.prev=33,t.setInConfirm(!1),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[6,30,33,36]])})))()},clickItem:function(t){var e;null!==(e=t.target)&&void 0!==e&&e.classList.contains("btn-del")||this.setCurArtboardVer(this.artboardVerData.lastVersionId)}},computed:{parentId:function(){return this.cloudCurrentFolderId},artboardVerId:function(){var t=this.artboardVerData;return t.lastVersionId?"#".concat(t.lastVersionId):"null"},dateStr:function(){var t,e=this.artboardVerData;return null!==(t=e.updateTimeStr)&&void 0!==t?t:Object(l["b"])(e.updateTimeTimes)},userFaceTitle:function(){var t=this.artboardVerData;return t?Ge(t):null},userNickName:function(){var t=this.artboardVerData;if(!t)return"-";var e=t.updaterName;return e||"-"}},props:{notSupportArtboardVerCloudVersion:Boolean,readonlyCurrentFolder:Boolean,artboardVerData:Object,selected:Boolean,artboardDetailData:Object}},Od=Sd,Id=(n("9a10"),Object(hr["a"])(Od,kd,Cd,!1,null,"5e87d688",null)),Ad=Id.exports,Td={components:{ArtboardVersionItem:Ad,LazyList:yd,NetworkLoading:us},methods:{setInConfirm:function(t){this.inConfirm=t},clickReload:function(){this.artboardDetail.refreshDataTicks=Date.now()},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.inConfirm||(t.notClickClose?t.notClickClose=!1:t.setVisible(!1))}),50)},artboardVerRemove:function(t){this.$emit("artboardVerRemove",t)},scrollToSelectArtboardVer:function(){var t,e=this.artboardVerId,n=this.lastVersionSelected;n||null===(t=this.$refs.lazyList)||void 0===t||t.scrollTo((function(t){return t.lastVersionId===e}))},setVisible:function(t){this.artboardDetail.artboardVerListVisible=t}},beforeDestroy:function(){this.setVisible(!1),window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle)},watch:{visible:function(t){var e=this;t?(requestAnimationFrame((function(){e.$nextTick((function(){e.scrollToSelectArtboardVer()}))})),window.addEventListener("click",this.closeSelf,!0)):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},computed:{artboardDetailData:function(){var t=this.curArtboard;if(!t)return null;var e=t.artboard,n=t.historyArtboards;return n?{artboard:e,historyArtboards:n}:null},FetchState:function(){return c["a"]},fetchDetailState:function(){return this.artboardDetail.fetchState},artboardDetail:function(){return this.$store.state.artboardDetail},visible:function(){var t=this.artboardDetail;return t.artboardVerListVisible},lastVersionSelected:function(){var t,e=this.curArtboard,n=this.artboardVerId;return n===(null===e||void 0===e||null===(t=e.artboard)||void 0===t?void 0:t.lastVersionId)||0===n},histories:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e?void 0:e.historyArtboards)&&void 0!==t?t:[]},itemLineHeight:function(){return 85}},data:function(){return{notClickClose:!1,closeHandle:0,inConfirm:!1}},created:function(){},props:{readonlyCurrentFolder:Boolean,artboardVerId:Number,notSupportArtboardVerCloudVersion:Boolean}},jd=Td,Fd=(n("d398"),Object(hr["a"])(jd,md,pd,!1,null,"7b5a38c2",null)),Md=Fd.exports,_d={components:{ArtboardVersionList:Md},methods:{artboardVerRemove:function(t){if(!("number"!==typeof t||isNaN(t)||t<1)){var e=this.curArtboard,n=this.artboardVerId,r=this.artboard;if(e&&r){var i=n===t,a=e.historyArtboards;if(r.lastVersionId===t){if(0===a.length)return void this.$store.commit("removeArtboard",r.guid);var o=a.splice(0,1)[0];i&&(e.isError=!1,e.isFetching=!1,e.isLoaded=!1,e.loadErrMsg=null),e.artboard=o}else{var s=null===a||void 0===a?void 0:a.findIndex((function(e){var n;return(null!==(n=null===e||void 0===e?void 0:e.lastVersionId)&&void 0!==n?n:e.verId)===t}));if(-1===s)return;a.splice(s,1),r.versionCount=1+a.length}i&&this.setCurArtboardVer(r.lastVersionId)}}},reloadHistoryList:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,c,u,h,f,m,p;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.curArtboard,n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=4,s=new FormData,c=n.artboard.cid,s.append("artboardid",c),e.next=10,t.fetchPostCloudApi("GetArtboardVerListByWeb",{body:s});case 10:if(u=e.sent,u.success){e.next=13;break}return e.abrupt("return");case 13:if(u=u.data,Object(l["s"])(u)){e.next=16;break}return e.abrupt("return");case 16:Object(l["s"])(u.users)||(u.users={}),Object(l["h"])(u.historyArtboards)?u.historyArtboards.forEach((function(t){fe(t),Object(d["h"])(t),_e(t)})):u.historyArtboards=[],h=function(t){if(!(!Object(l["s"])(t)||Object(l["i"])(t.updaterEmail)&&Object(l["i"])(t.updaterName))){var e=u.users[t.updaterId];e&&(t.updaterEmail=e.email,t.updaterName=e.nickName)}},f=null!==(i=u.artboard.cid)&&void 0!==i?i:u.artboard.id,u.artboard.cid=f,null!==(o=(a=u.artboard).boundsInArtboard)&&void 0!==o||(a.boundsInArtboard=null),u.historyArtboards.forEach((function(t){var e;h(t),t.cid=f,null!==(e=t.boundsInArtboard)&&void 0!==e||(t.boundsInArtboard=null),null==t.lastVersionId&&(t.lastVersionId=t.verId)})),h(u.artboard),f===c&&(n.historyArtboards=u.historyArtboards,null!=n.artboardVerData&&(m=n.artboardVerData.lastVersionId,-1==u.historyArtboards.findIndex((function(t){return t.lastVersionId===m}))&&t.setCurArtboardVer(u.artboard.lastVersionId))),p=In("comment",c),p&&(p.artboard=u.artboard,p.historyArtboards=u.historyArtboards),e.next=32;break;case 29:e.prev=29,e.t0=e["catch"](4);case 32:case"end":return e.stop()}}),e,null,[[4,29]])})))()}},computed:{artboardVerChangeKey:function(){var t=this.artboard;return t?"".concat(t.updateTimeTimes,":").concat(t.versionCount):null},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},artboardVerId:function(){var t,e;return null!==(t=null===(e=this.curArtboardLoadedVerData)||void 0===e?void 0:e.lastVersionId)&&void 0!==t?t:0},canChangeFile:function(){var t=this.inCloudMode,e=this.cloudCurrentFolderId,n=this.userFolderSpecifyMemberAuthority;if(t&&e>0)switch(n){case o["s"].Admin:case o["s"].ParentOwner:case o["s"].Owner:case o["s"].ReadWrite:return!0}return!1},fileReadOnly:function(){return this.cloudNotSupportEdit||!this.canChangeFile},cloudNotSupportEdit:function(){return Object(l["p"])(this.cloudVersion)},notSupportArtboardVerCloudVersion:function(){return Object(l["j"])(this.cloudVersion)},artboardDetail:function(){return this.$store.state.artboardDetail}},watch:{artboardVerChangeKey:function(t){t&&this.reloadHistoryList()}},created:function(){this.reloadHistoryList()}},Ld=_d,Dd=(n("3733"),Object(hr["a"])(Ld,hd,fd,!1,null,"b7beb0a6",null)),Nd=Dd.exports,Ed=function(){var t=this,e=t._self._c;return e("div",{staticClass:"netdisk-upload"},[e("div",{staticClass:"btn-netdisk-upload",class:{off:t.cannotUseNetDisk},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickOpenNetDiskUploadBox.apply(null,arguments)}}},[e("ul",[e("li",{staticClass:"btn-upload-file",on:{click:t.clickOpenNetDiskUploadBox}},[t._v("上传文件")]),e("li",{staticClass:"btn-upload-link",on:{click:t.clickAddNetDiskLink}},[t._v("添加链接")])])]),t.linkbox.visible?e("LinkEdit",{attrs:{link:t.linkbox},on:{onFileChanged:t.onFileChanged}}):t._e(),e("FileUpload",{attrs:{filebox:t.filebox},on:{onFileChanged:t.onFileChanged}})],1)},Pd=[],Rd=(n("21b8"),function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"pop-box cloudfile-linkedit",on:{mousedown:function(t){t.stopPropagation()}}},[e("div",{staticClass:"box"},[e("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:"取消操作"},on:{click:t.clickCloseBox}}),e("h5",[t._v(t._s(t.isAdd?"添加":"编辑")+"链接")]),e("h6",[t._v(t._s(t.isAdd?"添加一个":"编辑")+"链接以便从标记狮访问它")]),e("div",{staticClass:"form"},[e("div",{staticClass:"title"},[t._v("链接名称")]),e("UserInput",{ref:"name",attrs:{defaultBorder:!0,placeholder:"请输入链接名称",target:"inp-name",initValue:t.linkData.name,maxLength:100},on:{change:t.onNameChange}}),e("div",{staticClass:"title"},[t._v("链接地址")]),e("UserInput",{ref:"link",attrs:{defaultBorder:!0,placeholder:"请输入链接地址,以https://、http:// 或 ftp:// 开头",target:"inp-link",initValue:t.linkData.link,maxLength:8192},on:{change:t.onLinkChange}})],1),e("div",{staticClass:"btns"},[e("a",{staticClass:"btn-cancel",attrs:{href:"javascript:;"},on:{click:t.clickCloseBox}},[t._v("取消")]),e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickSave}},[t._v(t._s(t.submitFetching?"提交中...":"确定"))])])])]):t._e()}),Vd=[],Bd=function(){var t=this,e=t._self._c;return e("div",{staticClass:"input",class:t.cls},["checkbox"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:"checkbox"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{blur:t.blur,focus:t.focus,change:function(e){var n=t.value,r=e.target,i=!!r.checked;if(Array.isArray(n)){var a=null,o=t._i(n,a);r.checked?o<0&&(t.value=n.concat([a])):o>-1&&(t.value=n.slice(0,o).concat(n.slice(o+1)))}else t.value=i}}}):"radio"===t.type?e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:"radio"},domProps:{checked:t._q(t.value,null)},on:{blur:t.blur,focus:t.focus,change:function(e){t.value=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:t.type},domProps:{value:t.value},on:{blur:t.blur,focus:t.focus,input:function(e){e.target.composing||(t.value=e.target.value)}}}),t.showVerify?e("img",{staticClass:"verifycode",attrs:{src:t.verifySrc,title:"点击刷新验证码"},on:{click:function(e){return t.clickVerifyCode()}}}):t.showPwd?e("span",{staticClass:"pwd-mode",class:{"in-text":t.pwdModeInText},on:{click:function(e){t.pwdModeInText=!t.pwdModeInText}}}):t.showPhoneCode?e("a",{staticClass:"button btn-phoneCodeSend",class:{off:!t.phoneCodeBtnEnable,light:t.phoneCodeBtnEnable},attrs:{href:"javascript:;"},on:{click:t.sendPhoneCode}},[t._v(t._s(t.phoneCodeBtnText))]):t._e()])},Ud=[],Hd={methods:{sendPhoneCode:function(){this.$emit("sendPhoneCode")},setFocus:function(){var t=this.$refs.input;t&&t.focus()},setValue:function(t){"string"===typeof t&&(this.value=t)},clearAndFocus:function(){this.value="",this.setFocus()},refreshCode:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.ticks=Date.now(),t.value="";case 2:case"end":return e.stop()}}),e)})))()},clickVerifyCode:function(t){var e=this.ticks,n=Date.now(),r=n-e;r<500&&r>=0||(this.ticks=n,this.value="",!0!==t&&this.setFocus())},focus:function(){this.focused=!0},blur:function(){this.focused=!1}},watch:{showVerify:function(t){t&&this.refreshCode()},value:function(t){this.$emit("change",t)}},props:{target:String,initValue:String,placeholder:String,maxLength:Number,defaultBorder:Boolean,phoneCodeBtnText:String,phoneCodeBtnEnable:Boolean},computed:{autocomplete:function(){return"password"===this.type?"new-password":"off"},type:function(){return"pwd2"===this.target||"pwd3"===this.target?"password":this.showPwd?this.pwdModeInText?"text":"password":"text"},verifySrc:function(){return"".concat(c["f"],"router/verifycode.ashx?r=").concat(this.ticks)},showPwd:function(){return"pwd"===this.target},showVerify:function(){return"verify"===this.target},showPhoneCode:function(){return"phoneCode"===this.target},cls:function(){var t=[],e=this.target;return e&&t.push(e),this.focused&&t.push("focused"),this.defaultBorder&&t.push("default-bor"),t}},created:function(){this.value=this.initValue,this.showVerify&&this.refreshCode()},data:function(){return{pwdModeInText:!1,focused:!1,value:"",ticks:Date.now()}}},Wd=Hd,$d=(n("023f"),Object(hr["a"])(Wd,Bd,Ud,!1,null,"474237c6",null)),Gd=$d.exports,zd={components:{UserInput:Gd},methods:{clickSave:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,c,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.submitFetching){e.next=2;break}return e.abrupt("return");case 2:if(n=t.linkData,n.name=n.name.trim(),n.link=n.link.trim(),i=t.isAdd,Object(l["i"])(n.name)){e.next=11;break}return t.showTextTip("链接名称不能为空,请输入链接名称"),a=t.$refs.name,a&&a.setFocus(),e.abrupt("return");case 11:if(Object(l["i"])(n.link)){e.next=16;break}return t.showTextTip("链接地址不能为空,请输入链接地址"),o=t.$refs.link,o&&o.setFocus(),e.abrupt("return");case 16:if(/^(?:ftp|http|https):\/\/.+$/.test(n.link)){e.next=21;break}return t.showTextTip("请输入合法的链接地址,以https://、http:// 或 ftp:// 开头"),s=t.$refs.link,s&&(null===s||void 0===s||s.setFocus()),e.abrupt("return");case 21:if(i){e.next=27;break}if(c=t.link.data||{},c.name!==n.name||c.link!==n.link){e.next=27;break}return t.showTextTip("链接信息未发生变更"),t.clickCloseBox(),e.abrupt("return");case 27:return t.submitFetching=!0,e.prev=28,e.next=31,t.fetchPostCloudApi("setnetdisklinkbyweb",{timeout:1e4,body:n});case 31:if(u=e.sent,Object(l["s"])(u)){e.next=34;break}return e.abrupt("return");case 34:if(u.success){e.next=37;break}return t.showTextTip(u.errMsg),e.abrupt("return");case 37:u=u.data,t.$emit("onFileChanged",{files:[u.data],folderUpdateTimes:u.folderUpdateTimes,isAdd:i}),t.clickCloseBox(),t.showTextTip("".concat(i?"添加":"编辑","链接成功")),e.next=46;break;case 43:e.prev=43,e.t0=e["catch"](28),t.showTextTip("".concat(i?"添加":"编辑","链接失败:").concat(e.t0));case 46:return e.prev=46,t.submitFetching=!1,e.finish(46);case 49:case"end":return e.stop()}}),e,null,[[28,43,46,49]])})))()},onNameChange:function(t){this.linkData.name=t},onLinkChange:function(t){this.linkData.link=t},clickCloseBox:function(){var t=this.link;t.data=null,t.visible=!1}},computed:{isAdd:function(){return 0==this.linkData.id&&!Object(l["i"])(this.linkData.secId)},visible:function(){return this.link.visible}},data:function(){return{submitFetching:!1,linkData:null}},props:{link:Object},created:function(){this.linkData=Object.assign({},this.link.data||{id:0,name:"",link:"",parentId:0,secId:""})}},Yd=zd,Xd=(n("5ccb"),Object(hr["a"])(Yd,Rd,Vd,!1,null,"4ab12b2e",null)),Kd=Xd.exports,qd=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"pop-box cloudfile-upload",on:{mousedown:function(t){t.stopPropagation()},drop:function(t){t.preventDefault()}}},[e("div",{staticClass:"box"},[e("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:"取消操作"},on:{click:t.clickCloseBox}}),e("div",{staticClass:"drag-box",class:{dragging:t.dropTip.dragging}},[t._m(0),e("h4",[t._v(t._s(t.dragTitle))]),e("h5",[t._v("支持图片/SVG/PDF/Axure HTML演示文件以及其他任意格式文件")])]),t.hasFile?e("div",{ref:"files",staticClass:"files",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"height",class:{scrolling:t.scrolling},style:{height:t.boxRealHeight+"px"}},[e("div",{style:{"padding-top":t.renderListCssPaddingTop+"px"}},t._l(t.renderList,(function(t){return e("FileUploadItem",{key:t.id,attrs:{item:t}})})),1)])]):t._e(),e("div",{staticClass:"footer",class:{empty:!t.hasFile}},[t.hasFile?e("div",{staticClass:"other"},[e("div",{staticClass:"btn-clean btn-clean-all",on:{click:t.clickRemoveAll}},[t._v("清空全部")]),e("div",{staticClass:"btn-clean",on:{click:t.clickRemoveCompleted}},[t._v("清理已完成文件")])]):t._e(),e("div",{staticClass:"button light",on:{click:t.clickAddFiles}},[t._v("添加文件"),e("input",{attrs:{type:"file",value:"",size:"30",multiple:""},on:{change:t.onInputFileChange}})])])])]):t._e()},Qd=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"icon"},[e("div",{staticClass:"l"}),e("div",{staticClass:"r"})])}],Jd=(n("366d"),n("1587"),n("e466"),n("8748")),Zd=!1,th=[],eh={};function nh(){clearTimeout(zc),zc=setTimeout((function(){if(Gc){try{eh={},Gc.terminate()}catch(t){}Gc=null}}),12e4)}function rh(){return new Promise((function(t,e){if(Gc)return t(Gc);if(Zd)th.push({resolve:t,reject:e});else{Zd=!0;var n=function(t,e,n){var r=th;th=[],r.forEach((function(r){var i=r.resolve,a=r.reject;e?i(t):a(n)}))},r=new Worker(Object(c["D"])()+"marklion_cloud_web_worker.js");r.addEventListener("message",(function(i){nh();var a=i.data;if(a&&!0===a.__mcww){delete a.__mcww;var o=a.command;switch(delete a.command,o){case"inited":var s;Zd=!1,eh={};try{if(a.success)Gc=r,t(r);else{try{r.terminate()}catch(l){}s=a.errMsg||"error",e(s)}}catch(l){}n(r,a.success,s);break;default:var c=eh[o];c&&(delete eh[o],c(a));break}}})),r.addEventListener("error",(function(t){nh(),console.error(t)}))}}))}function ih(t,e){eh[t]=e}function ah(t){return oh.apply(this,arguments)}function oh(){return oh=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,a,o,s,l,u,d,h=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=c["S"].cloudKey,i=c["S"].userKey,a="".concat(e,"-").concat(Math.random().toString(16).substring(2)),o=h.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=h[l];return u={__mcww:!0,command:e,arg_len:s.length+1,arg0:"".concat(n,"-").concat(i||"null"),key:a},s.forEach((function(t,e){u["arg".concat(e+1)]=t})),t.next=7,rh();case 7:return d=t.sent,t.next=10,new Promise((function(t,e){ih(a,(function(n){n&&(n.success?t(n.data):e(n.errMsg))})),d.postMessage(u)}));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t)}))),oh.apply(this,arguments)}var sh=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"key",null),Object(j["a"])(this,"worker",null),Object(j["a"])(this,"msg",null)}return Object(A["a"])(t,[{key:"startAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,rh();case 2:return i=t.sent,this.worker=i,t.next=6,new Promise((function(t){n||(n={});var r=a.key=Math.random().toString(16).substring(2),i="filemd5.".concat(r,"."),o=i+"completed",s=i+"progress",c=a.msg=function(e){var r=e.data;if(r&&"object"===Object(Jd["a"])(r)&&!0===r.__filemd5){var i=r.command;switch(i){case o:delete r.__filemd5,delete r.command;try{var l=a.worker;l&&(l.removeEventListener("message",c),a.worker=a.key=a.msg=c=n=null)}catch(u){}t(r);break;case s:delete r.__filemd5,delete r.command,n&&n.onprogress&&n.onprogress(r);break}}},l=a.worker;l.addEventListener("message",c),l.postMessage({__filemd5:!0,command:"filemd5.start",key:r,file:e,needHash:n.needHash,needQuickHash:n.needQuickHash})}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"cancelAsync",value:function(){var t=this.key,e=this.worker,n=this.msg;t&&e&&(this.key=this.worker=null,n&&(e.removeEventListener("message",n),this.msg=null),e.postMessage({__filemd5:!0,command:"filemd5.cancel",key:t}))}}]),t}(),ch=81920;function lh(){return ch*Object(c["mb"])(38,65)}var uh=function(){function t(e){var n=this;Object(T["a"])(this,t),Object(j["a"])(this,"hasExist",!1),Object(j["a"])(this,"uploadGuid",void 0),Object(j["a"])(this,"file",void 0),Object(j["a"])(this,"sliceLength",0),Object(j["a"])(this,"mainFileSliceCurrent",0),Object(j["a"])(this,"lineViewPackSliceCurrent",0),Object(j["a"])(this,"previewImageSliceCurrent",0),Object(j["a"])(this,"lineViewVer",0),Object(j["a"])(this,"supportPreviewFileExt",!1),Object(j["a"])(this,"supportXSPFilePreview",!1),Object.keys(e).forEach((function(t){switch(t){case"needLineViewPack":case"needPreViewImage":return}n[t]=e[t]}))}return Object(A["a"])(t,[{key:"needLineViewPack",get:function(){return this.lineViewPackSliceCurrent>-1}},{key:"needPreViewImage",get:function(){return this.previewImageSliceCurrent>-1}}]),t}(),dh={MainFile:0,LineViewPack:1,PreviewImage:2},hh=Object(A["a"])((function t(){Object(T["a"])(this,t),Object(j["a"])(this,"type",dh.MainFile),Object(j["a"])(this,"uploadGuid",null),Object(j["a"])(this,"current",0),Object(j["a"])(this,"byteLength",0),Object(j["a"])(this,"rndLength",0)})),fh=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"folderId",0),Object(j["a"])(this,"guid",null),Object(j["a"])(this,"fileType",o["y"].Other),Object(j["a"])(this,"urlLink",null),Object(j["a"])(this,"lastWriteTime",0),Object(j["a"])(this,"fileName",null),Object(j["a"])(this,"previewFileExt",null),Object(j["a"])(this,"fileExt",null),Object(j["a"])(this,"sliceLength",0),Object(j["a"])(this,"mainFile",null),Object(j["a"])(this,"lineViewPack",null),Object(j["a"])(this,"previewImage",null)}return Object(A["a"])(t,[{key:"lineViewVer",get:function(){return 1}}]),t}(),mh=function(){function t(e,n,r,i){Object(T["a"])(this,t),Object(j["a"])(this,"size",0),Object(j["a"])(this,"hash",null),Object(j["a"])(this,"quickHash",null),Object(j["a"])(this,"sliceCount",0),this.hash=e,this.quickHash=n,this.size=r,this.updateSliceCount(i)}return Object(A["a"])(t,[{key:"updateSliceCount",value:function(t){this.sliceCount=Math.ceil(this.size/t)}}]),t}(),ph=Object(A["a"])((function t(){Object(T["a"])(this,t),Object(j["a"])(this,"lineViewVer",0),Object(j["a"])(this,"supportPreviewFileExt",!1),Object(j["a"])(this,"supportXSPFilePreview",!1)})),bh=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"mainFile",null),Object(j["a"])(this,"lineViewPack",null),Object(j["a"])(this,"previewImage",null),Object(j["a"])(this,"previewImageWithExt",null)}return Object(A["a"])(t,[{key:"setPreviewImage",value:function(t,e){e?this.previewImageWithExt=t:this.previewImage=t}},{key:"getPreviewImage",value:function(t){return t?this.previewImageWithExt:this.previewImage}}]),t}(),vh=function(){function t(){var e=this;Object(T["a"])(this,t),Object(j["a"])(this,"id",0),Object(j["a"])(this,"folderId",0),Object(j["a"])(this,"guid",null),Object(j["a"])(this,"fileType",void 0),Object(j["a"])(this,"currentPosition",0),Object(j["a"])(this,"currentSize",0),Object(j["a"])(this,"status",Sh.Fetching),Object(j["a"])(this,"_fileName",null),Object(j["a"])(this,"_size",0),Object(j["a"])(this,"_lastWriteTime",0),Object(j["a"])(this,"file",null),Object(j["a"])(this,"hash",null),Object(j["a"])(this,"quickHash",null),Object(j["a"])(this,"ext",null),Object(j["a"])(this,"lineViewPack",null),Object(j["a"])(this,"previewImage",null),Object.keys(this).filter((function(t){return"_"===t[0]})).forEach((function(t){Object(o["W"])(e,t,!1)}))}return Object(A["a"])(t,[{key:"needLineViewPack",get:function(){switch(this.fileType){case o["y"].Word:case o["y"].Excel:case o["y"].PPT:return!0;default:return!1}}},{key:"isJsonFile",get:function(){var t=this.fileName;return t&&/\.json$/gi.test(t)}},{key:"isIconFile",get:function(){var t=this.fileType,e=this.fileName;return t==o["y"].Image&&(!!Object(l["i"])(e)&&/\.(icon|ico|icns)$/gi.test(e))}},{key:"isSvgFile",get:function(){var t=this.fileType,e=this.fileName;return t==o["y"].Image&&/\.(svg)$/gi.test(e)}},{key:"needPreviewImage",get:function(){switch(this.fileType){case o["y"].Image:return!0;case o["y"].Lottie:return!0;case o["y"].XD:case o["y"].Sketch:case o["y"].Figma:return!0;default:return!1}}},{key:"currentPercentage",get:function(){var t=this.currentSize;if(0==t)return 0;var e=this.currentPosition;return e<1?0:e>t?100:Math.round(1e4*e/t)/100}},{key:"fileName",get:function(){var t,e=this._fileName;if(e)return e;var n=this.file;return e=this._fileName=null!==(t=null===n||void 0===n?void 0:n.name)&&void 0!==t?t:null,e}},{key:"fileExt",get:function(){var t=this.fileName;if(!t)return null;var e=t.lastIndexOf(".");return-1===e?"":t.substring(e)}},{key:"size",get:function(){var t,e=this._size;if(e>0)return e;var n=this.file;return e=this._size=null!==(t=null===n||void 0===n?void 0:n.size)&&void 0!==t?t:0,e}},{key:"lastWriteTime",get:function(){var t,e=this._lastWriteTime;if(e>0)return e;var n=this.file;return e=this._lastWriteTime=null!==(t=null===n||void 0===n?void 0:n.lastModified)&&void 0!==t?t:0,e}},{key:"needResetHash",value:function(){return!Object(l["i"])(this.hash)||!Object(l["i"])(this.quickHash)}}]),t}(),gh=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"size",0),Object(j["a"])(this,"lastWriteTime",0),Object(j["a"])(this,"file",null),Object(j["a"])(this,"previewFileExt",null),Object(j["a"])(this,"hash",null),Object(j["a"])(this,"quickHash",null)}return Object(A["a"])(t,[{key:"needResetHash",value:function(){return!Object(l["i"])(this.hash)||(!Object(l["i"])(this.quickHash)||null==this.file)}}]),t}(),wh={TextTip:Symbol("TextTip"),UploadUpdate:Symbol("UploadUpdate"),UploadRemove:Symbol("UploadRemove"),CloudFileUpdate:Symbol("CloudFileUpdate"),WebUserNotLogin:Symbol("WebUserNotLogin"),WebFileChanged:Symbol("WebFileChanged")},xh=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"inlineEvents",{}),Object(j["a"])(this,"cloudNetDiskFileUploaderInfoCache",null),Object(j["a"])(this,"uploadList",[]),Object(j["a"])(this,"_sql_auto_id",1)}return Object(A["a"])(t,[{key:"on",value:function(t,e){if(!t)return!1;if("function"!==typeof e)return!1;var n=this.inlineEvents,r=n[t];if(r){var i=r.find((function(t){return t===e}));i||r.push(e)}else r=n[t]=[e];return!0}},{key:"off",value:function(t,e){if(!t)return!1;var n=this.inlineEvents,r=n[t];if(!r||0===r.length)return!0;if(void 0===e)n[t]=[];else{var i=r.findIndex((function(t){return t===e}));-1!==i&&r.splice(i,1)}return!0}},{key:"emit",value:function(t,e){if(t){var n=this.inlineEvents,r=n[t];r&&0!==r.length&&r.forEach((function(t){t(e)}))}}},{key:"runTask",value:function(t){if(t)switch(t.type){case Oh.Remove_All:case Oh.Remove_Completed:case Oh.Remove_Select:this.removeTask(t);break;case Oh.Resume:case Oh.Pause:case Oh.ReStart:this.updateTask(t);break;case Oh.Add:this.addTask(t);break}}},{key:"addTask",value:function(t){var e=this;if(null!=t.files&&0!=t.files.length){var n={},r=[];if(t.files.forEach((function(t){try{var e=t.name;if(!Object(l["i"])(e))return;n["".concat(e,"-").concat(t.size)]=t}catch(r){}})),0!=Object.keys(n).length){var i=0,a=!1,s=this.uploadList;s.forEach((function(e){var r="".concat(e.fileName,"-").concat(e.size);if(e.folderId==t.folderId&&n[r])switch(e.status){case Sh.PreLoadFileMsg:delete n[r],a=!0;break;case Sh.Waitting:delete n[r],a=!0;break;case Sh.Fetching:delete n[r],a=!0;break;case Sh.Paused:case Sh.Errored:case Sh.Completed:case Sh.RemovedMark:return e.quickHash="",e.hash="",e.status=Sh.Waitting,delete n[r],void i++}})),Object.keys(n).forEach((function(e){var i=n[e],a=new vh;a.id=0,a.status=Sh.PreLoadFileMsg,a.fileType=o["y"].Other,a.ext="文件等待上传中",a.file=i,a.folderId=t.folderId,a.guid=null,a.hash=null,a.currentPosition=0,a.currentSize=0,a.quickHash=null,r.push(a),s.push(a)})),i=this.updateToSql(r),i>0?(i<r.length&&(r=r.filter((function(t){return t.id>0}))),this.sendStateToWeb(r),this.showTextTip("共计".concat(i,"个文件被添加到上传列表")),this.updatePreLoadFileMsgs(r)):a&&this.showTextTip("文件已经在上传列表中,请不要重复添加"),requestAnimationFrame((function(){e.startUploadTask()}))}}}},{key:"showTextTip",value:function(t){this.emit(wh.TextTip,t)}},{key:"getUploadTask",value:function(){var t=this,e=this.uploadList,n=e.find((function(t){return t.status===Sh.Fetching}));return null!=n?null:(n=e.find((function(e){return e.status==Sh.Waitting&&(!e.needResetHash()||(e.status=Sh.PreLoadFileMsg,e.ext="文件等待上传中",t.sendStateToWeb(e),t.updatePreLoadFileMsg(e),!1))})),null==n?null:(n.status=Sh.Fetching,n.ext="",this.sendStateToWeb(n),n))}},{key:"enpostdata",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ah("upload_assist","string"===typeof e?e:JSON.stringify(e),n>0?n:0);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getUrlLink",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.fileType==o["y"].Url){t.next=2;break}return t.abrupt("return");case 2:n.urlLink="";case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getUploadPreInfo",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.enpostdata(e);case 3:return t.t1=t.sent,t.t2={body:t.t1,timeout:1e4},t.next=7,t.t0.fetchPostCloudApi.call(t.t0,"netdiskfilepreuploadbyweb",t.t2);case 7:if(i=t.sent,i.success){t.next=10;break}throw null!==(n=i.errMsg)&&void 0!==n?n:"数据传输异常[".concat(i.code,"](NetDiskFilePreUpload)");case 10:if(i.data){t.next=12;break}throw"数据传输异常,data is null(NetDiskFilePreUpload)";case 12:return t.abrupt("return",new uh(i.data));case 13:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"startUploadTask",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){var e,n,a,o,s,l,u,d,h,f,m,p,b,v,g,w,x,y=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.getUploadTask(),null!=e){t.next=3;break}return t.abrupt("return");case 3:if(n=function(){return e.status==Sh.Fetching},a=function(t){t()},t.prev=5,0!=e.size){t.next=8;break}throw"不能上传文件大小为0的文件";case 8:return u=lh(),d=new fh,d.fileName=e.fileName,d.fileType=e.fileType,d.folderId=e.folderId,d.guid=e.guid,d.mainFile=new mh(e.hash,e.quickHash,e.size,u),d.lastWriteTime=e.lastWriteTime,d.fileExt=null!==(o=e.fileExt)&&void 0!==o?o:"",d.sliceLength=u,t.next=20,this.getUrlLink(e,d);case 20:return e.needLineViewPack&&null!=e.lineViewPack&&(d.lineViewPack=new mh(e.lineViewPack.hash,e.lineViewPack.quickHash,e.lineViewPack.size,u)),e.needPreviewImage&&null!=e.previewImage&&(d.previewImage=new mh(e.previewImage.hash,e.previewImage.quickHash,e.previewImage.size,u),d.previewFileExt=e.isSvgFile?e.previewImage.previewFileExt:null),t.next=24,this.getUploadPreInfo(d);case 24:if(h=t.sent,f=new ph,f.lineViewVer=h.lineViewVer,f.supportPreviewFileExt=h.supportPreviewFileExt,f.supportXSPFilePreview=h.supportXSPFilePreview,this.setCloudNetDiskFileUploaderInfo(f),!h.hasExist){t.next=33;break}return a((function(){e.status=Sh.Completed,e.ext="文件已存在,无需更新",e.currentSize=e.currentPosition=e.size,y.updateToSql([e]),y.sendStateToWeb(e),h.webFile&&y.sendFileItemToWeb({data:h.webFile})})),t.abrupt("return");case 33:return a((function(){e.guid=h.uploadGuid,y.updateToSql([e])})),d.sliceLength=h.sliceLength,d.mainFile.updateSliceCount(d.sliceLength),null===(s=d.lineViewPack)||void 0===s||s.updateSliceCount(d.sliceLength),null===(l=d.previewImage)||void 0===l||l.updateSliceCount(d.sliceLength),m=new hh,m.uploadGuid=h.uploadGuid,m.current=h.mainFileSliceCurrent,m.type=dh.MainFile,p=d.mainFile.size,b=0,v=e.needLineViewPack&&null!=e.lineViewPack&&h.needLineViewPack,g=e.needPreviewImage&&null!=e.previewImage&&h.needPreViewImage,v&&(p+=d.lineViewPack.size),g&&(p+=d.previewImage.size),e.currentSize=p,w=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(i,o,s){var l,u,f;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!(m.current<i.sliceCount)){t.next=23;break}l={position:0,length:i.size,file:o};case 3:if(!(l.position<l.length)){t.next=20;break}return m.current++,u=Math.min((m.current-1)*d.sliceLength,i.size),m.byteLength=Math.min(d.sliceLength,i.size-u),m.rndLength=Object(c["mb"])(10,128),t.next=10,y.uploadSlice(l,m,u,(function(t){var r=n();return r&&a((function(){e.currentPosition=b+t,y.sendStateToWeb(e)})),r}));case 10:if(f=t.sent,null!=f){t.next=13;break}return t.abrupt("return",!1);case 13:if(f.success){t.next=17;break}if(!s){t.next=16;break}throw f.errMsg;case 16:return t.abrupt("return",!1);case 17:l.position=u+m.byteLength,t.next=3;break;case 20:if(n()){t.next=22;break}return t.abrupt("return",!1);case 22:a((function(){e.currentPosition=b+Math.min(m.current*h.sliceLength,i.size),y.sendStateToWeb(e)}));case 23:return t.abrupt("return",!0);case 24:return t.prev=24,b+=i.size,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[0,,24,27]])})));return function(e,n,r){return t.apply(this,arguments)}}(),t.next=52,w(d.mainFile,e.file,!0);case 52:if(!e.needLineViewPack||null==e.lineViewPack||!h.needLineViewPack){t.next=59;break}return m.type=dh.LineViewPack,m.current=h.lineViewPackSliceCurrent,t.next=57,w(d.lineViewPack,e.lineViewPack.file,!1);case 57:if(t.sent){t.next=59;break}return t.abrupt("return");case 59:if(!e.needPreviewImage||null==e.previewImage||!h.needPreViewImage){t.next=66;break}return m.type=dh.PreviewImage,m.current=h.previewImageSliceCurrent,t.next=64,w(d.previewImage,e.previewImage.file,!1);case 64:if(t.sent){t.next=66;break}return t.abrupt("return");case 66:if(n()){t.next=68;break}return t.abrupt("return");case 68:return t.next=70,this.uploadCompleted(m);case 70:if(x=t.sent,null!=x){t.next=73;break}return t.abrupt("return");case 73:a((function(){e.status=Sh.Completed,e.ext="文件上传成功",e.currentPosition=e.currentSize=e.size,y.updateToSql([e]),y.sendStateToWeb(e),y.sendFileItemToWeb(x)})),t.next=82;break;case 76:if(t.prev=76,t.t0=t["catch"](5),n()){t.next=81;break}return t.abrupt("return");case 81:a((function(){e.status=Sh.Errored,e.ext=t.t0.toString(),y.updateToSql([e]),y.sendStateToWeb(e)}));case 82:return t.prev=82,requestAnimationFrame((function(){y.startUploadTask()})),t.finish(82);case 85:case"end":return t.stop()}}),t,this,[[5,76,82,85]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"sendFileItemToWeb",value:function(t){null!=t&&this.emit(wh.WebFileChanged,t)}},{key:"uploadCompleted",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.byteLength=0,e.rndLength=0,e.current=0,t.prev=3,t.t0=this,t.next=7,this.enpostdata(e);case 7:return t.t1=t.sent,t.t2={body:t.t1,timeout:1e4},t.next=11,t.t0.fetchPostCloudApi.call(t.t0,"netdiskfilesavebyweb",t.t2);case 11:if(n=t.sent,n.success){t.next=14;break}throw null!==(i=n.errMsg)&&void 0!==i?i:"数据传输异常[".concat(n.Code,"](UploadCompleted)");case 14:if(n.data){t.next=16;break}throw"数据传输异常,data is null(UploadCompleted)";case 16:return t.abrupt("return",n.data);case 19:throw t.prev=19,t.t3=t["catch"](3),"".concat(t.t3.toString(),"(UploadCompleted)");case 22:case"end":return t.stop()}}),t,this,[[3,19]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"uploadSlice",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,a){var o,s,l,u,d,h;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=2,l=null,e.position!=i&&(e.position=i);case 3:if(!(s>0)){t.next=25;break}if(a(i)){t.next=6;break}return t.abrupt("return",null);case 6:return t.next=8,this.enpostdata(n,n.rndLength);case 8:return u=t.sent,d=e.file.slice(i,n.byteLength+i),h=new Blob([u,d],{type:"application/stream"}),t.prev=11,t.next=14,this.fetchPostCloudApi("netdiskfilesliceuploadbyweb",{body:h,timeout:3e4});case 14:return t.abrupt("return",t.sent);case 17:t.prev=17,t.t0=t["catch"](11),l=t.t0.toString();case 20:return s-=1,t.next=23,Object(c["ub"])(20);case 23:t.next=3;break;case 25:throw"".concat(null!==(o=l)&&void 0!==o?o:"私有云数据传输异常","(UploadSlice)");case 26:case"end":return t.stop()}}),t,this,[[11,17]])})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"sendStateToWeb",value:function(t){this.emit(wh.UploadUpdate,t)}},{key:"updatePreLoadFileMsgs",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<e.length)){t.next=8;break}return i=e[n],t.next=5,this.updatePreLoadFileMsg(i);case 5:n++,t.next=1;break;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatePreLoadFileMsg",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,a,o=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=function(){return e.status==Sh.PreLoadFileMsg},e.currentPosition=0,0!=e.size){t.next=5;break}throw"不能上传文件大小为0的文件";case 5:return e.currentSize=e.size,t.next=8,this.getTaskFileType(e);case 8:if(!e.needLineViewPack&&!e.needPreviewImage){t.next=14;break}return t.next=11,this.getCloudNetDiskFileUploaderInfoAsync();case 11:t.t0=t.sent,t.next=15;break;case 14:t.t0=null;case 15:if(i=t.t0,a=this.getHashCache(e),null!=a){t.next=28;break}return a=new bh,a.mainFile=new gh,a.mainFile.file=e.file,a.mainFile.lastWriteTime=e.lastWriteTime,a.mainFile.size=e.size,t.next=25,this.setTaskHashAsync(e,a.mainFile,"文件",n);case 25:if(t.sent){t.next=27;break}return t.abrupt("return");case 27:this.setHashCache(e,a);case 28:return this.setNetDiskFileCache(a.mainFile),t.next=31,this.makeTaskLineViewPack(e);case 31:return t.next=33,this.makeTaskPreViewImage(e,a,i,n);case 33:this.setTaskHash(e,a),t.next=39;break;case 36:t.prev=36,t.t1=t["catch"](0),this.updateTaskDataError(e,t.t1.toString());case 39:return t.prev=39,requestAnimationFrame((function(){o.startUploadTask()})),t.finish(39);case 42:case"end":return t.stop()}}),t,this,[[0,36,39,42]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setNetDiskFileCache",value:function(){return!0}},{key:"setHashCache",value:function(){return!0}},{key:"makeTaskPreViewImage",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,a){var s,l,u,d,h,f,m,p,b,v,g,w,x;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a()){t.next=2;break}return t.abrupt("return");case 2:if(e.needPreviewImage){t.next=4;break}return t.abrupt("return");case 4:if(e.fileType!=o["y"].Lottie||null==e.previewImage){t.next=14;break}return h=e.previewImage,h.lastWriteTime=null!==(u=null===(d=h.file)||void 0===d?void 0:d.lastModified)&&void 0!==u?u:Date.now(),t.next=9,this.setTaskHashAsync(e,h,"文件缩略图",a);case 9:if(t.sent){t.next=11;break}return t.abrupt("return");case 11:return n.setPreviewImage(h,!1),this.setHashCache(e,n),t.abrupt("return");case 14:if(e.previewImage=null,f=e.isSvgFile&&null!==(s=null===i||void 0===i?void 0:i.supportPreviewFileExt)&&void 0!==s&&s,m=null!==(l=null===i||void 0===i?void 0:i.supportXSPFilePreview)&&void 0!==l&&l,p=n.getPreviewImage(f),null!=p&&!p.needResetHash()){t.next=84;break}if(e.ext="正在生成图片缩略图",this.sendStateToWeb(e),b=new gh,!m||e.fileType!=o["y"].XD){t.next=29;break}return t.next=25,wc.getXDFileImgPreviewAsync(e.file,b);case 25:if(t.sent){t.next=27;break}return t.abrupt("return");case 27:t.next=72;break;case 29:if(!m||e.fileType!=o["y"].Sketch){t.next=36;break}return t.next=32,wc.getSketchFileImgPreviewAsync(e.file,b);case 32:if(t.sent){t.next=34;break}return t.abrupt("return");case 34:t.next=72;break;case 36:if(!m||e.fileType!=o["y"].Figma){t.next=43;break}return t.next=39,wc.getFigmaFileImgPreviewAsync(e.file,b);case 39:if(t.sent){t.next=41;break}return t.abrupt("return");case 41:t.next=72;break;case 43:if(!(e.isSvgFile&&e.size>51200)){t.next=58;break}return t.prev=44,b.previewFileExt=null!==i&&void 0!==i&&i.supportPreviewFileExt?"png":null,t.next=48,bc(e.file,c["g"],.6,!(null!==i&&void 0!==i&&i.supportPreviewFileExt),!0);case 48:b.file=t.sent,t.next=56;break;case 51:return t.prev=51,t.t0=t["catch"](44),b.file=null,b.previewFileExt=null,t.abrupt("return");case 56:t.next=72;break;case 58:if(!e.isSvgFile&&!e.isIconFile){t.next=62;break}b.file=e.file,t.next=72;break;case 62:return t.prev=62,t.next=65,bc(e.file,c["g"],.6,!1);case 65:b.file=t.sent,t.next=72;break;case 68:return t.prev=68,t.t1=t["catch"](62),b.file=null,t.abrupt("return");case 72:return e.fileType==o["y"].Image&&(null==b.file||null!=b.file&&b.file.size>e.size)&&(b.previewFileExt=null,b.file=e.file),b.size=null!==(v=null===(g=b.file)||void 0===g?void 0:g.size)&&void 0!==v?v:0,b.lastWriteTime=null!==(w=null===(x=b.file)||void 0===x?void 0:x.lastWriteTime)&&void 0!==w?w:Date.now(),t.next=77,this.setTaskHashAsync(e,b,"文件缩略图",a);case 77:if(t.sent){t.next=79;break}return t.abrupt("return");case 79:n.setPreviewImage(b,f),e.previewImage=b,this.setHashCache(e,n),t.next=85;break;case 84:e.previewImage=p;case 85:case"end":return t.stop()}}),t,this,[[44,51],[62,68]])})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"setTaskHashAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i,a){var o,s,c,l=this;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=new sh,s=function(t,n){e.currentPosition=t,e.currentSize=n,e.ext="计算".concat(i,"hash(").concat(e.currentPercentage,"%)"),l.sendStateToWeb(e)},t.next=5,o.startAsync(n.file,{needHash:!0,needQuickHash:!0,onprogress:function(t){var e,n=t.index,r=t.length,i=a();i?s(n,r):null===(e=o)||void 0===e||e.cancelAsync()}});case 5:if(c=t.sent,o=null,null!=c){t.next=10;break}return t.abrupt("return",!1);case 10:if(!c.canceled){t.next=12;break}return t.abrupt("return",!1);case 12:if(c.success){t.next=14;break}throw c.errMsg;case 14:return s(e.currentSize,e.currentSize),n.quickHash=c.data.quickHash,n.hash=c.data.hash,t.abrupt("return",!0);case 18:case"end":return t.stop()}}),t)})));function e(e,n,r,i){return t.apply(this,arguments)}return e}()},{key:"setTaskHash",value:function(t,e){t.hash!=e.mainFile.hash&&t.quickHash!=e.mainFile.quickHash&&(t.hash=e.mainFile.hash,t.quickHash=e.mainFile.quickHash,t.currentPosition=0,t.guid=null),t.status==Sh.PreLoadFileMsg&&(t.ext="文件等待上传中",t.status=Sh.Waitting)}},{key:"makeTaskLineViewPack",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.lineViewPack=null;case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateTaskDataError",value:function(t,e){t.status=Sh.Errored,t.ext=e,this.sendStateToWeb(t)}},{key:"getHashCache",value:function(){return null}},{key:"getCloudNetDiskFileUploaderInfoAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){var e,n,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.getCloudNetDiskFileUploaderInfoFromCache(),!((null===e||void 0===e?void 0:e.lineViewVer)>0)){t.next=3;break}return t.abrupt("return",e);case 3:return n=new ph,n.lineViewVer=-1,this.setCloudNetDiskFileUploaderInfo(n),t.next=8,this.fetchPostCloudApi("netdiskfileuploaderinfobyweb",{body:"",timeout:1e4});case 8:if(i=t.sent,!i.success||null==i.data){t.next=12;break}return this.setCloudNetDiskFileUploaderInfo(i.data),t.abrupt("return",i.data);case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"fetchPostCloudApi",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(lt["fetchPostCloudApi"])(e,n);case 2:if(i=t.sent,!Object(l["s"])(i)){t.next=10;break}t.t0=i.code,t.next=t.t0===o["t"].WebUser_NotLogin?7:9;break;case 7:return this.$store.commit("setUserLogout"),t.abrupt("break",9);case 9:return t.abrupt("return",i);case 10:throw null!==i&&void 0!==i?i:"返回值无法解析";case 11:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"setCloudNetDiskFileUploaderInfo",value:function(t){this.cloudNetDiskFileUploaderInfoCache={item1:t,item2:Date.now()}}},{key:"getCloudNetDiskFileUploaderInfoFromCache",value:function(){var t=this.cloudNetDiskFileUploaderInfoCache;if(null!=t){var e=Date.now();if(Math.abs(1e3*(e-t.item2)*60)<5)return t.item1}return null}},{key:"getTaskFileType",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=null!==(n=null===(i=e.fileExt)||void 0===i?void 0:i.toLowerCase())&&void 0!==n?n:null,t.t0=a,t.next=".zip"===t.t0?4:".json"===t.t0?6:".mjs"===t.t0||".cjs"===t.t0||".js"===t.t0||".css"===t.t0||".txt"===t.t0||".xml"===t.t0||".ini"===t.t0||".config"===t.t0||".md"===t.t0?15:".html"===t.t0||".htm"===t.t0||".mht"===t.t0||".mhtml"===t.t0?17:".ai"===t.t0?19:".aep"===t.t0||".aepx"===t.t0||".aet"===t.t0?21:".eot"===t.t0||".otf"===t.t0||".fon"===t.t0||".font"===t.t0||".ttf"===t.t0||".ttc"===t.t0||".woff"===t.t0?23:".exe"===t.t0||".msi"===t.t0?25:".apk"===t.t0?27:".pkg"===t.t0?29:".dmg"===t.t0?31:".fig"===t.t0?33:".jsd"===t.t0?35:".xlsx"===t.t0||".xls"===t.t0?37:".png"===t.t0||".webp"===t.t0||".jpeg"===t.t0||".jpg"===t.t0||".gif"===t.t0||".bmp"===t.t0||".ico"===t.t0||".icns"===t.t0||".icon"===t.t0||".svg"===t.t0?39:".pdf"===t.t0?41:".psd"===t.t0||".psb"===t.t0?43:".ccx"===t.t0?45:".ppt"===t.t0||".pptx"===t.t0?47:".sketch"===t.t0?49:".sketchplugin"===t.t0?51:".url"===t.t0||".webloc"===t.t0?53:".docx"===t.t0||".doc"===t.t0?55:".xd"===t.t0?57:".xdx"===t.t0?59:".rar"===t.t0||".gz"===t.t0||".bz2"===t.t0||".7z"===t.t0||".xz"===t.t0?61:".mp3"===t.t0||".mp4"===t.t0||".avi"===t.t0||".rm"===t.t0||".rmvb"===t.t0||".aac"===t.t0||".wma"===t.t0||".flac"===t.t0||".wav"===t.t0||".m4a"===t.t0||".3gp"===t.t0||".m4v"===t.t0||".mkv"===t.t0||".mov"===t.t0||".webm"===t.t0||".weba"===t.t0?63:".rp"===t.t0?65:67;break;case 4:return e.fileType=o["y"].Zip,t.abrupt("break",69);case 6:return t.next=8,this.isLottieFileAsync(e);case 8:if(!t.sent){t.next=12;break}t.t1=o["y"].Lottie,t.next=13;break;case 12:t.t1=o["y"].Txt;case 13:return e.fileType=t.t1,t.abrupt("break",69);case 15:return e.fileType=o["y"].Txt,t.abrupt("break",69);case 17:return e.fileType=o["y"].Html,t.abrupt("break",69);case 19:return e.fileType=o["y"].AdobeIllustrator,t.abrupt("break",69);case 21:return e.fileType=o["y"].AfterEffects,t.abrupt("break",69);case 23:return e.fileType=o["y"].Font,t.abrupt("break",69);case 25:return e.fileType=o["y"].App,t.abrupt("break",69);case 27:return e.fileType=o["y"].AndroidApp,t.abrupt("break",69);case 29:return e.fileType=o["y"].Package,t.abrupt("break",69);case 31:return e.fileType=o["y"].Dmg,t.abrupt("break",69);case 33:return e.fileType=o["y"].Figma,t.abrupt("break",69);case 35:return e.fileType=o["y"].JsDesign,t.abrupt("break",69);case 37:return e.fileType=o["y"].Excel,t.abrupt("break",69);case 39:return e.fileType=o["y"].Image,t.abrupt("break",69);case 41:return e.fileType=o["y"].Pdf,t.abrupt("break",69);case 43:return e.fileType=o["y"].PhotoShop,t.abrupt("break",69);case 45:return e.fileType=o["y"].PhotoShopPlugin,t.abrupt("break",69);case 47:return e.fileType=o["y"].PPT,t.abrupt("break",69);case 49:return e.fileType=o["y"].Sketch,t.abrupt("break",69);case 51:return e.fileType=o["y"].SketchPlugin,t.abrupt("break",69);case 53:return e.fileType=o["y"].Url,t.abrupt("break",69);case 55:return e.fileType=o["y"].Word,t.abrupt("break",69);case 57:return e.fileType=o["y"].XD,t.abrupt("break",69);case 59:return e.fileType=o["y"].XDPlugin,t.abrupt("break",69);case 61:return e.fileType=o["y"].Zip,t.abrupt("break",69);case 63:return e.fileType=o["y"].Media,t.abrupt("break",69);case 65:return e.fileType=o["y"].AxureSourceFile,t.abrupt("break",69);case 67:return e.fileType=o["y"].Other,t.abrupt("break",69);case 69:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"isLottieFileAsync",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){var n,i,a,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,kh(e);case 2:if(t.sent){t.next=4;break}return t.abrupt("return",!1);case 4:if(n=e.previewImage,!(null!=n&&n.size>0&&n.file)){t.next=7;break}return t.abrupt("return",!0);case 7:return e.previewImage=null,t.prev=8,e.ext="正在检测是否是Lottie文件",this.sendStateToWeb(e),t.next=13,ps(e.file);case 13:return a=t.sent,o=new gh,o.file=a,o.size=a.size,o.lastWriteTime=null!==(i=a.lastModified)&&void 0!==i?i:Date.now(),e.previewImage=o,t.abrupt("return",null!=e.previewImage);case 22:return t.prev=22,t.t0=t["catch"](8),e.previewImage=null,t.abrupt("return",!1);case 26:case"end":return t.stop()}}),t,this,[[8,22]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateToSql",value:function(t){var e=this;if(null==t||0==t.length)return 0;var n=0;return t.forEach((function(t){t.id>0||(t.id=e._sql_auto_id++,n++)})),n}},{key:"updateTask",value:function(t){var e=this;if(null!=t.ids){var n=this.uploadList,r={};t.ids.forEach((function(t){r[t]=1}));var i=n.filter((function(t){return r[t.id]})),a=i.length;if(0!=a){var o;switch(t.ids=i.map((function(t){return t.id})),r={},t.ids.forEach((function(t){r[t]=1})),t.type){case Oh.Pause:o=Sh.Paused;break;case Oh.ReStart:case Oh.Resume:o=Sh.Waitting;break;default:return}this.updateStatusToSql(t.ids,o),i.forEach((function(t){t.status=o})),this.sendStateToWeb(i),o==Sh.Waitting&&requestAnimationFrame((function(){e.startUploadTask()}))}}}},{key:"updateStatusToSql",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",0);case 1:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"removeTask",value:function(t){var e=this.uploadList;switch(t.type){case Oh.Remove_Select:if(null==t.ids)return;var n={};t.ids.forEach((function(t){n[t]=1})),t.ids=e.filter((function(t){return n[t.id]})).map((function(t){return t.id}));break;case Oh.Remove_Completed:t.ids=e.filter((function(t){return t.status==Sh.Completed})).map((function(t){return t.id}));break;case Oh.Remove_All:t.ids=e.map((function(t){return t.id}));break}if(null!=t.ids&&0!=t.ids.length){var r={};t.ids.forEach((function(t){t<1||r[t]||(r[t]=!0)}));for(var i=[],a=[],o=e.length-1;o>=0;o--){var s=e[o];if(r[s.id]){switch(s.status){case Sh.Fetching:case Sh.Paused:case Sh.Errored:s.guid&&i.push(s.guid);break}s.status=Sh.RemovedMark,e.splice(o,1),a.push(s.id)}}a.length>0&&this.emit(wh.UploadRemove,a),i.length>0&&this.sendCancelGuidToCloud(i)}}},{key:"hasRunningTask",value:function(){return null!=this.uploadList.find((function(t){switch(t.status){case Sh.Fetching:case Sh.Paused:case Sh.Errored:case Sh.Waitting:case Sh.PreLoadFileMsg:return!0}return!1}))}},{key:"sendCancelGuidToCloud",value:function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=this,t.next=4,this.enpostdata({guids:e});case 4:return t.t1=t.sent,t.t2={body:t.t1,timeout:1e4},t.next=8,t.t0.fetchPostCloudApi.call(t.t0,"netdiskfilecancelbyweb",t.t2);case 8:t.next=12;break;case 10:t.prev=10,t.t3=t["catch"](0);case 12:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),yh=new xh;function kh(t){return Ch.apply(this,arguments)}function Ch(){return Ch=Object(i["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=e&&e.isJsonFile){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,ah("maybeIsLottieFileAsync",e.file);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),Ch.apply(this,arguments)}var Sh={Fetching:0,Paused:1,Completed:2,Errored:3,Waitting:4,RemovedMark:5,PreLoadFileMsg:6,CompletedWithExist:7},Oh={Remove_Select:1,Remove_Completed:2,Remove_All:3,Resume:11,Pause:12,ReStart:13,Add:14},Ih=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"ids",void 0),Object(j["a"])(this,"folderId",void 0),Object(j["a"])(this,"files",void 0),Object(j["a"])(this,"type",void 0)}return Object(A["a"])(t,null,[{key:"send",value:function(){var e=Object(i["a"])(Object(r["a"])().mark((function e(n){var i,a,o,s,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.type,a=n.folderId,o=n.ids,s=n.files,c=new t,c.type=i,c.folderId=null!==a&&void 0!==a?a:0,c.ids=null!==o&&void 0!==o?o:null,c.files=null!==s&&void 0!==s?s:null,yh.runTask(c),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()}]),t}(),Ah=function(){function t(){Object(T["a"])(this,t),Object(j["a"])(this,"uploading",!1),Object(j["a"])(this,"uploadItems",[]),Object(j["a"])(this,"_uploadItemsObj",{})}return Object(A["a"])(t,[{key:"length",get:function(){return this.uploadItems.length}},{key:"clear",value:function(){this.uploadItems.splice(0),delete this._uploadItemsObj,this._uploadItemsObj={}}},{key:"add",value:function(t){if(Object(l["s"])(t)&&t.id>0){var e=new Th;Object.keys(e).forEach((function(n){e[n]=t[n]})),this.uploadItems.push(e),this._uploadItemsObj[t.id]=e,this._sort()}}},{key:"update",value:function(t){if(Object(l["s"])(t)&&t.id>0){var e=this._uploadItemsObj[t.id];if(!e)return this.add(t);var n=t.status!==e.status;Object.keys(e).forEach((function(n){e[n]=t[n]})),n&&this._sort()}}},{key:"remove",value:function(t){var e=this._uploadItemsObj[t];if(e){delete this._uploadItemsObj[t];var n=this.uploadItems.findIndex((function(e){return e.id===t}));-1!==n&&this.uploadItems.splice(n,1)}}},{key:"removeCompletedItems",value:function(){var t=this,e=[];this.uploadItems.forEach((function(t,n){switch(t.status){case Sh.CompletedWithExist:case Sh.Completed:case Sh.RemovedMark:e.unshift(n);break}})),e.length>0&&e.forEach((function(e){var n=t.uploadItems.splice(e,1)[0];n&&delete t._uploadItemsObj[n.id]}))}},{key:"_sort",value:function(){var t=function(t,e){var n=t.id-e.id;return 0===n?0:n>0?1:-1};this.uploadItems.sort((function(e,n){return t(e,n)}))}}]),t}(),Th=Object(A["a"])((function t(){Object(T["a"])(this,t),Object(j["a"])(this,"id",0),Object(j["a"])(this,"status",Sh.Waitting),Object(j["a"])(this,"fileName",null),Object(j["a"])(this,"fileType",o["y"].Other),Object(j["a"])(this,"ext",null),Object(j["a"])(this,"currentPercentage",0),Object(j["a"])(this,"size",0),Object(j["a"])(this,"folderId",0),Object(j["a"])(this,"quickHash",""),Object(j["a"])(this,"hash","")})),jh=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("div",{staticClass:"icon-netdiskfile",class:t.fileTypeCls}),e("div",{staticClass:"summary"},[e("div",{staticClass:"item-name"},[e("a",{attrs:{href:"javascript:;",title:t.fileName}},[t._v(t._s(t.fileName))])]),e("div",{staticClass:"item-info"},[e("div",{staticClass:"item-progress"},[t._v(t._s(t.progressStr))]),e("div",{staticClass:"item-state",class:t.statusCss,attrs:{title:t.statusText}},[t.percentageVisible?e("div",{staticClass:"percentage"},[e("p",{style:{width:t.uploadPercentageCssWidth}})]):e("div",{staticClass:"state"},[t._v(t._s(t.statusText))])]),e("div",{staticClass:"btns"},[t.item.status===t.EnumNetDiskFileUploadStatus.Fetching||t.item.status===t.EnumNetDiskFileUploadStatus.PreLoadFileMsg?e("div",{staticClass:"fetching",attrs:{title:"点击暂停"},on:{click:function(e){return t.clickChangeStatus(t.EnumNetDiskFileUploadStatus.Paused)}}}):t.item.status===t.EnumNetDiskFileUploadStatus.Waitting?e("div",{staticClass:"waitting",attrs:{title:"点击暂停"},on:{click:function(e){return t.clickChangeStatus(t.EnumNetDiskFileUploadStatus.Paused)}}}):t.item.status===t.EnumNetDiskFileUploadStatus.Paused?e("div",{staticClass:"paused",attrs:{title:"点击继续上传"},on:{click:function(e){return t.clickChangeStatus(t.EnumNetDiskFileUploadStatus.Waitting)}}}):t.item.status===t.EnumNetDiskFileUploadStatus.Errored?e("div",{staticClass:"download-repeat",attrs:{title:"重新上传"},on:{click:t.clickUploadFile}}):t._e(),e("div",{staticClass:"remove",attrs:{title:"删除该任务"},on:{click:t.clickTaskRemove}})])])])])},Fh=[],Mh={methods:{clickUploadFile:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item,n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Ih.send({type:Oh.ReStart,ids:[n.id]});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](3),t.showTextTip(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))()},clickTaskRemove:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item,n){e.next=3;break}return e.abrupt("return");case 3:e.t0=n.status,e.next=e.t0===Sh.Fetching?6:e.t0===Sh.Paused||e.t0===Sh.Waitting?8:11;break;case 6:return i="任务[".concat(n.id,"](").concat(t.fileName,")正在上传中,是否确认取消并删除该任务?"),e.abrupt("break",11);case 8:return a=t.uploadPercentage,a>0&&(i="任务[".concat(n.id,"](").concat(t.fileName,")已上传").concat(t.uploadPercentageCssWidth,",是否确认取消并删除该任务?")),e.abrupt("break",11);case 11:if(!i){e.next=16;break}return e.next=14,t.confirm({title:"删除确认",text:i,noText:"我再想想"});case 14:if(e.sent){e.next=16;break}return e.abrupt("return");case 16:return e.prev=16,e.next=19,Ih.send({type:Oh.Remove_Select,ids:[n.id]});case 19:e.next=24;break;case 21:e.prev=21,e.t1=e["catch"](16),t.showTextTip(e.t1);case 24:case"end":return e.stop()}}),e,null,[[16,21]])})))()},clickChangeStatus:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.item,i){n.next=3;break}return n.abrupt("return");case 3:n.t0=t,n.next=n.t0===Sh.Waitting?6:n.t0===Sh.Paused?15:24;break;case 6:return n.prev=6,n.next=9,Ih.send({type:Oh.Resume,ids:[i.id]});case 9:n.next=14;break;case 11:n.prev=11,n.t1=n["catch"](6),e.showTextTip(n.t1);case 14:return n.abrupt("break",24);case 15:return n.prev=15,n.next=18,Ih.send({type:Oh.Pause,ids:[i.id]});case 18:n.next=23;break;case 20:n.prev=20,n.t2=n["catch"](15),e.showTextTip(n.t2);case 23:return n.abrupt("break",24);case 24:case"end":return n.stop()}}),n,null,[[6,11],[15,20]])})))()}},computed:{percentageVisible:function(){var t=this.item;return t.status===Sh.Paused||t.status===Sh.Fetching},fileTypeCls:function(){return o["y"].getName(this.item.fileType,o["z"].Normal)},fileName:function(){var t=this.item.fileName;return null!==t&&void 0!==t?t:""},progressStr:function(){return this.sizeStr},sizeStr:function(){return Object(c["vb"])(this.item.size)},statusCss:function(){var t=[],e=this.status;return e===Sh.Errored&&t.push("error"),e!==Sh.Completed&&e!==Sh.CompletedWithExist||t.push("completed"),t},statusTitle:function(){return this.item.status===Sh.Errored?this.statusText:null},statusText:function(){var t=this.item;if(!t)return"";switch(t.status){case Sh.Errored:var e;return null!==(e=t.ext)&&void 0!==e?e:"文件上传失败了";case Sh.PreLoadFileMsg:return t.ext;case Sh.Fetching:return"文件上传中(".concat(this.uploadPercentageCssWidth,")");case Sh.Paused:return"已暂停上传(".concat(this.uploadPercentageCssWidth,")");case Sh.CompletedWithExist:var n;return null!==(n=t.ext)&&void 0!==n?n:"文件已存在,无需更新";case Sh.Completed:var r;return null!==(r=t.ext)&&void 0!==r?r:"文件上传成功";case Sh.Waitting:return"文件等待上传中"}return""},uploadPercentageCssWidth:function(){return this.uploadPercentage.toFixed(2)+"%"},uploadPercentage:function(){var t=this.item;return t?t.currentPercentage:0},status:function(){var t,e;return null!==(t=null===(e=this.item)||void 0===e?void 0:e.status)&&void 0!==t?t:Sh.RemovedMark}},props:{item:Object},data:function(){return{EnumNetDiskFileUploadStatus:Sh}}},_h=Mh,Lh=(n("43c3"),Object(hr["a"])(_h,jh,Fh,!1,null,"b12e5978",null)),Dh=Lh.exports,Nh={components:{FileUploadItem:Dh},methods:{onNetDiskFileUploadInit:function(t){if(Object(l["h"])(t)){var e=this.uploadData;e.clear(),t.forEach((function(t){!Object(l["s"])(t)||t.id<1||e.update(t)}))}},onNetDiskFileUploadRemove:function(t){var e,n=this;e=Object(l["h"])(t)?t:[t],e.forEach((function(t){if(t>0){var e=n.uploadData;e&&e.remove(t)}}))},onNetDiskFileUploadUpdate:function(t){var e,n=this;e=Object(l["h"])(t)?t:[t],e.forEach((function(t){if(Object(l["s"])(t)&&!(t.id<1)){var e=n.uploadData;e.update(t)}})),this.onNetDiskFileUploadUpdate2(t)},onNetDiskFileUploadUpdate2:function(t){if(Object(l["s"])(t)){var e=this.maxShowLength,n=this.uploadItems;if(!(n.length<=e)){var r=n.find((function(t){return t.status===Sh.Fetching}));if(r&&r.id!==t.id);else{var i=n.findIndex((function(e){return e.id===t.id}));if(-1===i)return;var a=(i-1)*this.itemHeight;this.scrollTo(a)}}}},sendImportData:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,o,s,c,u,d,h,f;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.cloudSubFiles,a={},o={},t.forEach((function(t){var e=t.name;a[e.toLowerCase()]=1})),i.forEach((function(t){if(t){var e=t.fileName+t.fileExt,n=e.toLowerCase();a[n]&&(delete a[n],o[e]=1)}})),n.prev=5,s=Object.keys(a),!(s.length>0)){n.next=12;break}return n.next=10,e.fetchPostCloudApi("netdiskfilecheckexistsbyweb",{timeout:1e4,body:{folderId:e.cloudCurrentFolderId,fileNames:s}});case 10:c=n.sent,c.success&&(c=c.data,Object(l["h"])(c)&&c.forEach((function(t){o[t.fileName+t.fileExt]=1})));case 12:if(o=Object.keys(o),u={},o.forEach((function(t){u[t.toLowerCase()]=1})),d=o.length,!(d>0)){n.next=29;break}return h=8,f=d>h,f&&o.splice(h),n.next=22,e.confirm({title:"覆盖提示",text:"当前目录已存在[".concat(o.join("、")).concat(f?"、...]等".concat(d,"个"):"]","同名文件,是否").concat(d>1?"全部":"","覆盖?"),noText:1===d?"跳过":"跳过重复文件",yesText:"覆盖",showCancel:!0});case 22:n.t0=n.sent,n.next=!0===n.t0?25:!1===n.t0?26:"cancel"===n.t0?28:29;break;case 25:return n.abrupt("break",29);case 26:return t=t.filter((function(t){var e;return!u[null===(e=t.name)||void 0===e?void 0:e.toLowerCase()]})),n.abrupt("break",29);case 28:return n.abrupt("return");case 29:return n.next=31,Ih.send({files:t,folderId:e.cloudCurrentFolderId,type:Oh.Add});case 31:n.next=37;break;case 33:n.prev=33,n.t1=n["catch"](5),e.showTextTip(n.t1);case 37:case"end":return n.stop()}}),n,null,[[5,33]])})))()},showOpenFileDialog:function(){return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},clickAddFiles:function(t){var e;null===(e=t.target)||void 0===e||null===(e=e.querySelector("input[type=file]"))||void 0===e||e.click()},onInputFileChange:function(t){var e=t.target,n=e.files;if(0!==n.length){n=Object(u["a"])(n);try{e.value=""}catch(r){}this.sendImportData(n)}},clickRemoveCompleted:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ih.send({type:Oh.Remove_Completed});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),t.showTextTip(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},clickRemoveAll:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.uploadItemsLength){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.confirm({title:"删除确认",text:"将删除列表中所有的上传任务",noText:"我再想想"});case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,Ih.send({type:Oh.Remove_All});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](6),t.showTextTip(e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})))()},clickCloseBox:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!yh.hasRunningTask()){e.next=8;break}return e.next=3,t.confirm({text:"文件正在上传中，关闭上传对话框将清理所有待上传的文件,是否确认？"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:yh.runTask({type:Oh.Remove_All}),e.next=9;break;case 8:yh.runTask({type:Oh.Remove_Completed});case 9:n=t.filebox,n.visible=!1;case 11:case"end":return e.stop()}}),e)})))()},onBoxScroll:function(t){this.scrollTop=t.target.scrollTop},resetBox:function(){if(this.visible){var t=this.$refs.files;t&&this.onBoxScroll({target:t})}},add:function(t){var e;null===(e=this.uploadData)||void 0===e||e.add(t),this.scrollToBottom()},scrollToTop:function(){this.scrollTo(0)},scrollToBottom:function(){this.scrollTo(1e5)},scrollTo:function(t){var e=this;this.$nextTick((function(){var n=e.$refs.files;n&&(n.scrollTop=t)}))},bingDragEvent:function(t){var e=this,n=document.documentElement;t?(n.addEventListener("dragover",this.dragover),n.addEventListener("drop",this.dragdrop),yh.on(wh.TextTip,(function(t){e.showTextTip(t)})),yh.on(wh.UploadUpdate,(function(t){e.onNetDiskFileUploadUpdate(t)})),yh.on(wh.UploadRemove,(function(t){e.onNetDiskFileUploadRemove(t)})),yh.on(wh.WebUserNotLogin,(function(){e.$store.commit("setUserLogout")})),yh.on(wh.WebFileChanged,(function(t){e.$emit("onFileChanged",{files:[t.data],folderUpdateTimes:t.folderUpdateTimes})})),window.addEventListener("beforeunload",this.onBeforeunload)):(n.removeEventListener("dragover",this.dragover),n.removeEventListener("drop",this.dragdrop),yh.off(wh.TextTip),yh.off(wh.UploadUpdate),yh.off(wh.UploadRemove),yh.off(wh.WebUserNotLogin),yh.off(wh.WebFileChanged),window.removeEventListener("beforeunload",this.onBeforeunload))},onBeforeunload:function(t){if(yh.hasRunningTask()){t.preventDefault();var e="文件正在上传中，您确定要离开当前页面？";return t.returnValue=e,e}},dragover:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy";var e=this.dropTip;e.dragging||(e.dragging=!0,e.visible=!0,cancelAnimationFrame(e.handler)),clearTimeout(e.handler2),e.handler2=setTimeout((function(){e.dragging=!1,e.visible=!1}),200)},dragdrop:function(t){t.preventDefault();var e=this.dropTip;e.dragging=!1,cancelAnimationFrame(e.handler),clearTimeout(e.handler2),e.handler=requestAnimationFrame((function(){e.visible=!1})),this.onDrag(t)},onDrag:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,o,s,c,l,u;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.dataTransfer.items,i&&!(i.length<1)){n.next=3;break}return n.abrupt("return");case 3:a=[],o=[],s=0;case 6:if(!(s<i.length)){n.next=19;break}return c=i[s],n.next=10,e.isDropItemFile(c);case 10:if(!n.sent){n.next=14;break}a.push(c.getAsFile()),n.next=16;break;case 14:u=null===(l=c.getAsFile())||void 0===l?void 0:l.name,u&&o.push(u);case 16:s++,n.next=6;break;case 19:if(!(o.length>0)){n.next=22;break}return n.next=22,e.alert({text:"不能直接上传文件夹[".concat(o.join("、"),"],如需上传请先打包,")});case 22:if(!(a.length<1)){n.next=24;break}return n.abrupt("return");case 24:e.sendImportData(a);case 25:case"end":return n.stop()}}),n)})))()},isDropItemFile:function(t){return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("file"===t.kind){e.next=2;break}return e.abrupt("return",!1);case 2:if(!Object(l["i"])(t.type)){e.next=4;break}return e.abrupt("return",!0);case 4:if("function"!==typeof t.webkitGetAsEntry){e.next=7;break}return n=t.webkitGetAsEntry(),e.abrupt("return",n.isFile);case 7:if(e.prev=7,i=t.getAsFile(),i){e.next=11;break}return e.abrupt("return",!1);case 11:if(a=i.size,0!==a){e.next=14;break}return e.abrupt("return",!1);case 14:return e.next=16,new Promise((function(t){var e=new FileReader;e.addEventListener("load",(function(){t(!0)}),!1),e.addEventListener("error",(function(){t(!1)}),!1),e.readAsDataURL(i.slice(0,Math.min(5,a)))}));case 16:return e.abrupt("return",e.sent);case 19:return e.prev=19,e.t0=e["catch"](7),e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,null,[[7,19]])})))()}},computed:{uploading:function(){return this.uploadingCount>0},uploadingCount:function(){return this.uploadItems.filter((function(t){switch(t.status){case Sh.PreLoadFileMsg:case Sh.Fetching:case Sh.Waitting:return!0;default:return!1}})).length},dragTitle:function(){var t=this.uploadItems;if(!t)return"-";if(this.uploading)return"".concat(this.uploadingCount,"个文件上传中，拖拽文件到此处可继续添加");var e=t.length;return e>0?"已添加".concat(e,"个文件，拖拽文件到此处可继续添加"):"拖拽文件到此处上传到当前文件夹"},visible:function(){return this.filebox.visible&&null!=this.uploadData},hasFile:function(){var t=this.uploadItems;return!!t&&t.length>0},uploadData:function(){var t=this.cloudKey;if(!t)return null;var e=this.uploadDatas[t];return e||(e=new Ah,this.$set(this.uploadDatas,t,e)),e},uploadItems:function(){var t=this.uploadData;return t?t.uploadItems:[]},renderList:function(){var t=this.uploadItems,e=this.renderListStart;return t.slice(e,e+this.renderListCount)},renderListCssPaddingTop:function(){return this.renderListStart*this.itemHeight},renderListStart:function(){var t=Math.floor(this.scrollTop/this.itemHeight);return t},renderListCount:function(){var t=Math.ceil((this.boxHeight+this.scrollTop%this.itemHeight)/this.itemHeight);return t=Math.min(t,this.uploadItems.length-this.renderListStart),t},boxHeight:function(){var t=this.maxShowLength,e=this.uploadItems,n=this.itemHeight,r=e.length;return r>t&&(r=t),n*r},boxRealHeight:function(){var t=this.uploadItems,e=this.itemHeight;return t.length*e},uploadDatas:function(){return this.$store.state.netdiskFileUploadDatas},uploadItemsLength:function(){return this.uploadItems.length}},watch:{uploadItemsLength:function(t,e){t>e&&this.scrollToBottom()},hasFile:function(){var t=this;this.$nextTick((function(){t.resetBox()}))},visible:function(t){var e,n=this;(this.bingDragEvent(t),t)&&(null===(e=this.uploadData)||void 0===e||e.removeCompletedItems());this.$nextTick((function(){n.resetBox()}))},scrollTop:function(){var t=this;this.scrolling=!0,clearTimeout(this.handle_scrolling),this.handle_scrolling=setTimeout((function(){t.scrolling=!1}),120)}},data:function(){return{itemHeight:50,maxShowLength:3,scrollTop:0,handle_scrolling:0,scrolling:!1,dropTip:{visible:!1,handler:null,handler2:null,dragging:!1}}},props:{filebox:Object},beforeDestroy:function(){clearTimeout(this.handle_scrolling),this.bingDragEvent(!1)},created:function(){this.bingDragEvent(this.visible),this.onNetDiskFileUploadInit(yh.uploadList)}},Eh=Nh,Ph=(n("c192"),Object(hr["a"])(Eh,qd,Qd,!1,null,"f2b4b072",null)),Rh=Ph.exports,Vh={components:{LinkEdit:Kd,FileUpload:Rh},methods:{onFileChanged:function(t){this.$store.commit("setFolderSubFile",t)},clickBeforeCheck:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.cloudVersion,a=e.cloudCurrentFolderId,s=e.cloudIsLogin,c=e.userFolderSpecifyMemberAuthority,!Object(l["p"])(i)){n.next=4;break}return e.showTextTip("无法在Web端使用本功能,私有云版本过低(".concat(i,"),请先升级私有云部署包")),n.abrupt("return");case 4:if(a>0){n.next=7;break}return e.showTextTip("不能".concat(t,"到根目录,请进入子文件夹操作")),n.abrupt("return");case 7:if(s){n.next=13;break}return n.next=10,e.confirm({text:"需要登录才能".concat(t),yesText:"前往登录"});case 10:if(!n.sent){n.next=12;break}e.goCloudLogin();case 12:return n.abrupt("return");case 13:n.t0=c,n.next=n.t0===o["s"].Admin||n.t0===o["s"].ParentOwner||n.t0===o["s"].Owner||n.t0===o["s"].ReadWrite?16:17;break;case 16:return n.abrupt("return",!0);case 17:return e.showTextTip("您没有在当前文件夹下".concat(t,"的权限")),n.abrupt("return",!1);case 19:case"end":return n.stop()}}),n)})))()},clickOpenNetDiskUploadBox:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.clickBeforeCheck("上传文件");case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:n=t.filebox,i=t.cloudCurrentFolderId,n.parentId=i,n.visible=!0;case 7:case"end":return e.stop()}}),e)})))()},clickAddNetDiskLink:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.clickBeforeCheck("添加链接");case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:n=t.linkbox,i=t.cloudCurrentFolderId,n.data={id:0,link:"",name:"",parentId:i},n.visible=!0;case 7:case"end":return e.stop()}}),e)})))()}},computed:{cannotUseNetDisk:function(){var t=this.cloudVersion,e=this.cloudCurrentFolderId;return!!Object(l["p"])(t)||!(e>0)},netdiskUploader:function(){return this.$store.state.netdiskUploader},linkbox:function(){return this.netdiskUploader.linkbox},filebox:function(){return this.netdiskUploader.filebox}}},Bh=Vh,Uh=(n("2996"),Object(hr["a"])(Bh,Ed,Pd,!1,null,"11c1b5b7",null)),Hh=Uh.exports,Wh=function(){var t=this,e=t._self._c;return t.supportInteraction?e("div",{staticClass:"go-interaction-viewer"},[t.inCloudViewerMode?e("div",{staticClass:"btn-go-interaction",attrs:{title:"在新窗口预览原型"},on:{click:t.clickGoWebInteraction}}):t._e(),e("div",{staticClass:"btn-go-interaction-mobile",class:{on:t.menuVisible},attrs:{title:"在手机上预览原型"},on:{click:t.clickShowMenu}}),t.menuVisible?e("div",{staticClass:"box",class:{"fix-right":t.fixRight}},[e("div",{staticClass:"img"},[e("div",{staticClass:"bor-top"}),e("div",{staticClass:"bor-bottom"}),t.qrcodeImage?e("img",{attrs:{src:t.qrcodeImage}}):t._e()]),e("div",{staticClass:"text"},[t._v(" 使用"),e("a",{attrs:{href:"https://www.marklion.cn/mobileapp.shtml?invoke=MarkLion.Output&ver=".concat(t.cloudVersion),target:"_blank"}},[t._v("标记狮APP")]),t._v("扫描二维码预览 "),e("div",{staticClass:"btn-question",attrs:{title:"了解更多"},on:{click:t.clickInteractionViewLink}})])]):t._e()]):t._e()},$h=[],Gh=function(){function t(t){this.mode=n.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,r=this.data.length;e<r;e++){var i=[],a=this.data.charCodeAt(e);a>65536?(i[0]=240|(1835008&a)>>>18,i[1]=128|(258048&a)>>>12,i[2]=128|(4032&a)>>>6,i[3]=128|63&a):a>2048?(i[0]=224|(61440&a)>>>12,i[1]=128|(4032&a)>>>6,i[2]=128|63&a):a>128?(i[0]=192|(1984&a)>>>6,i[1]=128|63&a):i[0]=a,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(){return this.parsedData.length},write:function(t){for(var e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,n){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,n),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,n)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(this.modules[t+n][e+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=a.getLostPoint(this);(0==n||t>r)&&(t=r,e=n)}return e},createMovieClip:function(t,e,n){var r=t.createEmptyMovieClip(e,n),i=1;this.make();for(var a=0;a<this.modules.length;a++)for(var o=a*i,s=0;s<this.modules[a].length;s++){var c=s*i,l=this.modules[a][s];l&&(r.beginFill(0,100),r.moveTo(c,o),r.lineTo(c+i,o),r.lineTo(c+i,o+i),r.lineTo(c,o+i),r.endFill())}return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=a.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],i=t[n];if(null==this.modules[r][i])for(var o=-2;o<=2;o++)for(var s=-2;s<=2;s++)this.modules[r+o][i+s]=-2==o||2==o||-2==s||2==s||0==o&&0==s}},setupTypeNumber:function(t){for(var e=a.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(var i=0;i<18;i++){var o=!t&&1==(e>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=o}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=a.getBCHTypeInfo(n),i=0;i<15;i++){var o=!t&&1==(r>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(var s=0;s<15;s++){var c=!t&&1==(r>>s&1);s<8?this.modules[8][this.moduleCount-s-1]=c:s<9?this.modules[8][15-s-1+1]=c:this.modules[8][15-s-1]=c}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,r=this.moduleCount-1,i=7,o=0,s=this.moduleCount-1;s>0;s-=2){6==s&&s--;while(1){for(var c=0;c<2;c++)if(null==this.modules[r][s-c]){var l=!1;o<t.length&&(l=1==(t[o]>>>i&1));var u=a.getMask(e,r,s-c);u&&(l=!l),this.modules[r][s-c]=l,i--,-1==i&&(o++,i=7)}if(r+=n,r<0||this.moduleCount<=r){r-=n,n=-n;break}}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,n,r){for(var i=d.getRSBlocks(t,n),o=new h,s=0;s<r.length;s++){var c=r[s];o.put(c.mode,4),o.put(c.getLength(),a.getLengthInBits(c.mode,t)),c.write(o)}for(var l=0,u=0;u<i.length;u++)l+=i[u].dataCount;if(o.getLengthInBits()>8*l)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*l+")");o.getLengthInBits()+4<=8*l&&o.put(0,4);while(o.getLengthInBits()%8!=0)o.putBit(!1);while(1){if(o.getLengthInBits()>=8*l)break;if(o.put(e.PAD0,8),o.getLengthInBits()>=8*l)break;o.put(e.PAD1,8)}return e.createBytes(o,i)},e.createBytes=function(t,e){for(var n=0,r=0,i=0,o=new Array(e.length),s=new Array(e.length),c=0;c<e.length;c++){var l=e[c].dataCount,d=e[c].totalCount-l;r=Math.max(r,l),i=Math.max(i,d),o[c]=new Array(l);for(var h=0;h<o[c].length;h++)o[c][h]=255&t.buffer[h+n];n+=l;var f=a.getErrorCorrectPolynomial(d),m=new u(o[c],f.getLength()-1),p=m.mod(f);s[c]=new Array(f.getLength()-1);for(var b=0;b<s[c].length;b++){var v=b+p.getLength()-s[c].length;s[c][b]=v>=0?p.get(v):0}}for(var g=0,w=0;w<e.length;w++)g+=e[w].totalCount;for(var x=new Array(g),y=0,k=0;k<r;k++)for(var C=0;C<e.length;C++)k<o[C].length&&(x[y++]=o[C][k]);for(var S=0;S<i;S++)for(var O=0;O<e.length;O++)S<s[O].length&&(x[y++]=s[O][S]);return x};for(var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r={L:1,M:0,Q:3,H:2},i={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(a.getBCHDigit(e)-a.getBCHDigit(a.G15)>=0)e^=a.G15<<a.getBCHDigit(e)-a.getBCHDigit(a.G15);return(t<<10|e)^a.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(a.getBCHDigit(e)-a.getBCHDigit(a.G18)>=0)e^=a.G18<<a.getBCHDigit(e)-a.getBCHDigit(a.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return a.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case i.PATTERN000:return(e+n)%2==0;case i.PATTERN001:return e%2==0;case i.PATTERN010:return n%3==0;case i.PATTERN011:return(e+n)%3==0;case i.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case i.PATTERN101:return e*n%2+e*n%3==0;case i.PATTERN110:return(e*n%2+e*n%3)%2==0;case i.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new u([1],0),n=0;n<t;n++)e=e.multiply(new u([1,o.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var a=0,o=t.isDark(r,i),s=-1;s<=1;s++)if(!(r+s<0||e<=r+s))for(var c=-1;c<=1;c++)i+c<0||e<=i+c||0==s&&0==c||o==t.isDark(r+s,i+c)&&a++;a>5&&(n+=3+a-5)}for(var l=0;l<e-1;l++)for(var u=0;u<e-1;u++){var d=0;t.isDark(l,u)&&d++,t.isDark(l+1,u)&&d++,t.isDark(l,u+1)&&d++,t.isDark(l+1,u+1)&&d++,0!=d&&4!=d||(n+=3)}for(var h=0;h<e;h++)for(var f=0;f<e-6;f++)t.isDark(h,f)&&!t.isDark(h,f+1)&&t.isDark(h,f+2)&&t.isDark(h,f+3)&&t.isDark(h,f+4)&&!t.isDark(h,f+5)&&t.isDark(h,f+6)&&(n+=40);for(var m=0;m<e;m++)for(var p=0;p<e-6;p++)t.isDark(p,m)&&!t.isDark(p+1,m)&&t.isDark(p+2,m)&&t.isDark(p+3,m)&&t.isDark(p+4,m)&&!t.isDark(p+5,m)&&t.isDark(p+6,m)&&(n+=40);for(var b=0,v=0;v<e;v++)for(var g=0;g<e;g++)t.isDark(g,v)&&b++;var w=Math.abs(100*b/e/e-50)/5;return n+=10*w,n}},o={glog:function(t){if(t<1)throw new Error("glog("+t+")");return o.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return o.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},s=0;s<8;s++)o.EXP_TABLE[s]=1<<s;for(var c=8;c<256;c++)o.EXP_TABLE[c]=o.EXP_TABLE[c-4]^o.EXP_TABLE[c-5]^o.EXP_TABLE[c-6]^o.EXP_TABLE[c-8];for(var l=0;l<255;l++)o.LOG_TABLE[o.EXP_TABLE[l]]=l;function u(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var n=0;while(n<t.length&&0==t[n])n++;this.num=new Array(t.length-n+e);for(var r=0;r<t.length-n;r++)this.num[r]=t[r+n]}function d(t,e){this.totalCount=t,this.dataCount=e}function h(){this.buffer=[],this.length=0}u.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=o.gexp(o.glog(this.get(n))+o.glog(t.get(r)));return new u(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=o.glog(this.get(0))-o.glog(t.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(var i=0;i<t.getLength();i++)n[i]^=o.gexp(o.glog(t.get(i))+e);return new u(n,0).mod(t)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(t,e){var n=d.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var r=n.length/3,i=[],a=0;a<r;a++)for(var o=n[3*a+0],s=n[3*a+1],c=n[3*a+2],l=0;l<o;l++)i.push(new d(s,c));return i},d.getRsBlockTable=function(t,e){switch(e){case r.L:return d.RS_BLOCK_TABLE[4*(t-1)+0];case r.M:return d.RS_BLOCK_TABLE[4*(t-1)+1];case r.Q:return d.RS_BLOCK_TABLE[4*(t-1)+2];case r.H:return d.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},h.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var f=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function m(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var n=e.toString().match(/android ([0-9](?:\.[0-9])?)/i);n&&n[1]&&(t=parseFloat(n[1]))}return t}var p=function(){function t(){return this._elCanvas.toDataURL("image/png")}if(this._android&&this._android<=2.1){var e=1/window.devicePixelRatio,n=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(t,r,i,a,o,s,c,l){if("nodeName"in t&&/img/i.test(t.nodeName))for(var u=arguments.length-1;u>=1;u--)arguments[u]=arguments[u]*e;else"undefined"==typeof l&&(arguments[1]*=e,arguments[2]*=e,arguments[3]*=e,arguments[4]*=e);n.apply(this,arguments)}}var r=function(t){this._bIsPainted=!1,this._android=m(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._bSupportDataURI=null};return r.prototype.draw=function(t){var e=this._oContext,n=this._htOption,r=3,i=t.getModuleCount(),a=(n.width-2*r)/i,o=(n.height-2*r)/i,s=Math.round(a),c=Math.round(o);this.clear(),e.fillStyle=n.colorLight,e.fillRect(0,0,n.width,r),e.fillRect(0,n.height-r,n.width,r),e.fillRect(0,0,r,n.height),e.fillRect(n.width-r,0,r,n.height);for(var l=0;l<i;l++)for(var u=0;u<i;u++){var d=t.isDark(l,u),h=u*a+r,f=l*o+r;e.strokeStyle=d?n.colorDark:n.colorLight,e.lineWidth=1,e.fillStyle=d?n.colorDark:n.colorLight,e.fillRect(h,f,a,o),e.strokeRect(Math.floor(h)+.5,Math.floor(f)+.5,s,c),e.strokeRect(Math.ceil(h)-.5,Math.ceil(f)-.5,s,c)}var m=n.icon;if(m&&m.complete){var p=m.naturalWidth||m.width,b=p,v=.1578*n.width,g=v;e.drawImage(m,0,0,p,b,(n.width-v)/2,(n.height-g)/2,v,g)}this._bIsPainted=!0},r.prototype.makeImage=function(){if(this._bIsPainted)return t.call(this)},r.prototype.isPainted=function(){return this._bIsPainted},r.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},r.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},r}.call(window);function b(t,e){for(var n=1,i=v(t),a=0,o=f.length;a<=o;a++){var s=0;switch(e){case r.L:s=f[a][0];break;case r.M:s=f[a][1];break;case r.Q:s=f[a][2];break;case r.H:s=f[a][3];break}if(i<=s)break;n++}if(n>f.length)throw new Error("Too long data");return n}function v(t){var e=encodeURI(t).toString().replace(/%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}var g=function(t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:r.H,icon:null},"string"===typeof t&&(t={text:t}),t)for(var e in t)this._htOption[e]=t[e];this._android=m(),this._oQRCode=null,this._oDrawing=new p(this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)};return g.prototype.makeCode=function(t){this._oQRCode=new e(b(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._oDrawing.draw(this._oQRCode);var n=this.makeImage();return this._oDrawing.clear(),n},g.prototype.makeImage=function(){if("function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3))return this._oDrawing.makeImage()},g.prototype.clear=function(){this._oDrawing.clear()},g.CorrectLevel=r,g}(),zh=new Gh({width:332,height:332,colorDark:"#000000",colorLight:"#ffffff",correctLevel:Gh.CorrectLevel.Q}),Yh=function(t){try{return zh.makeCode(t)}catch(e){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAMFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABaPxwLAAAAD3RSTlMAu0R3Ee4iZjPdmcxViKrphPWWAAARlUlEQVR42u2dZ4gzRRjHx9ya5M6cd2svaNa1F0y82FtiBRW7WEDJ2kAseFYQ0Yv9g6gnCoIIsQsiREVB8ENEsYLeiVhRFAvipzN3xpic+nd2Zqdsibcppyj5w5tstsz+duaZ2WfmmbmXjDTSSCONNNJII43Uu0rk39Lr/Ou6Zyok/TSJq8T95iZDAqg9YLlfRbQz9T9CRw25EQAAvh8SQBnstlk8mAKc0JNi1XRVbog96f3ZF2CRoSgNLPIEZynEo3znuPlRwZU5n4AnmTlj+NEZJsAkmiX2pG1CcljmO6fg6WcJsEI8TdDtfgDStq2VrG0Lqx9Hiz9Xy91e6QZAD8sLkO8HYAPoUpffh3n3ayP3a+x0JwiQvHo3fvUy8XQlzbJhAtQwyznoYxklUc52ZQyrNNfcZ2V8CqBIs2mIAEa54XG8YHJtLoq6Q5Sm8LPYrOOMYQKk6KNlLGJASdpGJEASyEuAhG3bVj9GmJRGOI5pskHj+jEoCdv4lZ+6k/uZw/OyFvpFrx9Ic7Dovf44Bg3T3BoNVQRFzIsbViiAvM/40ACUCdTwTdHN4jH3QxX1ogfQZjiPCuLhAmxMTSCJ5tFlCaCK2vEAVhiAqA9Vz1rBvrcdFKBGr59EawIBALrdEBstdl5e/GyWhvguoAVcBTB/XwhgXFT8MbaRFbe7mGbIEAEMr0rWQwBzmHYri+MB1GEJ03hwmABkCVSNSTRkLajneVF7aBTgF3a7kvfqwuxQAW78aDfaFI3hEUjl9drukAmWLYDImAYZKgDVcbSGzb0eALhPNkobuABpNHmR7YPfhg5QpI+ZSWDZtvdwP3Z10zXqLP0iA6BtYEI++FH5YQMY5Y7rj/iNcAIKwLXGFAW4oEKkhusR/RoGqKEsAYJNXqJhbkO9NeAJ6rKZpw8MkEM+BGAAC2GAvAcAXSsDl0C1WYrIgT+mBMDUOgNsTJMIAyy8JAE22L7AVFwfAGMJp+16eNZKyIZoW/c+4xUBIDUlWqDkAfZuwghte2ZAgIvBpD+WC5AkEQDW8GuBMLFGEICEAe5bH4AUXP1JAVYKhX3cj4NnowFy6wOQxP0fzVh+I/QAZmy7BrLjoTZVYYYCrE9D9Jr7EQnARIrC2BdABgG48GrbVk/A/OkdeWHHBSgOBpBDSLoHuuO/CpB+P9vQAXQjLO14tU31xgxZWieAC954zH1AHcBSANpNsuyFfEkY4AKnbwDp+FCAAFgYAAygCKyamltedRuOAYzQAFPz20gAXWkBEFZ+UKe08aVD1gTYGH+sCwB1Mme8/k9BiDkeJ+sAk08cVkVrXQAufk50P34OlFnB0VsJqjNYfS3Y9F2odAFtJQdqEQ2iAXRXDW5/YD218d8DLACbkHXVpPm3ndwNt9+fjDTSSCONNNL/Q3eSf1lfY5U6IfvGDTEUrq5EOTGW7Fu3Oz0Pyf1Okk+p+Oitu+gJ2ztpP7gn9hrFIAFdd6YEwK89A/xMr4Klfvu0rHrNjxExPLnRQ/649mX4UwH83AdAEni+C8Av8v415EVnJBcYB5qg+dI3QM69ooiW+h3dXTXqOFsAZPGK3wRY2Cxrmt8VDnKd+Q/NrVd6AzgGHfW7YUrVtee5A6slDpBgW1TasYaLpalHgImO4/vt/yEDI7McYCOcEY5y5PsAUOG/pEPWBCBb7+sVQRGhqlinxnKNbTvcBhIxxuqmTDq866rIemD7mOZpfwdQoONCbFgAq7Zd7tAR9ELBl4+NSo9GOIWglv8OABHy1QPLbY0UwAXxw7ZhAF2xAFR38VRzc9eGy8DQAZpmQOUIAKk4ACLpSXbnhL3X/pEAv8nBkICyA+fAzyoI6Em1A0pbGWsAeGV/e482oAAyQYCAGb8tABJE6ciSBpBQRaXSjQ+QYG3Gvl0BfrA4gN9qSBjgWH+6F8UFMFyAZHP/LgBptK04ANOu8bxgchsws9SmYwAo+8oA30cD3A04kQAfmpLxu0KRAyjFBUjbr5HsKmvLZyVAx5GjPTvuA/6asncTyJE1YKoPAFnPa3B/NdSUnIA8Z2dNgAtt29LGHPePC8BeLSfjt64t1GxMgB6lABYwS//Ny1r9FHzahKwXwM+sGXye5vmjtBgW1aFbC1SH2q4s/QrVQpWjAY4wpaZjAfAo8IZ43iijEp5Jmb7a6vb2iAaYCnty3TWOeQ5A//2S8re0uRdMHjrFuWonBdVUGhiAXuIBjKG1AVr+Y7+JCVJdm49ogGl1VnyANP7M4ZQokwKs9QM4mZ28kTsZqYqsqGtOFIATH+BFm2nPGAA5fMMuybOuSFv2Sk5lLfmpKgJS9RJ73dEBjrQHtYEF5AUAbftaEqBrJAt+NUIA6d4AigpgApgeAsBB9POBAtNBMQCWYIm5EmOA5SuCul4E9ZgAKcz2ZIRllPYuHMamhdwBag9cjiiesBECetIKIOEBzOHBWADKz2BNW7NE0mXgd1rr9WDIa6FqGA1gmOUGB9gUeHLKyzlz87UBJtEhGTDru4NzJB7Vpu2VYgIkgBXRzenENUI1PbSMTsXNgDPLNO9Sf4rm9QSaVkwAaj6/Cici3xPAnNvB3fZLes/r0KwsYIXmiTf/x6jh17UAkh7ABPA8Tw6tnlpCowovx08CzmYe2bh47suA/N8D3Gof4gGM0wt5cs3XegFQNS9VRrviVsrOErVEV0eVPZLuADlZDU/m5pIp06fQADZaEyAnjCgLvMSKnYo5RfeUgUfXAJiQAxALHuwdmFUAJaO4JsDnWOaPC3RKfJCHZXxyc23WfoLuigTIAM1FPsjopZNqEQUwF8cIb5gWxpjnls+qIquTbSsKwCgUJIDR+E7M5hS+ZIXlKwfYKM7EXsNzwSZOEwOmPFPT5WaeKADlKWoz2pUM5TNrACmgGTt4nCyJu2X5ze6+lkiAQmE25JCYWxGllJttSreYiwyrvc0/FVSdoNn2r2pD2pz9q3rXtMhII4000v9cSStyr0P+KaVx/yba2E1FOHSrZD10OwkLmNdd6T/lWrDha8efWpEAed3h+F5Odx2ujF0PrwPtSABLB7B0gIzYfwSNF0rtE/sNafBlljsWPtzWNwswsRsv8Nc4gGZw9/kBrtwiOv4UFyCBoH7zD2FyAL0T7geo4dtBAAKRzgZdVPtEHIAEzG3p2fVpdxRvMIA5cNWxIpYahgHaYQCu6Y1kAHdKrxU9AJxPbedQuxKMEEzw9RPm86oXnC5FABRpn2oAACUOEFamwAOlhcO3hpYDSdtxbcDepdysrC/AGIRYw5cqvJ7DTGFRGOFGtDP7jwE01M9pAVBE3g9w4YztrBfAH2GABDrED3AlYPUIcKTtSACDRseDNnC1XeLzFVbCABfjJR2Afa72WgQ5rLU+yFAAyZ1cIzyyclPh9R2xbNebr9tvFL7yAawMBeByr024dS/2rH8IADW9XlPDB7A8FAC1U4RVE1heJ4ALCzM2VZHmqDslYiYMkHEBUgEAOn6b5fGjchhg8FqgAMQC3zEdoKTW54eM8NehAFxgOwZQ4jZA7+0HOGqRtdaUKwLg52E1RBlZxzcOALxRXvQyYF0BJvC7HqGhq3y9G3ntwEnUMsIA9w0PYEPMy62fGYUKKz/PxvQet11dU9ABcpjuCeBI29IBEjTBQuFTFS8wvJE/CZA+BGh+wobyhBqDAOQQoRXPxh2S2sYLbQmA98TynVQ5GqCI/JAADNf9r6PEExUAc563ZdTQMPmC/+y6AHhWP4e8iJ2M4xQ+Ll1z094d1BGpNUshI8zC6gngFubMHyBbQmYDM15Y2fug+eCoIOuLbkN0ItyB8XInVAsMYFgOSc6t5Sm3rUmiTQTA5AqhAKkqVh2Swa8hgBRWhwWQbYq/RDGGjgQYs+jGTlngSRZyDgGMY4WewzpzgwDIN+DhZVg00d85gGyK53AWszfWF3tW9pgoQJHmytyfDrFtZ0CAE3DGkftw52eBmV9OA0jRW9CS4erIt+r+buxrOgMedxoMwFjCq2IiThWL7PiiBOBRzJqqMwobVqYMbDEwwHFw1X7mCnQmAIfHdxUA05ubut1g/OabV/sHi4A18wMAKGd4UxpPbM/O0WeMBCjx2OfPvgx4ySUDGs6gRUDTYEELK8UTJUUdQGkjrSqkqzx0kay7PdYBjbB2niOiOLzzVYUVBXClFtDZjzZPIpJJ62mPmvMDfFCSAcyWu5j+IMCJAigqr2QHoF0RiWGVbsZWcjeSqFKAsMbKwCxfi99mZ5Lk1zqAURZc5FIAm4nCKIM2FT2o2iXUnKEHWp5N0m+v8otnu+Zq+yA5VneV13mTGYfFnvKf6pSIaIyYxlYVkdQlbRgrpzUD17ndZ0uvkM1KT3Gn0NJNke7Znik+IFF/942iPOjF7gKV/3h6YTwJs218FnXAeIEb494HSqt/2FF+s2ZrXzf9C0SeqvQCkJjZJeYfBxx7iyjh1E3VspLAApU0GWmkkUYaaaT/sozXyL+qC7Oh9ZKT73gbl5dIbyo2zV4fJxkxYj0FLIr0YngaGmWuj1lGtXBU+GTh4i1pEYI0HdjQaAw6Yibc8uZ2quMQdnZ3i4hP+zob0vENP0dVCyMnEJIlTj9D5V0YAFQvmEr1gE++gXCBlRbwi5y4Fgtgeg0AvwIAKSBohUUvxYweQjQQUskrscEACB5wQlOw87w2+EwK7YJPVYi7DggwE+46eVYx7uVN9Oq7bEwANxbpqOCC+BtEYwiuJ6wCeTZ2fyya7nooh9rn6QWqg7cZCCAy1MgAwsrro5mWDNU0dIDbuwAcZxacoQCcrEysDq6ODrDEJpceZgUA6OcfQ8kBFZgnaXhaEQCZEqFUefb40zoAjzP0BJC07V04h9ihbMWmAmgl+MPd2kMCpKp5kRH1pjMgAImeniPToADH8EowJgEm6Y4Efk/RFwXN764AF+zVE0CjK0CRL4LYWAIY1Qa9YL7uYvzmASRmdqIAR+4oAJi6AhihwaSJ7gBGmS962EDZwAKsDfBo8U+KcQoF0G0pHsAJoYEMmno3gEm0iR+Abj4/hdfGGUY/AEYdrfgAObS8U5YFQBKthSbN/+mT8Vo0gBte7Q6QUdPoFUDb5No8HwBI1+eDAOTrdq1D6+DyXJMIALNQxAOHbavXgmQ3AHc4q1EKjBdJBQHI8bOGFQA4hs08yq0uUYx+qqFRA14K7JWyggBGsuaOpY1LAJbh8/ReFKMvAJaA3w6vjADw5I5YttgOBUBrRp75Js/3CUDm4B9RywmnC6gEAShu2w9AjYCdVsdsvwAplgVh5ycNBAuFOQavBQCyyLOrSH8AIgvCzk9CAKh3AbvRvA7ATjtjoBwIWUGZuZ08t4NG6Bp9i+2QABuAza/o3waoavpqkIz6y+yNCIAJtEs+gByWKOg4sNw/wAZ8kQ0Vv4O3EQmQdluHnAZQb5xMs6zYXGr0D2DUF/U+UIcIrBAAVbXj6AApLE+4S5ZXroTTNwC5S68EYicNgkYBfOEQHeAYTCexPIkz3JWzw3BIkmXMi6NhAC4dwI2fvJzPIZ/CGX6Am/sD2BjIixbx97UBEq4Z7GRU28RAywdwQ6M/gDm5aCiH5bUBjmM+2oR7am1VBzgH/QGkyzLjFxSAbIhUY+kB1Nz84p7am/t6AJ4j3+4L4Dh98e/PwaY4DLBfu0SpWa4dLathmkW9t+wNQMWaHNEkxwEwvmXL9c7Ve0Y7AGymTT8Ad6uQVBo4pRtAVgL4h2SykPm/b1/VMFX26sBtV9sf08KIMsJjCbnXO5QM+s9leBGw9iztYu+iAdjXxwFIZoGO1ktbFCYlACreIQ8z4QO4iFzBETPs/gQ+LccB2BnSQ82CyvHXOs9DqnuHFIDypJrMkGgAMR7AyUEHfD90tNRaJBJgQR5S70sv572lD/uSmAC5IEC6LHJ9I5qYJcPiJity77+5GQcaVhiA9ZxPI0rA/abQ1jEByBuyg3gqXQ4drY1PfcIRU34P8Jlgc1OHKDlE19HRU+l2I0PUrWSkkUYaaaSRRhpppJFi6C8fDRp5d6pE1AAAAABJRU5ErkJggg=="}},Xh={methods:{clickInteractionViewLink:function(){var t=window.open("https://ui.marklion.cn/article/tools/marklion-interaction-mobile-view-intro.shtml");t.opener=null},clickGoWebInteraction:function(){var t=window.open(this.interactionUrl);t.opener=null},clickShowMenu:function(){var t=this,e=!this.menuVisible;e&&(this.url=this.interactionUrl),setTimeout((function(){t.menuVisible=e}),0)},hideMenu:function(){var t=this;clearTimeout(this.menuHandler),this.menuHandler=setTimeout((function(){t.menuVisible=!1}),50)}},watch:{url:function(t){t&&(this.qrcodeImage=Yh(t))},menuVisible:function(t){t?window.addEventListener("click",this.hideMenu,!1):window.removeEventListener("click",this.hideMenu,!1)}},computed:{supportInteraction:function(){return!Object(l["n"])(this.cloudVersion)},interactionUrl:function(){return this.getCurrentInteractionUrl()}},data:function(){return{qrcodeImage:null,url:"",menuVisible:!1,menuHandler:0}},beforeDestroy:function(){clearTimeout(this.menuHandler),window.removeEventListener("click",this.hideMenu,!1)},created:function(){0},props:{fixRight:{type:Boolean,default:!1}}},Kh=Xh,qh=(n("298f"),Object(hr["a"])(Kh,Wh,$h,!1,null,"a50c5c24",null)),Qh=qh.exports,Jh=function(){var t=this,e=t._self._c;return e("div",{ref:"btnGoArtrenderMode",staticClass:"btn-go-artrendermode",class:{on:t.artShowInListMode},attrs:{title:t.title},on:{click:t.clickArtShowInListMode}})},Zh=[],tf={methods:{setGuideRect:function(){this.setBeginnerGuideRect(o["h"].ArtboardModeMenu,"btnGoArtrenderMode",o["g"].TopRight)},clickArtShowInListMode:function(){this.$store.commit("artShowInListMode",!this.artShowInListMode)}},computed:{title:function(){var t=this.artShowInListMode;return"".concat(t?"宫格视图":"画布视图","\n点击将画板列表切换为").concat(t?"画布视图":"宫格视图")},resetGuideRectKey:function(){var t=this.winRect.width;return"".concat(t)},winRect:function(){return this.$store.state.winRect}},watch:{resetGuideRectKey:function(){this.setGuideRect()}},beforeDestroy:function(){this.setGuideRect()},mounted:function(){this.setGuideRect()}},ef=tf,nf=(n("47da"),Object(hr["a"])(ef,Jh,Zh,!1,null,"8274e7a2",null)),rf=nf.exports,af=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log"},[e("a",{staticClass:"btn-folder-log",class:{on:t.logVisible},attrs:{href:"javascript:;",title:"文件夹日志"},on:{click:function(e){t.logVisible=!t.logVisible}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.logVisible,expression:"logVisible"}],staticClass:"box",on:{click:function(e){t.notClickClose=!0}}},[e("div",{staticClass:"header"},[e("nav",[t.isRootFolder?t._e():e("a",{class:{on:t.showType===t.EnumLogShowType.ALL},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.ALL)}}},[t._v("全部")]),e("a",{class:{on:t.showType===t.EnumLogShowType.Folder||t.isRootFolder},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.Folder)}}},[t._v("文件夹")]),t.isRootFolder?t._e():e("a",{class:{on:t.showType===t.EnumLogShowType.Artboard},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.Artboard)}}},[t._v("画板")]),t.isRootFolder?t._e():e("a",{class:{on:t.showType===t.EnumLogShowType.File},attrs:{href:"javascript:;"},on:{click:function(e){return t.clickShowType(t.EnumLogShowType.File)}}},[t._v("文件")])]),e("menu",[e("a",{staticClass:"btn-refresh2",attrs:{href:"javascript:;",title:"刷新日志列表"},on:{click:function(e){return t.clickReload(!0)}}})])]),e("div",{ref:"list",staticClass:"list",class:t.listCls,on:{scroll:t.onListScroll}},[t.listFetchState===t.FetchState.Fetching||t.listFetchState===t.FetchState.Error?e("NetworkLoading",{attrs:{loadText:"正在获取消息列表...",errorText:t.errorText,isLoading:t.listFetchState===t.FetchState.Fetching,isError:t.listFetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload(!0)}}}):0===t.showList.length?e("div",{staticClass:"empty"},[t._v("没有找到"+t._s(t.showType===t.EnumLogShowType.Folder?"文件夹相关":t.showType===t.EnumLogShowType.Artboard?"画板相关":t.showType===t.EnumLogShowType.File?"文件相关":"")+"日志")]):e("ul",t._l(t.list,(function(n){return e("CloudFolderLogItem",{key:"folderlog-".concat(n.id),attrs:{item:n,showType:t.showType,listViewRect:t.listViewRect,allShowListItemSelect:t.allShowListItemSelect},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile,resetShowListItemsOffsetTop:t.resetShowListItemsOffsetTop}})})),1)],1)])])},of=[],sf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item",class:t.itemCls,style:t.style},[t.itemInView?e("div",{ref:"item",staticClass:"item-content"},[e("UserFace2",{attrs:{self:t.isSelf,tourist:t.isTourist,title:t.userFaceTitle,text:t.userFaceText}}),e("div",{staticClass:"summary"},[e("div",{staticClass:"info"},[e("div",{staticClass:"nickname"},[t._v(t._s(t.userNickName))]),t.item.type===t.EnumLoggerType.Artboard_Upload?e("ArtboardUpload",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.NetDisk_FileUploadCompleted?e("NetdiskFileUpload",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Remove?e("ItemRemove",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Remove_ArtboardVer?e("ArtboardVerRemove",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.MoveTo?e("ItemMoveTo",{attrs:{item:t.item,showType:t.showType},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Folder_Edit?e("FolderEdit",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.Folder_Add||t.item.type===t.EnumLoggerType.Folder_SetPreview||t.item.type===t.EnumLoggerType.Folder_CancelPreview?e("FolderSet",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.NetDisk_LinkAdd||t.item.type===t.EnumLoggerType.NetDisk_LinkEdit?e("NetdiskFileLinkChange",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t.item.type===t.EnumLoggerType.NetDisk_FileReName?e("NetdiskFileRename",{attrs:{item:t.item},on:{clickFolder:t.clickFolder,clickArtboard:t.clickArtboard,clickFile:t.clickFile}}):t._e()],1),e("div",{staticClass:"date"},[t._v(t._s(t.item.dateStr))])])],1):t._e()])},cf=[],lf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("上传了"),e("ArrayItems",{attrs:{showMore:t.showMoreArtboard,list:t.artboards,canClick:!0,listName:"画板"},on:{clickItem:t.clickArtboard,clickShowMore:t.clickShowMoreArtboard}}),t.summaryHTML?e("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.summaryHTML)}}):t._e()],1)},uf=[],df=function(){var t=this,e=t._self._c;return e("div",{staticClass:"array-items",class:{nomore:!t.moreList}},[e("span",{staticClass:"name",on:{click:t.clickMore}},[t._v(t._s(t.list.length>t.startMaxCount?"".concat(t.list.length,"个"):"")+t._s(t.listName))]),t._l(t.startList,(function(n,r){return e("span",{key:r,class:{art:1,first:0===r}},[e("ArrayItem",{attrs:{canClick:t.canClick,light:t.light,dead:t.dead,item:n},on:{clickItem:t.clickItem}})],1)})),t.moreList?[t.showMore?e("span",{staticClass:"more-list"},t._l(t.moreList,(function(n,r){return e("span",{key:t.startMaxCount+r,class:{art:1}},[e("ArrayItem",{attrs:{canClick:t.canClick,light:t.light,dead:t.dead,item:n},on:{clickItem:t.clickItem}})],1)})),0):t._e(),t.showMore?t._e():e("span",{staticClass:"more-text",on:{click:t.clickMore}},[t._v("等")]),e("span",{staticClass:"btn-more-visible",class:{on:t.showMore},on:{click:t.clickMore}})]:t._e()],2)},hf=[],ff=function(){var t=this,e=t._self._c;return t.canClick?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.clickItem(t.item)}}},[t._v(t._s(t.name))]):e("span",{class:{light:t.light,dead:t.dead}},[t._v(t._s(t.name))])},mf=[],pf={methods:{clickItem:function(t){this.$emit("clickItem",t)}},computed:{name:function(){var t=this.item,e=t.name,n=t.fileName,r=t.fileExt;return e||n+r}},props:{item:Object,canClick:Boolean,light:{type:Boolean,default:!0},dead:{type:Boolean,default:!1}}},bf=pf,vf=Object(hr["a"])(bf,ff,mf,!1,null,null,null),gf=vf.exports,wf={components:{ArrayItem:gf},methods:{clickMore:function(){this.moreList&&this.$emit("clickShowMore",!this.showMore)},clickItem:function(t){this.$emit("clickItem",t)}},computed:{startMaxCount:function(){return 5},startList:function(){var t=this.list,e=this.startMaxCount;return t.length<=e?t:t.slice(0,5)},moreList:function(){var t=this.list,e=this.startMaxCount;return t.length<=e?null:t.slice(5)}},props:{list:Array,canClick:Boolean,listName:String,light:{type:Boolean,default:!0},dead:{type:Boolean,default:!1},showMore:{type:Boolean,default:!1}}},xf=wf,yf=(n("233b"),Object(hr["a"])(xf,df,hf,!1,null,"4ccc1574",null)),kf=yf.exports,Cf={components:{ArrayItems:kf},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickShowMoreArtboard:function(t){this.item.showMore[o["v"].Artboard]=t}},computed:{showMoreArtboard:function(){return this.item.showMore[o["v"].Artboard]},EnumLogShowType:function(){return o["v"]},artboards:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.artboards)&&void 0!==t?t:[]},desc:function(){var t,e,n=null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.desc)&&void 0!==t?t:"";return Object(l["i"])(n)&&(n=n.trim()),n},summaryHTML:function(){var t=this.desc;return t?Gi(t):null}},props:{item:Object}},Sf=Cf,Of=(n("2c33"),Object(hr["a"])(Sf,lf,uf,!1,null,"0f04ebde",null)),If=Of.exports,Af=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},t._l(t.texts,(function(n,r){return e("ArrayItem",{key:r,attrs:{canClick:!!n.canClick,light:!!n.light,item:n},on:{clickItem:t.clickFolder}})})),1)},Tf=[],jf={components:{ArrayItem:gf},methods:{clickFolder:function(t){this.$emit("clickFolder",t)}},computed:{isRootFolder:function(){return 0===this.cloudCurrentFolderId},canClickFolder:function(){return this.cloudCurrentFolderId===this.itemData.parentId},texts:function(){var t=this.canClickFolder,e=this.itemData,n=this.isRootFolder,r=n?"":"子",i=[];switch(this.item.type){case o["w"].Folder_Add:t?(i.push({name:"新建了".concat(r,"文件夹")}),i.push({name:e.name,light:!0,canClick:!0,id:e.id})):(i.push({name:"新建了当前文件夹"}),i.push({name:e.name,light:!0}));break;case o["w"].Folder_SetPreview:t?(i.push({name:"设置了".concat(r,"文件夹")}),i.push({name:e.name,light:!0,canClick:!0,id:e.id})):(i.push({name:"设置了当前文件夹"}),i.push({name:e.name,light:!0})),i.push({name:"的封面"});break;case o["w"].Folder_CancelPreview:t?(i.push({name:"取消了".concat(r,"文件夹")}),i.push({name:e.name,light:!0,canClick:!0,id:e.id})):(i.push({name:"取消了当前文件夹"}),i.push({name:e.name,light:!0})),i.push({name:"的封面"});break}return i},itemData:function(){var t;return null!==(t=this.item.data)&&void 0!==t?t:{}}},props:{item:Object}},Ff=jf,Mf=Object(hr["a"])(Ff,Af,Tf,!1,null,null,null),_f=Mf.exports,Lf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},t._l(t.texts,(function(n,r){return e("ArrayItem",{key:r,attrs:{canClick:!!n.canClick,light:!!n.light,item:n},on:{clickItem:t.clickFolder}})})),1)},Df=[],Nf={components:{ArrayItem:gf},methods:{clickFolder:function(t){this.$emit("clickFolder",t)}},computed:{isRootFolder:function(){return 0===this.cloudCurrentFolderId},texts:function(){var t=this.itemData,e=t.folder,n=t.oldFolder;if(!e)return[];var r=this.cloudCurrentFolderId===e.parentId,i=this.isRootFolder?"":"子";if(!n)return[{name:"编辑了".concat(r?i:"","文件夹")},{name:e.name,light:!0,canClick:r,id:e.id},{name:"的配置信息"}];var a=e.name,s=e.shareMode,c=n.name,l=n.shareMode,u=a!=c,d=s!=l;if(!u&&!d)return[{name:"编辑了".concat(r?i:"","文件夹")},{name:e.name,light:!0,canClick:r,id:e.id},{name:"的配置信息"}];var h=[];return u&&(r?(h.push({name:"重命名了".concat(i,"文件夹")}),h.push({name:c,light:!0})):h.push({name:"重命名了当前文件夹"}),h.push({name:"为"}),h.push({name:a,light:!0,id:e.id,canClick:r})),d&&(u?(h.push({name:"并修改了访问模式为"}),h.push({name:o["r"].getName(s),light:!0})):(r?(h.push({name:"修改了".concat(i,"文件夹")}),h.push({name:a,light:!0,id:e.id,canClick:!0})):h.push({name:"修改了当前文件夹"}),h.push({name:"的访问模式为"}),h.push({name:o["r"].getName(s),light:!0}))),h},itemData:function(){var t;return null!==(t=this.item.data)&&void 0!==t?t:{}}},props:{item:Object}},Ef=Nf,Pf=Object(hr["a"])(Ef,Lf,Df,!1,null,null,null),Rf=Pf.exports,Vf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[!t.isMoveOutMode&&t.oldParent?[t._v("从"),e("ArrayItem",{attrs:{canClick:!0,item:t.oldParent},on:{clickItem:t.clickFolder}})]:t._e(),t._v(t._s(t.moveModeText)+"了"),t.hasFolder?e("ArrayItems",{attrs:{list:t.folders,showMore:t.showMoreFolder,canClick:!0,listName:"文件夹"},on:{clickItem:t.clickFolder,clickShowMore:t.clickShowMoreFolder}}):t._e(),t._v(t._s(t.hasFolder&&t.hasFile?",":"")),t.hasFile?e("ArrayItems",{attrs:{list:t.files,showMore:t.showMoreFile,canClick:!0,listName:"文件"},on:{clickItem:t.clickFile,clickShowMore:t.clickShowMoreFile}}):t._e(),t._v(t._s(t.hasFile&&t.hasArtboard?",":"")),t.hasArtboard?e("ArrayItems",{attrs:{list:t.artboards,showMore:t.showMoreArtboard,canClick:!0,listName:"画板"},on:{clickItem:t.clickArtboard,clickShowMore:t.clickShowMoreArtboard}}):t._e(),t.isMoveOutMode&&t.newParent?[t._v("到"),e("ArrayItem",{attrs:{canClick:!0,item:t.newParent},on:{clickItem:t.clickFolder}})]:t._e()],2)},Bf=[],Uf={components:{ArrayItems:kf,ArrayItem:gf},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t){this.$emit("clickFile",t)},clickShowMoreFolder:function(t){this.item.showMore[o["v"].Folder]=t},clickShowMoreFile:function(t){this.item.showMore[o["v"].File]=t},clickShowMoreArtboard:function(t){this.item.showMore[o["v"].Artboard]=t}},computed:{showMoreFolder:function(){return this.item.showMore[o["v"].Folder]},showMoreFile:function(){return this.item.showMore[o["v"].File]},showMoreArtboard:function(){return this.item.showMore[o["v"].Artboard]},isRootFolder:function(){return 0===this.cloudCurrentFolderId},moveModeText:function(){return this.isMoveOutMode?"移动":"移入"},oldParent:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.parent)&&void 0!==t?t:null},newParent:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.newParent)&&void 0!==t?t:null},isMoveOutMode:function(){var t;return(null===(t=this.oldParent)||void 0===t?void 0:t.id)===this.cloudCurrentFolderId},hasFolder:function(){var t=this.showType,e=this.folders,n=this.isRootFolder;return(n||t===o["v"].ALL||t===o["v"].Folder)&&e.length>0},hasFile:function(){var t=this.showType,e=this.files,n=this.isRootFolder;return!n&&(t===o["v"].ALL||t===o["v"].File)&&e.length>0},hasArtboard:function(){var t=this.showType,e=this.artboards,n=this.isRootFolder;return!n&&(t===o["v"].ALL||t===o["v"].Artboard)&&e.length>0},folders:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.folders)&&void 0!==t?t:[]},files:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.files)&&void 0!==t?t:[]},artboards:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.artboards)&&void 0!==t?t:[]}},props:{item:Object,showType:Number}},Hf=Uf,Wf=Object(hr["a"])(Hf,Vf,Bf,!1,null,null,null),$f=Wf.exports,Gf=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("删除了"),t.hasFolder?e("ArrayItems",{attrs:{list:t.folders,showMore:t.showMoreFolder,canClick:!1,light:!1,dead:!0,listName:"文件夹"},on:{clickItem:t.clickFolder,clickShowMore:t.clickShowMoreFolder}}):t._e(),t._v(t._s(t.hasFolder&&t.hasFile?",":"")),t.hasFile?e("ArrayItems",{attrs:{list:t.files,showMore:t.showMoreFile,canClick:!1,light:!1,dead:!0,listName:"文件"},on:{clickItem:t.clickFile,clickShowMore:t.clickShowMoreFile}}):t._e(),t._v(t._s(t.hasFile&&t.hasArtboard?",":"")),t.hasArtboard?e("ArrayItems",{attrs:{list:t.artboards,showMore:t.showMoreArtboard,canClick:!1,dead:!0,light:!1,listName:"画板"},on:{clickItem:t.clickArtboard,clickShowMore:t.clickShowMoreArtboard}}):t._e()],1)},zf=[],Yf={components:{ArrayItems:kf},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t){this.$emit("clickFile",t)},clickShowMoreFolder:function(t){this.item.showMore[o["v"].Folder]=t},clickShowMoreFile:function(t){this.item.showMore[o["v"].File]=t},clickShowMoreArtboard:function(t){this.item.showMore[o["v"].Artboard]=t}},computed:{showMoreFolder:function(){return this.item.showMore[o["v"].Folder]},showMoreFile:function(){return this.item.showMore[o["v"].File]},showMoreArtboard:function(){return this.item.showMore[o["v"].Artboard]},isRootFolder:function(){return 0===this.cloudCurrentFolderId},hasFolder:function(){var t=this.showType,e=this.folders,n=this.isRootFolder;return(n||t===o["v"].ALL||t===o["v"].Folder)&&e.length>0},hasFile:function(){var t=this.showType,e=this.files,n=this.isRootFolder;return!n&&(t===o["v"].ALL||t===o["v"].File)&&e.length>0},hasArtboard:function(){var t=this.showType,e=this.artboards,n=this.isRootFolder;return!n&&(t===o["v"].ALL||t===o["v"].Artboard)&&e.length>0},folders:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.folders)&&void 0!==t?t:[]},files:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.files)&&void 0!==t?t:[]},artboards:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.artboards)&&void 0!==t?t:[]}},props:{item:Object,showType:Number}},Xf=Yf,Kf=Object(hr["a"])(Xf,Gf,zf,!1,null,null,null),qf=Kf.exports,Qf=function(){var t=this,e=t._self._c;return t.artboard&&null!=t.artboard.verId?e("div",{staticClass:"folder-log-item-info"},[t._v("删除了画板"),e("ArrayItem",{attrs:{item:t.artboard,canClick:!0},on:{clickItem:t.clickArtboard}}),t._v("的版本"),e("span",{staticClass:"dead",domProps:{textContent:t._s("#".concat(t.artboard.verId))}})],1):t._e()},Jf=[],Zf={components:{ArrayItem:gf},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)}},computed:{artboard:function(){return this.item.data}},props:{item:Object,showType:Number}},tm=Zf,em=Object(hr["a"])(tm,Qf,Jf,!1,null,null,null),nm=em.exports,rm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v(t._s(t.modeText)+"了链接文件"),e("ArrayItem",{attrs:{item:t.file,canClick:!0},on:{clickItem:t.clickFile}})],1)},im=[],am={components:{ArrayItem:gf},methods:{clickFile:function(t){this.$emit("clickFile",t)}},computed:{isLinkAdd:function(){return this.item.type===o["w"].NetDisk_LinkAdd},file:function(){return this.item.data},modeText:function(){return this.isLinkAdd?"添加":"编辑"}},props:{item:Object}},om=am,sm=Object(hr["a"])(om,rm,im,!1,null,null,null),cm=sm.exports,lm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("重命名了文件"),t.oldFileName?e("span",{staticClass:"dead"},[t._v(t._s(t.oldFileName+t.fileExt))]):t._e(),t._v("为"),e("ArrayItem",{attrs:{item:t.file,canClick:!0},on:{clickItem:t.clickFile}})],1)},um=[],dm={components:{ArrayItem:gf},methods:{clickFile:function(t){this.$emit("clickFile",t)}},computed:{oldFileName:function(){var t,e;return null!==(t=null===(e=this.item.data)||void 0===e?void 0:e.oldFileName)&&void 0!==t?t:""},file:function(){var t;return null===(t=this.item.data)||void 0===t?void 0:t.file},fileExt:function(){var t,e;return null!==(t=null===(e=this.file)||void 0===e?void 0:e.fileExt)&&void 0!==t?t:""}},props:{item:Object}},hm=dm,fm=Object(hr["a"])(hm,lm,um,!1,null,null,null),mm=fm.exports,pm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"folder-log-item-info"},[t._v("上传了"),e("ArrayItems",{attrs:{list:t.files,showMore:t.showMoreFile,canClick:!0,listName:"文件"},on:{clickItem:t.clickFile,clickShowMore:t.clickShowMoreFile}})],1)},bm=[],vm={components:{ArrayItems:kf},methods:{clickFile:function(t){this.$emit("clickFile",t)},clickShowMoreFile:function(t){this.item.showMore[o["v"].File]=t}},computed:{showMoreFile:function(){return this.item.showMore[o["v"].File]},files:function(){var t=this.item.data;return Object(l["h"])(t)||(t=[t]),t}},props:{item:Object}},gm=vm,wm=Object(hr["a"])(gm,pm,bm,!1,null,null,null),xm=wm.exports,ym={components:{UserFace2:Ni,ArtboardVerRemove:nm,ArtboardUpload:If,FolderSet:_f,FolderEdit:Rf,ItemMoveTo:$f,ItemRemove:qf,NetdiskFileLinkChange:cm,NetdiskFileRename:mm,NetdiskFileUpload:xm},methods:{clickArtboard:function(t){this.$emit("clickArtboard",t)},clickFolder:function(t){this.$emit("clickFolder",t)},clickFile:function(t){this.$emit("clickFile",t)},resetBoxHeight:function(t){var e,n,r=this.visible,i=this.item;r&&(!t&&i.offsetHeight>0||(i.offsetHeight=null!==(e=null===(n=this.$refs.item)||void 0===n?void 0:n.offsetHeight)&&void 0!==e?e:0,i.offsetHeight>0&&this.$emit("resetShowListItemsOffsetTop")))}},computed:{itemInView:function(){var t=this.listViewRect,e=this.itemRect;return 0===e.offsetHeight||Object(d["f"])(t,e)},itemRect:function(){var t=this.item,e=t.offsetHeight,n=t.offsetTop;return{x:0,width:100,y:n,height:e}},isRootFolder:function(){return 0===this.cloudCurrentFolderId},visible:function(){var t=this.item,e=t.visibleInFolder,n=t.visibleInFile,r=t.visibleInArtboard,i=this.isRootFolder,a=this.showType;if(i)return e;switch(a){case o["v"].Artboard:return r;case o["v"].File:return n;case o["v"].Folder:return e;default:return!0}},itemCls:function(){var t=this.item,e=t.visibleInFolder,n=t.visibleInFile,r=t.visibleInArtboard;if(!e&&!n&&!r)return null;var i={};return e&&(i["visible-folder"]=1),n&&(i["visible-file"]=1),r&&(i["visible-artboard"]=1),i},style:function(){var t,e=null!==(t=this.item.offsetHeight)&&void 0!==t?t:0;return e>0?{height:"".concat(e,"px")}:null},EnumLoggerType:function(){return o["w"]},userNickName:function(){var t=this.user;if(!t)return"-";var e=t.nickName;return e||"-"},userFaceText:function(){var t=this.userNickName;return t[t.length-1]},userFaceTitle:function(){var t=this.user;return t?"".concat(t.nickName,"(").concat(t.email,")"):null},isSelf:function(){var t;return(null===(t=this.user)||void 0===t?void 0:t.userKey)===this.cloudUserKey},user:function(){return this.item.user},isTourist:function(){var t;switch(null===(t=this.user)||void 0===t?void 0:t.authority){case o["m"].Admin:case o["m"].Designer:return!1}return!0},showMoreFolder:function(){return this.item.showMore[o["v"].Folder]},showMoreFile:function(){return this.item.showMore[o["v"].File]},showMoreArtboard:function(){return this.item.showMore[o["v"].Artboard]}},watch:{showMoreFolder:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))},showMoreFile:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))},showMoreArtboard:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight(!0)}))},visible:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight()}))},itemInView:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight()}))}},props:{item:Object,showType:Number,listViewRect:Object,allShowListItemSelect:Boolean},mounted:function(){var t=this;this.$nextTick((function(){t.resetBoxHeight()}))}},km=ym,Cm=(n("3c31"),Object(hr["a"])(km,sf,cf,!1,null,"00399f61",null)),Sm=Cm.exports,Om="folderlog-show",Im=Object(j["a"])(Object(j["a"])(Object(j["a"])(Object(j["a"])(Object(j["a"])(Object(j["a"])({},o["w"].Remove,1),o["w"].MoveTo,1),o["w"].Folder_Add,1),o["w"].Folder_Edit,1),o["w"].Folder_SetPreview,1),o["w"].Folder_CancelPreview,1),Am=Object(j["a"])(Object(j["a"])(Object(j["a"])(Object(j["a"])(Object(j["a"])(Object(j["a"])({},o["w"].Remove,1),o["w"].MoveTo,1),o["w"].NetDisk_LinkAdd,1),o["w"].NetDisk_LinkEdit,1),o["w"].NetDisk_FileReName,1),o["w"].NetDisk_FileUploadCompleted,1),Tm=Object(j["a"])(Object(j["a"])(Object(j["a"])(Object(j["a"])({},o["w"].Remove_ArtboardVer,1),o["w"].Remove,1),o["w"].MoveTo,1),o["w"].Artboard_Upload,1),jm={components:{NetworkLoading:us,CloudFolderLogItem:Sm},methods:{clickArtboard:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,s,c,l;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(i=t.guid,a=t.id,s=t.name,null!=i||null!=a){n.next=5;break}return n.abrupt("return");case 5:if(c=e.documentArtboards,l=c.find((function(t){if(t){var e=t.artboard;if(e){var n=e.cid,r=e.guid;return!!(a>0&&n===a||i&&i===r)||void 0}}})),l){n.next=22;break}if(!(a>0)){n.next=20;break}return n.prev=9,n.next=12,e.checkCloudItem(a,o["i"].Artboard);case 12:l=n.sent,e.goCloudPath({folderId:l.parentId,artboardGuid:l.guid,newWindow:!0}),n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](9),e.showTextTip(s?n.t0.toString().replace("[".concat(a,"]"),"[".concat(s,"]")):n.t0);case 19:return n.abrupt("return");case 20:return e.showTextTip("画板[".concat(s,"]已不在当前文件夹,可能已经被删除或移动")),n.abrupt("return");case 22:if(!e.inCloudViewerMode){n.next=33;break}if(!e.inArtboardMode){n.next=30;break}if(l.artboard.cid!==e.curArtboardId||null!=l.artboardVerData){n.next=27;break}return e.showTextTip("已切换到画板[".concat(l.artboard.name,"]")),n.abrupt("return");case 27:e.setCurArtboard(l),n.next=31;break;case 30:e.$store.commit("resetCenterArtboard",l.artboard);case 31:n.next=34;break;case 33:e.goCloudPath({folderId:e.cloudCurrentFolderId,artboardGuid:l.artboard.guid,newWindow:!1});case 34:case"end":return n.stop()}}),n,null,[[9,16]])})))()},clickFolder:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=3;break}return n.abrupt("return");case 3:if(a=t.id,s=t.name,null!=a){n.next=6;break}return n.abrupt("return");case 6:if(c=null===(i=e.cloudSubFolders)||void 0===i?void 0:i.find((function(t){return t.id===a})),!c){n.next=10;break}return e.goCloudPath({folderId:a,newWindow:!0}),n.abrupt("return");case 10:return n.prev=10,n.next=13,e.checkCloudItem(a,o["i"].Folder);case 13:e.goCloudPath({folderId:a,newWindow:!0}),n.next=19;break;case 16:n.prev=16,n.t0=n["catch"](10),e.showTextTip(s?n.t0.toString().replace("[".concat(a,"]"),"[".concat(s,"]")):n.t0);case 19:case"end":return n.stop()}}),n,null,[[10,16]])})))()},clickFile:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,s,c,l,u,d;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(a=t.secId,s=t.name,c=t.fileName,l=t.fileExt,a){n.next=5;break}return n.abrupt("return");case 5:if(u=null===(i=e.cloudSubFiles)||void 0===i?void 0:i.find((function(t){var e;return-1!==(null===(e=t.viewUrl)||void 0===e?void 0:e.indexOf(a))})),!u){n.next=9;break}return e.clickNetDiskFile(u),n.abrupt("return");case 9:return n.prev=9,n.next=12,e.checkCloudItem(a,o["i"].File);case 12:d=n.sent,e.clickNetDiskFile(d),n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](9),s||(s=c?c+l:""),e.showTextTip(s?n.t0.toString().replace("[".concat(a,"]"),"[".concat(s,"]")):n.t0);case 20:case"end":return n.stop()}}),n,null,[[9,16]])})))()},clickShowType:function(t){this.isRootFolder||(this.showType=t,t===o["v"].ALL?Object(c["jb"])(Om):Object(c["nb"])(Om,t))},clickReload:function(t){var e=this;setTimeout((function(){e._clickReload(t)}),10)},_clickReload:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.listFetchState!==c["a"].Fetching){n.next=2;break}return n.abrupt("return");case 2:if(e.errorText="",e.listFetchState=c["a"].Fetching,n.prev=4,i=e.pageIndex,a=e.list,t&&(i=0),0===i&&(a.splice(0),e.finish=!1),!e.isNotSupportCloudVersion){n.next=10;break}throw"-";case 10:return n.next=12,e.getFolderLogsAsync(i);case 12:0===e.pageIndex&&(e.updateTime=e.folderUpdateTimes),e.listFetchState=c["a"].Success,n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](4),e.listFetchState=c["a"].Error,e.isNotSupportCloudVersion?e.errorText="私有云版本过低(".concat(e.cloudVersion,"),请先升级私有云部署包"):e.errorText=n.t0;case 20:case"end":return n.stop()}}),n,null,[[4,16]])})))()},getFolderLogsAsync:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,s,u,d,h,f,m,p,b,v,g,w,x,y,k,C,S,O,I,A,T;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.inCloudMode){n.next=2;break}return n.abrupt("return",null);case 2:return i=new FormData,i.append("folderId",e.cloudCurrentFolderId),i.append("pageIndex",t>=0?t:0),a="getfolderlogsbyweb",n.next=8,e.fetchPostCloudApi(a,{timeout:1e4,abortKey:a,body:i});case 8:if(s=n.sent,Object(l["s"])(s)){n.next=11;break}throw new Error("返回值异常,无法解析数据:".concat(s));case 11:if(s.success){n.next=13;break}throw new Error(s.errMsg);case 13:u=s.data,d=u.list,h=u.users,f=u.finish,m=e.list,p={},m.forEach((function(t){p[t.id]=1})),t=s.data.pageIndex,h||(h={}),b=[],v=Date.now(),d.forEach((function(t){if(Object(l["s"])(t)&&!p[t.id]&&o["w"].defined(t.type)){t.user=h[t.userid];try{t.data=JSON.parse(t.data)}catch(n){return}e.resetTimeFormatItem(t,v),t.offsetHeight=0,t.offsetTop=0,t.showMore=Object(j["a"])(Object(j["a"])(Object(j["a"])({},o["v"].Folder,!1),o["v"].File,!1),o["v"].Artboard,!1),b.push(t),p[t.id]=1}})),g=3e5,w={},x=0,y=b.length;case 25:if(!(x<y)){n.next=50;break}if(k=b[x],C=new Date(k.date),k.type===o["w"].NetDisk_FileUploadCompleted){n.next=30;break}return n.abrupt("continue",47);case 30:S=k.userid,O=[],I=x+1;case 33:if(!(I<y)){n.next=46;break}if(A=b[I],A.type===o["w"].NetDisk_FileUploadCompleted&&A.userid===S){n.next=37;break}return n.abrupt("break",46);case 37:if(T=Math.abs(C-new Date(A.date)),!(T>g)){n.next=40;break}return n.abrupt("break",46);case 40:O.push(A.data),w[A.id]=1,x++;case 43:I++,n.next=33;break;case 46:O.length>0&&(O.unshift(k.data),k.data=O);case 47:x++,n.next=25;break;case 50:return b.forEach((function(t){if(!w[t.id]){switch(t.type){case o["w"].Artboard_Upload:case o["w"].MoveTo:case o["w"].Remove:var n,r=null!==(n=t.data)&&void 0!==n?n:{},i=r.artboards,a=r.files,s=r.folders,u=[i,a,s];u.forEach((function(t){Object(l["h"])(t)&&t.sort((function(t,e){return Object(c["eb"])(null===t||void 0===t?void 0:t.name,null===e||void 0===e?void 0:e.name)}))}));break;case o["w"].NetDisk_FileUploadCompleted:Object(l["h"])(t.data)&&t.data.sort((function(t,e){var n=null!==t&&void 0!==t?t:{},r=n.name,i=n.fileName,a=n.fileExt,o=null!==e&&void 0!==e?e:{},s=o.name,l=o.fileName,u=o.fileExt;return r||(r=i?i+a:""),s||(s=l?l+u:""),Object(c["eb"])(r,s)}));break}t.visibleInFolder=e.isFolderItem(t),t.visibleInFile=e.isFileItem(t),t.visibleInArtboard=e.isArtboardItem(t),m.push(t)}})),e.finish=f,e.pageIndex=t,n.abrupt("return",d);case 54:case"end":return n.stop()}}),n)})))()},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.notClickClose?t.notClickClose=!1:t.logVisible=!1}),50)},needReloadOnOpen:function(){var t=this.updateTime,e=this.folderUpdateTimes;return e!=t},resetTimeFormatItem:function(t,e){try{var n,r=null!==(n=t._lastFormatTime)&&void 0!==n?n:0;if(Math.abs(e-r)<=1e4)return;t.dateStr=Object(l["b"])(t.date)}catch(i){t.dateStr=t.date}t._lastFormatTime=e},resetTimeFormat:function(t){var e=this,n=Date.now();(null!==t&&void 0!==t?t:this.showList).forEach((function(t){e.resetTimeFormatItem(t,n)}))},onListScroll:function(t){this.scrollTop=t.target.scrollTop},getBoxHeight:function(){if(this.logVisible){var t=this.$refs.list;t&&(this.boxHeight=t.offsetHeight)}},isFolderItem:function(t){if(Im[t.type]){if(t.type===o["w"].Remove||t.type===o["w"].MoveTo){var e,n=null===(e=t.data)||void 0===e?void 0:e.folders;if(!n||0===n.length)return!1}return!0}return!1},isFileItem:function(t){if(Am[t.type]){if(t.type===o["w"].Remove||t.type===o["w"].MoveTo){var e,n=null===(e=t.data)||void 0===e?void 0:e.files;if(!n||0===n.length)return!1}return!0}return!1},isArtboardItem:function(t){if(Tm[t.type]){if(t.type===o["w"].Remove||t.type===o["w"].MoveTo){var e,n=null===(e=t.data)||void 0===e?void 0:e.artboards;if(!n||0===n.length)return!1}return!0}return!1},resetShowListItemsOffsetTop:function(){var t=this.showList,e=this.allShowListItemSelect;if(e){var n=0;t.forEach((function(t){t.offsetTop=n,n+=t.offsetHeight}))}},onResize:function(){var t=this;this.logVisible&&this.$nextTick((function(){t.getBoxHeight()}))}},computed:{allShowListItemSelect:function(){var t=this.showList;return!t.find((function(t){return 0===t.offsetHeight}))},listViewRect:function(){return{x:0,y:this.scrollTop,height:this.boxHeight,width:1e3}},listCls:function(){var t=this.showType,e=this.isRootFolder,n={};if(e)n["in-folder"]=1;else switch(t){case o["v"].Artboard:n["in-artboard"]=1;break;case o["v"].File:n["in-file"]=1;break;case o["v"].Folder:n["in-folder"]=1;break;default:n["in-artboard"]=1,n["in-file"]=1,n["in-folder"]=1;break}return n},isRootFolder:function(){return 0===this.cloudCurrentFolderId},showArtboardLogNow:function(){return this.$store.state.folderPrecis.showArtboardLogNow},FetchState:function(){return c["a"]},EnumLogShowType:function(){return o["v"]},folderUpdateTimes:function(){return this.$store.state.cloud.folderUpdateTimes},isNotSupportCloudVersion:function(){var t=this.cloudVersion;return t&&Object(l["l"])(t)},artboardLogList:function(){var t=this.list;return t.filter((function(t){return t.visibleInArtboard}))},folderLogList:function(){var t=this.list;return t.filter((function(t){return t.visibleInFolder}))},fileLogList:function(){var t=this.list;return t.filter((function(t){return t.visibleInFile}))},showList:function(){if(this.isRootFolder)return this.folderLogList;switch(this.showType){case o["v"].Artboard:return this.artboardLogList;case o["v"].File:return this.fileLogList;case o["v"].Folder:return this.folderLogList;default:return this.list}}},watch:{allShowListItemSelect:function(){this.resetShowListItemsOffsetTop()},showArtboardLogNow:function(t){t>0&&(this.clickShowType(o["v"].Artboard),this.logVisible=!0)},showType:function(){var t=this;this.resetShowListItemsOffsetTop(),this.$nextTick((function(){var e=t.$refs.list;e&&(e.scrollTop=0)}))},logVisible:function(t){var e=this;t?(this.$nextTick((function(){e.getBoxHeight()})),window.addEventListener("click",this.closeSelf,!0),this.needReloadOnOpen()?this.clickReload(!0):this.resetTimeFormat()):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},data:function(){return{finish:!1,scrollTop:0,boxHeight:0,lineHeight:65,listFetchState:c["a"].Normal,logVisible:!1,closeHandle:0,notClickClose:!1,updateTime:0,showType:o["v"].ALL,errorText:"",pageIndex:0,list:[]}},mounted:function(){var t=Object(c["I"])(Om,!0);switch(t){case o["v"].Artboard:case o["v"].File:case o["v"].Folder:this.showType=t;break}this.getBoxHeight()},created:function(){window.addEventListener("resize",this.onResize)},beforeDestroy:function(){window.removeEventListener("click",this.closeSelf,!0),window.removeEventListener("resize",this.onResize),clearTimeout(this.closeHandle)}},Fm=jm,Mm=(n("6fa0"),Object(hr["a"])(Fm,af,of,!1,null,"010b2710",null)),_m=Mm.exports,Lm=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"pop-helper",on:{click:function(e){t.notClickClose=!0}}},[e("div",{staticClass:"box"},[t.inInteractionMode?e("div",{staticClass:"scene"},[e("h5",[t._v("原型预览快捷键")]),t._m(0),t._m(1),t._m(2),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到上1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↑")])])]),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到下1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↓")])])])]):e("div",{staticClass:"scene"},[e("h5",[t._v("场景快捷键")]),t._m(3),t._m(4),e("dl",{staticClass:"text"},[e("dt",[t._v("缩放视图")]),e("dd",[e("span",{staticClass:"key"},[t._v("鼠标滚轮")]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))])])]),t._m(5),e("h5",[t._v("画板详情快捷键")]),t._m(6),t._m(7),t._m(8),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到上1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↑")])])]),e("dl",{staticClass:"text"},[e("dt",[t._v("切换到下1个画板")]),e("dd",[e("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("↓")])])]),e("h5",[t._v("获取指定2个节点坐标关系")]),e("div",{staticClass:"text"},[t._v("1.左键单击选择1个节点.")]),t._m(9),e("div",{staticClass:"text"},[t._v("*多次单击可穿透选中下方被遮挡节点")])])])]):t._e()},Dm=[function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("屏幕全屏切换")]),e("dd",[e("span",{staticClass:"key"},[t._v("F1")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("网页全屏切换")]),e("dd",[e("span",{staticClass:"key"},[t._v("F2")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("显隐左侧边栏")]),e("dd",[e("span",{staticClass:"key"},[t._v("F3")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("上下视图平移")]),e("dd",[e("span",{staticClass:"key"},[t._v("鼠标滚轮")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("左右视图平移")]),e("dd",[e("span",{staticClass:"key"},[t._v("鼠标滚轮")]),e("span",[t._v("+")]),e("span",{staticClass:"key"},[t._v("shift")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("span",[t._v("缩放/平移视图时同时按下")]),e("span",{staticClass:"key"},[t._v("alt")]),e("span",[t._v("键可加速操作")])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("切换到画板列表")]),e("dd",[e("span",{staticClass:"key"},[t._v("F1")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("切换到图层列表")]),e("dd",[e("span",{staticClass:"key"},[t._v("F2")])])])},function(){var t=this,e=t._self._c;return e("dl",{staticClass:"text"},[e("dt",[t._v("显隐左侧边栏")]),e("dd",[e("span",{staticClass:"key"},[t._v("F3")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("span",[t._v("2.按住")]),e("span",{staticClass:"key"},[t._v("shift")]),e("span",[t._v(",左键单击需要比对的节点.")])])}],Nm={methods:{clickHelper:function(t){this.$store.commit("setHelperVisible",t)},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.notClickClose?t.notClickClose=!1:t.clickHelper(!1)}),50)}},computed:{commandKey:function(){return this.inMacOS?"command":"ctrl"},visible:function(){return this.$store.state.helper.visible}},data:function(){return{closeHandle:0,notClickClose:!1}},watch:{visible:function(t){t?window.addEventListener("click",this.closeSelf,!0):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle)}},Em=Nm,Pm=(n("9b3d"),Object(hr["a"])(Em,Lm,Dm,!1,null,"2fdbaa33",null)),Rm=Pm.exports,Vm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"path-nav"},[t.inCloudMode?e("CloudFolders"):t._e(),e("div",{staticClass:"navs"},t._l(t.navs,(function(n,r){var i;return e("div",{key:r,staticClass:"nav-item",class:{"no-link":!n.link}},[e("a",{staticClass:"name",attrs:{href:null!==(i=n.aHref)&&void 0!==i?i:"javascript:;",title:n.name},on:{click:function(e){return e.preventDefault(),t.clickNav(n)}}},[t._v(t._s(n.name))]),t.showArtboardPages&&n.selectPages?e("PathNavArtboardPages"):t._e()],1)})),0)],1)},Bm=[],Um=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-folders"},[e("div",{ref:"navHome",staticClass:"nav-home"},[e("div",{staticClass:"btn-home",on:{click:function(e){return t.clickGoHome()}}}),e("div",{staticClass:"line"}),e("div",{staticClass:"btn-cloud-folders",class:{on:t.allFoldersBoxVisible},on:{click:function(e){return t.setAllFoldersBoxVisible(!t.allFoldersBoxVisible,!0)}}})]),e("CloudFoldersBox",{on:{hideBox:t.hideBox}})],1)},Hm=[],Wm=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.allFoldersBoxVisible,expression:"allFoldersBoxVisible"}],staticClass:"cloud-folders-box",on:{click:function(e){t.notAutoHideThisTime=!0}}},[e("div",{staticClass:"head"},[t.isSupportWebItemSearch?t._e():e("div",{staticClass:"update-tip"},[e("a",{attrs:{target:"_blank",href:t.cloudPageUrl}},[t._v("升级私有云部署包")]),t._v("可全局搜索画板、文件")]),e("div",{staticClass:"filters"},[e("div",{staticClass:"search",class:{on:t.inputFocused||t.inSearchMode}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchInput",attrs:{autocomplete:"off",type:"text",placeholder:t.searchInputDefaultText,maxlength:"20",spellcheck:"false"},domProps:{value:t.searchText},on:{focus:function(e){t.inputFocused=!0},blur:function(e){t.inputFocused=!1},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),t.inSearchMode?e("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:t.cleanSearchText}}):t._e()]),!t.inCloudMode||t.inSearchMode||t.inputFocused?t._e():e("FolderNavSortMenu",{attrs:{mini:!0,supportRectSort:!1}})],1)]),e("div",{ref:"box",staticClass:"box",on:{scroll:t.onBoxScroll}},[e("div",{staticClass:"real-height",class:{"in-search":t.inSearchMode},style:{height:t.boxRealHeight}},[t.fetchState===t.FetchState.Fetching||t.fetchState===t.FetchState.Error?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取文件夹信息...",errorText:t.errorText,isLoading:t.fetchState===t.FetchState.Fetching,isError:t.fetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t.isSupportWebItemSearch&&t.inSearchMode&&(t.searchState===t.FetchState.Fetching||t.searchState===t.FetchState.Error)?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在搜索关键词 ".concat(t.searchText),errorText:t.searchErrorText,isLoading:t.searchState===t.FetchState.Fetching,isError:t.searchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.goSearch()}}})],1):0===t.showList.length?e("div",{staticClass:"empty",domProps:{textContent:t._s(t.emptyText)}}):e("div",{staticClass:"front",style:t.frontStyle},[t._l(t.showList,(function(n){return[n.isArtboard?e("CloudArtboardItem",{key:n.key,attrs:{artboard:n.folder,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder}}):n.isFile?e("CloudFileItem",{key:n.key,attrs:{file:n.folder,searchText:t.searchText,inSearchMode:t.inSearchMode},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder}}):e("CloudFolderItem",{key:n.key,attrs:{folder:n.folder,inSearchMode:t.inSearchMode,searchText:t.searchText,isSupportNetDiskFile:t.isSupportNetDiskFile},on:{hideBoxNotClean:t.hideBoxNotClean,cleanSearchText:t.cleanSearchText,onContextMenu:t.onContextMenu,clickGoParentFolder:t.clickGoParentFolder}})]}))],2)])]),t.contextMenu.visible?e("CloudItemMenu",{attrs:{x:t.contextMenu.x,y:t.contextMenu.y,item:t.contextMenu.item},on:{close:t.hideContextMenu,cleanSearchText:t.cleanSearchText,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},$m=[],Gm=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-folder-item",class:t.itemClass,attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoFold.apply(null,arguments)}}},[e("div",{staticClass:"triangle",class:{on:!t.inSearchMode&&t.hasChild},style:t.style,attrs:{title:"展开/收起"},on:{click:t.clickChildVisible}}),e("div",{staticClass:"icon",class:{private:t.isFolderSharePrivateCode,"share-sm":t.isFolderShareSpecifyMembers},on:{click:t.clickChildVisible}}),e("div",{staticClass:"name",on:{click:t.clickGoFold}},[t._l(t.texts,(function(n,r){return e("span",{key:r,class:{light:n.light}},[t._v(t._s(n.text))])})),e("span",{staticClass:"art-count"},[t._v(t._s(t.countText))])],2)]),t.inSearchMode?e("ItemFolderParents",{attrs:{item:t.folder},on:{clickItem:t.clickGoFold,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},zm=[],Ym=function(){var t=this,e=t._self._c;return t.showAllParents||t.showOnlyParent?e("div",{staticClass:"parents",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickItem(t.item)}}},[t.showAllParents?t._l(t.item.parents,(function(n,r){return e("div",{key:r},[e("span",{on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoParentFolder({parentId:n.id})}}},[t._v(t._s(n.name))])])})):t.showOnlyParent?[t.item.parentId>0?e("span",[t._v("...")]):t._e(),e("div",[e("span",{on:{click:function(e){return t.clickGoParentFolder(t.item)}}},[t._v(t._s(t.item.parent.name))])])]:t._e()],2):t._e()},Xm=[],Km={methods:{clickItem:function(t){this.$emit("clickItem",t)},clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)}},computed:{showAllParents:function(){return!!this.item.parents},showOnlyParent:function(){return!this.showAllParents&&!!this.item.parent}},props:{item:Object}},qm=Km,Qm=(n("813d"),Object(hr["a"])(qm,Ym,Xm,!1,null,"4e0cf502",null)),Jm=Qm.exports,Zm={components:{ItemFolderParents:Jm},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){this.inSearchMode&&this.$emit("onContextMenu",t,{item:this.folder,isFolder:!0})},clickChildVisible:function(){var t,e,n=this.folder,r=this.inSearchMode,i=this.hasChild;if(!r&&i){var a=!n.childsVisible;if(n.childsVisible=a,0!==(null!==(t=null===(e=n.childs)||void 0===e?void 0:e.length)&&void 0!==t?t:0)&&0!==n.id){var s=Object(c["P"])(o["a"],!0);Object(l["s"])(s)||(s={});var u=n.id;a?s[u]=1:delete s[u],Object(c["pb"])(o["a"],s)}}},clickGoFold:function(){var t=this.folder.id,e=this.inArtboardMode,n=this.cloudCurrentFolderId;if(n===t)return e&&this.setCurArtboard(null),void this.$emit("cleanSearchText");Object(c["T"])(t)}},computed:{useTimeSort:function(){return this.$store.state.cloudListSort.sortType===o["k"].Date},isFolderSharePrivateCode:function(){return this.folder.shareMode===o["r"].PrivateCode},isFolderShareSpecifyMembers:function(){return this.folder.shareMode===o["r"].SpecifyMembers},userSpecifyMemberAuthority:function(){var t;return null!==(t=this.folder.userSpecifyMemberAuthority)&&void 0!==t?t:o["s"].ReadWrite},itemClass:function(){var t=this.folder,e=this.currentSelect,n=this.hasChild,r=this.inSearchMode,i={on:e,open:t.childsVisible&&n,max:r};if(null!=t.color){var a=o["p"].getName(t.color);a&&(i[a]=1)}return i},texts:function(){var t=this.folder.name;return this.inSearchMode?Object(c["qb"])(t,this.searchText):[{light:!1,text:t}]},countText:function(){var t,e=this.folder,n=this.useTimeSort,r=this.inSearchMode;return"(".concat(n&&!r?Object(l["b"])(e.updateTimes):e.artboardCount+(null!==(t=e.fileCount)&&void 0!==t?t:0)+e.folderCount,")")},title:function(){return Re(this.folder)},hasChild:function(){var t,e=this.folder.childs;return(null!==(t=null===e||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0},style:function(){var t=this.folder.deepCount;return null==t&&(t=0),this.inSearchMode&&(t=0),{"padding-left":t*this.deepPadding+"px"}},currentSelect:function(){var t=this.cloudCurrentFolderId,e=this.folder;return t===e.id}},data:function(){return{deepPadding:16}},props:{folder:Object,inSearchMode:Boolean,searchText:String,isSupportNetDiskFile:Boolean}},tp=Zm,ep=(n("374a"),Object(hr["a"])(tp,Gm,zm,!1,null,"16680bf5",null)),np=ep.exports,rp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-artboard-item",class:{on:t.currentSelect,max:t.inSearchMode},attrs:{title:t.title},on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickGoArtboard}},[e("div",{staticClass:"icon"}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,r){return e("span",{key:r,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode?e("ItemFolderParents",{attrs:{item:t.artboard},on:{clickItem:t.clickGoArtboard,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},ip=[],ap={components:{ItemFolderParents:Jm},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){this.inSearchMode&&this.$emit("onContextMenu",t,{item:this.artboard,isArtboard:!0})},clickGoArtboard:function(){var t=this.artboard,e=t.parentId,n=t.guid,r=t.viewUrl,i=this.cloudCurrentFolderId,a=this.curArtboardGuid;if(i!==e)location.href=r;else if(a!=n){var o=this.documentArtboards.find((function(t){var e;return(null===(e=t.artboard)||void 0===e?void 0:e.guid)===n}));if(o)return this.setCurArtboard(o),void this.$emit("cleanSearchText");location.href=r}}},computed:{texts:function(){return Object(c["qb"])(this.artboard.name,this.searchText)},title:function(){return Ue(this.artboard)},currentSelect:function(){var t=this.cloudCurrentFolderId,e=this.artboard,n=this.curArtboardGuid;return t===e.parentId&&n===e.guid}},props:{artboard:Object,inSearchMode:Boolean,searchText:String}},op=ap,sp=(n("6e20"),Object(hr["a"])(op,rp,ip,!1,null,"2ab72066",null)),cp=sp.exports,lp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cloud-item cloud-file-item",class:{max:t.inSearchMode,on:t.currentSelect},attrs:{title:t.title},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickGoFile.apply(null,arguments)},contextmenu:function(e){return e.preventDefault(),t.onContextMenu.apply(null,arguments)}}},[e("div",{staticClass:"info",on:{click:t.clickGoFile}},[e("span",{staticClass:"icon-netdiskfile",class:t.iconCls}),e("div",{staticClass:"name"},t._l(t.texts,(function(n,r){return e("span",{key:r,class:{light:n.light}},[t._v(t._s(n.text))])})),0)]),t.inSearchMode?e("ItemFolderParents",{attrs:{item:t.file},on:{clickItem:t.clickGoFile,clickGoParentFolder:t.clickGoParentFolder}}):t._e()],1)},up=[],dp={components:{ItemFolderParents:Jm},methods:{clickGoParentFolder:function(t){this.$emit("clickGoParentFolder",t)},onContextMenu:function(t){this.inSearchMode&&this.$emit("onContextMenu",t,{item:this.file,isFile:!0})},clickGoFile:function(){this.clickNetDiskFile(this.file)}},computed:{texts:function(){return Object(c["qb"])(this.file.name,this.searchText)},iconCls:function(){var t=this.file;return t?o["y"].getName(t.fileType,o["z"].Small):null},title:function(){return Be(this.file)},currentSelect:function(){var t=this.cloudCurrentFolderId,e=this.file,n=this.curNetDiskFile;return t===e.parentId&&(null===n||void 0===n?void 0:n.viewUrl)===e.viewUrl}},props:{file:Object,inSearchMode:Boolean,searchText:String}},hp=dp,fp=(n("f9b2"),Object(hr["a"])(hp,lp,up,!1,null,"1c5f3daa",null)),mp=fp.exports,pp=function(){var t=this,e=t._self._c;return t.item?e("div",{staticClass:"cloud-item-menu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[t.item.isFile?[t.canOnlineView?e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.clickNetDiskFile(t.item.item)}}},[t._v("在线查看")]):t._e(),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.copyNetdiskFileViewUrl(t.item.item)}}},[t._v("复制链接")]),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.clickDownloadNetDiskFile(t.item.item)}}},[t._v("下载文件")])]:t._e(),t.item.isArtboard?e("a",{attrs:{href:"javascript:;"},on:{click:t.clickGoArtboard}},[t._v("查看画板")]):t._e(),e("a",{attrs:{href:"javascript:;"},on:{click:t.clickGoParentFolder}},[t._v("前往所在文件夹")])],2):t._e()},bp=[],vp={methods:{close:function(){this.$emit("close")},clickGoArtboard:function(){var t=this.item.item,e=t.parentId,n=t.guid,r=t.viewUrl,i=this.cloudCurrentFolderId,a=this.curArtboardGuid;if(i!==e)location.href=r;else if(a!=n){var o=this.documentArtboards.find((function(t){var e;return(null===(e=t.artboard)||void 0===e?void 0:e.guid)===n}));if(o)return this.setCurArtboard(o),void this.$emit("cleanSearchText");location.href=r}},clickGoParentFolder:function(){this.$emit("clickGoParentFolder",this.item.item)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.close()}),150))},initEvent:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},computed:{canOnlineView:function(){var t=this.item;return!!t&&(!!t.isFile&&this.isNetdiskFileCanOnlineView(t.item))},menuStyle:function(){return{top:this.y+"px",left:this.x+"px"}}},watch:{item:function(t){this.initEvent(!!t)}},data:function(){return{handle:0}},props:{item:Object,x:Number,y:Number},beforeDestroy:function(){this.initEvent(!1)},created:function(){this.initEvent(!!this.item)}},gp=vp,wp=(n("e0ff"),Object(hr["a"])(gp,pp,bp,!1,null,"84e26ddc",null)),xp=wp.exports,yp={components:{CloudFolderItem:np,NetworkLoading:us,CloudArtboardItem:cp,CloudFileItem:mp,CloudItemMenu:xp,FolderNavSortMenu:Cu},methods:{clickGoParentFolder:function(t){var e=t.parentId,n=this.inArtboardMode,r=this.cloudCurrentFolderId,i=this.inCloudViewerMode;if(i&&r===e)return n&&this.setCurArtboard(null),void this.cleanSearchText();Object(c["T"])(e)},hideContextMenu:function(){this.contextMenu.visible=!1},onContextMenu:function(t,e){if(e){var n=this.contextMenu,r=t.pageX,i=t.pageY;n.x=r,n.y=i,n.visible=!0,n.item=e}},cleanSearchText:function(){var t;this.searchText="",null===(t=this.$refs.searchInput)||void 0===t||t.focus()},clickReload:function(){Object(l["m"])(this.cloudVersion)?document.location.reload():this.getFoldersData()},hideBoxNotClean:function(){this.$emit("hideBox")},getFoldersData:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.allFoldersBoxVisible){e.next=2;break}return e.abrupt("return");case 2:if(t.fetchState!==c["a"].Fetching){e.next=4;break}return e.abrupt("return");case 4:return t.fetchState=c["a"].Fetching,t.errorText=null,e.prev=6,e.next=9,t.getAllFolders(!1,!0);case 9:n=e.sent,t.fetchState=c["a"].Success,t.folderData=n,t.scrollToCurrentFolder(),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](6),t.fetchState=c["a"].Error,t.errorText=e.t0;case 19:case"end":return e.stop()}}),e,null,[[6,15]])})))()},scrollToCurrentFolder:function(){var t=this.cloudCurrentFolderId,e=this.renderList,n=this.lineHeight,r=this.boxHeight,i=this.boxScrollTop,a=this.folderData,o=this.inSearchMode;if(a){var s=e.findIndex((function(e){return e.id===t}));if(-1===s&&!o){var c=a.folders.find((function(e){return e.id===t}));if(null!=c){var l={};while(c&&!l[c.id])l[c.id]=1,c.id>0&&0!==c.childs.length&&(c.childsVisible=!0),c=c.parent;s=this.renderList.findIndex((function(e){return e.id===t}))}}if(-1!==s){var u=Math.round(s*n-r/2);u!==i&&this.setScrollTop(u)}}},setScrollTop:function(t){var e=this;this.$nextTick((function(){var n=e.$refs.box;n&&(n.scrollTop=t)}))},getFolderVisible:function(t){if(!t)return!1;if(!(t.id>=0))return!1;if(t.id>0&&!t.parent)return!1;while(null!=(t=t.parent))if(!t.childsVisible)return!1;return!0},resetBoxData:function(){var t=this;this.allFoldersBoxVisible&&this.$nextTick((function(){var e=t.$refs.box;e&&(t.boxHeight=e.offsetHeight,t.boxScrollTop=e.scrollTop)}))},onResize:function(){this.resetBoxData()},onBoxScroll:function(){var t=this.$refs.box;t&&(this.boxScrollTop=t.scrollTop)},goSearch:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isSupportWebItemSearch){e.next=2;break}return e.abrupt("return");case 2:if(n=t.searchText,Object(l["i"])(n)){e.next=5;break}return e.abrupt("return");case 5:return i=t.searchStatus=Object(c["lb"])(),t.searchState=c["a"].Fetching,e.prev=7,e.next=10,t.searchWebItem(n);case 10:if(a=e.sent,i==t.searchStatus){e.next=13;break}return e.abrupt("return");case 13:if(Object(l["h"])(a)){e.next=15;break}throw new Error("返回值格式异常");case 15:t.searchState=c["a"].Success,t.searchData=a,e.next=25;break;case 19:if(e.prev=19,e.t0=e["catch"](7),i==t.searchStatus){e.next=23;break}return e.abrupt("return");case 23:t.searchErrorText=e.t0,t.searchState=c["a"].Error;case 25:case"end":return e.stop()}}),e,null,[[7,19]])})))()}},computed:{cloudPageUrl:function(){return"https://www.marklion.cn/cloud.shtml?invoke=MarkLion.WebSearch&ver=".concat(this.cloudVersion,"&deploy=1")},searchInputDefaultText:function(){return this.isSupportWebItemSearch?"搜索文件夹、文件和画板":"搜索文件夹"},isSupportWebItemSearch:function(){return this.inCloudMode&&!Object(l["r"])(this.cloudVersion)},isSupportNetDiskFile:function(){return this.inCloudMode&&!Object(l["o"])(this.cloudVersion)},emptyText:function(){return this.isSupportWebItemSearch?this.inSearchMode?'未找到包含 "'.concat(this.searchText,'" 的文件夹、文件或画板'):"没有找到文件夹、文件或画板":this.inSearchMode?'未找到文件夹名包含 "'.concat(this.searchText,'" 的文件夹'):"没有找到文件夹"},boxRealHeight:function(){return this.renderList.length*this.lineHeight+2+"px"},inSearchMode:function(){return this.searchText.length>0},frontStyle:function(){var t=this.showList,e=this.lineHeight,n=0;if(t.length>0){var r=t[0].index;n=r*e}return{"margin-top":n+"px"}},showList:function(){var t=this.renderList,e=this.preloadCount,n=this.lineHeight,r=this.boxScrollTop,i=this.boxHeight,a=e*n,s=new d["a"],c=(new d["a"]).set(0,r-a,100,i+2*a),l=[];return t.forEach((function(t,e){var r;(s.set(0,e*n,100,n),Object(d["f"])(s,c))&&l.push({folder:t,index:e,key:null!==(r=t.id)&&void 0!==r?r:t.url,isArtboard:t.localSearchType===o["E"].Artboard,isFile:t.localSearchType===o["E"].File})})),l},renderList:function(){var t,e=this,n=this.fetchState,r=this.inSearchMode,i=this.cloudListSort,a=this.folderData;if(n!==c["a"].Success)return[];if(r){if(this.isSupportWebItemSearch){var o=this.searchState,s=this.searchData;return o==c["a"].Success?s:[]}var l=this.searchText;l=l.toLowerCase(),t=a.folders.filter((function(t){return-1!==t.nameLower.indexOf(l)}))}else t=a.sortBy(i).filter((function(t){return e.getFolderVisible(t)}));return t},lineHeight:function(){return this.inSearchMode?46:32},cloudListSort:function(){return this.$store.state.cloudListSort},cloudListSortKey:function(){var t=this.cloudListSort;return"".concat(t.sortType,":").concat(t.orderDesc)}},watch:{cloudListSortKey:function(){this.scrollToCurrentFolder()},searchText:function(t){t&&this.setScrollTop(0),this.goSearch()},allFoldersBoxVisible:function(){this.resetBoxData(),this.getFoldersData()}},data:function(){return{inputFocused:!1,notAutoHideThisTime:!1,FetchState:c["a"],folderData:null,fetchState:c["a"].Normal,errorText:null,searchText:"",boxHeight:0,boxScrollTop:0,preloadCount:1,searchState:c["a"].Normal,searchErrorText:null,searchData:null,searchHandle:0,searchStatus:null,contextMenu:{visible:!1,x:0,y:0,item:null}}},created:function(){window.addEventListener("resize",this.onResize)},beforeDestroy:function(){clearTimeout(this.autoHideHandle),window.removeEventListener("resize",this.onResize)},mounted:function(){this.resetBoxData(),this.getFoldersData()}},kp=yp,Cp=(n("d395"),Object(hr["a"])(kp,Wm,$m,!1,null,"a86ca466",null)),Sp=Cp.exports,Op={components:{CloudFoldersBox:Sp},methods:{clickGoHome:function(){Object(c["T"])(0)},hideBox:function(){this.setAllFoldersBoxVisible(!1,!1)},setAllFoldersBoxVisible:function(t,e){this.$store.commit("setAllFoldersBoxVisible",t),e&&Object(c["kb"])(o["a"])},setGuideRect:function(){this.setBeginnerGuideRect(o["h"].GlobalCloudFolderBoxMenu,"navHome",o["g"].TopLeft)}},computed:{allFoldersBoxVisible:function(){return this.$store.state.cloud.allFoldersBoxVisible}},watch:{inArtboardMode:function(){this.hideBox()}},mounted:function(){this.setGuideRect()}},Ip=Op,Ap=(n("5781"),Object(hr["a"])(Ip,Um,Hm,!1,null,"05e23556",null)),Tp=Ap.exports,jp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-artboard-page"},[e("div",{staticClass:"page-current",attrs:{title:"点击切换显示的页面"},on:{click:function(e){t.visible=!t.visible}}},[t._v(t._s(t.currentPageName))]),t.visible?e("div",{staticClass:"page-list"},[e("ul",[e("li",{class:{on:!t.filterDocumentGuid,"nav-all":!0},attrs:{title:t.allPageName},on:{click:function(e){return t.clickItem(null)}}},[t._v(" "+t._s(t.allPageName)),e("span",{staticClass:"art-count"},[t._v("("+t._s(t.documentArtboards.length)+")")])]),t._l(t.sortDocumentsWithSketchDocument,(function(n){return[n.docSeparator?e("li",{key:n.guid+"_sep",staticClass:"sep"}):t._e(),e("li",{key:n.guid,class:t.itemCls(n),attrs:{title:n.docFullName},on:{click:function(e){return t.clickItem(n)}}},[t._v(" "+t._s(n.name)),e("span",{staticClass:"art-count"},[t._v("("+t._s(n.arts.length)+")")])])]}))],2)]):t._e()])},Fp=[],Mp={methods:{itemCls:function(t){var e=o["x"].getClassName(t.type);return Object(j["a"])(Object(j["a"])({},e,!!e),"on",this.filterDocumentGuid===t.guid)},clickItem:function(t){var e,n=null!==(e=null===t||void 0===t?void 0:t.guid)&&void 0!==e?e:null;this.$store.commit("setFilterDocumentGuid",n)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.visible=!1}),100))}},computed:{sortDocumentsWithSketchDocument:function(){return this.$store.state.sortDocumentsWithSketchDocument},currentPageName:function(){var t,e,n,r=this.filterDocumentGuid;return r&&(n=this.sortDocumentsWithSketchDocument.find((function(t){return t.guid===r}))),null!==(t=null===(e=n)||void 0===e?void 0:e.name)&&void 0!==t?t:this.allPageName}},watch:{visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},data:function(){return{allPageName:"全部页面",visible:!1,handle:0}},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)}},_p=Mp,Lp=(n("35e8"),Object(hr["a"])(_p,jp,Fp,!1,null,"3e26012c",null)),Dp=Lp.exports,Np={components:{CloudFolders:Tp,PathNavArtboardPages:Dp},methods:{clickNav:function(t){t.link&&setTimeout((function(){t.link()}),100)}},computed:{showArtboardPages:function(){return!this.inNetDiskFileMode&&this.documents.length>1},navs:function(){var t=this,e=[],n=this.inCloudMode,r=this.inCloudViewerMode,i=this.inArtboardMode,a=this.curArtboard,o=this.cloudCurrentFolderId,s=this.curNetDiskFile,l=this.inNetDiskFileMode;if(n){var u=this.cloudName,d=this.cloudParentFolder;i||(0===o?e.push({name:u||"私有云根目录",link:null}):d&&e.push({name:0===d.id&&u||d.name,id:d.id,aHref:Object(c["C"])(d.id),link:function(){Object(c["T"])(this.id)}}))}if(n&&this.cloudFolderNotFound?e.push({name:this.cloudFolderInSpecify?"没有访问权限":"链接已失效",link:null}):n&&0==o||e.push({name:this.documentName,selectPages:!0,link:i?function(){t.setCurArtboard(null)}:l?function(){Object(c["T"])(o)}:null,aHref:r||l?Object(c["C"])(o):null}),i){var h,f,m=null!==(h=null===a||void 0===a||null===(f=a.artboard)||void 0===f?void 0:f.name)&&void 0!==h?h:"";m&&e.push({name:m,link:null})}else if(l){var p,b=null!==(p=null===s||void 0===s?void 0:s.name)&&void 0!==p?p:"";b&&e.push({name:b,link:null})}return e}}},Ep=Np,Pp=(n("183f"),Object(hr["a"])(Ep,Vm,Bm,!1,null,"08932a6a",null)),Rp=Pp.exports,Vp=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-info"},[e("div",{staticClass:"nickname",class:{on:t.menuVisible},attrs:{title:t.showTitle},on:{click:t.clickShowMenu}},[e("div",{ref:"nickName",staticClass:"nickname-guide"}),e("UserFace",{attrs:{canClick:!1}})],1),t.menuVisible?e("menu",{class:{min:!t.inCloudMode},on:{click:t.clickMenu}},[t.cloudIsLogin?[e("div",{staticClass:"u-info",attrs:{title:t.showTitle}},[e("div",{staticClass:"name"},[t._v(t._s(t.showName))]),e("div",{staticClass:"email"},[t._v(t._s(t.showEmail))])]),e("div",{staticClass:"line"}),e("div",{staticClass:"item",on:{click:function(e){return t.clickSetNickName()}}},[t._v("修改昵称")])]:t._e(),t.inCloudViewerMode?[e("div",{staticClass:"item",attrs:{title:"在[画布视图]模式中开启极速渲染模式,画板再多也不卡顿更流畅"},on:{click:t.clickArtRenderInCanvasMode}},[t._v(" 极速模式 "),e("Checkbox2",{attrs:{text:"",selected:t.artRenderInCanvasMode},on:{click:t.clickEmpty}})],1),t.inArtboardMode?t._e():e("div",{staticClass:"item",attrs:{title:"在列表页的[画布视图]模式中, 展示从XD/Sketch/Figma导出的原型连线"},on:{click:t.clickArtboardShowInteractionLine}},[t._v(" 显示原型连线 "),e("Checkbox2",{attrs:{text:"",selected:t.artboardShowInteractionLine},on:{click:t.clickEmpty}})],1),t.inArtboardMode?[e("div",{staticClass:"item",attrs:{title:"启用后, 带评注的评论将在[标注]模式下通过浮层展示"},on:{click:t.clickPointCommentShowAlways}},[t._v(" 标注显示评注 "),e("Checkbox2",{attrs:{text:"",selected:t.pointCommentShowAlways},on:{click:t.clickEmpty}})],1),e("div",{staticClass:"item",attrs:{title:"隐藏后，[标注]模式下切图图层边缘不会再标识虚线框"},on:{click:t.clickSliceBorderLineHide}},[t._v(" 隐藏切图虚线框 "),e("Checkbox2",{attrs:{text:"",selected:t.sliceBorderLineHide},on:{click:t.clickEmpty}})],1)]:t._e()]:t._e(),t.inInteractionMode?[e("div",{staticClass:"item",attrs:{title:"开启后,热区将一直显示在原型所在节点上"},on:{click:t.clickInteractionRectAlwaysVisible}},[t._v(" 原型热区常显 "),e("Checkbox2",{attrs:{text:"",selected:t.interactionRectAlwaysVisible},on:{click:t.clickEmpty}})],1)]:t._e(),e("a",{staticClass:"item",attrs:{href:"https://www.marklion.cn/?".concat(t.urlQueryString),target:"_blank"}},[t._v("官方网站")]),e("a",{staticClass:"item",attrs:{href:"https://user.marklion.cn/router/linkto.ashx?id=10017&".concat(t.urlQueryString),target:"_blank"}},[t._v("帮助中心")]),e("a",{staticClass:"item",attrs:{href:"https://user.marklion.cn/router/linkto.ashx?id=10018&".concat(t.urlQueryString),target:"_blank"}},[t._v("反馈建议")]),t.inCloudMode?[e("div",{staticClass:"line"}),t.cloudIsLogin?e("div",{staticClass:"item btn-logout",on:{click:function(e){return t.clickLogout()}}},[t._v("退出登录")]):e("div",{staticClass:"button light login",on:{click:t.clickLogin}},[t._v("登录")])]:t._e()],2):t._e()])},Bp=[],Up=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userface",class:{on:t.canClick},attrs:{title:t.title},on:{click:function(e){return e.stopPropagation(),t.clickUserFace.apply(null,arguments)}}},[t.showIcon?e("div",{staticClass:"icon"}):e("div",{staticClass:"user",class:{tourist:!t.cloudUserIsDesigner}},[t._v(t._s(t.iconText))])])},Hp=[],Wp={methods:{clickUserFace:function(){this.$emit("click")}},computed:{showIcon:function(){return!this.cloudIsLogin},iconText:function(){if(this.showIcon)return"";var t=this.cloudNickName;return Object(l["i"])(t)||(t=this.cloudUserEmail),t[t.length-1]}},props:{title:String,canClick:Boolean}},$p=Wp,Gp=(n("3251"),Object(hr["a"])($p,Up,Hp,!1,null,"77760090",null)),zp=Gp.exports,Yp=function(){var t=this,e=t._self._c;return e("label",{staticClass:"checkbox2",class:{on:t.selected},on:{click:t.click}},[t.text?e("i",{staticClass:"text"},[t._v(t._s(t.text))]):t._e(),t._m(0)])},Xp=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"rect-icon"},[e("i")])}],Kp={props:{text:String,selected:Boolean},methods:{click:function(){this.$emit("click",!this.selected)}}},qp=Kp,Qp=Object(hr["a"])(qp,Yp,Xp,!1,null,null,null),Jp=Qp.exports,Zp={components:{UserFace:zp,Checkbox2:Jp},methods:{setGuideRect:function(){var t=this.inArtboardMode,e=this.inCloudViewerMode;e&&this.setBeginnerGuideRect(o["h"].SliceBorderLineMenu,t?"nickName":null,o["g"].TopRight)},clickEmpty:function(){},clickInteractionRectAlwaysVisible:function(){this.$store.commit("setInteractionRectAlwaysVisible",!this.interactionRectAlwaysVisible)},clickPointCommentShowAlways:function(){this.$store.commit("pointCommentShowAlways",!this.pointCommentShowAlways)},clickSliceBorderLineHide:function(){this.$store.commit("sliceBorderLineHide",!this.sliceBorderLineHide)},clickArtboardShowInteractionLine:function(){var t=this.cloudVersion,e=this.artboardShowInteractionLine;Object(l["n"])(t)&&this.showTextTip("当前私有云版本(".concat(t,")过低,不支持交互原型相关功能,请先升级部署包")),this.$store.commit("artboardShowInteractionLine",!e)},clickMenu:function(t){var e=t.target;"A"!==(null===e||void 0===e?void 0:e.tagName)&&(this.ignoreThisClick=!0)},clickArtRenderInCanvasMode:function(){this.$store.commit("artRenderInCanvasMode",!this.artRenderInCanvasMode)},clickSetNickName:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.prompt({title:"修改昵称",text:t.cloudNickName,placeholder:"昵称;方便其他成员认识你",beforeYes:function(e){if(e=e.trim(),!Object(c["bb"])(e))return t.showTextTip("请输入正确的昵称,由5-20个字符组成,其中1个中文=2个字符."),!1}});case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e["catch"](0),e.abrupt("return");case 9:if(n=n.trim(),n!==t.cloudNickName){e.next=12;break}return e.abrupt("return");case 12:return t.nickSetting=!0,e.prev=13,e.next=16,t.cryptoMarklionWeb2("setusernickname",{nickName:n},1e4);case 16:i=e.sent,t.$store.commit("setCloudNickName",i.data),t.showTextTip("昵称已修改"),e.next=24;break;case 21:e.prev=21,e.t1=e["catch"](13),t.showTextTip(e.t1);case 24:case"end":return e.stop()}}),e,null,[[0,6],[13,21]])})))()},clickLogout:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.logoutting){e.next=2;break}return e.abrupt("return");case 2:return t.logoutting=!0,e.prev=3,e.next=6,t.goCloudLogout();case 6:return e.prev=6,t.logoutting=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[3,,6,9]])})))()},clickLogin:function(){this.goCloudLogin()},clickShowMenu:function(){var t=this;setTimeout((function(){var e=!t.menuVisible;t.menuVisible=e,e&&(t.ignoreThisClick=!1)}),0)},hideMenu:function(){var t=this;clearTimeout(this.menuHandler),this.ignoreThisClick?this.ignoreThisClick=!1:this.menuHandler=setTimeout((function(){t.menuVisible=!1}),50)}},computed:{urlQueryString:function(){var t,e=this.curArtboard,n=null===e||void 0===e||null===(t=e.artboard)||void 0===t||null===(t=t.mlConfig)||void 0===t?void 0:t.softVersion;return n||(n=this.$store.state.config.softVer),"invoke=MarkLion.Output".concat(Object(l["i"])(n)?"&ver=".concat(n):"")},interactionRectAlwaysVisible:function(){return this.$store.state.artboardDetail.interactionSet.rectAlwaysVisible},pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},sliceBorderLineHide:function(){return this.$store.state.sliceBorderLineHide},artboardShowInteractionLine:function(){return this.$store.state.artboardShowInteractionLine},artRenderInCanvasMode:function(){return this.$store.state.artRenderInCanvasMode},showTitle:function(){return this.cloudIsLogin?"".concat(this.cloudNickName,"(").concat(this.cloudUserEmail,")"):"点击登录"},showName:function(){return this.cloudIsLogin?this.cloudNickName:"未登录"},showEmail:function(){return this.cloudIsLogin?this.cloudUserEmail:""},resetGuideRectKey:function(){var t=this.winRect.width,e=this.inCloudViewerMode,n=this.inArtboardMode;return"".concat(t,":").concat(e,":").concat(n)},winRect:function(){return this.$store.state.winRect}},watch:{menuVisible:function(t){t?window.addEventListener("click",this.hideMenu,!0):window.removeEventListener("click",this.hideMenu,!0)},resetGuideRectKey:function(){this.setGuideRect()}},beforeDestroy:function(){this.setGuideRect(),clearTimeout(this.menuHandler),window.removeEventListener("click",this.hideMenu,!0)},mounted:function(){this.setGuideRect()},data:function(){return{menuVisible:!1,menuHandler:0,logoutting:!1,nickSetting:!1,ignoreThisClick:!1}},props:{setVisible:Boolean}},tb=Zp,eb=(n("6b6a"),Object(hr["a"])(tb,Vp,Bp,!1,null,"4e533610",null)),nb=eb.exports,rb=function(){var t=this,e=t._self._c;return e("div",{ref:"btn",staticClass:"btn-user-notify",class:{news:t.hasNotReadNotify,on:t.notifyListVisible},attrs:{title:"消息"},on:{click:t.clickNotify}})},ib=[],ab={methods:{clickNotify:function(){var t=this;setTimeout((function(){var e=t.userNotify;if(e.visible=!e.visible,e.visible){var n=t.$refs.btn;if(!n)return;var r=n.getBoundingClientRect(),i=e.location;i.top=r.bottom,i.right=window.innerWidth-r.right}}),0)}},computed:{userNotify:function(){return this.$store.state.userNotify},notifyListVisible:function(){return this.userNotify.visible},hasNotReadNotify:function(){return-1!==this.notifyList.findIndex((function(t){return!t.readed}))},notifyList:function(){var t,e;return null!==(t=null===(e=this.userNotify.cloudList[this.cloudKey])||void 0===e?void 0:e.list)&&void 0!==t?t:[]}}},ob=ab,sb=(n("1e16"),Object(hr["a"])(ob,rb,ib,!1,null,"31c33817",null)),cb=sb.exports,lb=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"user-notify",style:t.styleLocation,on:{mousedown:function(t){t.stopPropagation()},click:function(e){t.notClickClose=!0}}},[e("div",{staticClass:"header"},[e("nav",[e("a",{class:{on:t.showType===t.EnumNotifyShowType.ALL},attrs:{href:"javascript:;"},on:{click:function(e){t.showType=t.EnumNotifyShowType.ALL}}},[t._v("全部("+t._s(t.list.length)+")")]),e("a",{class:{on:t.showType===t.EnumNotifyShowType.NotRead},attrs:{href:"javascript:;"},on:{click:function(e){t.showType=t.EnumNotifyShowType.NotRead}}},[t._v("未读("+t._s(t.notReadList.length)+")")]),e("a",{class:{on:t.showType===t.EnumNotifyShowType.Readed},attrs:{href:"javascript:;"},on:{click:function(e){t.showType=t.EnumNotifyShowType.Readed}}},[t._v("已读("+t._s(t.readedList.length)+")")])]),e("menu",[t.showType===t.EnumNotifyShowType.NotRead||t.showType===t.EnumNotifyShowType.ALL&&t.notReadList.length>0?e("a",{staticClass:"btn-setread",attrs:{href:"javascript:;"},on:{click:t.clickSetAllNotifyReaded}},[t._v(t._s(t.btnFetching?"请求处理中":"全部标记为已读"))]):t.showType===t.EnumNotifyShowType.Readed||t.showType===t.EnumNotifyShowType.ALL&&t.readedList.length>0?e("a",{staticClass:"btn-setread",attrs:{href:"javascript:;"},on:{click:t.clickAllReadedNotify}},[t._v(t._s(t.btnFetching?"请求处理中":"清空已读消息"))]):t._e(),e("a",{staticClass:"btn-refresh2",attrs:{href:"javascript:;",title:"刷新消息列表"},on:{click:function(e){return t.clickReload(!0)}}})])]),e("div",{ref:"list",staticClass:"list",on:{scroll:t.onListScroll}},[t.listFetchState===t.FetchState.Fetching||t.listFetchState===t.FetchState.Error?e("NetworkLoading",{attrs:{loadText:"正在获取消息列表...",errorText:t.errorText,isLoading:t.listFetchState===t.FetchState.Fetching,isError:t.listFetchState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload(!0)}}}):0===t.showList.length?e("div",{staticClass:"empty"},[t._v("暂无消息")]):e("div",{staticClass:"pad",style:{height:t.styleListRealHeight}},[e("ul",{style:{top:t.styleListOffsetTop}},t._l(t.renderList,(function(t){return e("UserNotifyItem",{key:"notify-".concat(t.id),attrs:{item:t}})})),1)])],1)])},ub=[],db=function(){var t=this,e=t._self._c;return t.visible&&t.unknowNotifyType?e("li",{staticClass:"unknow"},[t._v("不支持的消息类型(id:"+t._s(t.item.id)+",type:"+t._s(t.item.type)+"),请升级客户端后查看")]):t.visible?e("li",{staticClass:"item",class:{notread:!t.item.readed},on:{click:t.clickNotify}},[e("div",{staticClass:"info"},[e("div",{staticClass:"title",attrs:{title:t.title}},[t._v(t._s(t.title))]),e("div",{staticClass:"date"},[t._v(t._s(t.item.dateStr))])]),e("div",{staticClass:"text"},[e("a",{attrs:{href:"javascript:;",title:t.commentSummary},on:{click:t.clickSummary}},[t._v(t._s(t.commentSummary))])])]):t._e()},hb=[],fb={methods:{clickSummary:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,s,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.item,e.prev=1,c=n.msg,a=c.artboardId,i=c.artboardName,e.next=7,t.goCloudPath({folderId:c.folderId,artboardId:a,artboardGuid:c.artboardGuid,artboardVer:null!==(s=c.artboardVer)&&void 0!==s?s:0,commentId:c.commentId,isReply:n.type===o["D"].Artboard_Reply||n.type===o["D"].Artboard_Reply_At,checkArtboardExist:!0});case 7:t.$store.commit("setAllFoldersBoxVisible",!1),t.$store.state.userNotify.visible=!1,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),t.showTextTip(i?e.t0.toString().replace("[".concat(a,"]"),"[".concat(i,"]")):e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))()},clickNotify:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item,n){e.next=3;break}return e.abrupt("return");case 3:if(n.readed){e.next=26;break}if(t.fetchState!==c["a"].Fetching){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,t.fetchState=c["a"].Fetching,i=new FormData,i.append("id",n.id),e.next=12,t.fetchPostCloudApi("setnotifyreadedbyweb",{body:i});case 12:if(a=e.sent,Object(l["s"])(a)){e.next=15;break}throw new Error("返回值异常,无法设置消息为已读");case 15:if(a.success){e.next=17;break}throw new Error(a.errMsg);case 17:n.readed=!0,e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](6),t.showTextTip(e.t0);case 23:return e.prev=23,t.fetchState=c["a"].Success,e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[6,20,23,26]])})))()}},computed:{visible:function(){return!!this.item},commentSummary:function(){var t,e=null===(t=this.item)||void 0===t?void 0:t.msg;if(!e)return"";var n=e.commentAttachCount,r=e.commentSummary;return n>0&&(r=new Array(n).fill("[图片]").join("")+" "+r),r},title:function(){var t,e,n,r=this.item;if(!r)return"";var i=r.msg;switch(r.type){case o["D"].Artboard_Comment:return"".concat(null===(t=i.commentUser)||void 0===t?void 0:t.nickName," 评论了您的画板“").concat(i.artboardName,"” :");case o["D"].Artboard_Reply:return"".concat(null===(e=i.commentUser)||void 0===e?void 0:e.nickName," 回复了您在画板“").concat(i.artboardName,"”的评论 :");case o["D"].Artboard_Comment_At:case o["D"].Artboard_Reply_At:return"".concat(null===(n=i.commentUser)||void 0===n?void 0:n.nickName," 在画板“").concat(i.artboardName,"”@了您:");default:return null}},unknowNotifyType:function(){var t=this.item;if(!t)return!0;switch(t.type){case o["D"].Artboard_Comment:case o["D"].Artboard_Reply:case o["D"].Artboard_Comment_At:case o["D"].Artboard_Reply_At:return!1;default:return!0}}},props:{item:Object},data:function(){return{fetchState:c["a"].Normal}}},mb=fb,pb=(n("fec8"),Object(hr["a"])(mb,db,hb,!1,null,"23666d13",null)),bb=pb.exports,vb={ALL:-1,NotRead:0,Readed:1},gb={components:{UserNotifyItem:bb,NetworkLoading:us},methods:{clickSetAllNotifyReaded:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.notReadList,0!==n.length){e.next=4;break}return t.showTextTip("没有需要标记为已读的消息"),e.abrupt("return");case 4:if(t.btnFetchState!==c["a"].Fetching){e.next=6;break}return e.abrupt("return");case 6:return t.btnFetchState=c["a"].Fetching,e.prev=7,i=n[0].id,a=new FormData,a.append("minNotifyId",i),e.next=13,t.fetchPostCloudApi("setnotifyreadedbyweb",{body:a});case 13:if(o=e.sent,Object(l["s"])(o)){e.next=16;break}throw new Error("返回值异常,无法设置消息为已读");case 16:if(o.success){e.next=18;break}throw new Error(o.errMsg);case 18:t.list.forEach((function(t){!t.readed&&t.id<=i&&(t.readed=!0)})),t.showTextTip("已将所有未读消息标记为已读"),e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](7),t.showTextTip(e.t0);case 25:return e.prev=25,t.btnFetchState=c["a"].Success,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[7,22,25,28]])})))()},clickAllReadedNotify:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.readedList,0!==n.length){e.next=4;break}return t.showTextTip("没有需要清理的已读消息"),e.abrupt("return");case 4:if(t.btnFetchState!==c["a"].Fetching){e.next=6;break}return e.abrupt("return");case 6:return t.awaitConfirm=!0,e.next=9,t.confirm({text:"即将清空所有已读消息"});case 9:if(e.sent){e.next=12;break}return t.awaitConfirm=!1,e.abrupt("return");case 12:return t.awaitConfirm=!1,t.btnFetchState=c["a"].Fetching,e.prev=14,i=n[0].id,a=new FormData,a.append("minNotifyId",i),e.next=20,t.fetchPostCloudApi("removenotifiesbyweb",{body:a});case 20:if(o=e.sent,Object(l["s"])(o)){e.next=23;break}throw new Error("返回值异常,消息未被清理");case 23:if(o.success){e.next=25;break}throw new Error(o.errMsg);case 25:s=[],u=t.list,u.forEach((function(t,e){t.readed&&t.id<=i&&s.unshift(e)})),s.length===u.length?u.splice(0):s.forEach((function(t){u.splice(t,1)})),t.showTextTip("已清空已读的消息"),e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](14),t.showTextTip(e.t0);case 35:return e.prev=35,t.btnFetchState=c["a"].Success,e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[14,32,35,38]])})))()},clickReload:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,o,s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.listFetchState!==c["a"].Fetching){n.next=2;break}return n.abrupt("return");case 2:return e.errorText="",e.listFetchState=c["a"].Fetching,n.prev=4,a=e.list,o=0,!t&&a.length>0&&(o=a[0].id),s=null!==(i=e.curArtboardId)&&void 0!==i?i:0,n.next=11,e.getCloudNotifies(o,s);case 11:e.listFetchState=c["a"].Success,n.next=18;break;case 14:n.prev=14,n.t0=n["catch"](4),e.listFetchState=c["a"].Error,e.isNotSupportCloudVersion?e.errorText="私有云版本过低(".concat(e.cloudVersion,"),请先升级私有云部署包"):e.errorText=n.t0;case 18:case"end":return n.stop()}}),n,null,[[4,14]])})))()},onListScroll:function(t){this.scrollTop=t.target.scrollTop},getBoxHeight:function(){if(this.visible){var t=this.$refs.list;t&&(this.boxHeight=t.offsetHeight)}},resetTimeFormat:function(){this.showList.forEach((function(t){try{t.dateStr=Object(l["b"])(t.date)}catch(e){t.dateStr=t.date}}))},closeSelf:function(){var t=this;clearTimeout(this.closeHandle),this.closeHandle=setTimeout((function(){t.awaitConfirm||(t.notClickClose?t.notClickClose=!1:t.userNotify.visible=!1)}),50)},needReloadOnOpen:function(){var t=this.currentCloudNotify;if(!t)return!0;var e=t.updateTime;return Math.abs(Date.now()-e)>5e3}},computed:{isNotSupportCloudVersion:function(){var t=this.cloudVersion;return t&&Object(l["k"])(t)},FetchState:function(){return c["a"]},btnFetching:function(){return this.btnFetchState===c["a"].Fetching},styleLocation:function(){var t=this.userNotify.location,e={top:9,right:-20};return"top:".concat(t.top+e.top,"px;right:").concat(t.right+e.right,"px;")},EnumNotifyShowType:function(){return vb},userNotify:function(){return this.$store.state.userNotify},visible:function(){return this.userNotify.visible},currentCloudNotify:function(){return this.userNotify.cloudList[this.cloudKey]},list:function(){var t;return(null===(t=this.currentCloudNotify)||void 0===t?void 0:t.list)||[]},readedList:function(){var t=this.list,e=[];return t.forEach((function(t){t.readed&&e.push(t)})),e},notReadList:function(){var t=this.list,e=[];return t.forEach((function(t){t.readed||e.push(t)})),e},showList:function(){switch(this.showType){case vb.Readed:return this.readedList;case vb.NotRead:return this.notReadList;default:return this.list}},renderStartIndex:function(){var t=this.scrollTop,e=this.lineHeight;return Math.max(Math.floor(t/e)-2,0)},renderLength:function(){var t=this.showList,e=this.boxHeight,n=this.lineHeight,r=this.scrollTop;return Math.min(t.length,Math.floor(r/n)+Math.ceil(e/n)+2)},renderList:function(){var t=this.showList;return t.slice(this.renderStartIndex,this.renderLength)},styleListRealHeight:function(){return this.showList.length*this.lineHeight+"px"},styleListOffsetTop:function(){return this.renderStartIndex*this.lineHeight+"px"}},watch:{showType:function(){var t=this;this.$nextTick((function(){var e=t.$refs.list;e&&(e.scrollTop=0),t.resetTimeFormat()}))},visible:function(t){var e=this;t?(this.$nextTick((function(){e.getBoxHeight()})),window.addEventListener("click",this.closeSelf,!0),this.needReloadOnOpen()?this.clickReload():this.resetTimeFormat()):(this.notClickClose=!1,clearTimeout(this.closeHandle),window.removeEventListener("click",this.closeSelf,!0))}},data:function(){return{scrollTop:0,boxHeight:0,lineHeight:65,showType:vb.ALL,closeHandle:0,notClickClose:!1,listFetchState:c["a"].Normal,btnFetchState:c["a"].Normal,errorText:"",awaitConfirm:!1}},beforeDestroy:function(){window.removeEventListener("click",this.closeSelf,!0),clearTimeout(this.closeHandle),this.userNotify.visible=!1},mounted:function(){this.getBoxHeight()}},wb=gb,xb=(n("c6ab"),Object(hr["a"])(wb,lb,ub,!1,null,"630a7ff8",null)),yb=xb.exports,kb={components:{ArtboardVersion:Nd,BtnArtRenderMode:rf,BtnGoInteraction:Qh,PathNav:Rp,UserNotifyButton:cb,UserNotify:yb,ScaleControl:$r,Helper:Rm,UserInfo:nb,CloudFolderLogs:_m,BtnUpload:Hh,BtnContainerColor:dd},methods:{setGuideRect:function(){this.setBeginnerGuideRect(o["h"].HelperMenu,"btnHelp",o["g"].TopRight)},clickMultDownArtboard:function(){this.setInArtboardMultDownMode(!0)},clickGoParentFolder:function(){var t=this;setTimeout((function(){Object(c["T"])(t.cloudParentFolder.id)}),100)},clickGoHome:function(){var t=this;setTimeout((function(){t.setCurArtboard(null)}),100)},clickHelper:function(t){this.$store.commit("setHelperVisible",t)}},computed:{canShowUpload:function(){var t=this.inCloudViewerMode,e=this.inArtboardMode,n=this.cloudCurrentFolderId,r=this.userFolderSpecifyMemberAuthority;if(t&&!e&&n>0)switch(r){case o["s"].Admin:case o["s"].ParentOwner:case o["s"].Owner:case o["s"].ReadWrite:case o["s"].Read:case o["s"].OnlyChildFolderVisit:return!0}return!1},canShowLog:function(){var t=this.inCloudMode,e=this.permission,n=this.curNetDiskFile,r=this.cloudFolderNotFound,i=this.userFolderSpecifyMemberAuthority;if(t&&!r&&e&&!n)switch(i){case o["s"].Admin:case o["s"].ParentOwner:case o["s"].Owner:case o["s"].ReadWrite:case o["s"].Read:return!0}return!1},helperVisible:function(){return this.$store.state.helper.visible},cloudParentFolderName:function(){var t=this.cloudParentFolder;if(!t)return null;if(0!==t.id)return t.name;var e=this.cloudName;return e||t.name},setVisible:function(){var t=!this.cloudFolderNotFound&&this.permission&&this.documentArtboards.length>0;return t},winRect:function(){return this.$store.state.winRect},resetGuideRectKey:function(){var t=this.setVisible,e=this.canShowLog,n=this.inArtboardMode,r=this.cloudIsLogin,i=this.winRect.width;return"".concat(t,":").concat(e,":").concat(n,":").concat(r,":").concat(i)}},watch:{resetGuideRectKey:function(){this.setGuideRect()}},mounted:function(){this.setGuideRect()}},Cb=kb,Sb=(n("410a"),Object(hr["a"])(Cb,id,ad,!1,null,"cbe9ab4c",null)),Ob=Sb.exports,Ib=function(){var t=this,e=t._self._c;return e("div",{staticClass:"authority",class:{"in-mobile":t.inMobile,include:t.include}},[e("div",{staticClass:"box"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("div",{staticClass:"container"},[e("div",{staticClass:"cloudname"},[t._v(t._s(t.documentName))]),e("div",{staticClass:"text"},[t._v("分享已加密，请输入分享码后访问")]),e("div",{staticClass:"input",class:{focused:t.inputFocused}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"input",attrs:{type:"text",placeholder:"请输入分享码",maxlength:"6",spellcheck:"false"},domProps:{value:t.code},on:{focus:function(e){t.inputFocused=!0},blur:function(e){t.inputFocused=!1},input:function(e){e.target.composing||(t.code=e.target.value)}}})]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.onSubmit}},[t._v(" 确定 "),e("input",{attrs:{type:"submit"}})])])])])])])},Ab=[],Tb={methods:{onSubmit:function(){var t=this,e=this.code.trim();if(!/^[a-zA-Z\d]{1,6}$/.test(e))return this.showTextTip("分享码不正确,分享码由1-6位的数字或字母组合而成"),void this.$refs.input.focus();var n="".concat(c["d"],"/api/previewer");fetch(n,{method:"post",body:"code=".concat(e,"&folderid=").concat(this.cloudCurrentFolderId),cache:"reload",credentials:"include",headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){e.text().then((function(n){if(200!=e.status)throw n;if(n=JSON.parse(n),Object(l["s"])(n))return n.success?(t.cleanFoldersCache(),void(t.inInteractionMode?t.goCloudFolderInteractionUrl(t.cloudCurrentFolderId,t.curArtboardGuid):window.location.reload())):void t.showTextTip(n.errMsg);t.showTextTip("返回值格式异常")})).catch((function(e){t.showTextTip(e)}))})).catch((function(e){t.showTextTip(e)}))}},data:function(){return{inputFocused:!1,code:""}},props:{include:{type:Boolean,default:!1}}},jb=Tb,Fb=(n("6bd2"),Object(hr["a"])(jb,Ib,Ab,!1,null,"9bb8f6de",null)),Mb=Fb.exports,_b=function(){var t=this,e=t._self._c;return e("section",{staticClass:"error-data",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v(t._s(t.text))]),t.showLoginBtn?e("div",{staticClass:"btns"},[e("div",{staticClass:"button light",on:{click:t.goCloudLogin}},[t._v(t._s(t.cloudIsLogin?"切换账号":"立即登录"))])]):t._e()])])},Lb=[],Db={props:{text:String,showLoginBtn:Boolean}},Nb=Db,Eb=(n("9b64"),Object(hr["a"])(Nb,_b,Lb,!1,null,"36b89cbc",null)),Pb=Eb.exports,Rb=function(){var t=this,e=t._self._c;return e("section",{staticClass:"p-index",style:{backgroundColor:t.backgroundColor}},[e("ZoomContainer",{attrs:{type:t.EnumScaleType.ArtboardList}}),e("MultArtboardDownload")],1)},Vb=[],Bb={components:{ZoomContainer:Ao,MultArtboardDownload:jl},computed:{backgroundColor:function(){return this.$store.state.artboardDetail.interactionSet.backgroundColor},EnumScaleType:function(){return o["B"]}},created:function(){0}},Ub=Bb,Hb=(n("9e45"),Object(hr["a"])(Ub,Rb,Vb,!1,null,"7c2a4868",null)),Wb=Hb.exports,$b=function(){var t=this,e=t._self._c;return e("section",{staticClass:"p-info",style:{backgroundColor:t.backgroundColor}},[e("keep-alive",[e("LeftSide")],1),t.isError?e("div",{staticClass:"error"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v(t._s(t.curArtboard.loadErrMsg))]),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v("重新加载")])])])]):t.isFetching?e("div",{staticClass:"loading"},[e("div",{staticClass:"box"},[t._v("正在加载画板详情...")])]):t.isLoaded?[e("ZoomContainer",{attrs:{type:t.EnumScaleType.ArtboardDetail}})]:t._e(),e("keep-alive",[e("RightSide")],1)],2)},Gb=[],zb=function(){var t=this,e=t._self._c;return e("section",{staticClass:"left-side",class:{on:t.visible}},[e("div",{staticClass:"btn-leftside-visible",class:{on:t.visible},attrs:{title:t.visible?"收起左侧(F3)":"展开左侧(F3)"},on:{click:function(e){return t.setVisible(!t.visible)}}}),e("nav",[e("div",{staticClass:"btn-showart",class:{on:t.showArtboardList},attrs:{title:"切换到画板列表(F1)"},on:{click:function(e){t.showArtboardList=!0,t.setVisible(!0)}}},[t._v("画板")]),e("div",{staticClass:"btn-shownode",class:{on:!t.showArtboardList},attrs:{title:"切换到图层列表(F2)"},on:{click:function(e){t.showArtboardList=!1,t.setVisible(!0)}}},[t._v("图层")])]),e("div",{staticClass:"filter-box"},[t.showArtboardList?[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.artboard,expression:"searchText.artboard"}],class:{empty:!t.searchText.artboard},attrs:{type:"text",placeholder:"搜索画板名",spellcheck:"false"},domProps:{value:t.searchText.artboard},on:{input:function(e){e.target.composing||t.$set(t.searchText,"artboard",e.target.value)}}}),t.searchText.artboard?e("span",{staticClass:"btn-clear",on:{click:function(e){t.searchText.artboard=""}}}):t._e()]),e("div",{staticClass:"filters"},[t.inCloudMode&&!t.notSupportArtboardStatusVersion?e("div",{staticClass:"filter-item filter-item-dev",class:{on:t.artboardStatusDevFilterOpen},attrs:{title:"筛选标记为待开发的画板"},on:{click:t.clickArtboardStatusDevFilter}}):t._e(),e("div",{staticClass:"filter-item filter-item-slice",class:{on:t.sliceFilterOpen},attrs:{title:"筛选有切图的画板"},on:{click:t.clickSliceFilter}}),t.inCloudMode?e("div",{staticClass:"filter-item filter-item-comment",class:{on:t.commentFilterOpen},attrs:{title:"筛选有评论的画板"},on:{click:t.clickCommentFilter}}):t._e(),t.inCloudMode?e("FolderNavSortMenu",{attrs:{mini:!0}}):t._e()],1)]:t.artboardInComment?t._e():[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.node,expression:"searchText.node"}],attrs:{type:"text",placeholder:"搜索节点名",spellcheck:"false"},domProps:{value:t.searchText.node},on:{input:function(e){e.target.composing||t.$set(t.searchText,"node",e.target.value)}}}),t.searchText.node?e("span",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:function(e){t.searchText.node=""}}}):t._e()]),e("div",{staticClass:"filters"},[e("div",{staticClass:"filter-item filter-item-slice",class:{on:t.sliceFilterOpen},attrs:{title:"筛选有切图的节点"},on:{click:t.clickSliceFilter}}),t.showArtboardList?t._e():e("div",{staticClass:"filter-item filter-item-interaction",class:{on:t.interactionFilterOpen},attrs:{title:"筛选有原型跳转的节点"},on:{click:t.clickInteractionFilter}})])]],2),e("section",{staticClass:"box"},[!t.showArtboardList&&t.artboardInComment?e("section",{staticClass:"on incomment"},[t._v("评论模式下无法查看标注图层信息")]):t._e(),e("ArtboardList",{attrs:{visible:t.showArtboardList,leftSideVisible:t.visible,list:t.renderDocumentArtboards,renderArtboardList:t.renderArtboardList,sliceFilterOpen:t.sliceFilterOpen,commentFilterOpen:t.commentFilterOpen,artboardStatusDevFilterOpen:t.artboardStatusDevFilterOpen,interactionFilterOpen:t.interactionFilterOpen,searchText:t.searchText.artboard}}),e("section",{ref:"nodeList",staticClass:"nodelist",class:{on:!t.showArtboardList&&!t.artboardInComment},on:{scroll:t.onNodeListScroll,mousewheel:t.onNodeListMouseWheel}},[e("div",{staticClass:"container",class:{"slice-filter":t.sliceFilterOpen||t.nodeInSearch||t.interactionFilterOpen,off:t.nodeListMousewheelTimes>0}},[0===t.nodeList.length?e("div",{staticClass:"empty"},[t._v(t._s(t.emptyNodeListText))]):t._e(),e("div",{staticClass:"brace",style:t.braceStyle},[e("div",{staticClass:"front",style:t.frontStyle},t._l(t.renderList,(function(n){return e("NodeListNew",{key:"".concat(n.index,":").concat(n.node.guid),attrs:{nodeListHeight:t.nodeListHeight,nodeListScrollTop:t.nodeListScrollTop,nodeLineHeight:t.nodeLineHeight,shiftKey:t.shiftKey,sliceFilterOpen:t.sliceFilterOpen,interactionFilterOpen:t.interactionFilterOpen,nodeInSearch:t.nodeInSearch,item:n.node}})})),1)])])])],1)])},Yb=[],Xb=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item",class:{hover:t.enterNode===t.item,focused:t.curNode===t.item}},[t.sliceFilterOpen||t.nodeInSearch||t.interactionFilterOpen?t._e():e("div",{staticClass:"prex",class:{first:t.isFirstChild,last:t.isLastChild,"has-child":t.hasChild},style:{width:t.depthWidth}}),e("div",{ref:"$item_name",staticClass:"name",class:{export:t.item.markedForExport},style:{paddingLeft:t.paddingLeft},on:{mouseenter:t.mouseEnterNode,mouseleave:t.mouseLeaveNode,click:t.clickNode}},[t.item.renderTapInteraction?e("span",{staticClass:"interaction-node"}):t._e(),t._v(t._s(t.name))])])},Kb=[],qb=10,Qb={name:"NodeList",methods:{clickNode:function(){var t=this.item;this.inMultDownMode?t.markedForExport&&(t.mlUserSelectDown=!t.mlUserSelectDown):this.setCurNode(t)},mouseLeaveNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(null)},mouseEnterNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(this.item)}},computed:{itemStyle:function(){return{top:this.index*this.nodeLineHeight+"px"}},isFirstChild:function(){var t=this.item;if(t.types.Artboard)return!0;var e=t.parentNode.children;return!!e&&e[0]==t},isLastChild:function(){var t=this.item;if(t.types.Artboard)return!0;var e=t.parentNode.children;return!!e&&e[e.length-1]==t},hasChild:function(){var t=this.item.children;if(!t)return!1;if(0===t.length)return!1;var e=t.find((function(t){return!t.mlIgnoreLeftSide}));return!!e},depthWidth:function(){var t=this.nodeDepthIndex*qb;return t<0&&(t=0),t+"px"},paddingLeft:function(){var t=this.sliceFilterOpen,e=this.nodeInSearch,n=this.interactionFilterOpen,r=this.nodeDepthIndex,i=t||e||n?0:r*qb;return i+6+"px"},nodeDepthIndex:function(){return this.item.nodeDepthIndex},name:function(){var t=Object(c["J"])(this.item);return Object(l["i"])(t)?(t=t.trim(),t):this.item.guid}},props:{item:Object,sliceFilterOpen:Boolean,interactionFilterOpen:Boolean,nodeInSearch:Boolean,shiftKey:Boolean,nodeListScrollTop:Number,nodeListHeight:Number,index:Number,nodeLineHeight:Number}},Jb=Qb,Zb=(n("338f"),Object(hr["a"])(Jb,Xb,Kb,!1,null,"1c1550d3",null)),tv=Zb.exports,ev=function(){var t=this,e=t._self._c;return e("section",{ref:"artList",staticClass:"art-list",class:{on:t.visible},on:{scroll:t.onScroll,mousewheel:t.onMouseWheel}},[e("div",{staticClass:"brace",class:{off:t.mousewheelTimes>0},style:{height:t.boxRealHeight}},[e("div",{ref:"front",staticClass:"front",style:{marginTop:t.frontMarginTop}},t._l(t.lazyRenderArtboardList,(function(n,r){return e("ArtboardListItem",{key:"".concat(n.artboard.docGuid,"-").concat(n.artboard.guid),attrs:{guideUsed:r===t.firstFullInViewItemLazyIndex,item:n}})})),1)]),0===t.lazyRenderArtboardList.length?e("div",{staticClass:"empty"},[t._v(t._s(t.emptyListText))]):t._e()])},nv=[],rv=function(){var t=this,e=t._self._c;return e("section",{ref:"$item",staticClass:"item min",class:{on:t.focused},attrs:{title:t.title},on:{click:function(e){return t.clickArtboard()},contextmenu:function(e){return e.preventDefault(),t.onContextmenu.apply(null,arguments)}}},[e("div",{staticClass:"img"},[t.imageSrc?e("img",{attrs:{src:t.imageSrc,alt:""},on:{error:t.errPreviewImage}}):t._e(),t.inInteractionMode&&t.artboard.flowStart?e("div",{staticClass:"flow-start"}):t._e()]),e("div",{staticClass:"info"},[e("div",{staticClass:"info-item"},[e("div",{staticClass:"name",domProps:{textContent:t._s(t.artboard.name)}}),t.artboardInDevStatus?e("div",{staticClass:"dev",attrs:{title:"待开发"}}):t._e()]),e("div",{staticClass:"info-item"},[e("div",{staticClass:"date",domProps:{textContent:t._s(t.dateStr)}}),e("div",{staticClass:"total"},[!t.inInteractionMode&&t.exportNodeCount>0?e("div",{staticClass:"slice-total"},[t._v(t._s(t.exportNodeCount))]):t._e(),t.inCloudMode&&!t.inInteractionMode&&t.commentReplyCount&&"0"!==t.commentReplyCount?e("div",{staticClass:"comment-total"},[t._v(t._s(t.commentReplyCount))]):t._e()])])])])},iv=[],av={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)},onContextmenu:function(t){var e=this,n=t.pageX,r=t.pageY,i=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:r,artboard:i})}))},clickArtboard:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.inCommentDrawing){e.next=5;break}return e.next=3,t.confirm({text:"正在编辑画板截图,是否清理截图信息并切换画板?"});case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:t.setCurArtboard(t.item);case 6:case"end":return e.stop()}}),e)})))()},checkImage:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.pathPreviewMini,i=t.artboard,a=t.artboardReviewImg,!n){e.next=4;break}return t.imageSrc=n,e.abrupt("return");case 4:if(t.inCloudMode){e.next=7;break}return t.imageSrc=a,e.abrupt("return");case 7:if(e.prev=7,s=i.pathPreviewBlob,s){e.next=18;break}return e.next=12,Lc(a);case 12:if(s=e.sent,"string"!==typeof s){e.next=17;break}return i.pathPreviewMini=s,t.imageSrc=s,e.abrupt("return");case 17:i.pathPreviewBlob=s;case 18:o=URL.createObjectURL(s),t.imageSrc=o,e.next=29;break;case 22:return e.prev=22,e.t0=e["catch"](7),t.userMiniPreviewImg=!1,i.pathPreviewMini=a,t.imageSrc=a,e.abrupt("return");case 29:return e.prev=29,o&&t.$nextTick((function(){setTimeout((function(){try{URL.revokeObjectURL(o)}catch(t){}}),600)})),e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[7,22,29,32]])})))()}},watch:{artboardReviewImg:function(t){var e=this;t&&this.$nextTick((function(){e.checkImage()}))}},computed:{artboardInDevStatus:function(){var t=this.item,e=this.inCloudViewerMode;return e&&t.customStatus===o["f"].Dev},dateStr:function(){var t,e=this.artboard,n=this.inCloudMode;return n?null!==(t=e.updateTimeStr)&&void 0!==t?t:Object(l["b"])(e.updateTimeTimes):""},commentReplyCount:function(){var t=this.artboard;if(!t)return"";var e=t.comments+t.replies;return e>999?"99+":e>0?e:""},exportNodeCount:function(){if(this.inCloudMode)return this.artboard.resNodeCount;var t=this.item.exportNodes;return t.length},artboardReviewImg:function(){var t=this.artboard,e=this.userMiniPreviewImg?t.artboardPreviewThumbPng:t.artboardPreviewPng;return this.inCloudMode?e:"".concat(e,"?").concat(t.mlOutputTime)},focused:function(){return this.curArtboard===this.item},artboard:function(){return this.item.artboard},title:function(){return Ue(this.artboard)}},mounted:function(){this.checkImage()},data:function(){return{userMiniPreviewImg:!0,imageSrc:null}},props:{item:Object,searchText:String}},ov=av,sv=(n("e95e"),Object(hr["a"])(ov,rv,iv,!1,null,"1f7f45f6",null)),cv=sv.exports,lv={methods:{setGuideRect:function(){var t=this.guideItemRect,e=this.inCloudViewerMode;e&&this.setBeginnerGuideRect(o["h"].ArtboardDevMode,t)},onMouseWheel:function(t){var e;this.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onScroll:function(t){this.scrollTop=t.target.scrollTop},onResize:function(){var t=this.$refs.artList;if(t){this.boxHeight=t.offsetHeight;var e=t.getBoundingClientRect(),n=e.x,r=e.y,i=e.width,a=e.height;n=Math.floor(n),r=Math.floor(r),i=Math.ceil(i),a=Math.ceil(a),this.boxBoundingClientRect={x:n,y:r,width:i,height:a}}},goFocusItem:function(){var t=this.curArtboard;if(t){var e=this.$refs.artList;if(e){var n=this.renderArtboardList.findIndex((function(e){return e===t}));if(-1!==n){var r=this.itemHeight*n;r-=Math.floor((this.boxHeight-this.itemHeight)/2),e.scrollTop=r}}}}},props:{visible:Boolean,list:Array,renderArtboardList:Array,sliceFilterOpen:Boolean,commentFilterOpen:Boolean,interactionFilterOpen:Boolean,artboardStatusDevFilterOpen:Boolean,searchText:String,leftSideVisible:Boolean},components:{ArtboardListItem:cv},watch:{leftSideVisible:function(t){var e=this;t&&(this.leftSideVisibleAnimate=!0,setTimeout((function(){e.leftSideVisibleAnimate=!1,e.onResize()}),200))},resetGuideRectKey:function(){this.setGuideRect()},cloudListSortSortType:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},cloudListSortOrderDesc:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},mousewheelTimes:function(t){var e=this;clearTimeout(this.mousewheelHandle),t&&(this.mousewheelHandle=setTimeout((function(){e.mousewheelTimes=!1}),200))},filterDocumentGuid:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},sliceFilterOpen:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},commentFilterOpen:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},artboardStatusDevFilterOpen:function(){var t=this;this.$nextTick((function(){t.goFocusItem()}))},curArtboard:function(){this.goFocusItem()}},computed:{cloudListSort:function(){return this.$store.state.cloudListSort},cloudListSortSortType:function(){return this.cloudListSort.sortType},cloudListSortOrderDesc:function(){return this.cloudListSort.orderDesc},emptyListText:function(){return"未找到相关画板"},lazyRenderArtboardList:function(){var t=this.renderArtboardList,e=this.lazyStartIndex,n=this.lazyLength;return t.slice(e,e+n)},lazyStartIndex:function(){var t=this.scrollTop,e=this.itemHeight,n=this.renderArtboardList.length-Math.floor(this.boxHeight/this.itemHeight);return Math.max(0,Math.min(n,Math.floor(t/e)-1))},lazyLength:function(){var t=this.boxHeight,e=this.itemHeight,n=this.renderArtboardList,r=this.lazyStartIndex;return Math.min(n.length-r,Math.ceil(t/e)+2)},frontMarginTop:function(){return this.frontMarginTopNumber+"px"},frontMarginTopNumber:function(){return this.lazyStartIndex*this.itemHeight},boxRealHeight:function(){return this.itemHeight*this.renderArtboardList.length+"px"},itemHeight:function(){return 68},firstFullInViewItemLazyIndex:function(){var t=this.scrollTop,e=this.itemHeight,n=this.lazyStartIndex,r=this.renderArtboardList,i=Math.ceil(t/e)-n,a=r.length-1;return i=Math.min(i,a),i},guideItemRect:function(){var t=this.inCloudViewerMode,e=this.visible,n=this.leftSideVisible,r=this.leftSideVisibleAnimate,i=this.firstFullInViewItemLazyIndex,a=this.frontMarginTopNumber,s=this.itemHeight,c=this.boxBoundingClientRect,l=this.scrollTop,u={x:0,y:0,width:0,height:0,direction:o["g"].Left};if(!e||!t||!n||r)return u;var d=null!==c&&void 0!==c?c:{x:0,y:0,width:0,height:0},h=d.x,f=d.y,m=d.width;return m>0&&(u.x=h,u.y=f+a-l+i*s,u.width=m,u.height=s),u},resetGuideRectKey:function(){var t=this.guideItemRect;return"".concat(t.x,":").concat(t.y,":").concat(t.width,":").concat(t.height)}},data:function(){return{scrollTop:0,boxHeight:0,boxBoundingClientRect:null,mousewheelTimes:0,mousewheelHandle:0,leftSideVisibleAnimate:!1}},mounted:function(){var t,e,n=this;this.scrollTop=null!==(t=null===(e=this.$refs.artList)||void 0===e?void 0:e.scrollTop)&&void 0!==t?t:0,this.setGuideRect(),this.onResize(),window.addEventListener("resize",this.onResize),this.$nextTick((function(){n.goFocusItem()}))},beforeDestroy:function(){this.setGuideRect(),window.removeEventListener("resize",this.onResize),clearTimeout(this.mousewheelHandle)}},uv=lv,dv=(n("6e1d"),Object(hr["a"])(uv,ev,nv,!1,null,"36270453",null)),hv=dv.exports,fv={components:{ArtboardList:hv,NodeListNew:tv,FolderNavSortMenu:Cu},methods:{onNodeListResize:function(){var t=this.$refs.nodeList;t&&(this.nodeListHeight=t.offsetHeight)},onNodeListMouseWheel:function(t){var e;this.nodeListMousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onNodeListScroll:function(){var t=this.$refs.nodeList;t&&(this.nodeListScrollTop=t.scrollTop)},clickSliceFilter:function(){this.sliceFilterOpen=!this.sliceFilterOpen},clickCommentFilter:function(){this.commentFilterOpen=!this.commentFilterOpen},clickArtboardStatusDevFilter:function(){this.artboardStatusDevFilterOpen=!this.artboardStatusDevFilterOpen},clickInteractionFilter:function(){this.interactionFilterOpen=!this.interactionFilterOpen},quickKeyShift:function(t){this.shiftKey=t.shiftKey},quickKey:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,o,s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.quickKeyShift(t),i=t.keyCode||t.which,n.t0=i,n.next=112===n.t0||113===n.t0?5:114===n.t0?9:38===n.t0||40===n.t0?12:46;break;case 5:return e.showArtboardList=112===i,e.setVisible(!0),t.preventDefault(),n.abrupt("break",46);case 9:return e.setVisible(!e.visible),t.preventDefault(),n.abrupt("break",46);case 12:if(!e.keydownConfirming){n.next=14;break}return n.abrupt("return");case 14:if(!e.imageViewer.visible){n.next=16;break}return n.abrupt("return");case 16:if(a=38===i?-1:1,o=t.ctrlKey||t.metaKey,o){n.next=20;break}return n.abrupt("break",46);case 20:if(s=e.renderArtboardList,0!==s.length){n.next=24;break}return e.showTextTip(1===a?"已经到达最后一个画板":"已经到达第一个画板"),n.abrupt("return");case 24:if(c=s.findIndex((function(t){return e.curArtboard===t})),-1===c?c=0:c+=a,!(c<0)){n.next=31;break}return e.showTextTip("已经到达第一个画板"),n.abrupt("return");case 31:if(!(c>=s.length)){n.next=34;break}return e.showTextTip("已经到达最后一个画板"),n.abrupt("return");case 34:if(!e.inCommentDrawing){n.next=44;break}return e.keydownConfirming=!0,n.prev=36,n.next=39,e.confirm({text:"正在编辑画板截图,是否清理截图信息并切换画板?"});case 39:if(n.sent){n.next=41;break}return n.abrupt("return");case 41:return n.prev=41,e.keydownConfirming=!1,n.finish(41);case 44:return e.setCurArtboard(s[c]),n.abrupt("break",46);case 46:case"end":return n.stop()}}),n,null,[[36,,41,44]])})))()},getArtboardExportNodeCount:function(t){if(this.inCloudMode)return t.artboard.resNodeCount;var e=t.exportNodes;return e.length},setVisible:function(t){this.$store.commit("leftSideVisible",t)}},computed:{notSupportArtboardStatusVersion:function(){return Object(l["j"])(this.cloudVersion)},curArtboardRemoved:function(){var t;return!(null===(t=this.curArtboard)||void 0===t||!t.removed)},emptyNodeListText:function(){var t=this.sliceFilterOpen,e=this.interactionFilterOpen;return"未找到".concat(t&&e?"包含切图和原型的":t?"包含切图的":e?"包含原型的":"相关","图层信息")},imageViewer:function(){return this.$store.state.imageViewer},cloudListSort:function(){return this.$store.state.cloudListSort},sortRenderDocumentArtboards:function(){var t=this.renderDocumentArtboards,e=this.cloudListSort;return t=Object(u["a"])(t),Ie(t,"updateTimeTimes",o["j"].Artboard,e),t},renderArtboardList:function(){var t=this,e=this.commentFilterOpen,n=this.artboardStatusDevFilterOpen,r=this.artboardSearchText,i=this.sliceFilterOpen,a=this.sortRenderDocumentArtboards,s=""!==r;return a.filter((function(a){if(!a||!a.artboard)return!1;if(n&&a.customStatus!==o["f"].Dev)return!1;if(e){var c=a.artboard.comments+a.artboard.replies;if(!(c>0))return!1}if(i&&0===t.getArtboardExportNodeCount(a))return!1;if(s){var l=a.artboard.name;if(!l)return!1;if(-1===l.toLowerCase().indexOf(r))return!1}return!0}))},artboardSearchText:function(){return this.searchText.artboard.toLowerCase()},nodeInSearch:function(){return""!==this.searchText.node},frontStyle:function(){var t=this.renderList,e=0;if(t.length>0){var n=t[0].index;e=n*this.nodeLineHeight}return{marginTop:e+"px"}},braceStyle:function(){return{height:this.nodeList.length*this.nodeLineHeight+"px"}},renderList:function(){var t=this.nodeList,e=[],n=new d["a"],r=new d["a"],i=this.nodeLineHeight,a=this.preloadCount*i,o=this.nodeListHeight,s=this.nodeListScrollTop;return r.set(0,s-a,100,o+2*a),t.forEach((function(t,a){n.set(0,a*i,100,i),Object(d["f"])(n,r)&&e.push({node:t,index:a})})),e},interactionNodeList:function(){var t=this.curArtboard;if(!t)return[];var e=t.childs;return e&&0!==e.length?e.filter((function(t){return!!t.renderTapInteraction})):[]},nodeList:function(){var t,e=this.sliceFilterOpen,n=this.curArtboard,r=this.interactionFilterOpen;t=e||r?n.childs.filter((function(t){return!(e&&!t.markedForExport)&&!(r&&!t.renderTapInteraction)})):n.childs;var i=[],a=this.nodeInSearch,o=a?this.searchText.node.toLowerCase():"";return t.forEach((function(t){if(t.visible&&!t.mlIgnoreLeftSide){if(a){var e=t.name;if(!e)return;if(-1==e.toLowerCase().indexOf(o))return}i.push(t)}})),i},visible:function(){return this.$store.state.artboardDetail.leftSideVisible}},data:function(){return{curArtboardRemovedTipId:0,keydownConfirming:!1,preloadCount:2,nodeLineHeight:24,nodeListScrollTop:0,nodeListMousewheelTimes:0,nodeListMousewheelHandle:0,nodeListHeight:0,shiftKey:!1,showArtboardList:!1,sliceFilterOpen:!1,commentFilterOpen:!1,interactionFilterOpen:!1,artboardStatusDevFilterOpen:!1,searchText:{artboard:"",node:""}}},watch:{curArtboardRemoved:function(t){var e=this;if(t){var n,r=null===(n=this.curArtboard)||void 0===n?void 0:n.artboard;if(!r)return;var i=this.curArtboardRemovedTipId;if(i===r.cid)return;this.curArtboardRemovedTipId=r.cid,this.alert({text:"当前画板[".concat(r.name,"]已经被删除"),title:"提示",yesText:"返回列表"}).then((function(){e.curArtboardRemovedTipId=0,e.setCurArtboard(null)}))}},nodeListMousewheelTimes:function(t){var e=this;clearTimeout(this.nodeListMousewheelHandle),t>0&&(this.nodeListMousewheelHandle=setTimeout((function(){e.nodeListMousewheelTimes=0}),200))},"editComment.drawing":function(t){t&&this.setVisible(!1)},visible:function(t){t&&this.artboardInComment&&(this.showArtboardList=!0)},curNode:function(t,e){if(t){var n=this.nodeList.findIndex((function(e){return t===e}));if(-1!==n){var r=this.nodeListScrollTop,i=this.nodeLineHeight,a=this.nodeListHeight,o=r,s=o+a-i-i;o+=i;var c=n*i;if(c>o&&c<s)return;var l=c-a/2,u=this.$refs.nodeList;u&&u.scrollTo({top:l,behavior:null===e?"auto":"smooth"})}}},curArtboard:function(t){t&&(this.onNodeListResize(),this.onNodeListScroll())}},mounted:function(){this.onNodeListResize(),this.onNodeListScroll()},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKeyShift),window.addEventListener("resize",this.onNodeListResize),this.visible&&this.artboardInComment&&(this.showArtboardList=!0)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKeyShift),window.removeEventListener("resize",this.onNodeListResize),clearTimeout(this.nodeListMousewheelHandle)}},mv=fv,pv=(n("2fcb"),Object(hr["a"])(mv,zb,Yb,!1,null,"14899920",null)),bv=pv.exports,vv=function(){var t=this,e=t._self._c;return e("div",{staticClass:"rightside",class:{on:t.visible}},[e("nav",[e("div",{class:{on:t.propertyVisible},on:{click:t.clickNavProperty}},[t._v("标注")]),e("div",{class:{on:t.multDownloadVisible},on:{click:t.clickNavSlice}},[t._v("切图"),e("span",{staticClass:"count",domProps:{textContent:t._s(t.multDownloadCount)}})]),e("div",{class:{on:t.commentVisible},on:{click:t.clickNavComment}},[t._v("评论"),e("span",{staticClass:"count",domProps:{textContent:t._s(t.commentCount)}})])]),e("div",{staticClass:"container"},[e("Properties"),e("MultDownload"),e("CommentMain")],1)])},gv=[],wv=function(){var t=this,e=t._self._c;return t.hasValue?e("section",{staticClass:"node-properties"},[e("Header"),e("main",{class:{export:t.curNode.markedForExport}},[e("PropertyInfo",{attrs:{nodeStyle:t.nodeStyle}}),!t.curNode.types.Text&&t.nodeStyle.fill?e("PropertyFill",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.curNode.types.GraphicNode?e("PropertiesGraphicNode",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.curNode.types.Text?e("PropertyText",{attrs:{sketchGroupFillColor:t.sketchGroupFillColor,nodeStyle:t.nodeStyle}}):t._e(),t.curNode.markedForExport?e("PropertyExport"):t._e(),t.cssVisible?e("PropertyCss",{attrs:{sketchGroupFillColor:t.sketchGroupFillColor,nodeStyle:t.nodeStyle}}):t._e()],1)],1):t._e()},xv=[],yv=function(){var t=this,e=t._self._c;return e("div",[t.nodeStyle.borders.length+t.nodeStyle.textStrokeStyles.length>0?[t._m(0),t.nodeStyle.strokeSN?[e("PropertyShowStyleName",{attrs:{title:"描边样式",styleName:t.nodeStyle.strokeSN}}),e("div",{staticClass:"prop-line"})]:t._e(),t._l(t.nodeStyle.borders,(function(t,n){return e("PropertyStrokeItem",{key:"border-".concat(n),attrs:{typeName:"边框",index:n,stroke:t}})})),t._l(t.nodeStyle.textStrokeStyles,(function(n,r){return e("PropertyStrokeItem",{key:"text-stroke-".concat(r),attrs:{typeName:"描边",index:r+t.nodeStyle.borders.length,stroke:n}})}))]:t._e(),e("PropertyEffect",{attrs:{nodeStyle:t.nodeStyle}})],2)},kv=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-stroke"},[t._v("描边")])])}],Cv=function(){var t=this,e=t._self._c;return t.styleName?e("dl",{staticClass:"item mult_min"},[e("dt",{domProps:{textContent:t._s(t.title)}}),e("dd",[e("PropertyShowValue",{attrs:{cls:{multiple_min:1},value:t.styleName}})],1)]):t._e()},Sv=[],Ov=function(){var t,e=this,n=e._self._c;return n("div",{staticClass:"inp",class:e.cls,on:{click:e.clickCopy}},[n("span",{attrs:{title:null!==(t=e.title)&&void 0!==t?t:e.value},domProps:{textContent:e._s(e.value)}})])},Iv=[],Av={methods:{clickCopy:function(t){if(!1!==this.doNotAutoCopy){var e=this.copyValue,n=this.value,r=null!=e;r&&(n=e);var i=r?Object(c["p"])(n):Object(c["o"])(n);r&&this.selectElement(t.target),i?this.showTextTip("已复制文本: ".concat(n),2):this.showTextTip("复制到剪切板失败",2)}},selectElement:function(t){if(t)try{if(window.getSelection){var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}catch(r){}}},props:{value:null,title:{type:String,default:null},cls:Object,copyValue:null,doNotAutoCopy:{type:Boolean,default:!0}}},Tv=Av,jv=Object(hr["a"])(Tv,Ov,Iv,!1,null,null,null),Fv=jv.exports,Mv={components:{PropertyShowValue:Fv},props:{styleName:String,title:String}},_v=Mv,Lv=Object(hr["a"])(_v,Cv,Sv,!1,null,null,null),Dv=Lv.exports,Nv=function(){var t=this,e=t._self._c;return t.stroke?e("section",{staticClass:"prop-box"},[t.index>0?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("位置")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.strokeName}}),t.stroke.widths?t._e():e("div",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("粗细")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.stroke.widths||t.stroke.width}}),t.stroke.widths?t._e():e("div",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("线条类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.stroke.style}}),t.stroke.customDashes?t._e():e("div",{staticClass:"inp empty"})],1)]),e("PropertyColor",{attrs:{fill:t.stroke}})],1):t._e()},Ev=[],Pv=function(){var t=this,e=t._self._c;return t.fill.type===t.EnumFillShowType.FillColor?e("PropertyShowColor",{attrs:{name:t.solidName,value:t.fill.color,"swatch-value":t.fill.swatch}}):t.fill.type===t.EnumFillShowType.LinearGradientFill?e("div",[e("dl",{staticClass:"item"},[e("dt",[t._v("线性渐变")]),e("dd",[e("PropertyShowValue",{attrs:{value:"linear"}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.canvasAngle,title:"起点和终点的角度为沿水平右侧方向顺时针旋转: ".concat(t.canvasAngle)}})],1)]),t.linearEndPoints?[e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("起点")]),e("span",{staticClass:"loc-name"},[t._v("X1")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.x1,copyValue:t.linearEndPoints.decimal_x1}}),e("span",{staticClass:"loc-name"},[t._v("Y1")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.y1,copyValue:t.linearEndPoints.decimal_y1,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("终点")]),e("span",{staticClass:"loc-name"},[t._v("X2")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.x2,copyValue:t.linearEndPoints.decimal_x2}}),e("span",{staticClass:"loc-name"},[t._v("Y2")]),e("PropertyShowValue",{attrs:{value:t.linearEndPoints.y2,copyValue:t.linearEndPoints.decimal_y2,cls:{m2:1}}})],1)])]:t._e(),e("ul",{staticClass:"fill-list",class:{"last-has-swatch":t.gradientFillLastHasSwatch}},t._l(t.fill.colorStops,(function(n,r){return e("li",{key:"line-colorStop-".concat(r)},[e("div",{staticClass:"title",on:{click:function(e){return t.clickCopy(n.stop,!0)}}},[t._v(t._s(n.stop))]),e("PropertyShowColor",{attrs:{name:"",value:n.color,"swatch-value":n.swatch}})],1)})),0),t.gradientSwatch?e("dl",{staticClass:"item"},[e("dt",[t._v("渐变变量")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.gradientSwatch}})],1)]):t._e()],2):t.fill.type===t.EnumFillShowType.RadialGradientFill||t.fill.type===t.EnumFillShowType.AngularGradientFill||t.fill.type===t.EnumFillShowType.DiamondGradientFill?e("div",[e("dl",{staticClass:"item"},[e("dt",[t._v(t._s(t.gradientInfo.name)+"渐变")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.gradientInfo.className}}),e("PropertyShowValue",{attrs:{cls:{m2:1},value:t.canvasAngle,title:"沿水平右侧方向顺时针旋转: ".concat(t.canvasAngle)}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("圆心")]),e("span",{staticClass:"loc-name"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.startX,copyValue:t.ellipseEndPoints.decimal_startX}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.startY,copyValue:t.ellipseEndPoints.decimal_startY,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name start"},[t._v("半径")]),e("span",{staticClass:"loc-name"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.scaleX,copyValue:t.ellipseEndPoints.decimal_scaleX}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.ellipseEndPoints.scaleY,copyValue:t.ellipseEndPoints.decimal_scaleY,cls:{m2:1}}})],1)]),e("ul",{staticClass:"fill-list",class:{"last-has-swatch":t.gradientFillLastHasSwatch}},t._l(t.fill.colorStops,(function(n,r){return e("li",{key:"radial-colorStop-".concat(r)},[e("div",{staticClass:"title",on:{click:function(e){return t.clickCopy(n.stop,!0)}}},[t._v(t._s(n.stop))]),e("PropertyShowColor",{attrs:{name:"",value:n.color,"swatch-value":n.swatch}})],1)})),0),t.gradientSwatch?e("dl",{staticClass:"item"},[e("dt",[t._v("渐变变量")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.gradientSwatch}})],1)]):t._e()]):t._e()},Rv=[],Vv={computed:{colorTypes:function(){return this.$store.state.setting.color.items},currentColorType:function(){return this.colorTypes[this.$store.state.setting.color.current]},currentColorTypeIndex:function(){return this.$store.state.setting.color.current}},methods:{getSwatch:function(t){var e;if(null==t)return null;if(!this.inCloudMode)return null;var n=null===(e=this.curArtboard)||void 0===e?void 0:e.artboard.swatches;if(!n)return null;var r=n[t];if(!Object(l["s"])(r))return null;var i=r.doc,a=r.lib;return Object(l["h"])(i)&&i.length>0?i[i.length-1]:Object(l["h"])(a)&&a.length>0?a[a.length-1]:null},setSettingColor:function(t){this.$store.commit("setSettingColor",t)},getColorRGBAValue:function(t){return Object(h["i"])(t)},getCssShowColor:function(t,e,n){var r,i=Object(h["i"])(t);return null!==(r=n)&&void 0!==r||(n=this.getSwatch(i.hexa)),t=1===i.opacity?Object(h["g"])(i).value:i.value,{value:t,swatch:n,name:e}},getColorValue:function(t){var e=this.getColorRGBAValue(t);switch(this.currentColorType){case"hex":e=Object(h["g"])(e);break;case"ahex":e=Object(h["e"])(e);break;case"hexa":e=Object(h["h"])(e);break;case"hsla":e=Object(h["f"])(e);break}return e}}},Bv=function(){var t=this,e=t._self._c;return e("dl",{staticClass:"item",class:{"in-swatch":t.hasSwatch}},[t.name?e("dt",[t._v(t._s(t.name))]):t._e(),e("dd",[e("div",{staticClass:"container"},[e("div",{staticClass:"color"},[e("i",{attrs:{title:"点击切换颜色类型"},on:{contextmenu:function(e){return e.preventDefault(),t.showColorSelect.apply(null,arguments)},click:t.clickColorTypeNext}},[e("span",{style:{backgroundColor:t.rgba.value}})]),e("span",{staticClass:"inp",class:[this.currentColorType],on:{click:function(e){return t.clickCopy(t.showValue.value)}}},[e("span",{attrs:{title:t.showValue.value},domProps:{textContent:t._s(t.showValue.value)}})])]),"hex"===this.currentColorType?e("div",{staticClass:"inp opacity",on:{click:function(e){return t.clickCopy(t.opacity)}}},[e("span",{staticClass:"opacity",attrs:{title:t.opacity},domProps:{textContent:t._s(t.opacity)}})]):t._e(),t.colors.visible?e("ul",{staticClass:"colors"},t._l(t.colorTypes,(function(n,r){return e("li",{key:n,class:{on:t.currentColorTypeIndex===r},on:{click:function(e){return t.onColorSelectChanged(r)}}},[t._v(t._s(n.toUpperCase()))])})),0):t._e()]),t.hasSwatch?e("div",{staticClass:"container"},[e("div",{staticClass:"swatch",attrs:{title:"颜色变量: ".concat(t.swatch)}},[e("span",{staticClass:"swatch-text",on:{click:function(e){return t.clickCopy(t.swatch,!0)}}},[t._v(t._s(t.swatch))])])]):t._e()])])},Uv=[],Hv={props:{value:null,name:String,nonSwatch:{type:Boolean,default:!1},swatchValue:{type:String,default:void 0}},methods:{clickCopy:function(t,e){(e?Object(c["p"])(t):Object(c["o"])(t))?this.showTextTip("已复制文本: ".concat(t),2):this.showTextTip("复制到剪切板失败",2)},showColorSelect:function(){this.colors.visible=!0},clickColorTypeNext:function(){this.setSettingColor(this.currentColorTypeIndex+1)},onColorSelectChanged:function(t){this.setSettingColor(t)},hideColorSelect:function(){var t=this;requestAnimationFrame((function(){t.colors.visible=!1}))}},computed:{rgba:function(){return this.getColorRGBAValue(this.value)},showValue:function(){return this.getColorValue(this.value)},hasSwatch:function(){return!!this.swatch},swatch:function(){var t=this.nonSwatch,e=this.swatchValue;return t?null:Object(l["i"])(e)?e:this.getSwatch(this.rgba.hexa)},opacity:function(){var t=this.showValue.opacity;return Br["a"].mul(t,100)+"%"}},mixins:[Vv],watch:{"colors.visible":function(t){t?(window.addEventListener("click",this.hideColorSelect,!0),window.addEventListener("contextmenu",this.hideColorSelect,!0)):(window.removeEventListener("click",this.hideColorSelect,!0),window.removeEventListener("contextmenu",this.hideColorSelect,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.hideColorSelect,!0),window.removeEventListener("contextmenu",this.hideColorSelect,!0)},data:function(){return{colors:{visible:!1}}}},Wv=Hv,$v=(n("6c0c"),Object(hr["a"])(Wv,Bv,Uv,!1,null,"3bd76794",null)),Gv=$v.exports,zv={methods:{clickCopy:function(t,e){e&&(t=Object(c["q"])(parseFloat(t)/100,4)),Object(c["p"])(t)?this.showTextTip("已复制文本: ".concat(t),2):this.showTextTip("复制到剪切板失败",2)}},computed:{gradientFillLastHasSwatch:function(){var t,e=null===(t=this.fill)||void 0===t?void 0:t.colorStops;if(!Object(l["h"])(e))return!1;var n=e.length;if(n>1){var r=e[n-1];if(r){var i=r.swatch,a=r.color;return Object(l["i"])(i)||(i=this.getSwatch(this.getColorRGBAValue(a).hexa)),Object(l["i"])(i)}}},canvasAngle:function(){var t;return Object(c["B"])(null===(t=this.fill)||void 0===t?void 0:t.angle)},EnumFillShowType:function(){return o["o"]},gradientSwatch:function(){var t,e=this.fill;switch(e.type){case o["o"].FillColor:case o["o"].None:case o["o"].ImageFill:return null}var n=e.colorStops,r=Object(h["k"])(null===(t=this.gradientInfo)||void 0===t?void 0:t.className,n);return this.getSwatch(r)},gradientInfo:function(){var t;return null!==(t=o["o"].getGradientInfo(this.fill.type))&&void 0!==t?t:{name:void 0,className:void 0}},ellipseEndPoints:function(){var t=this.fill;if(t.type===o["o"].RadialGradientFill||t.type===o["o"].AngularGradientFill||t.type===o["o"].DiamondGradientFill){var e=t.startX,n=t.startY,r=t.scaleX,i=t.scaleY,a=[e,n,r,i].map((function(t){return Object(c["q"])(parseFloat(t)/100,4)})),s=Object(Pt["a"])(a,4),l=s[0],u=s[1],d=s[2],h=s[3];return{startX:e,startY:n,scaleX:r,scaleY:i,decimal_startX:l,decimal_startY:u,decimal_scaleX:d,decimal_scaleY:h}}},linearEndPoints:function(){var t=this.fill;if(t.type!==o["o"].LinearGradientFill)return null;var e=t.endPoints;if(!Object(l["h"])(e)||4!==e.length)return null;var n=e.map((function(t){return Object(c["q"])(t,4)})),r=Object(Pt["a"])(n,4),i=r[0],a=r[1],s=r[2],u=r[3],d=e.map((function(t){return Object(c["q"])(100*t,2)+"%"})),h=Object(Pt["a"])(d,4),f=h[0],m=h[1],p=h[2],b=h[3];return{x1:f,y1:m,x2:p,y2:b,decimal_x1:i,decimal_y1:a,decimal_x2:s,decimal_y2:u}}},components:{PropertyShowColor:Gv,PropertyShowValue:Fv},mixins:[Vv],props:{fill:Object,solidName:{type:String,default:"纯色"}}},Yv=zv,Xv=(n("76b8"),Object(hr["a"])(Yv,Pv,Rv,!1,null,"2f626672",null)),Kv=Xv.exports,qv={components:{PropertyColor:Kv,PropertyShowValue:Fv},computed:{strokeName:function(){var t=this.stroke,e=this.typeName;if(t){var n=t.position;return o["O"].getName(n)+e}},SketchEnumBorderPositionNumberStr:function(){return{0:"中心",1:"内",2:"外"}}},props:{stroke:Object,index:Number,typeName:String}},Qv=qv,Jv=Object(hr["a"])(Qv,Nv,Ev,!1,null,null,null),Zv=Jv.exports,tg=function(){var t=this,e=t._self._c;return t.visible?e("div",[t._m(0),t.nodeStyle.effectSN?[e("PropertyShowStyleName",{attrs:{title:"效果样式",styleName:t.nodeStyle.effectSN}}),e("div",{staticClass:"prop-line"})]:t._e(),t.objectEffect?[e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"高斯模糊"}}),e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.objectEffect}}),e("span",{staticClass:"inp empty"})],1)])]:t._e(),t.backgroundEffect?[t.objectEffect?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"背景模糊"}}),e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.backgroundEffect}}),null==t.backgroundEffectBrightness&&null==t.backgroundEffectSaturation?e("span",{staticClass:"inp empty"}):t.backgroundEffectBrightness?e("div",{staticClass:"brightness"},[e("span",{staticClass:"bn-name"},[t._v("亮度")]),e("PropertyShowValue",{attrs:{value:t.backgroundEffectBrightness}})],1):t.backgroundEffectSaturation?e("div",{staticClass:"saturation"},[e("span",{staticClass:"bn-name"},[t._v("饱和度")]),e("PropertyShowValue",{attrs:{value:t.backgroundEffectSaturation}})],1):t._e()],1)])]:t._e(),t.zoomEffect?[t.objectEffect||t.backgroundEffect?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"缩放模糊"}}),e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.zoomEffect}}),t.zoomEffectCenter?e("div",{staticClass:"brightness"},[e("span",{staticClass:"bn-name"},[t._v("原点")]),e("PropertyShowValue",{attrs:{value:t.zoomEffectCenter}})],1):e("span",{staticClass:"inp empty"})],1)])]:t._e(),t.motionEffect?[t.zoomEffect||t.objectEffect||t.backgroundEffect?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:"动感模糊"}}),e("span",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.motionEffect}}),t.motionEffectAngle?e("div",{staticClass:"brightness"},[e("span",{staticClass:"bn-name"},[t._v("角度")]),e("PropertyShowValue",{attrs:{value:t.motionEffectAngle}})],1):e("span",{staticClass:"inp empty"})],1)])]:t._e(),t._l(t.nodeStyle.shadows,(function(n,r){return e("PropertyEffectShadow",{key:"shadow-".concat(r),attrs:{shadowName:"外阴影",shadow:n,splitLine:(t.backgroundEffect||t.objectEffect||t.zoomEffect||t.motionEffect)&&0===r||r>0}})})),t._l(t.nodeStyle.innerShadows,(function(n,r){return e("PropertyEffectShadow",{key:"inner-shadow-".concat(r),attrs:{shadowName:"内阴影",shadow:n,splitLine:(t.backgroundEffect||t.objectEffect||t.zoomEffect||t.motionEffect)&&0===t.nodeStyle.shadows.length&&0===r||r+t.nodeStyle.shadows.length>0}})}))],2):t._e()},eg=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-effect"},[t._v("效果")])])}],ng=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[t.splitLine?e("div",{staticClass:"prop-line"}):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("效果类型")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.shadowName}}),e("div",{staticClass:"inp empty"})],1)]),e("dl",{staticClass:"item loc"},[e("dt",[t._v("偏移")]),e("dd",[e("span",{staticClass:"loc-name"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.shadow.x}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.shadow.y,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item"},[e("dt",[t._v("模糊距离")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.shadow.blur}}),e("div",{staticClass:"inp empty"})],1)]),t.shadow.spread?e("dl",{staticClass:"item"},[e("dt",[t._v("阴影大小")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.shadow.spread}}),e("div",{staticClass:"inp empty"})],1)]):t._e(),e("PropertyShowColor",{attrs:{name:"颜色",value:t.shadow.color,"swatch-value":t.shadow.swatch}})],1)},rg=[],ig={components:{PropertyShowColor:Gv,PropertyShowValue:Fv},props:{shadowName:String,shadow:Object,splitLine:Boolean}},ag=ig,og=Object(hr["a"])(ag,ng,rg,!1,null,null,null),sg=og.exports,cg={components:{PropertyShowValue:Fv,PropertyShowStyleName:Dv,PropertyEffectShadow:sg},computed:{visible:function(){var t=this.objectEffect,e=this.backgroundEffect,n=this.zoomEffect,r=this.motionEffect,i=this.nodeStyle,a=i.shadows,o=i.innerShadows;return t||e||n||r||a.length+o.length>0},motionEffect:function(){var t=this.nodeStyle.motionEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0})},motionEffectAngle:function(){var t=this.nodeStyle.motionEffectAngle;return null==t||isNaN(t)?"":(-Math.round(t)).toString()},zoomEffect:function(){var t=this.nodeStyle.zoomEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0})},zoomEffectCenter:function(){var t=this.nodeStyle.zoomEffectCenter;return t?"[".concat(Object(c["q"])(t.x,2),",").concat(Object(c["q"])(t.y),"]"):""},objectEffect:function(){var t=this.nodeStyle.objectEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0})},backgroundEffect:function(){var t=this.nodeStyle.backgroundEffect;return null==t||t<=0?"":this.getCalcPlatformValue(t,{needArtScale:!0})},backgroundEffectBrightnessDecimal:function(){var t=this.nodeStyle.backgroundEffectBrightness;return"number"!==typeof t||1===t?null:Object(c["q"])(t,2)},backgroundEffectBrightness:function(){var t=this.backgroundEffectBrightnessDecimal;return null==t?null:Math.round(100*t)+"%"},backgroundEffectSaturationDecimal:function(){var t=this.nodeStyle.backgroundEffectSaturation;return"number"!==typeof t||1===t?null:Object(c["q"])(t,2)},backgroundEffectSaturation:function(){var t=this.backgroundEffectSaturationDecimal;return null==t?null:Math.round(100*t)+"%"}},props:{nodeStyle:Object}},lg=cg,ug=Object(hr["a"])(lg,tg,eg,!1,null,null,null),dg=ug.exports,hg={components:{PropertyStrokeItem:Zv,PropertyShowStyleName:Dv,PropertyEffect:dg},props:{nodeStyle:Object},computed:{strokeTypeName:function(){return this.curNode.types.Text?"描边":"边框"}}},fg=hg,mg=Object(hr["a"])(fg,yv,kv,!1,null,null,null),pg=mg.exports,bg=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box"},[e("dl",{staticClass:"item node-name"},[e("dt",[t._v("图层")]),e("dd",{staticClass:"cur-node-name"},[e("NodeName",{attrs:{node:t.curNode}})],1)]),t.curNode.layerSN?e("dl",{staticClass:"item mult_min"},[e("dt",{domProps:{textContent:t._s("图层样式")}}),e("dd",[e("PropertyShowValue",{attrs:{cls:{multiple_min:1},value:t.curNode.layerSN}})],1)]):t._e(),t.renderTapInteraction?e("PropertyInfoInteraction",{attrs:{renderTapInteraction:t.renderTapInteraction}}):t._e(),t._m(0),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name mid"},[t._v("X")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.left}}),e("span",{staticClass:"loc-name"},[t._v("Y")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.top,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item loc"},[e("dd",[e("span",{staticClass:"loc-name mid"},[t._v("W")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.width}}),e("span",{staticClass:"loc-name"},[t._v("H")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.height,cls:{m2:1}}})],1)]),e("dl",{staticClass:"item",class:{opa:t.showBlendOpacity}},[e("dt",{attrs:{title:"当前图层的不透明度"}},[t._v("不透明度")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.nodeStyle.opacity}}),e("div",{staticClass:"inp empty"})],1)]),t.showBlendOpacity?e("dl",{staticClass:"item opa"},[e("dt",{attrs:{title:"组合不透明度是指叠加了当前图层和所有父级图层透明度的计算值"}},[t._v("组合不透明度")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.nodeStyle.blendOpacity}}),e("div",{staticClass:"inp empty"})],1)]):t._e(),t.nodeStyle.cornerRadiiValue?e("dl",{staticClass:"item"},[e("dt",[t._v("圆角")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.nodeStyle.cornerRadiiValue}}),t.shortCornerRadiiValue?e("div",{staticClass:"inp empty"}):t._e()],1)]):t._e(),t.curNode.boxTransform?[0!==t.curNode.boxTransform.rotation?e("dl",{staticClass:"item"},[e("dt",[t._v("旋转")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.curNode.boxTransform.rotation+"deg"}}),e("div",{staticClass:"inp empty"})],1)]):t._e(),t.flippedText?e("dl",{staticClass:"item"},[e("dt",[t._v("翻转")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.flippedText}}),e("div",{staticClass:"inp empty"})],1)]):t._e()]:t._e()],2)},vg=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-rect"},[t._v("比例")])])}],gg=function(){var t=this,e=t._self._c;return e("dl",{staticClass:"item"},[e("dt",[t._v(t._s(t.typeName))]),e("dd",[e("a",{staticClass:"interaction-link",attrs:{href:"javascript:;",title:t.toArtboardName},on:{click:t.clickGoArtboard}},[t._v(t._s(t.toArtboardName))])])])},wg=[],xg={methods:{clickGoArtboard:function(){this.$store.commit("setInteractionArtboard",this.renderTapInteraction)}},computed:{typeName:function(){return ht.getTypeName(this.renderTapInteraction.type)},toArtboardName:function(){var t,e;switch(this.renderTapInteraction.type){case ht.goBack:case ht.goBackAndCloseAllOverlay:return"上一个画板";case ht.closeCurrentOverlay:return"最顶部遮罩层";case ht.goUrl:return this.renderTapInteraction.toUrl;default:return null!==(t=null===(e=this.toArtboardItem)||void 0===e?void 0:e.name)&&void 0!==t?t:"目标画板未上传"}},toArtboardItem:function(){var t,e;return null!==(t=null===(e=this.renderTapInteraction)||void 0===e?void 0:e.toArtboardItem)&&void 0!==t?t:null}},props:{renderTapInteraction:Object}},yg=xg,kg=(n("7eae"),Object(hr["a"])(yg,gg,wg,!1,null,"7e5908d3",null)),Cg=kg.exports,Sg=function(){var t=this,e=t._self._c;return e("div",{staticClass:"node-name",class:{focused:t.focused,"non-export":!t.node.markedForExport}},[this.node.markedForExport?e("input",{attrs:{type:"text","max-length":"50",spellcheck:"false"},domProps:{value:t.nodeShowName},on:{focus:t.inputFocus,blur:function(e){return t.inputBlur(e)},compositionstart:function(e){return t.onComposition(!0)},compositionend:function(e){return t.onComposition(!1)},keyup:t.inputKeyup}}):e("div",{attrs:{title:t.nodeShowName}},[t._v(t._s(t.nodeShowName))])])},Og=[],Ig={methods:{inputKeyup:function(t){var e=t.keyCode||t.which;13==e&&(t.target.blur(),t.preventDefault())},onComposition:function(t){this.inComposition=t},inputFocus:function(){this.focused=!0},inputBlur:function(t){this.focused=!1;var e=t.target.value.trim();if(e!==this.nodeShowName){var n=this.node;n.markedForExport?Object(c["ob"])(this,n,e):this.showTextTip("只有切图资源才可以进行重命名操作")}}},computed:{nodeShowName:function(){var t=this.node,e=Object(c["J"])(t);if(!t.markedForExport&&Object(l["i"])(e)){e=e.trim();var n=e.length;n>33&&(e=e.substr(0,30)+"...")}return e}},data:function(){return{focused:!1,inComposition:!1}},props:{node:Object}},Ag=Ig,Tg=(n("9502"),Object(hr["a"])(Ag,Sg,Og,!1,null,"0a9db6ee",null)),jg=Tg.exports,Fg={props:{nodeStyle:Object},components:{PropertyShowValue:Fv,NodeName:jg,PropertyInfoInteraction:Cg},computed:{showBlendOpacity:function(){var t=this.nodeStyle;return t.blendOpacity&&t.blendOpacity!=t.opacity},renderTapInteraction:function(){var t=this.curNode;if(!t)return null;var e=t.renderTapInteraction;if(e)return e;var n=t.parentNode,r=t.boundsInArtboard;while(n){if(r.isSame(n.boundsInArtboard)&&(e=n.renderTapInteraction,e))return e;n=n.parentNode}return null},flippedText:function(){var t=this.curNode.boxTransform;if(t){var e="";return t.flippedHorizontally&&(e="水平"),t.flippedVertically&&(e?e+=" & 垂直":e="垂直"),e}},shortCornerRadiiValue:function(){var t=this.nodeStyle.cornerRadiiValue;return!t||-1===t.indexOf(" ")}},created:function(){0}},Mg=Fg,_g=(n("b627"),Object(hr["a"])(Mg,bg,vg,!1,null,"015e4654",null)),Lg=_g.exports,Dg=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"prop-box"},[e("h5",{staticClass:"fill-title"},[e("span",{staticClass:"i-text icon-fills"},[t._v("填充")]),t.nodeStyle.blendMode?e("div",{staticClass:"blend-mode"},[e("span",[t._v("混合模式")]),e("PropertyShowValue",{attrs:{value:t.nodeStyle.blendMode}})],1):t._e()]),t.fillSN?e("PropertyShowStyleName",{attrs:{title:"填充样式",styleName:t.fillSN}}):t._e(),t._l(t.fills,(function(t,n){return e("PropertyColor",{key:"fill-".concat(n),attrs:{fill:t}})}))],2):t._e()},Ng=[],Eg={components:{PropertyShowValue:Fv,PropertyColor:Kv,PropertyShowStyleName:Dv},props:{nodeStyle:Object},computed:{fillSN:function(){return this.nodeStyle.fillSN},fills:function(){return this.nodeStyle.fills},visible:function(){return this.fills.length>0}},data:function(){return{EnumFillShowType:o["o"]}}},Pg=Eg,Rg=(n("fe6a"),Object(hr["a"])(Pg,Dg,Ng,!1,null,"6ecf663c",null)),Vg=Rg.exports,Bg=function(){var t=this,e=t._self._c;return e("section",[e("section",{staticClass:"prop-box"},[t._m(0),t.charSN?e("PropertyShowStyleName",{attrs:{title:"字符样式",styleName:t.charSN}}):t._e(),t._l(t.combineStyles,(function(n,r){return[n.color?e("PropertyTextColor",{key:r,attrs:{forKey:r,item:n,sketchGroupFillColor:t.sketchGroupFillColor,itemStyle:t.style}}):n.hideDefault&&t.styles[0][n.field]==n.default?t._e():e("dl",{key:r,staticClass:"item"},[e("dt",{domProps:{textContent:t._s(n.name)}}),e("dd",[e("PropertyShowValue",{attrs:{value:n.extendValue(t.styles[0][n.field],"fontWeight"===n.field?t.calcPlatformShowType:t.getCalcPlatformValue)}}),"fontWeight"===n.field?e("PropertyShowValue",{attrs:{value:t.styles[0].fontWeightCss,cls:t.fontWeightCls}}):n.halfWidth?e("div",{staticClass:"inp m2 empty"}):t._e()],1)])]})),t.paragraphIndent?e("dl",{staticClass:"item"},[e("dt",[t._v("段落缩进")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.paragraphIndent}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e(),t.paragraphSpacing?e("dl",{staticClass:"item"},[e("dt",[t._v("段落间距")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.paragraphSpacing}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e(),t.lineSpacing?e("dl",{staticClass:"item"},[e("dt",[t._v("行高")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.lineSpacing}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e(),e("dl",{staticClass:"item"},[e("dt",[t._v("对齐方式")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.curNode.textAlign}}),e("div",{staticClass:"inp m2 empty"})],1)]),t.curNode.textVerticalAlign?e("dl",{staticClass:"item"},[e("dt",[t._v("垂直对齐")]),e("dd",[e("PropertyShowValue",{attrs:{value:t.curNode.textVerticalAlign}}),e("div",{staticClass:"inp m2 empty"})],1)]):t._e()],2),t.unCombineStyles.length>0?e("div",[t._l(t.styles,(function(n,r){return[""!=t.subTexts[r]?e("section",{key:r,staticClass:"prop-box uncombine"},[e("h5",[t._v("文本"+t._s(r+1))]),!t.charSN&&t.styles.length>1&&n.charSN?e("PropertyShowStyleName",{attrs:{title:"字符样式",styleName:n.charSN}}):t._e(),t._l(t.unCombineStyles,(function(r,i){return[r.color?e("PropertyTextColor",{key:r.field,attrs:{forKey:r.field,item:r,sketchGroupFillColor:t.sketchGroupFillColor,itemStyle:n}}):r.hideDefault&&n[r.field]==r.default?t._e():e("dl",{key:i,staticClass:"item"},[e("dt",{domProps:{textContent:t._s(r.name)}}),e("dd",[e("PropertyShowValue",{attrs:{value:r.extendValue(n[r.field],"fontWeight"===r.field?t.calcPlatformShowType:t.getCalcPlatformValue)}}),"fontWeight"===r.field?e("PropertyShowValue",{attrs:{value:n.fontWeightCss,cls:t.fontWeightCls}}):r.halfWidth?e("div",{staticClass:"inp m2 empty"}):t._e()],1)])]}))],2):t._e()]}))],2):t._e(),e("h5",{staticClass:"mult-h5"},[t._v(" 文本内容 "),e("a",{staticClass:"copy",attrs:{href:"javascript:;"},on:{click:function(e){return t.copyText(t.text)}}},[t._v("复制文本")])]),e("dl",{staticClass:"item mult"},[e("dd",[e("PropertyShowValue",{attrs:{doNotAutoCopy:!1,value:t.text,cls:{multiple:1}}})],1)])])},Ug=[function(){var t=this,e=t._self._c;return e("h5",[e("span",{staticClass:"i-text icon-text"},[t._v("文本")])])}],Hg=function(){var t=this,e=t._self._c;return t.itemStyle.figmaFills?e("div",t._l(t.itemStyle.figmaFills,(function(n,r){return e("PropertyColor",{key:"".concat(t.forKey,"_").concat(r,"_fig"),attrs:{fill:n,solidName:"前景色"}})})),1):t.itemStyle.fills&&t.itemStyle.fills.length>1?e("div",t._l(t.itemStyle.fills,(function(n,r){return e("PropertyShowColor",{key:"".concat(t.forKey,"_").concat(r),attrs:{name:"".concat(t.item.name).concat(r+1),value:t.tintColor(n.value),"swatch-value":n.swatch}})})),1):e("PropertyShowColor",{key:t.forKey,attrs:{name:t.item.name,value:t.tintColor(t.itemStyle.fill.value),"swatch-value":t.itemStyle.fill.swatch}})},Wg=[],$g={components:{PropertyColor:Kv,PropertyShowColor:Gv},methods:{tintColor:function(t){return Object(c["Q"])(this.sketchGroupFillColor,t)}},props:{itemStyle:Object,forKey:String,item:Object,sketchGroupFillColor:{type:Object,validator:function(){return!0}}}},Gg=$g,zg=Object(hr["a"])(Gg,Hg,Wg,!1,null,null,null),Yg=zg.exports,Xg=[{name:"填充样式",field:"fillSN",hideDefault:!0,default:null},{name:"前景色",field:"fill",color:!0},{name:"字体",field:"fontFamily"},{name:"字重",field:"fontWeight",halfWidth:!1,hideDefault:!1,default:"normal",extendValue:function(t,e){if("number"===typeof t){var n=o["G"][t];n&&(t=n.toLowerCase())}return e===o["c"].IOS&&t&&"normal"===t.toLowerCase()&&(t="Regular"),t}},{name:"斜体",field:"fontItalic",halfWidth:!0,hideDefault:!0,default:"normal"},{name:"字号",field:"fontSize",halfWidth:!0,extendValue:function(t,e){return e(t,{fontSize:!0,needArtScale:!0})}},{name:"字间距",field:"charSpacing",hideDefault:!0,default:null,halfWidth:!0,extendValue:function(t,e){return e(t,{needArtScale:!0})}}];Xg.forEach((function(t){t.extendValue||(t.extendValue=function(t){return t})}));var Kg={components:{PropertyShowValue:Fv,PropertyTextColor:Yg,PropertyShowStyleName:Dv},methods:{copyText:function(t){null!=t&&(Object(c["p"])(t)?this.showTextTip("已复制文本到剪切板",2):this.showTextTip("复制到剪切板失败",2))}},computed:{charSN:function(){var t,e=this.styles,n=this.curNode.charSN;return 1===e.length&&(t=e[0].charSN)?t:n},fontWeightCls:function(){return{m2:1}},paragraphIndent:function(){var t=this.curNode,e=t.paragraphIndent;return 0===e||null==e?"":this.getCalcPlatformValue(e,{needArtScale:!0})},paragraphSpacing:function(){var t=this.curNode,e=t.paragraphSpacing;return 0===e||null==e?"":this.getCalcPlatformValue(e,{needArtScale:!0})},lineSpacing:function(){var t=this.curNode,e=t.lineSpacing;return 0===e||null==e?"auto":this.getCalcPlatformValue(e,{needArtScale:!0})},unCombineStyles:function(){var t=[],e=this.combineStyles;return Xg.forEach((function(n){e[n.field]||t.push(n)})),t},combineStyles:function(){var t={},e=this.styles,n=e.length;return n<=1?(1===n&&Xg.forEach((function(e){t[e.field]=e})),t):(Xg.forEach((function(r){var i=!0,a=e[0][r.field];r.color&&(a=a.value);for(var o=1;o<n;o++){var s=e[o];if(s){var c=s[r.field];if(r.color&&(c=c.value),c!==a){i=!1;break}}}i&&(t[r.field]=r)})),t)},subTexts:function(){var t=this.text,e=this.styles,n=[];if(0===e.length||1===e.length&&0===e[0].length)return n.push(t),n;var r=0;return e.forEach((function(i,a){var o;a===e.length-1?o=t.substr(r):(o=t.substr(r,i.length),r+=i.length),n.push(o)})),n},text:function(){return this.curNode.text||""},styles:function(){return this.curNode.styleRanges||[]},style:function(){return this.styles[0]}},props:{sketchGroupFillColor:{type:Object,validator:function(){return!0}},nodeStyle:Object},created:function(){}},qg=Kg,Qg=Object(hr["a"])(qg,Bg,Ug,!1,null,null,null),Jg=Qg.exports,Zg=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"prop-box css-box"},[e("h5",{staticClass:"mult-h5"},[e("span",{staticClass:"i-text icon-code"},[t._v("CSS")]),e("a",{staticClass:"copy",attrs:{href:"javascript:;"},on:{click:function(e){return t.copyText(t.propertyText)}}},[t._v("复制样式")])]),e("dl",{staticClass:"item mult"},[e("dd",[e("ul",{staticClass:"css"},t._l(t.properties,(function(n,r){return e("li",{key:"property-".concat(r)},[n.name?[n.swatch?e("span",{staticClass:"desc desc-swatch"},[t._v("/* "+t._s(n.swatch)+" */")]):t._e(),e("span",{staticClass:"name"},[t._v(t._s(n.name)+":")]),e("span",{staticClass:"value"},[t._v(t._s(n.value)+";")])]:n.desc?[e("span",{staticClass:"desc"},[t._v(t._s(n.desc))])]:t._e()],2)})),0)])])]):t._e()},tw=[],ew={mixins:[Vv],props:{nodeStyle:Object,sketchGroupFillColor:{type:Object,validator:function(){return!0}}},methods:{copyText:function(t){Object(c["p"])(t)?this.showTextTip("已复制样式到剪切板",2):this.showTextTip("复制到剪切板失败",2)}},computed:{visible:function(){return this.properties.length>0},properties:function(){var t,e,n,r=this,i=this.curNode,a=this.nodeStyle,s=[];n="opacity",e=a[n],e&&"100%"!==e&&s.push({name:n,value:e}),n="width",e=a[n],e&&s.push({name:n,value:e}),n="height",e=a[n],e&&s.push({name:n,value:e}),a.blendMode&&(n="mix-blend-mode",e=a.blendMode,e&&s.push({name:n,value:e}));var d=i.boxTransform;d&&(n="transform",e=0!==d.rotation?"rotate(".concat(d.rotation,"deg)"):"",d.flippedHorizontally&&(e+=" scaleX(-1)"),d.flippedVertically&&(e+=" scaleY(-1)"),e&&s.push({name:n,value:e}));var f=!!i.types.Text;function m(){if(f){var t=" -webkit-background-clip",e="text";s.push({name:t,value:e}),t=" -webkit-text-fill-color",e="transparent",s.push({name:t,value:e}),t=" background-clip",e="text",s.push({name:t,value:e}),t=" text-fill-color",e="transparent",s.push({name:t,value:e})}}var p=[];if(a.fills&&p.push.apply(p,Object(u["a"])(a.fills)),f&&(null===(t=i.styleRanges)||void 0===t?void 0:t.length)>0){var b,v=i.styleRanges[0];(b=null===v||void 0===v?void 0:v.figmaFills)&&b.length>0&&p.push.apply(p,Object(u["a"])(b))}if(p.length>0){var g=[];p.forEach((function(t){switch(t.type){case o["o"].FillColor:var i=r.getCssShowColor(t.color,n,t.swatch).value;g.push({color:i,image:"linear-gradient(0deg,".concat(i,",").concat(i,")")});break;case o["o"].RadialGradientFill:e="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(r.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")");var a=Object(c["B"])(t.angle);"0deg"!==a&&s.push({desc:"/*\n径向渐变(radial-gradient)不支持旋转角度,可结合:before或:after配合transform实现\ntransform:rotate(".concat(a,");\n*/")}),g.push({image:e});break;case o["o"].DiamondGradientFill:e="radial-gradient(ellipse ".concat(t.scaleX," ").concat(t.scaleY," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(r.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")"),s.push({desc:"/*css不支持菱形渐变,当前写法为径向渐变(radial-gradient)且不含旋转角度*/"}),g.push({image:e});break;case o["o"].AngularGradientFill:e="conic-gradient(from ".concat(t.angle," at ").concat(t.startX," ").concat(t.startY," ,").concat(t.colorStops.map((function(t){return"".concat(r.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")"),g.push({image:e});break;case o["o"].LinearGradientFill:e="linear-gradient(".concat(t.angle,",").concat(t.colorStops.map((function(t){var e;return"".concat(r.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(null!==(e=t.cssStop)&&void 0!==e?e:t.stop)})).join(","),")"),g.push({image:e})}}));var w=g.length;if(w>0){var x=!1;n="background",e=g.map((function(t,e){var n=w===e+1;return n&&t.color?t.color:(x=!0,t.image)})).join(","),s.push({name:n,value:e}),x&&m()}}var y=a.border;if(y)switch(y.widths?(n="border-style",e=y.style,s.push({name:n,value:e}),n="border-width",e=y.widths,s.push({name:n,value:e})):(n="border",e="".concat(y.width," ").concat(y.style),s.push({name:n,value:e})),y.type){case o["o"].FillColor:n="border-color",e=this.getCssShowColor(y.color,n,y.swatch),e&&s.push(e);break;case o["o"].RadialGradientFill:case o["o"].LinearGradientFill:n="border-image-source",e="linear-gradient(".concat(y.angle,",").concat(y.colorStops.map((function(t){return"".concat(r.getCssShowColor(t.color,void 0,t.swatch).value," ").concat(t.stop)})).join(","),")"),s.push({name:n,value:e}),n="border-image-slice",e="1",s.push({name:n,value:e})}var k,C=a.textStrokeStyle;if(C)switch(n="-webkit-text-stroke-width",e=null!==(k=C.widths)&&void 0!==k?k:C.width,s.push({name:n,value:e}),n="text-stroke-width",s.push({name:n,value:e}),C.type){case o["o"].FillColor:n="-webkit-text-stroke-color",e=this.getCssShowColor(C.color,n,C.swatch),e&&(s.push(e),n="text-stroke-color",s.push({name:n,value:e.value}));break}if(a.strokesIncludedInLayout&&s.push({name:"box-sizing",value:"border-box"}),n="border-radius",e=a.cornerRadiiValue,e&&s.push({name:n,value:e}),a.objectEffect&&(n="filter",e="blur(".concat(this.getCalcPlatformValue(a.objectEffect,{needArtScale:!0}),")"),s.push({name:n,value:e})),a.backgroundEffect){n="backdrop-filter",e="blur(".concat(this.getCalcPlatformValue(a.backgroundEffect,{needArtScale:!0}),")");var S=a.backgroundEffectBrightness,O=a.backgroundEffectSaturation;"number"===typeof S&&1!==S&&(e+=" brightness(".concat(S,")")),"number"===typeof O&&1!==O&&(e+=" saturate(".concat(O,")")),s.push({name:n,value:e})}var I=[],A=[];if(a.shadows.forEach((function(t){if(t){var e=r.getCssShowColor(t.color,void 0,t.swatch);e.swatch&&A.push(e.swatch),I.push("".concat(t.x," ").concat(t.y," ").concat(t.blur).concat(t.spread?" "+t.spread:""," ").concat(e.value))}})),a.innerShadows.forEach((function(t){if(t){var e=r.getCssShowColor(t.color,void 0,t.swatch);e.swatch&&A.push(e.swatch),I.push("".concat(t.x," ").concat(t.y," ").concat(t.blur).concat(t.spread?" "+t.spread:""," ").concat(e.value," inset"))}})),I.length>0&&(n=i.types.Text?"text-shadow":"box-shadow",e=I.join(","),s.push({name:n,value:e,swatch:A.join("\n    ")})),!i.markedForExport&&i.types.Text){var T=i.styleRanges;if(Object(l["h"])(T)&&T.length>0&&(T=T[0],T)){if(T.fontFamily&&(n="font-family",e=T.fontFamily,s.push({name:n,value:e})),T.fontWeightCss&&"400"!==T.fontWeightCss&&(n="font-weight",e=T.fontWeightCss,s.push({name:n,value:e})),T.fontItalic&&"normal"!==T.fontItalic&&(n="font-style",e=T.fontItalic,s.push({name:n,value:e})),T.fill&&null!=T.fill.value){n="color";var j=T,F=j.fills,M=j.fill;if((null===F||void 0===F?void 0:F.length)>1){for(var _=Object(h["i"])(F[F.length-1].value),L=F.length-2;L>=0;L--){var D=F[L];_=Object(h["d"])(_,Object(h["i"])(D.value))}M={value:Object(h["c"])(_.r,_.g,_.b,_.a),swatch:M.swatch}}e=this.getCssShowColor(Object(c["Q"])(this.sketchGroupFillColor,M.value),n,M.swatch),s.push(e)}null!=T.fontSize&&(n="font-size",e=this.getCalcPlatformValue(T.fontSize,{fontSize:!0,needArtScale:!0}),s.push({name:n,value:e})),0!==T.charSpacing&&null!=T.charSpacing&&(n="letter-spacing",e=this.getCalcPlatformValue(T.charSpacing,{needArtScale:!0}),s.push({name:n,value:e})),T.underline?(n="text-decoration",e="underline",s.push({name:n,value:e})):T.strikethrough&&(n="text-decoration",e="line-through",s.push({name:n,value:e}))}0!=i.paragraphIndent&&null!=i.paragraphIndent&&(n="text-indent",e=this.getCalcPlatformValue(i.paragraphIndent,{needArtScale:!0}),s.push({name:n,value:e})),0!=i.paragraphSpacing&&null!=i.paragraphSpacing&&(n="padding-bottom",e=this.getCalcPlatformValue(i.paragraphSpacing,{needArtScale:!0}),s.push({name:n,value:e})),n="line-height",e=0!=i.lineSpacing&&null!=i.lineSpacing?this.getCalcPlatformValue(i.lineSpacing,{needArtScale:!0}):"normal",s.push({name:n,value:e}),i.textAlign&&(n="text-align",e=i.textAlign,"left"!=e&&s.push({name:n,value:e})),i.textVerticalAlign&&(n="vertical-align",e=i.textVerticalAlign,s.push({name:n,value:e}))}var N=s.findIndex((function(t){return"height"===t.name})),E=-1===N?-1:s.findIndex((function(t){return"line-height"===t.name}));if(-1!==E){var P=s[E];s.splice(E,1),s.splice(N+1,0,P)}return s},propertyText:function(){var t=this.properties;return t.filter((function(t){return!!t.name||!!t.desc})).map((function(t){return t.name?"".concat(t.swatch?"/* ".concat(t.swatch," */\n"):"").concat(t.name,": ").concat(t.value,";"):t.desc})).join("\n").trim()}}},nw=ew,rw=(n("ce27"),Object(hr["a"])(nw,Zg,tw,!1,null,"6eea520c",null)),iw=rw.exports,aw=function(){var t=this,e=t._self._c;return e("section",{staticClass:"prop-box prop-export"},[e("h5",[e("span",{staticClass:"i-text icon-slice"},[t._v("切图")]),e("span",{staticClass:"export-bg"},[e("span",{class:{on:t.ExportBoxBackgroundType.Black===t.exportBoxBackground,black:1},attrs:{title:"深色背景填充"},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Black)}}}),e("span",{class:{on:t.ExportBoxBackgroundType.Transparent===t.exportBoxBackground,transparent:1},attrs:{title:"浅色背景填充"},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Transparent)}}})])]),e("section",{staticClass:"preview",class:["type"+t.exportBoxBackground]},[t.exportPdfOnly?e("PdfViewer",{attrs:{maxWidth:"256px",maxHeight:"112px",url:t.exportPreviewSrc}}):e("img",{class:{jpg:t.currentResInJpg},attrs:{src:t.exportPreviewSrc}})],1),e("section",{staticClass:"download-box"},[e("PropertyDownloadOptions",{ref:"downOptions",attrs:{currentResInPdf:t.currentResInPdf,currentResInSvg:t.currentResInSvg,currentResInJpg:t.currentResInJpg,exportPdfOnly:t.exportPdfOnly,exportSvgOnly:t.exportSvgOnly,jpgQuality:t.jpgQuality,downloadPlatform:t.calcPlatformUse,node:t.curNode},on:{setJpgQuality:t.setJpgQuality,clickDownSelect:t.clickDownSelect}}),e("div",{staticClass:"btns"},[e("Select",{attrs:{options:t.resTypeSelectOptions,checkShowUpFixedHeight:48,light:!0},on:{changed:t.onResTypeSelectChanged}}),t.currentResInSvg||t.currentResInPdf?e("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:t.clickDownSelect}},[t._v("下载切图")]):e("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:t.clickDownSelectAll}},[t._v("下载切图")]),t.inCloudMode&&t.currentResInSvg?e("a",{staticClass:"button btn-copy",attrs:{href:"javascript:;",title:"拷贝SVG数据到剪切板"},on:{click:function(e){return t.clickCopySvg()}}}):t._e()],1)],1)])},ow=[],sw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"down-options-box"},[t.downloadPlatform===t.CALC_PLATFORM_TYPE.ANDROID?e("Select",{attrs:{options:t.androidUseMipmapSelectOptions,light:!0},on:{changed:t.onAndroidUseMipmapSelectChanged}}):t._e(),e("div",{staticClass:"down-options",class:t.optionsClass},[t._l(t.downloadPlatformItems,(function(n){return e("PropertyDownloadItem",{key:n.value.name,attrs:{config:n.value,node:t.node,enabled:n.enabled,selected:t.currentResInSvg||t.currentResInPdf||1==t.checkSetting[n.value.scale]},on:{clickItemSelect:t.clickItemSelect,clickDownSelect:t.clickDownSelect}})})),t.currentResInJpg?e("div",{staticClass:"jpg-quality"},[e("div",{staticClass:"text"},[t._v("JPG质量")]),e("div",{staticClass:"quality-num"},[t._v(t._s(t.jpgQuality))]),e("div",{staticClass:"pullrod"},[e("div",{staticClass:"line",on:{click:t.clickPullrodLine}}),e("span",{style:{left:t.jpgQualityCssLeft},on:{mousedown:t.onPullrodMouseDown}})]),e("div",{staticClass:"button",on:{click:t.clickResetQuality}},[t._v("重置")])]):t._e()],2)],1)},cw=[],lw=function(){var t=this,e=t._self._c;return e("section",{staticClass:"item",class:{disabled:!t.enabled},attrs:{title:t.title}},[e("Checkbox",{attrs:{text:t.name,selected:t.selected&&t.enabled},on:{click:t.clickItemSelect}}),null!=t.node?e("section",[e("span",{staticClass:"size"},[t._v(t._s(t.size))]),e("a",{staticClass:"btn-down-current",attrs:{href:"javascript:;",title:"下载该项切图"},on:{click:t.clickDownSelect}})]):t._e()],1)},uw=[],dw={methods:{clickDownSelect:function(){var t={};t[this.config.scale]=1,this.$emit("clickDownSelect",t)},clickItemSelect:function(t){!t||this.enabled?this.$emit("clickItemSelect",this.config.scale,t):this.showTextTip("您无法导出该规格切图,因为设计狮没有为该画板导出该规格切图")}},computed:{inMultMode:function(){return null==this.node},title:function(){var t=this.config,e=t.name;return e},name:function(){var t,e=this.config;return t=e.name,t},originWidth:function(){return this.inMultMode?0:this.node.boundsInArtboard.width},originHeight:function(){return this.inMultMode?0:this.node.boundsInArtboard.height},size:function(){if(this.inMultMode)return"";if(!this.enabled)return"--";var t=this.node,e=this.curArtboardLoadedVerData,n=null===e||void 0===e?void 0:e.mlConfig;if(n){var r=n.sizeMap;if(r){var i=(this.config.resname||this.config.filepath).replace("{$name$}",t.exportPath).toLowerCase(),a=r[i];if(a)return"".concat(a.width,"x").concat(a.height)}}var o=this.config.scale;return"".concat(Math.ceil(Object(c["q"])(this.originWidth*o,2)),"x").concat(Math.ceil(Object(c["q"])(this.originHeight*o,2)))}},props:{config:Object,node:Object,selected:Boolean,enabled:Boolean},components:{Checkbox:Ol}},hw=dw,fw=(n("f2f6"),Object(hr["a"])(hw,lw,uw,!1,null,"5fd814f8",null)),mw=fw.exports,pw={methods:{clickPullrodLine:function(t){var e=Math.round(t.layerX/1.06);isNaN(e)||(e=Math.max(1,e),e=Math.min(100,e),this.$emit("setJpgQuality",e))},onPullrodMouseDown:function(t){this.mouseDownStartQuality=this.jpgQuality,this.mouseDownStartX=t.pageX,window.addEventListener("mouseup",this.onPullrodMouseUp),window.addEventListener("mousemove",this.onPullrodMouseMove)},onPullrodMouseMove:function(t){var e=t.pageX-this.mouseDownStartX,n=Math.round(this.mouseDownStartQuality+e/1.06);n=Math.max(1,n),n=Math.min(100,n),this.$emit("setJpgQuality",n)},onPullrodMouseUp:function(){window.removeEventListener("mouseup",this.onPullrodMouseUp),window.removeEventListener("mousemove",this.onPullrodMouseMove)},clickResetQuality:function(){this.$emit("setJpgQuality",F)},onAndroidUseMipmapSelectChanged:function(t){Object(l["s"])(t)&&this.clickSetAndroidUseMipmap(t.value)},clickSetAndroidUseMipmap:function(t){this.$store.commit("setAndroidUseMipmap",t)},clickDownSelect:function(t){this.$emit("clickDownSelect",t)},clickItemSelect:function(t,e){if(!this.currentResInSvg&&!this.currentResInPdf){var n=this.checkSetting;this.$set(n,t,e?1:0),this.setLocalCheckSetting(n)}},initCheckSetting:function(){var t=this.getLocalCheckSetting();this.checkSetting=t},setLocalCheckSetting:function(t){var e=this.downloadPlatform;Object(c["nb"])("reschecked.".concat(e),t)},getLocalCheckSetting:function(){var t=this.downloadPlatform,e=Object(c["I"])("reschecked.".concat(t),!0);if(!Object(l["s"])(e))switch(t){case o["c"].WEB:case o["c"].WE_CHAT_MINI_PROGRAM:e={2:1};break;case o["c"].IOS:e={1:1,2:1,3:1};break;case o["c"].ANDROID:e={1:1,1.5:1,2:1,3:1,4:1};break}return[1,2,3,4,1.5].forEach((function(t){e[t]||(e[t]=0)})),e}},created:function(){this.initCheckSetting()},watch:{downloadPlatform:function(){this.initCheckSetting()}},computed:{jpgQualityCssLeft:function(){var t=this.jpgQuality;return Math.round(1.06*t)+"px"},optionsClass:function(){var t={};switch(this.currentResInSvg&&(t.svg=1),this.currentResInPdf&&(t.pdf=1),this.inMultMode&&(t.mult=1),this.downloadPlatform){case o["c"].ANDROID:t.android=1;break;case o["c"].WEB:t.web=1;break;case o["c"].WE_CHAT_MINI_PROGRAM:t.wx_mp=1;break;case o["c"].IOS:t.ios=1;break}return t},inMultMode:function(){return null==this.node},androidUseMipmapSelectOptions:function(){return[{name:"drawable-...",value:!1,selected:!this.androidUseMipmap,title:"Android目录前缀"},{name:"mipmap-...",value:!0,selected:this.androidUseMipmap,title:"Android目录前缀"}]},downloadPlatformItems:function(){return Tc(this.curArtboard,this.downloadPlatform,this.androidUseMipmap,this.currentResInSvg,this.currentResInPdf,this.currentResInJpg&&this.exportSvgOnly,this.currentResInJpg&&this.exportPdfOnly)}},data:function(){return{mouseDownStartX:0,mouseDownStartQuality:0,CALC_PLATFORM_TYPE:o["c"],checkSetting:{}}},components:{PropertyDownloadItem:mw,Select:wl},props:{jpgQuality:Number,currentResInJpg:Boolean,exportSvgOnly:Boolean,currentResInSvg:Boolean,exportPdfOnly:Boolean,currentResInPdf:Boolean,downloadPlatform:Number,node:Object,bottomPosition:Boolean}},bw=pw,vw=(n("7e6b"),Object(hr["a"])(bw,sw,cw,!1,null,"df00355a",null)),gw=vw.exports,ww=function(){var t=this,e=t._self._c;return e("iframe",{ref:"iframe",staticClass:"pdf-viewer",style:t.style,attrs:{src:"about:blank"}})},xw=[],yw={methods:{loadUrl:function(t){Object(yc["b"])(this.$refs.iframe,t,this.maxWidth,this.maxHeight)},loadBlank:function(){try{this.$refs.iframe.src="about:blank"}catch(t){}}},computed:{style:function(){var t=this.maxWidth,e=this.maxHeight;return{maxWidth:t,maxHeight:e}}},beforeDestroy:function(){this.loadBlank()},mounted:function(){this.loadUrl(this.url)},watch:{url:function(t){t&&this.loadUrl(this.url)}},props:{url:String,maxWidth:String,maxHeight:String}},kw=yw,Cw=(n("9edf"),Object(hr["a"])(kw,ww,xw,!1,null,"aa8b5fba",null)),Sw=Cw.exports,Ow={methods:{clickCopySvg:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.setInOutput(!0),e.prev=1,n=t.curNode,i=t.curArtboard,a=Object(c["J"])(n),e.next=6,Fc(n,i);case 6:o=e.sent,t.showTextTip(o?"已拷贝[".concat(a,"]到剪切板"):"拷贝[${nodeName}]到剪切板失败了"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),t.showTextTip(e.t0);case 13:return e.prev=13,t.setInOutput(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})))()},setJpgQuality:function(t){t>0&&t<=100&&(this.jpgQuality=t,Object(c["nb"])(M,t))},clickExportBoxBackgroundType:function(t){this.$store.commit("exportBoxBackgroundType",t)},onResTypeSelectChanged:function(t){Object(l["s"])(t)&&this.clickCurrentResType(t.value)},clickCurrentResType:function(t){switch(t){case o["I"].PNG:if(!this.exportPng)return void this.showTextTip("设计狮没有为该画板导出[PNG]格式的切图");break;case o["I"].WEBP:if(!this.exportWebP)return void this.showTextTip("设计狮没有为该画板导出[WEBP]格式的切图");break;case o["I"].SVG:if(!this.exportSvg)return void this.showTextTip("设计狮没有为该画板导出[SVG]格式的切图");break;case o["I"].PDF:if(!this.exportPdf)return void this.showTextTip("设计狮没有为该画板导出[PDF]格式的切图");break;case o["I"].JPG:break}this.currentResType=t,Object(c["nb"])("resType",t)},clickDownSelectAll:function(){this.clickDownSelect(this.$refs.downOptions.checkSetting)},clickDownSelect:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.setInOutput(!0),n.prev=1,!e.currentResInPdf){n.next=7;break}return n.next=5,jc([e.curNode],e.curArtboard);case 5:n.next=19;break;case 7:if(!e.currentResInSvg){n.next=12;break}return n.next=10,_c([e.curNode],e.curArtboard);case 10:n.next=19;break;case 12:if(!e.currentResInJpg){n.next=17;break}return n.next=15,Yc(e.calcPlatformUse,e.androidUseMipmap,t,[e.curNode],e.curArtboard,e.jpgQuality/100);case 15:n.next=19;break;case 17:return n.next=19,Xc(e.calcPlatformUse,e.androidUseMipmap,t,[e.curNode],e.curArtboard,e.currentResInWebP);case 19:n.next=24;break;case 21:n.prev=21,n.t0=n["catch"](1),e.showTextTip(n.t0);case 24:return n.prev=24,e.setInOutput(!1),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,21,24,27]])})))()},initJpgQuality:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["I"])(M,!1));(isNaN(e)||e<1||e>=100)&&(e=F),this.jpgQuality=e}},initCurrentResType:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["I"])("resType",!1));(isNaN(e)||!isFinite(e)||e!==o["I"].SVG&&e!==o["I"].PDF&&e!==o["I"].WEBP&&e!==o["I"].JPG)&&(e=o["I"].PNG);var n=this.curArtboardLoadedVerData.mlConfig.resType;n||(n=o["I"].PNG);var r=this.exportPng,i=this.exportSvg,a=this.exportWebP,s=this.exportPdf;switch(e){case o["I"].PNG:r||(a?e=o["I"].WEBP:i?e=o["I"].SVG:s&&(e=o["I"].PDF));break;case o["I"].SVG:i||(r?e=o["I"].PNG:a?e=o["I"].WEBP:s&&(e=o["I"].PDF));break;case o["I"].PDF:s||(r?e=o["I"].PNG:a?e=o["I"].WEBP:i&&(e=o["I"].SVG));break;case o["I"].WEBP:a||(r?e=o["I"].PNG:i?e=o["I"].SVG:s&&(e=o["I"].PDF));break;case o["I"].JPG:r||i||a||s||(e=o["I"].PNG);break}this.currentResType=e}}},created:function(){this.initCurrentResType(),this.initJpgQuality()},watch:{inMultDownMode:function(){this.initCurrentResType(),this.initJpgQuality()},curArtboard:function(){this.initCurrentResType(),this.initJpgQuality()}},data:function(){return{currentResType:o["I"].PNG,jpgQuality:F}},computed:{ExportBoxBackgroundType:function(){return o["F"]},resTypeSelectOptions:function(){var t=this.currentResType,e={value:o["I"].PNG,name:"PNG",selected:t===o["I"].PNG,disabled:!this.exportPng},n={value:o["I"].WEBP,name:"WEBP",selected:t===o["I"].WEBP,disabled:!this.exportWebP},r={value:o["I"].SVG,name:"SVG",selected:t===o["I"].SVG,disabled:!this.exportSvg},i={value:o["I"].PDF,name:"PDF",selected:t===o["I"].PDF,disabled:!this.exportPdf},a={value:o["I"].JPG,name:"JPG",selected:t===o["I"].JPG,disabled:!1};return[e,n,r,i,a]},exportWebP:function(){return Object(c["X"])(this.curArtboardLoadedVerData)},exportPng:function(){return Object(c["V"])(this.curArtboardLoadedVerData)},exportSvg:function(){return Object(c["W"])(this.curArtboardLoadedVerData)},exportPdf:function(){return Object(c["U"])(this.curArtboardLoadedVerData)},exportSvgOnly:function(){return this.exportSvg&&!this.exportPng&&!this.exportWebP},exportPdfOnly:function(){return this.exportPdf&&!this.exportSvg&&!this.exportPng&&!this.exportWebP},currentResInPdf:function(){return this.currentResType===o["I"].PDF},currentResInSvg:function(){return this.currentResType===o["I"].SVG},currentResInJpg:function(){return this.currentResType===o["I"].JPG},currentResInWebP:function(){return this.currentResType===o["I"].WEBP},exportPreviewSrc:function(){var t,e,n=null!==(t=null===(e=this.curNode)||void 0===e?void 0:e.mlConfig)&&void 0!==t?t:{},r=n.pngPreview,i=n.svgPreview,a=n.pdfPreview,o=r||i;return this.inCloudMode?this.exportPdfOnly&&!o&&a?a:o:o+"?"+this.curArtboard.artboard.mlOutputTime}},components:{PropertyDownloadOptions:gw,Select:wl,PdfViewer:Sw}},Iw=Ow,Aw=(n("2b2b"),Object(hr["a"])(Iw,aw,ow,!1,null,"13bb9e70",null)),Tw=Aw.exports,jw=function(){var t=this,e=t._self._c;return e("section",{staticClass:"header"},[e("div",{staticClass:"platform"},[e("a",{staticClass:"btn-set-platform",class:Object(j["a"])({on:t.setting},t.calcPlatformTypeCss,!0),attrs:{href:"javascript:;"},on:{click:function(e){t.setting=!t.setting}}},[t._v(t._s(t.size)+" ")]),e("span",{staticClass:"size"},[e("span",{staticClass:"round-num",class:{on:t.numberAutoRound},on:{click:t.clickRoundNum}},[t._v("数值取整")])])]),t.setting?e("SetPlatform",{on:{clickCalcPlatform:t.clickCalcPlatform,hideSetting:t.hideSetting}}):t._e()],1)},Fw=[],Mw=function(){var t=this,e=t._self._c;return e("ul",{staticClass:"set-platform"},[e("li",{class:{web:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.WEB}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.WEB})}}},[t._v("Web")])]),e("li",{class:{android:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.ANDROID}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.ANDROID})}}},[t._v("Android")])]),e("li",{class:{ios:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.IOS}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.IOS})}}},[t._v("iOS")])]),e("li",{class:{wx_mp:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.WE_CHAT_MINI_PROGRAM}},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.WE_CHAT_MINI_PROGRAM})}}},[t._v("微信小程序")])]),e("li",{staticClass:"custom"},[e("dl",{class:{size:!0,on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.CUSTOM}},[e("dt",{staticClass:"name",attrs:{title:"无视文档设计尺寸,强制指定当前画板的宽度"}},[t._v("自定义宽度")]),e("dd",{staticClass:"auto"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.calcPlatformCustomDocWidth2,expression:"calcPlatformCustomDocWidth2"}],ref:"inpWidth",staticClass:"inp",attrs:{type:"text",spellcheck:"false"},domProps:{value:t.calcPlatformCustomDocWidth2},on:{input:function(e){e.target.composing||(t.calcPlatformCustomDocWidth2=e.target.value)}}})]),e("dd",[e("Select",{attrs:{options:t.unitSelectOptions,light:!0},on:{changed:t.onUnitSelectChanged}})],1),e("dd",[e("a",{staticClass:"button light btn-save",attrs:{href:"javascript:;"},on:{click:t.clickCalcPlatformCustom}},[t._v("保存")])])]),e("div",{staticClass:"tip"},[t._v("注:填0则自动取对应画板设计尺寸")])]),e("li",{staticClass:"template"},[e("dl",[e("dt",[e("span",{staticClass:"name"},[t._v("自定义单位模板"),e("Checkbox2",{attrs:{text:"",selected:t.calcUnitTemplateEnable},on:{click:function(e){return t.clickTemplateEnable()}}})],1),e("a",{staticClass:"help",attrs:{href:"https://user.marklion.cn/router/linkto.ashx?id=10016",target:"_blank"}},[t._v("帮助")])]),e("dd",{staticClass:"input",class:{off:!t.calcUnitTemplateEnable}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.calcUnitTemplateValue2,expression:"calcUnitTemplateValue2"}],attrs:{autocomplete:"off",spellcheck:"false"},domProps:{value:t.calcUnitTemplateValue2},on:{input:function(e){e.target.composing||(t.calcUnitTemplateValue2=e.target.value)}}}),e("a",{staticClass:"button light btn-save",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickTemplateEnable(!0)}}},[t._v("保存")])]),t._m(0)])])])},_w=[function(){var t=this,e=t._self._c;return e("dd",{staticClass:"tip"},[e("div",[t._v("注:")]),e("ul",[e("li",[e("span",{staticClass:"t"},[t._v("%num%")]),t._v("当前数值")]),e("li",[e("span",{staticClass:"t"},[t._v("%W%")]),t._v("画板宽度")]),e("li",[e("span",{staticClass:"t"},[t._v("%H%")]),t._v("画板高度")]),e("li",[e("span",{staticClass:"t"},[t._v("%VW%")]),t._v("当前数值和画板宽度的百分比(1-100)")]),e("li",[e("span",{staticClass:"t"},[t._v("%VH%")]),t._v("当前数值和画板高度的百分比(1-100)")])])])}],Lw={methods:{clickTemplateEnable:function(t){var e=t?this.calcUnitTemplateEnable:!this.calcUnitTemplateEnable,n=this.curArtboard.artboard,r={guid:n.docGuid,enable:e,template:t?this.calcUnitTemplateValue2:this.calcUnitTemplateValue};this.$store.commit("setUnitTemplate",r),this.calcUnitTemplateValue2=this.calcUnitTemplateValue,t&&this.$emit("hideSetting")},onUnitSelectChanged:function(t){this.calcPlatformCustomUnit2=t.value},clickCalcPlatformCustom:function(){var t={type:o["c"].CUSTOM,customUnit:this.calcPlatformCustomUnit2,customDocWidth:parseInt(this.calcPlatformCustomDocWidth2)};if(isNaN(t.customDocWidth)||!isFinite(t.customDocWidth)||t.customDocWidth<0)return this.showTextTip("指定宽度不合法,请正确输入"),void this.$refs.inpWidth.focus();this.clickCalcPlatform(t)},clickCalcPlatform:function(t){this.$emit("clickCalcPlatform",t)}},data:function(){return{calcPlatformType2:0,calcPlatformCustomUnit2:0,calcPlatformCustomDocWidth2:0,calcUnitTemplateValue2:"",CALC_PLATFORM_TYPE:o["c"],CALC_PLATFORM_UNIT:o["d"],unitSelectOptions:[{name:"px",value:o["d"].PX},{name:"dp",value:o["d"].DP},{name:"pt",value:o["d"].PT},{name:"rpx",value:o["d"].RPX}]}},components:{Select:wl,Checkbox2:Jp},computed:{calcUnitTemplateEnable:function(){return this.$store.state.unitTemplate.enable}},created:function(){var t=this;this.calcPlatformType2=this.calcPlatformType,this.calcPlatformCustomUnit2=this.calcPlatformCustomUnit,this.unitSelectOptions.forEach((function(e){t.$set(e,"selected",e.value===t.calcPlatformCustomUnit2)})),this.calcPlatformCustomDocWidth2=this.calcPlatformCustomDocWidth,this.calcUnitTemplateValue2=this.calcUnitTemplateValue}},Dw=Lw,Nw=(n("7d26"),Object(hr["a"])(Dw,Mw,_w,!1,null,"941aacd6",null)),Ew=Nw.exports,Pw={methods:{clickRoundNum:function(){this.$store.commit("setNumberAutoRound",!this.numberAutoRound)},clickCalcPlatform:function(t){if(Object(l["s"])(t)&&!t.guid){var e=this.curArtboardLoadedVerData;t.guid=e.docGuid}this.$store.commit("setPlatform",t),this.setting=!1},hideSetting:function(){this.setting=!1}},computed:{size:function(){var t;if(!this.inArtboardMode)return"";var e=null===(t=this.curArtboardLoadedVerData)||void 0===t?void 0:t.boundsInArtboard;return e?"".concat(this.getCalcPlatformValue(e.width,{noUnitTemplate:!0}),"*").concat(this.getCalcPlatformValue(e.height,{noUnitTemplate:!0})):"-"},calcPlatformTypeText2:function(){switch(this.calcPlatformType){case o["c"].CUSTOM:return"".concat(this.calcPlatformCustomDocWidthShow).concat(this.getCalcPlatformCustomUnitText(!1));case o["c"].WE_CHAT_MINI_PROGRAM:return"".concat(o["V"]).concat(this.getCalcPlatformCustomUnitText(!1));default:return""}},calcPlatformTypeCss:function(){switch(this.calcPlatformType){case o["c"].ANDROID:return"android";case o["c"].IOS:return"ios";case o["c"].CUSTOM:return"custom";case o["c"].WE_CHAT_MINI_PROGRAM:return"wx_mp";default:return"web"}},calcPlatformTypeText:function(){switch(this.calcPlatformType){case o["c"].ANDROID:return"Android";case o["c"].IOS:return"iOS";case o["c"].WE_CHAT_MINI_PROGRAM:return"微信小程序";case o["c"].CUSTOM:return"自定义";default:return"Web"}}},data:function(){return{setting:!1,CALC_PLATFORM_TYPE:o["c"]}},components:{SetPlatform:Ew}},Rw=Pw,Vw=(n("310c"),Object(hr["a"])(Rw,jw,Fw,!1,null,"2bb0522c",null)),Bw=Vw.exports,Uw={methods:{parseColor:function(t,e,n){return Object(h["l"])(t,e,this.isSketchArtboard,this.curNode,this.sketchGroupFillColor,n)}},computed:{cssVisible:function(){return this.calcPlatformUse===o["c"].WEB||this.calcPlatformUse===o["c"].WE_CHAT_MINI_PROGRAM},hasValue:function(){return null!=this.curArtboard&&null!=this.curNode&&this.$store.state.rightNavType===o["A"].Property},borderStyle:function(){var t=this.curNode.strokeDashArray;if(!t||0===t.length)return"solid";var e,n=t[0];return e=1===t.length?n:t[1],n===e?"dashed":"dotted"},isSketchArtboard:function(){var t,e=this.curArtboardLoadedVerData;return!(!e||!e.mlConfig)&&(null!==(t=e.fileType)&&void 0!==t?t:e.mlConfig.fileType)===o["n"].SKETCH},isXDArtboard:function(){var t;if(this.isSketchArtboard)return!1;var e=this.curArtboardLoadedVerData;return!(!e||!e.mlConfig)&&(null!==(t=e.fileType)&&void 0!==t?t:e.mlConfig.fileType)===o["n"].XD},sketchGroupFillColor:function(){if(this.isSketchArtboard){var t=this.curNode;if(t){var e=t.types;if(e&&1!==e.Group)return Object(c["M"])(t)}}},nodeStyle:function(){var t=this;if(!this.hasValue)return{borders:[],shadows:[],innerShadows:[],fills:[]};var e=this.opacity,n=this.top,r=this.left,i=this.width,a=this.height,s=this.cornerRadiiValue,l=this.curNode,u={opacity:e,blendOpacity:Pe(Ee(l)),top:n,left:r,width:i,height:a,cornerRadiiValue:s,borders:[],textStrokeStyles:[],shadows:[],innerShadows:[],fills:[],fillSN:l.fillSN,strokeSN:l.strokeSN,effectSN:l.effectSN,strokesIncludedInLayout:!!l.strokesIncludedInLayout,backgroundEffect:0,backgroundEffectBrightness:1,backgroundEffectSaturation:1,backgroundEffectOpacity:1,objectEffect:0};if(l.types.GraphicNode){var d,h,f,m,p=null!==(d=l.blurs)&&void 0!==d?d:[l.blur],b=this.isXDArtboard,v=this.isSketchArtboard;if(p.forEach((function(t){if(t&&t.visible&&t.blurAmount>=0){var e=t.isBackgroundEffect?"backgroundEffect":t.isZoomEffect?"zoomEffect":t.isMotionEffect?"motionEffect":"objectEffect";if(u[e]=t.blurAmount,t.isBackgroundEffect){if(b){var n=t.brightnessAmount,r=t.fillOpacity;r=Math.round(100*r)/100,n=Math.round(100*n)/1e4,u.backgroundEffectOpacity=r,0!=n&&(u.backgroundEffectBrightness=Object(c["q"])(1+n,2))}if(v){var i=t.saturation;"number"===typeof i&&(i=Object(c["q"])(i,2),u.backgroundEffectSaturation=i)}}else t.isZoomEffect?u.zoomEffectCenter=t.center:t.isMotionEffect&&(u.motionEffectAngle=t.motionAngle)}})),l.strokeEnabled&&l.stroke)h=l.strokeArr?l.strokeArr:[{stroke:l.stroke,strokeEnabled:l.strokeEnabled,strokeWidth:l.strokeWidth,strokeWidths:l.strokeWidths,strokePosition:l.strokePosition}],h.forEach((function(e){if(e){var n,r,i=t.parseColor(e.stroke);if(l.types.Text)n=!0,null!==(r=i)&&void 0!==r||(i=t.parseColor(e.stroke,!0));i&&(i.style=function(t){if(!t||0===t.length)return"solid";if(i.customDashes)return t.join(" ");var e,n=t[0];return e=1===t.length?n:t[1],n===e?"dashed":"dotted"}(e.strokeDashArray),i.width=t.getCalcPlatformValue(e.strokeWidth,{needArtScale:!0}),e.strokeWidths?i.widths=e.strokeWidths.map((function(e){return t.getCalcPlatformValue(e,{needArtScale:!0})})).join(" "):i.widths=null,i.position=e.strokePosition,n?u.textStrokeStyles.push(i):(0===u.borders.length&&(u.border=i),u.borders.push(i)))}})),u.textStrokeStyle=u.textStrokeStyles.find((function(t){return t.type===o["o"].FillColor}));if(l.shadow&&l.shadow.visible)f=l.shadowArr?l.shadowArr:[l.shadow],f.forEach((function(e){if(e){var n={x:t.getCalcPlatformValue(e.x,{needArtScale:!0}),y:t.getCalcPlatformValue(e.y,{needArtScale:!0}),blur:t.getCalcPlatformValue(e.blur,{needArtScale:!0}),color:e.color.value,swatch:e.color.swatch};"number"===typeof e.spread&&0!==e.spread&&(n.spread=t.getCalcPlatformValue(e.spread,{needArtScale:!0})),0===u.shadows.length&&(u.shadow=n),u.shadows.push(n)}}));if(l.innerShadow&&l.innerShadow.visible)m=l.innerShadowArr?l.innerShadowArr:[l.innerShadow],m.forEach((function(e){if(e){var n={x:t.getCalcPlatformValue(e.x,{needArtScale:!0}),y:t.getCalcPlatformValue(e.y,{needArtScale:!0}),blur:t.getCalcPlatformValue(e.blur,{needArtScale:!0}),color:e.color.value,swatch:e.color.swatch};"number"===typeof e.spread&&0!==e.spread&&(n.spread=t.getCalcPlatformValue(e.spread,{needArtScale:!0})),0===u.innerShadows.length&&(u.innerShadow=n),u.innerShadows.push(n)}}));l.blendMode&&l.blendMode!==c["e"].PASSTHROUGH&&l.blendMode!==c["e"].NORMAL&&(u.blendMode=l.blendMode);var g,w=u.backgroundEffectOpacity;if(l.fillEnabled&&l.fill&&0!==w)g=l.fillArr?l.fillArr:[{fillEnabled:!0,fill:l.fill}],g.forEach((function(e){if(e){var n=t.parseColor(e.fill,!1,w);n&&(0==u.fills.length&&(u.fill=n),u.fills.push(n))}}))}return u},cornerRadiiValue:function(){var t=this.curNode.cornerRadii;return t?Object(l["h"])(t)?null:t.bottomLeft!==t.bottomRight||t.bottomLeft!==t.topLeft||t.bottomLeft!==t.topRight?"".concat(this.getCalcPlatformValue(t.topLeft,{needArtScale:!0})," ").concat(this.getCalcPlatformValue(t.topRight,{needArtScale:!0})," ").concat(this.getCalcPlatformValue(t.bottomRight,{needArtScale:!0})," ").concat(this.getCalcPlatformValue(t.bottomLeft,{needArtScale:!0})):0!==t.topLeft?this.getCalcPlatformValue(t.topLeft,{needArtScale:!0}):void 0:null},width:function(){var t=this.curNode,e=t.markedForExport;return this.getCalcPlatformValue(t.boundsInArtboard.width,{markedForExport:e})},height:function(){var t=this.curNode,e=t.markedForExport;return this.getCalcPlatformValue(t.boundsInArtboard.height,{markedForExport:e})},top:function(){return this.curNode.types.Artboard?0:this.getCalcPlatformValue(this.curNode.boundsInArtboard.y)},left:function(){return this.curNode.types.Artboard?0:this.getCalcPlatformValue(this.curNode.boundsInArtboard.x)},opacity:function(){return Pe(this.curNode.opacity)}},components:{PropertiesGraphicNode:pg,PropertyInfo:Lg,PropertyFill:Vg,PropertyText:Jg,PropertyExport:Tw,Header:Bw,PropertyCss:iw},created:function(){0}},Hw=Uw,Ww=(n("12a4"),Object(hr["a"])(Hw,wv,xv,!1,null,null,null)),$w=Ww.exports,Gw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"comment-main",class:{on:t.artboardInComment&&t.artboardCommentVisible}},[t.inCloudMode?t.commentDetailVisible?e("DetailComment",{attrs:{errorText:t.artboardDetail.errorText,fetchDetailState:t.artboardDetail.fetchState,listNeedRefresh:t.listNeedRefresh,notSupportArtboardVerCloudVersion:t.notSupportArtboardVerCloudVersion,notSupportCommentCloudVersion:t.notSupportCommentCloudVersion},on:{clickReload:t.clickRefresh,commentAdded:t.commentAdded,onCommentUpdateTime:t.onCommentUpdateTime}}):e("div",{staticClass:"login-tip"},[e("div",{staticClass:"box"},[e("div",{staticClass:"icon"}),e("div",{staticClass:"text"},[t._v("需要登录查看评论内容")]),e("div",{staticClass:"button light",on:{click:t.goCloudLogin}},[t._v("去登录")]),e("div",{staticClass:"text"},[t._v("还没有标记狮账号？去"),e("a",{attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("注册")])])])]):e("div",{staticClass:"comment-support-tip"},[e("div",{staticClass:"box"},[e("div",{staticClass:"img"}),e("div",{staticClass:"tip"},[t._v("本地标注包无法使用评论功能")]),e("div",{staticClass:"text"},[t._v("试用标记狮私有云服务，体验画板评论功能")]),e("a",{staticClass:"button light",attrs:{href:t.cloudPage,target:"_blank"}},[t._v("前往官网了解更多")])])])],1)},zw=[],Yw=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"detail-comment"},[t.listNeedRefresh&&t.fetchDetailState===t.FetchState.Success?e("div",{staticClass:"comment-refresh"},[e("a",{staticClass:"btn-refresh",attrs:{href:"javascript:;"},on:{click:function(e){t.setSelectComment(null),t.clickReload()}}},[t._v("评论有更新，点击刷新")])]):t._e(),t.notSupportArtboardVerCloudVersion?t._e():e("div",{staticClass:"head"},[e("div",{staticClass:"comment-filter-mode"},[e("div",{staticClass:"name",domProps:{textContent:t._s(t.commentFilterModeNames.selected)}}),e("div",{staticClass:"options"},[e("div",{class:{on:!t.commentOnlyCurrentVerArtboard},domProps:{textContent:t._s(t.commentFilterModeNames.all)},on:{click:function(e){return t.clickCommentFilterMode(!1)}}}),e("div",{class:{on:t.commentOnlyCurrentVerArtboard},domProps:{textContent:t._s(t.commentFilterModeNames.onlyCurrentVer)},on:{click:function(e){return t.clickCommentFilterMode(!0)}}})])])]),e("div",{staticClass:"comments"},[t.fetchDetailState===t.FetchState.Fetching||t.fetchDetailState===t.FetchState.Error?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取评论信息...",errorText:t.errorText,isLoading:t.fetchDetailState===t.FetchState.Fetching,isError:t.fetchDetailState===t.FetchState.Error,reLoadText:"刷新"},on:{reload:function(e){return t.clickReload()}}})],1):t.notSupportCommentCloudVersion?e("div",{staticClass:"feature"},[t._v(" 私有云部署包版本过低,"),e("br"),t._v("请先联系管理员升级私有云部署包 ")]):0===t.renderComments.length?e("div",{staticClass:"feature",domProps:{textContent:t._s(t.commentOnlyCurrentVerArtboard?"暂无版本#".concat(t.artboardVerId," 的评论，快去添加吧！"):"暂无评论，快去添加吧！")}}):e("div",{ref:"commentList",staticClass:"comment-list",on:{scroll:t.onCommentListScroll}},t._l(t.renderComments,(function(n,r){return e("CommentItem",{key:0===n.id?"index_".concat(r):n.id,attrs:{users:t.users,attachVisibleCheckerKey:t.attachVisibleCheckerKey,comment:n},on:{commentAdded:t.commentAdded,commentRemove:t.commentRemove,onCommentUpdateTime:t.onCommentUpdateTime}})})),1)]),t.notSupportCommentCloudVersion?t._e():e("div",{staticClass:"art-editor"},[t.cloudIsLogin?e("Editor",{attrs:{commentId:0,replyId:0,parent:{id:0,comments:t.comments},users:t.users,initSummary:""},on:{commentAdded:t.commentAdded,onCommentUpdateTime:t.onCommentUpdateTime}}):e("div",{staticClass:"login-tip"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v("需要登录才可进行评论")]),e("div",{staticClass:"button light",on:{click:t.goCloudLogin}},[t._v("去登录")]),e("div",{staticClass:"text"},[t._v("还没有标记狮账号？去"),e("a",{attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("注册")])])])])],1)]):t._e()},Xw=[],Kw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor"},[t.attachLoading?e("div",{staticClass:"attach-loading"},[e("p",[t._v("附件添加中...")])]):t._e(),t.attachFetching?e("div",{staticClass:"attach-fetching"},[t._v("评论数据提交中...")]):t._e(),e("EditorTextarea",{ref:"customInput",attrs:{initValue:t.initSummary,maxlength:t.maxLength,placeholder:"留下你的评论,支持@成员"},on:{setValue:t.setValue,submit:t.submit}}),t.attachMents.length>0?e("ul",{staticClass:"attachments"},t._l(t.attachMents,(function(n){return e("li",{key:n.id,on:{click:function(e){return e.preventDefault(),t.clickAttach(n)}}},[e("span",{staticClass:"btn-remove",attrs:{title:"移除"},on:{click:function(e){return e.stopPropagation(),t.clickRemove(n)}}}),e("BlobImage",{attrs:{image:n.thumbBlob||n.blob}})],1)})),0):t._e(),e("div",{ref:"btns",staticClass:"btns"},[e("ul",{staticClass:"menu"},[0===t.replyId?e("li",{staticClass:"point",class:{on:t.pointEnable,pointed:this.pointed},attrs:{title:"添加评注"},on:{click:t.startPoint}},[t.pointed?e("span",[t._v(t._s(t.pointIndex))]):t._e()]):t._e(),e("li",{staticClass:"localimage",attrs:{title:"上传本地图片"},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickLocalFile.apply(null,arguments)}}},[e("input",{ref:"file",attrs:{type:"file",accept:t.supportFileExt},on:{change:t.onLocalFileChange}})]),e("li",{staticClass:"drawimage",class:{on:t.inDrawingSelf},attrs:{title:"画板截图"},on:{click:t.startDraw}}),e("li",{staticClass:"emoji",class:{on:t.emojiListVisible},on:{click:function(e){return e.target!==e.currentTarget?null:t.openEmojiList.apply(null,arguments)}}},[t.emojiListVisible?e("div",{staticClass:"emoji-list"},t._l(t.EnumEmojiSupportList,(function(n){return e("div",{key:n.name,class:["icon-emoji","emoji-"+n.name],on:{click:function(e){return t.clickEmojiItem(n)}}})})),0):t._e()])]),e("div",{staticClass:"button light submit",class:{off:!t.canSubmit},on:{click:t.submit}},[t._v("评论")])])],1)},qw=[],Qw=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editor-textarea-container"},[e("div",{ref:"input",staticClass:"editor-textarea",attrs:{contenteditable:"true",placeholder:t.placeholder,autocomplete:"off",spellcheck:"false"},on:{click:t.clickInput,paste:function(e){return e.preventDefault(),t.onInputPaste.apply(null,arguments)},focus:t.onInputFocus,blur:t.onInputBlur,compositionstart:t.onCompositionStart,compositionend:t.onCompositionEnd,input:t.onInput,keyup:t.onInputKeyup}},[t._v(t._s(t.initValue))]),e("EditorUsers",{ref:"users",on:{clickUser:t.clickAtUser}})],1)},Jw=[],Zw=function(){var t=this,e=t._self._c;return t.visible?e("div",{ref:"box",staticClass:"at-users",class:{"in-top":t.showInTop}},[t.fetchState===t.FetchState.Fetching||t.fetchState===t.FetchState.Error?e("div",{staticClass:"error"},[e("NetworkLoading",{attrs:{loadText:"正在获取用户列表信息...",errorText:t.errorText,isLoading:t.fetchState===t.FetchState.Fetching,isError:t.fetchState===t.FetchState.Error,reLoadText:""},on:{reload:function(e){return t.clickReload()}}})],1):0===t.list.length?e("div",{staticClass:"empty"},[t._v('未检索到 "'+t._s(t.searchText)+'" 相关的用户')]):e("ul",t._l(t.list,(function(n){return e("li",{key:n.id,attrs:{title:"".concat(n.nickName,"(").concat(n.email,")")},on:{click:function(e){return t.clickUser(n)}}},[e("div",{staticClass:"name"},[t._v(t._s(n.nickName))]),e("div",{staticClass:"email"},[t._v("("+t._s(n.email)+")")])])})),0)]):t._e()},tx=[],ex={components:{NetworkLoading:us},methods:{clickUser:function(t){this.$emit("clickUser",t),this.visible=!1},searchUser:function(t){var e=this;this.searchText=Object(l["i"])(t)?t.trim().toLowerCase():"",this.visible=!0,this.clickReload(),this.showInTop=!0,this.$nextTick((function(){var t=e.$refs.box;if(t){var n=t.getBoundingClientRect();n.top<144&&(e.showInTop=!1)}}))},hide:function(){this.visible=!1},clickReload:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.fetchState!==c["a"].Fetching){e.next=2;break}return e.abrupt("return");case 2:if(t.visible){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,t.errorText=null,t.fetchState=c["a"].Fetching,n=t.searchText,e.next=10,t.getAllUsers();case 10:i=e.sent,a=n.length>0,i=i.filter((function(t){if(t){if(!a)return!0;var e=(t.nickName||"").toLowerCase();return-1!==e.indexOf(n)}})),t.list=i,t.fetchState=c["a"].Success,e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](4),t.errorText=e.t0,t.fetchState=c["a"].Error;case 21:case"end":return e.stop()}}),e,null,[[4,17]])})))()}},data:function(){return{FetchState:c["a"],fetchState:c["a"].Normal,errorText:null,list:[],searchText:"",visible:!1,showInTop:!1}}},nx=ex,rx=(n("d28d"),Object(hr["a"])(nx,Zw,tx,!1,null,"26289ab6",null)),ix=rx.exports,ax="marklion-cloud-uid",ox={components:{EditorUsers:ix},methods:{onInputKeyup:function(t){var e=t.keyCode||t.which,n=this.inMacOS?t.metaKey:t.ctrlKey;n&&13===e&&(t.preventDefault(),this.$emit("submit"))},clickAtUser:function(t){var e=this;t&&requestAnimationFrame((function(){e.insertAtUser(t)}))},onInput:function(){this.$emit("setValue",this.getValue()),this.autoParseSearchUserText()},autoParseSearchUserText:function(){var t=this;clearTimeout(this.searchUserHandle),this.searchUserHandle=setTimeout((function(){var e=t.getSearchUserText(),n=t.$refs.users;n&&(e?(e=e.substr(1),n.searchUser(e)):n.hide())}),50)},onCompositionStart:function(){this.inComposition=!0},onCompositionEnd:function(){this.inComposition=!1},onInputPaste:function(t){var e=t.clipboardData,n=e.getData("text/plain");this.insertText(n)},clickInput:function(t){var e,n=t.target,r=this.$refs.input;if(r!=n&&(e="INPUT"===n.tagName?+n.getAttribute(ax):NaN,!isNaN(e))){var i=window.getSelection(),a=document.createRange(),o=!1,s=n.nextSibling;if(s&&3===s.nodeType){var c=s.textContent;c&&c.length>0&&(c=c[0]," "!==c&&" "!==c||(a.setStart(s,1),o=!0))}o||a.setStartAfter(n),a.collapse(!0),i.removeAllRanges(),i.addRange(a)}},moveRangeToEnd:function(t){if(t||(t=this.$refs.input),t&&window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}},setFocus:function(){this.isInputFocus||this._setLastRange()},_setLastRange:function(){var t=this.$refs.input;if(t){t.focus();var e=this.lastRange;if(e){var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else this.moveRangeToEnd(t)}},_appendData:function(t,e){var n=this;this._setLastRange(),document.execCommand("insertHTML",!1,t),e&&document.execCommand("insertText",!1," "),requestAnimationFrame((function(){var t=n.$refs.input;if(t)for(var e=t.querySelectorAll("*"),r=0,i=e.length;r<i;r++){var a=e[r],o=a.tagName;switch(o){case"P":case"DIV":case"SPAN":case"FONT":var s=a.style.cssText;s&&(a.style.cssText="");break}}}))},getUserText:function(t){return"[@uid:".concat(t,";]")},insertAtUser:function(t){var e;if(t){null===(e=this.$refs.input)||void 0===e||e.focus();var n=this.canEnterTextLength(),r=this.getUserText(t.id);if(n-r<0)this.showTextTip("文本长度已超过输入框允许的最大值:".concat(this.maxlength));else{var i="<input type='button' ".concat(ax,"='").concat(t.id,"'  class='at-user' value='@").concat(t.nickName,"' />"),a=this.lastRange;if(a){var o=a.startContainer,s=a.endContainer,c=a.startOffset,l=a.endOffset;if(o&&o==s&&c==l&&3===o.nodeType){var u=o.textContent;if(u){var d=u.substring(0,c).lastIndexOf("@");if(-1!==d){var h=document.createRange();h.setStart(o,d),h.setEnd(o,c);var f=window.getSelection();f.removeAllRanges(),f.addRange(h),document.execCommand("insertText",!1,""),this.lastRange=h}}}}this._appendData(i,!0)}}},insertText:function(t){var e;if(Object(l["i"])(t)&&(t=Object(c["Y"])(t),Object(l["i"])(t))){var n=this.canEnterTextLength();if(0!==n){var r=t.length;n<r&&(t=t.substr(0,n)),null===(e=this.$refs.input)||void 0===e||e.focus(),this._appendData(t)}else this.showTextTip("文本长度已超过输入框允许的最大值:".concat(this.maxlength))}},canEnterTextLength:function(){var t=this.maxlength,e=this.getValue().length,n=this.getSelectText().length;return Math.max(t-e+n,0)},getSearchUserText:function(){var t=this.lastRange;if(!t)return"";var e=t.startContainer,n=t.endContainer,r=t.startOffset,i=t.endOffset;if(e!=n)return"";if(r!=i)return"";if(3!==e.nodeType)return"";var a=e.textContent;if(!a)return"";a=a.substring(0,r);var o=a.substring(0,r).lastIndexOf("@");return-1===o?"":(a=a.substring(o),/[ [\]]/.test(a)?"":a)},getSelectText:function(){var t=this.lastRange;if(!t)return"";var e=t.cloneContents();try{for(var n=e.childNodes,r="",i=0,a=n.length;i<a;i++){var o=n[i];r+=this.getNodeValue(o)}return r.replace(/\xa0/g," ")}finally{e=null}},getNodeValue:function(t){var e=this;switch(t.nodeType){case 3:return t.textContent||"";case 1:var n=+t.getAttribute(ax);if(isNaN(n)||!(n>0)){var r,i=t.tagName;switch(i){case"DIV":case"P":case"SECTION":r=" ";break;default:r="";break}var a=t.childNodes;return a.forEach((function(t){r+=e.getNodeValue(t)})),r}return"[@uid:".concat(n,";]");default:return""}},getValue:function(){var t=this.$refs.input;if(t){for(var e=t.childNodes,n="",r=0,i=e.length;r<i;r++){var a=e[r];n+=this.getNodeValue(a)}return n.replace(/\xa0/g," ")}},setEmpty:function(){var t,e=this.$refs.input;if(e)while(null!=(t=e.firstChild))e.removeChild(t)},onSelectionChange:function(){var t=window.getSelection();this.lastRange=t.rangeCount>0?t.getRangeAt(0):null},onInputFocus:function(){this.isInputFocus=!0,document.addEventListener("selectionchange",this.onSelectionChange)},onInputBlur:function(){this.isInputFocus=!1,document.removeEventListener("selectionchange",this.onSelectionChange)}},watch:{isInputFocus:function(t){var e=this;clearTimeout(this.autoHideUsersHandle),t||(this.autoHideUsersHandle=setTimeout((function(){var t;null===(t=e.$refs.users)||void 0===t||t.hide()}),500))}},data:function(){return{isInputFocus:!1,searchUserHandle:0,lastRange:null,inComposition:!1,autoHideUsersHandle:0}},beforeDestroy:function(){this.lastRange=null,clearTimeout(this.searchUserHandle),document.removeEventListener("selectionchange",this.onSelectionChange),this.setEmpty()},created:function(){0},props:{placeholder:{type:String,default:""},maxlength:{type:Number,default:0},initValue:{type:String,default:""}}},sx=ox,cx=(n("14c9"),Object(hr["a"])(sx,Qw,Jw,!1,null,"771515f8",null)),lx=cx.exports,ux={components:{BlobImage:ji,EditorTextarea:lx},methods:{setValue:function(t){this.summary=t},autoHideEmojiList:function(){var t=this;clearTimeout(this.emojiListHideHandle),this.emojiListHideHandle=setTimeout((function(){t.emojiListVisible=!1}),50)},clickEmojiItem:function(t){var e=this;this.emojiListVisible=!1,t&&requestAnimationFrame((function(){var n=e.$refs.customInput;n&&n.insertText("[".concat(t.text,"]"))}))},openEmojiList:function(){this.emojiListVisible=!this.emojiListVisible},startPoint:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,o;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.pointInfo,a=e.preventPoint,o=e.inDrawing,!o){n.next=4;break}return e.showTextTip("正在编辑截图，无法添加评注"),n.abrupt("return");case 4:if(!e.pointed){n.next=11;break}return n.next=7,e.confirm({text:"确认移除该评论的评注?"});case 7:if(!n.sent){n.next=10;break}i.point.enable=!1,i.instance=null;case 10:return n.abrupt("return");case 11:e.showTextTip("点击当前区域任意位置添加评注"),a.enable=!0,a.x=t.clientX,a.y=t.clientY,i.instance=e;case 16:case"end":return n.stop()}}),n)})))()},clickAttach:function(t){var e=this.attachMents.map((function(t){return t.blob})),n=e.findIndex((function(e){return e===t.blob}));-1===n&&(n=0),this.$store.commit("setImageViewer",{imgList:e,currentIndex:n})},fixScroll:function(){var t=this.replyId;if(0!==t){var e=this.$refs.btns;e&&e.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}},focus:function(){var t=this.$refs.customInput;null===t||void 0===t||t.setFocus()},clean:function(){this.attachMents.splice(0);var t=this.$refs.customInput;null===t||void 0===t||t.setEmpty();var e=this.preventPoint,n=this.point,r=this.pointInfo,i=this.editComment;r.instance===this&&(r.instance=null,n.enable=!1,n.x=n.y=0,e.enable=!1,e.x=e.y=0),this.inDrawingSelf&&(i.instance=null,i.drawing=!1)},clickRemove:function(t){var e=this.attachMents,n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)},getCustomEditorValue:function(){var t,e,n=null!==(t=null===(e=this.$refs.customInput)||void 0===e?void 0:e.getValue())&&void 0!==t?t:"";return n},submit:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,u,d,h,f,m,p,b,v,g,w;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.attachMents,i=t.fetchState,a=t.artboardVer,o=t.curArtboardId,i!==c["a"].Fetching){e.next=4;break}return e.abrupt("return");case 4:if(!t.inDrawing){e.next=7;break}return t.showTextTip("正在编辑截图,请先保存或取消"),e.abrupt("return");case 7:if(s=[],u=t.getCustomEditorValue(),d=t.maxLength,h=u.length,!(h>d)){e.next=14;break}return t.showTextTip("文本长度已超过输入框允许的最大值(".concat(d,")")),e.abrupt("return");case 14:if(f={artboardId:o,commentId:t.commentId,replyId:t.replyId,summary:u,attachMents:[],artboardVer:a},n.forEach((function(t){s.push(t.blob),t.thumbBlob&&s.push(t.thumbBlob),f.attachMents.push(t.data)})),Object(l["i"])(f.summary)||0!==f.attachMents.length){e.next=20;break}return t.showTextTip("评论内容和图片附件不能都为空"),t.focus(),e.abrupt("return");case 20:if(t.pointed&&(f.pointX=t.point.x,f.pointY=t.point.y,f.pointEnable=!0),t.fetchState=c["a"].Fetching,e.prev=22,t.checkLoginThrow()){e.next=26;break}return t.fetchState=c["a"].Error,e.abrupt("return");case 26:return m=Object(c["rb"])(JSON.stringify(f)),s.unshift(m),s.unshift(Object(c["fb"])(m.byteLength)),m=Object(c["m"])(s),e.next=32,t.fetchPostCloudApi("addartboardcommentbyweb",{body:m});case 32:if(p=e.sent,t.fetchState=c["a"].Success,s=f=null,Object(l["s"])(p)){e.next=37;break}throw"返回值异常:".concat(p);case 37:if(p.success){e.next=39;break}throw p.errMsg;case 39:if(Object(l["s"])(p.data)){e.next=41;break}throw"返回值异常:".concat(JSON.stringify(p));case 41:p=p.data,b=p.commentUpdateTime,t.$emit("onCommentUpdateTime",{commentUpdateTime:b,artboardId:o}),v=p,g=v.atUsers,f=p.comment,w=t.users,w&&Object(l["h"])(g)&&g.forEach((function(e){e&&t.$set(w,e.id,e)})),f=ei(f,{id:0,email:t.cloudUserEmail,userKey:t.cloudUserKey,nickName:t.cloudNickName},c["c"],t.parent,w),t.clean(),t.showTextTip("评论已提交成功"),t.$emit("commentAdded",f),e.next=59;break;case 54:e.prev=54,e.t0=e["catch"](22),t.showTextTip(e.t0),t.fetchState=c["a"].Error;case 59:case"end":return e.stop()}}),e,null,[[22,54]])})))()},clickLocalFile:function(){var t;this.attachMents.length>=ti?this.showTextTip("无法选择图片,已达图片提交上限"):null===(t=this.$refs.file)||void 0===t||t.click()},onLocalFileChange:function(t){var e=this,n=t.target,r=n.files?n.files[0]:null;if(r){n.value="";var i=r.name,a=r.size,o=r.type;if(i&&!(a<1)&&o)if(0===o.indexOf("image/"))if(a>Zr)this.showTextTip("选择的文件大小[".concat(Object(c["vb"])(a),"]太大,不能超过[").concat(Object(c["vb"])(Zr),"]"));else{i=i.toLowerCase();var s=i.length,l=this.isSupportWebp,u=Jr.find((function(t){if(!l&&t===Qr)return!1;var e=i.indexOf(t);return-1!==e&&e+t.length===s}));u?this.addAttachMent(r).then((function(){e.showTextTip("图片已添加")})).catch((function(t){return e.showTextTip(t)})):this.showTextTip("请选择正确的图片文件")}else this.showTextTip("请选择正确的图片文件")}},addAttachMent:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.attachLoading=!0,n.next=3,G(t);case 3:return i=n.sent,e.attachMents.push(i),e.attachLoading=!1,n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})))()},startDraw:function(){this.inDrawing?this.showTextTip("当前已在画板截图编辑模式"):this.attachMents.length>=ti?this.showTextTip("无法编辑画板截图,已达图片提交上限"):(this.$store.commit("startDraw",this),this.showTextTip("在当前区域编辑画板相关截图"))}},watch:{emojiListVisible:function(t){clearTimeout(this.emojiListHideHandle),t?window.addEventListener("click",this.autoHideEmojiList,!0):window.removeEventListener("click",this.autoHideEmojiList,!0)},curArtboardId:function(){this.clean()}},computed:{canSubmit:function(){var t=this.fetchState,e=this.summary,n=this.attachMents;return t!==c["a"].Fetching&&!(0===n.length&&!Object(l["i"])(e.trim()))},EnumEmojiSupportList:function(){return Ei},point:function(){return this.pointInfo.point},preventPoint:function(){return this.pointInfo.preventPoint},pointInfo:function(){return this.$store.state.editComment.pointInfo},pointed:function(){return this.pointInfo.instance===this&&this.point.enable},pointEnable:function(){return this.pointInfo.instance===this&&(this.point.enable||this.preventPoint.enable)},pointIndex:function(){return this.pointed?this.point.pointIndex:""},attachFetching:function(){return this.fetchState===c["a"].Fetching},isSupportWebp:function(){return this.$store.state.isSupportWebp===ln.Support},canDestory:function(){return 0===this.attachMents.length&&!Object(l["i"])(this.summary)},supportFileExt:function(){var t=Jr;return this.isSupportWebp||(t=t.filter((function(t){return t!==Qr}))),t.join(",")},inDrawing:function(){var t=this.editComment;return t.drawing},inDrawingSelf:function(){var t=this.editComment;return t.drawing&&t.instance===this},artboardVer:function(){var t,e=this.replyId,n=this.curArtboardLoadedVerData,r=this.parent;return null!==(t=0===e?n.lastVersionId:r.artboardVer)&&void 0!==t?t:0}},beforeDestroy:function(){clearTimeout(this.emojiListHideHandle),window.removeEventListener("click",this.autoHideEmojiList,!0),this.clean()},created:function(){this.summary=Object(l["i"])(this.initSummary)?this.initSummary:""},data:function(){return{maxLength:256,inputFocused:!1,emojiListHideHandle:0,emojiListVisible:!1,attachLoading:!1,summary:"",attachMents:[],fetchState:c["a"].Normal}},props:{commentId:Number,parent:Object,replyId:Number,users:Object,initSummary:{type:String,default:""}}},dx=ux,hx=(n("b350"),Object(hr["a"])(dx,Kw,qw,!1,null,"7b256a25",null)),fx=hx.exports,mx=function(){var t=this,e=t._self._c;return t.comment?e("div",{staticClass:"comment-detail",attrs:{id:"art_c".concat(t.comment.commentId,"_").concat(t.comment.id)}},[e("div",{staticClass:"content",class:{on:t.selectComment===t.comment},on:{click:t.clickPoint}},[e("UserFace2",{attrs:{self:t.isSelfComment,tourist:t.isTourist,title:t.userFaceTitle,text:t.userFaceText}}),e("div",{staticClass:"userinfo"},[e("div",{staticClass:"summary",class:{reply:t.isReply}},[t.canRemove?e("a",{staticClass:"btn-del",attrs:{href:"javascript:;",title:"删除评论"},on:{click:t.clickRemove}}):t._e(),e("div",{staticClass:"name"},[t._v(" "+t._s(t.userNickName)),t.isReplyOther?e("span",{staticClass:"reply-to"},[t._v("回复 "+t._s(t.comment.replyUser.nickName))]):t._e()]),t.comment.pointEnable?e("span",{staticClass:"point"},[t._v(t._s(t.comment.pointIndex))]):t._e(),e("span",{domProps:{innerHTML:t._s(t.summaryHTML)}})]),t.attachMentImgs.length>0?e("ul",{staticClass:"attachments"},t._l(t.attachMentImgs,(function(n,r){return e("li",{key:r,on:{click:function(e){return e.preventDefault(),t.clickAttach(n)}}},[t.attachVisible?e("BlobImage",{attrs:{image:n.preview}}):t._e()],1)})),0):t._e(),e("div",{staticClass:"date"},[t.artboardVer?e("span",{staticClass:"artboard-ver",attrs:{title:"评论的画板版本#".concat(t.comment.artboardVer)},domProps:{textContent:t._s(t.artboardVer)},on:{click:function(e){return t.setCurArtboardVer(t.comment.artboardVer)}}}):t._e(),t._v(t._s(t.comment.dateStr)),e("a",{class:{on:t.editorVisible},attrs:{href:"javascript:;"},on:{click:t.clickReply}},[t._v(t._s(t.editorVisible?"收起回复":"回复"))])])])],1),t.editorEnable?e("Editor",{directives:[{name:"show",rawName:"v-show",value:t.editorVisible,expression:"editorVisible"}],ref:"editor",attrs:{commentId:t.comment.commentId,replyId:t.comment.id,parent:t.comment.parent||t.comment,users:t.users},on:{commentAdded:t.commentAdded,onCommentUpdateTime:t.onCommentUpdateTime}}):t._e(),t.comment.comments?e("div",{staticClass:"child"},t._l(t.comment.comments,(function(n,r){return e("CommentItem",{key:0===n.id?"".concat(t.comment.id,"_index_").concat(r):"".concat(t.comment.id,"_id_").concat(n.id),attrs:{attachVisibleCheckerKey:t.attachVisibleCheckerKey,comment:n,selectComment:t.selectComment,users:t.users},on:{commentAdded:t.commentAdded,commentRemove:t.commentRemove,onCommentUpdateTime:t.onCommentUpdateTime}})})),1):t._e()],1):t._e()},px=[],bx={off:1,on:2,hide:3},vx={components:{UserFace2:Ni,Editor:fx,BlobImage:ji},name:"CommentItem",methods:{onCommentUpdateTime:function(t){this.$emit("onCommentUpdateTime",t)},clickPoint:function(t){var e=t.target,n=this.comment,r=this.selectComment,i=n===r?null:n;if(!i&&e){var a=e.tagName;if("A"===a)return;if("LI"===a&&e.parentNode.classList.contains("attachments"))return}this.setSelectComment(i)},setSelectComment:function(t){this.$store.commit("setSelectComment",{comment:t,notScrollList:!0})},setCommentEditorVisibleId:function(t){this.$store.commit("setCommentEditorVisibleId",t)},commentRemove:function(t){if(t){var e=this.comment.comments;if(e){var n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)}}},clickRemove:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s,c,u,d,h,f,m,p,b;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.canRemove){e.next=2;break}return e.abrupt("return");case 2:if(n=t.comment,n){e.next=5;break}return e.abrupt("return");case 5:if(i=n.id,a=n.commentId,o=n.artboardId,e.prev=6,t.checkLoginThrow()){e.next=9;break}return e.abrupt("return");case 9:return s=0===a?"是否确认删除该评论及所属的所有二级评论?":"是否确认删除该评论?",e.next=12,t.confirm({text:s});case 12:if(e.sent){e.next=14;break}return e.abrupt("return");case 14:return e.next=16,t.fetchPostCloudApi("removecommentbyweb",{body:{id:i,commentId:a,artboardId:o}});case 16:if(c=e.sent,Object(l["s"])(c)){e.next=19;break}throw new Error("返回值异常:".concat(c));case 19:if(c.success){e.next=21;break}throw new Error(c.errMsg);case 21:t.showTextTip("评论已删除"),t.$emit("commentRemove",n),u=t.artboard,d=t.artboardDetail,Object(l["s"])(c.data)&&u&&(h=c.data,f=h.comments,m=h.replies,p=h.commentUpdateTime,b=h.artboardMaxPointIndex,"number"===typeof f&&(u.comments-=f),"number"===typeof m&&(u.replies-=m),b>=0&&(d.maxPointIndex=b),t.$emit("onCommentUpdateTime",{commentUpdateTime:p,artboardId:o})),e.next=30;break;case 27:e.prev=27,e.t0=e["catch"](6),t.showTextTip(e.t0);case 30:case"end":return e.stop()}}),e,null,[[6,27]])})))()},clickAttach:function(t){var e=this.attachMentImgs.map((function(t){return t.imgSrc})),n=e.findIndex((function(e){return e===t.imgSrc}));-1===n&&(n=0),this.$store.commit("setImageViewer",{imgList:e,currentIndex:n})},commentAdded:function(t){this.$emit("commentAdded",t),this.editorVisible&&this.clickReply()},clickReply:function(t){var e=this;if(this.cloudIsLogin)if(this.editorVisible&&!0!==t){var n=this.$refs.editor;if(n&&n.canDestory)return this.editorVisible&&this.setCommentEditorVisibleId(0),void(this.editorState=bx.off);this.editorState=bx.hide}else this.editorState=bx.on,this.setCommentEditorVisibleId(this.comment.id),this.$nextTick((function(){var t=e.$refs.editor;t&&(t.focus(),t.fixScroll())}));else this.showTextTip("未登录,需要登录才可进行评论")},checkAttachVisible:function(){var t=this.artboardInComment,e=this.attachMentImgs,n=this.attachVisible,r=this.artboardCommentVisible;t&&r&&!n&&0!==e.length&&(this.attachVisible=!0)}},mounted:function(){this.checkAttachVisible()},watch:{attachVisibleCheckerKey:function(){this.checkAttachVisible()},autoOpenEditor:function(t){var e=this;t&&(this.comment.autoOpenEditor=!1,setTimeout((function(){e.clickReply(!0)}),313))}},computed:{artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},artboardVer:function(){var t=this.comment.artboardVer,e=this.isReply;return null==t||e?null:"#".concat(t)},autoOpenEditor:function(){return!!this.comment.autoOpenEditor},summaryHTML:function(){return zi(this.comment.summary,this.comment.atUsers)},artboardDetail:function(){return this.$store.state.artboardDetail},selectComment:function(){return this.artboardDetail.selectComment},commentEditorVisibleId:function(){return this.$store.state.commentEditorVisibleId},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},canRemove:function(){return this.isSelfComment||this.cloudUserIsOwner},attachMentImgs:function(){var t,e=null===(t=this.comment)||void 0===t?void 0:t.attachMents,n=[];return e?(e.forEach((function(t){if(t){var e=t.thumbFileName||t.fileName;e&&n.push({imgSrc:t.fold+t.fileName,preview:t.fold+e})}})),n):n},userFaceTitle:function(){var t=this.comment;if(!t)return null;var e=t.user;return e?"".concat(e.nickName,"(").concat(e.email,")"):null},userNickName:function(){var t=this.comment;if(!t)return"-";var e=t.user;if(!e)return"-";var n=e.nickName;return n||"-"},isSelfComment:function(){var t=this.comment;if(!t)return!1;var e=t.user;return!!e&&e.userKey===this.cloudUserKey},isTourist:function(){var t=this.comment;if(!t)return!1;var e=t.user;if(!e)return!1;switch(e.authority){case o["m"].Admin:case o["m"].Designer:return!1}return!0},userFaceText:function(){var t=this.userNickName;return t[t.length-1]},editorEnable:function(){return this.editorState!==bx.off},editorVisible:function(){return this.editorState===bx.on&&this.commentEditorVisibleId===this.comment.id},isReply:function(){var t=this.comment;return!!t&&0!==t.commentId},isReplyOther:function(){var t=this.comment;return!!t&&(0!==t.commentId&&t.replyUser)}},data:function(){return{editorState:bx.off,attachVisible:!1}},props:{comment:Object,users:Object,attachVisibleCheckerKey:String}},gx=vx,wx=(n("64c9"),Object(hr["a"])(gx,mx,px,!1,null,"54a3d272",null)),xx=wx.exports,yx={components:{Editor:fx,CommentItem:xx,NetworkLoading:us},methods:{onCommentListScroll:function(){var t=this.$refs.commentList;t&&(this.commentListScrollTop=t.scrollTop)},clickCommentFilterMode:function(t){this.$store.state.commentOnlyCurrentVerArtboard=t},onCommentUpdateTime:function(t){this.$emit("onCommentUpdateTime",t)},commentRemove:function(t){if(t){var e=this.comments;if(e){var n=e.findIndex((function(e){return e===t}));-1!==n&&e.splice(n,1)}}},clickReload:function(){this.$emit("clickReload")},commentAdded:function(t){var e=this;this.setSelectComment(t),this.$emit("commentAdded",t),this.$nextTick((function(){if(0===t.commentId){var n=e.$refs.commentList;n&&(n.scrollTop=1e5)}else e.scrollToComment(t)}))},getCommentOrReplyFromId:function(t,e){var n=this.comments;if(!n)return null;for(var r=0,i=n.length;r<i;r++){var a=n[r];if(!e&&a.id==t)return a;if(e){var o=a.comments;if(o){var s=o.find((function(e){return e.id===t}));if(s)return s}}}},refreshCommentList:function(){var t,e,n,r=this,i=this.comments,a=this.autoIntoInfo,o=null!==(t=null===(e=this.selectComment)||void 0===e?void 0:e.id)&&void 0!==t?t:0,s=o>0&&(null===(n=this.selectComment)||void 0===n?void 0:n.commentId)>0;if(null!=i){this.setSelectComment(null);var c=a.commentId,l=a.commentArtboardId,u=a.isReply;if(0!==l&&l==this.curArtboardId&&c>0){var d=this.getCommentOrReplyFromId(c,u);if(!d)return this.showTextTip("未定位到评论信息,可能已经被删除"),this.$store.commit("artboardCommentVisible",!0),a.commentId=a.commentArtboardId=-1,void this.$nextTick((function(){var t=r.$refs.commentList;t&&(t.scrollTop=1e5)}));var h=d.artboardVer;null!=h&&this.setCurArtboardVer(h,!0),this.setSelectComment(d)}if(a.commentId=a.commentArtboardId=-1,null==this.selectComment&&o>0){var f=this.getCommentOrReplyFromId(o,s);f&&this.setSelectComment(f)}null==this.selectComment&&this.$nextTick((function(){var t=r.$refs.commentList;t&&(t.scrollTop=1e5)}))}},scrollToComment:function(t){var e=this.comments,n=e.findIndex((function(e){return e===t})),r=0===n,i=n===e.length-1,a="art_c".concat(t.commentId,"_").concat(t.id),o=document.getElementById(a),s=this.$refs.commentList;if(o&&s){var c=o.getBoundingClientRect(),l=s.getBoundingClientRect(),u=l.top+Math.round(l.height/2)-(r?0:i?c.height:Math.round(c.height/2));s.scrollBy({top:c.top-u,behavior:"smooth"})}},setSelectComment:function(t){this.$store.commit("setSelectComment",{comment:t})}},mounted:function(){var t=this;this.$nextTick((function(){t.onCommentListScroll()}))},computed:{artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},attachVisibleCheckerKey:function(){var t=this.winRect,e=this.commentListScrollTop,n=this.artboardCommentVisible,r=this.commentOnlyCurrentVerArtboard,i=this.artboardInComment;return n&&i?"s".concat(r?1:0,":t").concat(e,":h").concat(t.height):"-"},winRect:function(){return this.$store.state.winRect},commentFilterModeNames:function(){var t,e,n=this.commentOnlyCurrentVerArtboard,r=this.fetchDetailState,i=this.FetchState,a=this.notSupportCommentCloudVersion,o=this.comments,s=this.comments_onlyCurrentVer,c=!a&&!(r===i.Fetching||r===i.Error),l=null!==(t=null===o||void 0===o?void 0:o.reduce((function(t,e){var n,r;return t++,t+=null!==(n=null===e||void 0===e||null===(r=e.comments)||void 0===r?void 0:r.length)&&void 0!==n?n:0,t}),0))&&void 0!==t?t:0,u=null!==(e=null===s||void 0===s?void 0:s.reduce((function(t,e){var n,r;return t++,t+=null!==(n=null===e||void 0===e||null===(r=e.comments)||void 0===r?void 0:r.length)&&void 0!==n?n:0,t}),0))&&void 0!==e?e:0,d="仅当前版本评论(".concat(c?u:"..",")"),h="全部评论(".concat(c?l:"..",")");return{onlyCurrentVer:d,all:h,selected:n?d:h}},selectComment:function(){return this.$store.state.artboardDetail.selectComment},autoIntoInfo:function(){return this.$store.state.autoIntoInfo},FetchState:function(){return c["a"]},users:function(){var t;return null!==(t=this.$store.state.artboardDetail.commentUsers)&&void 0!==t?t:{}},commentOnlyCurrentVerArtboard:function(){return!this.notSupportArtboardVerCloudVersion&&this.$store.state.commentOnlyCurrentVerArtboard},comments:function(){return this.$store.state.artboardDetail.comments},comments_onlyCurrentVer:function(){var t,e,n=this.artboardVerId;return null!==(t=null===(e=this.comments)||void 0===e?void 0:e.filter((function(t){return t.artboardVer===n})))&&void 0!==t?t:[]},renderComments:function(){var t,e=this.comments,n=this.comments_onlyCurrentVer,r=this.commentOnlyCurrentVerArtboard;return null!==(t=r?n:e)&&void 0!==t?t:[]},commentRoot:function(){return{id:0,comments:this.comments}},artboard:function(){var t;return null===(t=this.curArtboard)||void 0===t?void 0:t.artboard},visible:function(){return!0},commentInfoList:function(){var t;return null===(t=this.commentInfo)||void 0===t?void 0:t.list},curArtboardVerData:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e?void 0:e.artboardVerData)&&void 0!==t?t:this.artboard},artboardVerId:function(){var t,e;return null!==(t=null===(e=this.curArtboardVerData)||void 0===e?void 0:e.lastVersionId)&&void 0!==t?t:0}},watch:{"autoIntoInfo.commentId":function(t){if(t>0){var e=this.autoIntoInfo,n=this.autoIntoInfo,r=n.commentId,i=n.commentArtboardId,a=n.isReply;if(i>0&&i===this.curArtboardId){var o=this.getCommentOrReplyFromId(r,a);if(!o)return void this.clickReload();var s=o.artboardVer;null!=s&&this.setCurArtboardVer(s,!0),this.selectComment===o?this.scrollToComment(o):this.setSelectComment(o),e.commentId=e.commentArtboardId=-1}}},selectComment:function(t){var e=this;if(t){var n=this.$store.state.artboardDetail.notScrollList;!n&&this.$nextTick((function(){e.scrollToComment(t)}))}},comments:function(t,e){t!==e&&this.refreshCommentList()}},data:function(){return{commentListScrollTop:0}},props:{notSupportArtboardVerCloudVersion:Boolean,listNeedRefresh:Boolean,fetchDetailState:Number,notSupportCommentCloudVersion:Boolean,errorText:{validator:function(){return!0}}},created:function(){this.refreshCommentList()}},kx=yx,Cx=(n("fc83"),Object(hr["a"])(kx,Yw,Xw,!1,null,"0adfebdd",null)),Sx=Cx.exports,Ox={components:{DetailComment:Sx},methods:{onCommentUpdateTime:function(t){if(Object(l["s"])(t)){var e=t.artboardId,n=t.commentUpdateTime;e===this.curArtboardId&&this.$set(this.selfChangecommentUpdateTimes,n,1)}},commentAdded:function(t){if(t){var e=this.artboardDetail,n=this.artboard;n&&(t.pointEnable&&(e.maxPointIndex=Math.max(e.maxPointIndex,t.pointIndex)),0===t.commentId?n.comments++:n.replies++)}},_getCommentsWithCache:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,o,s,u,h,f,m,p,b;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.curArtboardId,o=e.notSupportArtboardVerCloudVersion,s=e.artboard,u=e.listNeedRefresh,o=!0,a){n.next=4;break}throw new Error("画板id不存在");case 4:if(t||u){n.next=8;break}if(h=In("comment",a),!h){n.next=8;break}return n.abrupt("return",h);case 8:return f=new FormData,f.append("artboardid",a),n.next=12,e.fetchPostCloudApi(o?"GetCommentsByArtboard":"GetArtboardDataDetailV2ByWeb",{body:f});case 12:if(h=n.sent,Object(l["s"])(h)){n.next=15;break}throw new Error("获取评论返回值异常:".concat(h));case 15:if(h.success){n.next=17;break}throw new Error(h.errMsg);case 17:if(h=h.data,!o){n.next=22;break}h={artboard:s,commentInfo:h,historyArtboards:[],users:null!==(m=h.users)&&void 0!==m?m:{}},n.next=28;break;case 22:if(Object(l["s"])(h)&&Object(l["s"])(h.artboard)){n.next=24;break}throw new Error("画板最新信息的返回值解析异常");case 24:h.artboard=s,Object(l["s"])(h.users)||(h.users={}),Object(l["h"])(h.historyArtboards)?h.historyArtboards.forEach((function(t){fe(t),Object(d["h"])(t),_e(t)})):h.historyArtboards=[],Object(l["s"])(h.commentInfo)||(h.commentInfo={});case 28:return p=function(t){if(!(!Object(l["s"])(t)||Object(l["i"])(t.updaterEmail)&&Object(l["i"])(t.updaterName))){var e=h.users[t.updaterId];e&&(t.updaterEmail=e.email,t.updaterName=e.nickName)}},b=null!==(i=h.artboard.cid)&&void 0!==i?i:h.artboard.id,h.artboard.cid=b,h.historyArtboards.forEach((function(t){p(t),t.cid=b,null==t.lastVersionId&&(t.lastVersionId=t.verId)})),p(h.artboard),h.comments=ni(h.commentInfo,c["c"],h.users),e.refreshedMinNotifyId=e.maxNotifyId,Sn("comment",a,h,8e3),n.abrupt("return",h);case 37:case"end":return n.stop()}}),n)})))()},clickRefresh:function(){this.getComments(!0)},getComments:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,o,s,u,d,h,f,m,p,b,v;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.inCloudMode){n.next=2;break}return n.abrupt("return");case 2:if(e.inArtboardMode){n.next=4;break}return n.abrupt("return");case 4:if(e.artboardInComment||e.pointCommentShowAlways){n.next=6;break}return n.abrupt("return");case 6:if(e.commentDetailVisible){n.next=8;break}return n.abrupt("return");case 8:if(a=e.curArtboardId,o=e.artboardDetail,s=e.artboard,a){n.next=11;break}return n.abrupt("return");case 11:if(u="".concat(s.cid,"-").concat(s.updateTimeTimes,":"),o.fetchState!==c["a"].Fetching||0!==(null===(i=e.fetchKey)||void 0===i?void 0:i.indexOf(u))){n.next=14;break}return n.abrupt("return");case 14:if(u+=Date.now().toString(16),o.fetchState=c["a"].Fetching,o.errorText="",n.t0=!1,!n.t0){n.next=21;break}return n.next=21,Object(c["ub"])(50);case 21:return e.fetchKey=u,o.comments=null,o.commentUsers=null,n.prev=24,e.selfChangecommentUpdateTimes={},n.next=28,e._getCommentsWithCache(t);case 28:d=n.sent,e.fetchKey===u&&(o.comments=d.comments,o.commentUsers=d.users,f=d.commentInfo,o.maxPointIndex=null!==(h=null===f||void 0===f?void 0:f.artboardMaxPointIndex)&&void 0!==h?h:0,Object(l["s"])(f)&&(m=0,p=0,Object(l["h"])(f.list)&&(m=f.list.length,f.list.forEach((function(t){var e,n;p+=null!==(e=null===t||void 0===t||null===(n=t.comments)||void 0===n?void 0:n.length)&&void 0!==e?e:0}))),b=e.artboard,b&&(b.comments=m,b.replies=p,f.commentUpdateTime>=0&&(b.commentUpdateTime=f.commentUpdateTime,v=e.$store.state.userNotify.commentUpdateStates,e.$set(v,e.cloudKey,{artboardId:a,commentUpdateTime:f.commentUpdateTime})))),e.listNeedRefresh=!1,o.fetchState=c["a"].Success),n.next=35;break;case 32:n.prev=32,n.t1=n["catch"](24),e.fetchKey===u&&(o.errorText=n.t1,o.fetchState=c["a"].Error,e.showTextTip(n.t1));case 35:case"end":return n.stop()}}),n,null,[[24,32]])})))()}},computed:{cloudPage:function(){var t;return this.curArtboard&&(t=this.curArtboard.artboard.mlConfig.softVersion),t||(t=this.$store.state.config.softVer),"https://www.marklion.cn/cloud.shtml?invoke=MarkLion.Output".concat(Object(l["i"])(t)?"&ver=".concat(t):"")},pointCommentShowAlways:function(){return this.$store.state.pointCommentShowAlways},commentDetailVisible:function(){return this.cloudIsLogin||!this.cloudNeedLogin&&this.supportPublicCloudShowCommentCloudVersion},supportPublicCloudShowCommentCloudVersion:function(){return!Object(l["q"])(this.cloudVersion)},notSupportArtboardVerCloudVersion:function(){return Object(l["j"])(this.cloudVersion)},artboardCommentUpdateTimeChanged:function(){var t,e=this.artboardNewCommentUpdateTime,n=this.listNeedRefresh,r=this.selfChangecommentUpdateTimes,i=this.curArtboardId;return!(i<1)&&(!n&&(0!==e&&(!r[e]&&e!==(null===(t=this.artboard)||void 0===t?void 0:t.commentUpdateTime))))},artboardNewCommentUpdateTime:function(){var t,e=this.$store.state.userNotify.commentUpdateStates[this.cloudKey];return e?e.artboardId!==this.curArtboardId?0:null!==(t=e.commentUpdateTime)&&void 0!==t?t:0:0},maxNotifyId:function(){var t,e=this.notifyList;return 0===e.length?0:null===(t=e[0])||void 0===t?void 0:t.id},notifyList:function(){var t,e;return null!==(t=null===(e=this.$store.state.userNotify.cloudList[this.cloudKey])||void 0===e?void 0:e.list)&&void 0!==t?t:[]},artboardCommentVisible:function(){return this.$store.state.artboardCommentVisible},artboardDetail:function(){return this.$store.state.artboardDetail},notSupportCommentCloudVersion:function(){return Object(l["k"])(this.cloudVersion)},artboard:function(){var t,e=this.curArtboard;return null!==(t=null===e||void 0===e?void 0:e.artboard)&&void 0!==t?t:null},curArtboardId:function(){var t,e;return null!==(t=null===(e=this.artboard)||void 0===e?void 0:e.cid)&&void 0!==t?t:0},refreshDataTicks:function(){return this.artboardDetail.refreshDataTicks},commentRefreshKey:function(){var t=this.pointCommentShowAlways,e=this.inArtboardMode,n=this.curArtboardId,r=this.cloudIsLogin,i=this.artboardInComment;return"".concat(e,":").concat(t,":").concat(n,":").concat(r,":").concat(t||i?1:0)}},watch:{artboardCommentUpdateTimeChanged:function(t){t&&(this.listNeedRefresh=!0)},refreshDataTicks:function(){this.clickRefresh()},commentRefreshKey:function(){this.getComments()}},data:function(){return{selfChangecommentUpdateTimes:{},listNeedRefresh:!1,refreshedMinNotifyId:0,fetchKey:""}},created:function(){this.getComments()}},Ix=Ox,Ax=(n("c8c3"),Object(hr["a"])(Ix,Gw,zw,!1,null,"35620533",null)),Tx=Ax.exports,jx=function(){var t=this,e=t._self._c;return t.inMultDownMode&&t.curArtboard?e("section",{staticClass:"mult-download"},[0===t.exportNodeCount?e("div",{staticClass:"empty"},[t._v("当前画板不存在切图")]):[e("Header",{attrs:{exportNodeCount:t.exportNodeCount,options:t.platformSelectOptions},on:{onPlatformSelectChanged:t.onPlatformSelectChanged}}),e("div",{staticClass:"list"},[e("LazyList",{ref:"lazyList",attrs:{list:t.curArtboard.exportNodes,lineHeight:80},scopedSlots:t._u([{key:"default",fn:function(n){return n.item?e("ExportNodeItem",{key:"".concat(n.realIndex,"-").concat(n.item.guid),attrs:{node:n.item,exportPdfOnly:t.exportPdfOnly}}):t._e()}}],null,!0)})],1),e("div",{staticClass:"line"}),t.currentResInSvg||t.currentResInPdf?t._e():e("div",{staticClass:"platform-set"},[e("PropertyDownloadOptions",{ref:"downOptions",attrs:{jpgQuality:t.jpgQuality,currentResInSvg:t.currentResInSvg,currentResInPdf:t.currentResInPdf,currentResInJpg:t.currentResInJpg,exportSvgOnly:t.exportSvgOnly,exportPdfOnly:t.exportPdfOnly,downloadPlatform:t.downloadPlatform,node:null,bottomPosition:!0},on:{setJpgQuality:t.setJpgQuality}})],1),e("div",{staticClass:"btns"},[e("Select",{attrs:{options:t.resTypeSelectOptions,expandUp:!0,light:!0},on:{changed:t.onResTypeSelectChanged}}),e("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickDownSelectAll()}}},[t._v("下载切图")])],1)]],2):t._e()},Fx=[],Mx=function(){var t=this,e=t._self._c;return e("section",{staticClass:"header"},[e("a",{staticClass:"btn-set-platform",class:Object(j["a"])({on:t.setting},t.calcPlatformTypeCss,!0),attrs:{href:"javascript:;"},on:{click:function(e){t.setting=!t.setting}}},[t._v(" "+t._s(t.calcPlatformTypeText)+" ")]),t.setting?e("div",{staticClass:"platforms"},[e("SetPlatform",{attrs:{options:t.options},on:{clickCalcPlatform:t.clickCalcPlatform}})],1):t._e(),e("div",[0!==t.exportNodeCount?e("Checkbox",{attrs:{text:t.selectAllText,selected:t.allSelected},on:{click:t.clickAllSelectBtn}}):t._e()],1)])},_x=[],Lx=function(){var t=this,e=t._self._c;return e("section",{staticClass:"set-platform"},[e("ul",t._l(t.options,(function(n){return e("li",{key:n.name,class:t.platformItemCls(n)},[e("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform(n)}}},[t._v(t._s(n.name))])])})),0)])},Dx=[],Nx={methods:{clickCalcPlatform:function(t){this.$emit("clickCalcPlatform",t)},platformItemCls:function(t){return Object(j["a"])(Object(j["a"])({},o["c"].getClassName(t.value),!0),"on",this.calcPlatformType2===t.value)}},data:function(){return{calcPlatformType2:0}},created:function(){this.calcPlatformType2=(this.options.find((function(t){return t.selected}))||{value:0}).value},props:{options:Array}},Ex=Nx,Px=(n("f856"),Object(hr["a"])(Ex,Lx,Dx,!1,null,"9b236aa2",null)),Rx=Px.exports,Vx={components:{Checkbox:Ol,SetPlatform:Rx},methods:{clickCalcPlatform:function(t){this.$emit("onPlatformSelectChanged",t),this.setting=!1},clickAllSelectBtn:function(t){t=!this.allSelected&&(this.exportNodeCount,!0);var e=this.curArtboard.exportNodes;e.forEach((function(e){e.markedForExport&&(e.mlUserSelectDown=t)}))}},computed:{selectAllText:function(){return"全选(".concat(this.selectNodeCount,"/").concat(this.exportNodeCount,")")},calcPlatformTypeCss:function(){var t=this.options.find((function(t){return t.selected}));return o["c"].getClassName(null===t||void 0===t?void 0:t.value)},calcPlatformTypeText:function(){if(!Object(l["h"])(this.options))return"UnKnown";var t=this.options.find((function(t){return t.selected}));return t?t.name:"UnKnown"},allSelected:function(){return 0!==this.exportNodeCount&&this.exportNodeCount===this.selectNodeCount},selectNodeCount:function(){var t=this.curArtboard.exportNodes,e=0;return t.forEach((function(t){t.markedForExport&&t.mlUserSelectDown&&(e+=1)})),e}},data:function(){return{setting:!1}},props:{exportNodeCount:Number,options:Array}},Bx=Vx,Ux=(n("ea18"),Object(hr["a"])(Bx,Mx,_x,!1,null,"b76f94e6",null)),Hx=Ux.exports,Wx=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("div",{staticClass:"prev",on:{click:t.clickSelect}},[e("Checkbox",{attrs:{text:"",selected:t.node.mlUserSelectDown}})],1),e("div",{staticClass:"preview",class:{on:t.node.mlUserSelectDown,white:t.exportBoxBackground===t.ExportBoxBackgroundType.White,black:t.exportBoxBackground===t.ExportBoxBackgroundType.Black},on:{click:t.clickSelect,contextmenu:function(e){e.preventDefault(),t.exportBgTabVisible=!0}}},[t.exportPdfOnly?e("PdfViewer",{attrs:{maxWidth:"95%",maxHeight:"95%",url:t.exportPreviewPng}}):e("img",{attrs:{src:t.exportPreviewPng}})],1),e("div",{staticClass:"info"},[e("NodeName",{attrs:{node:t.node}}),e("div",{staticClass:"size"},[t._v(t._s(t.size))])],1),t.exportBgTabVisible?e("ul",{staticClass:"export-bg"},[e("li",{class:{on:t.ExportBoxBackgroundType.Black===t.exportBoxBackground,black:1},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Black)}}},[t._v(" 深色预览背景 ")]),e("li",{class:{on:t.ExportBoxBackgroundType.Transparent===t.exportBoxBackground,transparent:1},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Transparent)}}},[t._v(" 浅色预览背景 ")])]):t._e()])},$x=[],Gx={components:{Checkbox:Ol,NodeName:jg,PdfViewer:Sw},methods:{clickSelect:function(){var t=this.node;t.mlUserSelectDown=!t.mlUserSelectDown},clickExportBoxBackgroundType:function(t){this.$store.commit("exportBoxBackgroundType",t)},hideSelect:function(){var t=this;requestAnimationFrame((function(){t.exportBgTabVisible=!1}))}},computed:{ExportBoxBackgroundType:function(){return o["F"]},exportPreviewPng:function(){var t,e,n=null!==(t=null===(e=this.node)||void 0===e?void 0:e.mlConfig)&&void 0!==t?t:{},r=n.pngPreview,i=n.svgPreview,a=n.pdfPreview,o=r||i;return this.inCloudMode?this.exportPdfOnly&&!o&&a?a:o:o+"?"+this.curArtboard.artboard.mlOutputTime},size:function(){var t=this.node,e=this.curArtboardLoadedVerData,n=null===e||void 0===e?void 0:e.mlConfig;if(n){var r=n.sizeMap;if(r)for(var i=t.exportPath.toLowerCase(),a=0;a<Ac.length;a++){var o=Ac[a],s=o.scale,l=o.ext,u=r[i+l];if(u){var d=Math.ceil(u.width/s),h=Math.ceil(u.height/s);return"".concat(d,"x").concat(h)}}}return"".concat(Math.ceil(Object(c["q"])(this.originWidth,2)),"x").concat(Math.ceil(Object(c["q"])(this.originHeight,2)))},originWidth:function(){return this.node.boundsInArtboard.width},originHeight:function(){return this.node.boundsInArtboard.height}},watch:{exportBgTabVisible:function(t){t?(window.addEventListener("click",this.hideSelect,!0),window.addEventListener("contextmenu",this.hideSelect,!0)):(window.removeEventListener("click",this.hideSelect,!0),window.removeEventListener("contextmenu",this.hideSelect,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.hideSelect,!0),window.removeEventListener("contextmenu",this.hideSelect,!0)},data:function(){return{exportBgTabVisible:!1}},props:{node:Object,exportPdfOnly:Boolean}},zx=Gx,Yx=(n("9e19"),Object(hr["a"])(zx,Wx,$x,!1,null,"5b7acda2",null)),Xx=Yx.exports;function Kx(t,e){if(Object(l["s"])(t)){var n=t.exportNodes;Object(l["h"])(n)&&(e=!!e,n.forEach((function(t){t.mlUserSelectDown=e})))}}var qx={components:{Header:Hx,ExportNodeItem:Xx,PropertyDownloadOptions:gw,Select:wl,LazyList:yd},methods:{setJpgQuality:function(t){t>0&&t<=100&&(this.jpgQuality=t,Object(c["nb"])(M,t))},onPlatformSelectChanged:function(t){Object(l["s"])(t)&&(this.downloadPlatform=t.value)},onResTypeSelectChanged:function(t){Object(l["s"])(t)&&this.clickCurrentResType(t.value)},clickCurrentResType:function(t){switch(t){case o["I"].PNG:if(!this.exportPng)return void this.showTextTip("设计狮没有为该画板导出[PNG]格式的切图");break;case o["I"].WEBP:if(!this.exportWebP)return void this.showTextTip("设计狮没有为该画板导出[WEBP]格式的切图");break;case o["I"].SVG:if(!this.exportSvg)return void this.showTextTip("设计狮没有为该画板导出[SVG]格式的切图");break;case o["I"].PDF:if(!this.exportPfd)return void this.showTextTip("设计狮没有为该画板导出[PDF]格式的切图");break;case o["I"].JPG:break}this.currentResType=t,Object(c["nb"])("resType",t)},clickDownSelectAll:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.exportNodeCount){e.next=3;break}return t.showTextTip("当前画板不存在切图"),e.abrupt("return");case 3:if(t.setInOutput(!0),e.prev=4,!t.currentResInPdf){e.next=10;break}return e.next=8,jc(t.selectNodes,t.curArtboard);case 8:e.next=22;break;case 10:if(!t.currentResInSvg){e.next=15;break}return e.next=13,_c(t.selectNodes,t.curArtboard);case 13:e.next=22;break;case 15:if(!t.currentResInJpg){e.next=20;break}return e.next=18,Yc(t.downloadPlatform,t.androidUseMipmap,t.$refs.downOptions.checkSetting,t.selectNodes,t.curArtboard,t.jpgQuality/100);case 18:e.next=22;break;case 20:return e.next=22,Xc(t.downloadPlatform,t.androidUseMipmap,t.$refs.downOptions.checkSetting,t.selectNodes,t.curArtboard,t.currentResInWebP);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](4),t.showTextTip(e.t0);case 27:return e.prev=27,t.setInOutput(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[4,24,27,30]])})))()},initJpgQuality:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["I"])(M,!1));(isNaN(e)||e<1||e>=100)&&(e=F),this.jpgQuality=e}},initCurrentResType:function(){var t=this.curArtboard;if(t){var e=parseInt(Object(c["I"])("resType",!1));(isNaN(e)||!isFinite(e)||e!==o["I"].SVG&&e!==o["I"].PDF&&e!==o["I"].WEBP&&e!==o["I"].JPG)&&(e=o["I"].PNG);var n=this.curArtboardLoadedVerData.mlConfig.resType;n||(n=o["I"].PNG);var r=this.exportPng,i=this.exportSvg,a=this.exportWebP,s=this.exportPdf;switch(e){case o["I"].PNG:r||(a?e=o["I"].WEBP:i?e=o["I"].SVG:s&&(e=o["I"].PDF));break;case o["I"].SVG:i||(r?e=o["I"].PNG:a?e=o["I"].WEBP:s&&(e=o["I"].PDF));break;case o["I"].PDF:s||(r?e=o["I"].PNG:a?e=o["I"].WEBP:i&&(e=o["I"].SVG));break;case o["I"].WEBP:a||(r?e=o["I"].PNG:i?e=o["I"].SVG:s&&(e=o["I"].PDF));break;case o["I"].JPG:r||i||a||s||(e=o["I"].PNG);break}this.currentResType=e}}},computed:{platformSelectOptions:function(){return[{name:"Web",value:o["c"].WEB,selected:this.downloadPlatform===o["c"].WEB},{name:"Android",value:o["c"].ANDROID,selected:this.downloadPlatform===o["c"].ANDROID},{name:"iOS",value:o["c"].IOS,selected:this.downloadPlatform===o["c"].IOS},{name:"微信小程序",value:o["c"].WE_CHAT_MINI_PROGRAM,selected:this.downloadPlatform===o["c"].WE_CHAT_MINI_PROGRAM}]},resTypeSelectOptions:function(){var t=this.currentResType,e={value:o["I"].PNG,name:"PNG",selected:t===o["I"].PNG,disabled:!this.exportPng},n={value:o["I"].WEBP,name:"WEBP",selected:t===o["I"].WEBP,disabled:!this.exportWebP},r={value:o["I"].SVG,name:"SVG",selected:t===o["I"].SVG,disabled:!this.exportSvg},i={value:o["I"].PDF,name:"PDF",selected:t===o["I"].PDF,disabled:!this.exportPdf},a={value:o["I"].JPG,name:"JPG",selected:t===o["I"].JPG,disabled:!1};return[e,n,r,i,a]},exportWebP:function(){return Object(c["X"])(this.curArtboardLoadedVerData)},exportPng:function(){return Object(c["V"])(this.curArtboardLoadedVerData)},exportSvg:function(){return Object(c["W"])(this.curArtboardLoadedVerData)},exportPdf:function(){return Object(c["U"])(this.curArtboardLoadedVerData)},exportSvgOnly:function(){return this.exportSvg&&!this.exportPng&&!this.exportWebP},exportPdfOnly:function(){return this.exportPdf&&!this.exportSvg&&!this.exportPng&&!this.exportWebP},currentResInPdf:function(){return this.currentResType===o["I"].PDF},currentResInSvg:function(){return this.currentResType===o["I"].SVG},currentResInJpg:function(){return this.currentResType===o["I"].JPG},currentResInWebP:function(){return this.currentResType===o["I"].WEBP},selectNodes:function(){var t=this.curArtboard.exportNodes,e=[];return t.forEach((function(t){t.markedForExport&&t.mlUserSelectDown&&e.push(t)})),e},exportNodeCount:function(){var t=this.curArtboard.exportNodes;return t.length}},watch:{currentResType:function(){var t,e;null===(t=this.$refs.lazyList)||void 0===t||null===(e=t.resetBoxData)||void 0===e||e.call(t)},inMultDownMode:function(t){t&&(this.downloadPlatform=this.calcPlatformUse,Kx(this.curArtboard,t),this.initCurrentResType(),this.initJpgQuality())},calcPlatformUse:function(t){this.downloadPlatform=t},curArtboard:function(t,e){Kx(e,!1),this.inMultDownMode&&Kx(t,!0),this.initCurrentResType(),this.initJpgQuality()}},data:function(){return{currentResType:o["I"].PNG,jpgQuality:F,CALC_PLATFORM_TYPE:o["c"],downloadPlatform:o["c"].WEB}},created:function(){this.downloadPlatform=this.calcPlatformUse,this.inMultDownMode&&Kx(this.curArtboard,!0),this.initCurrentResType(),this.initJpgQuality()}},Qx=qx,Jx=(n("290c"),Object(hr["a"])(Qx,jx,Fx,!1,null,"080ee148",null)),Zx=Jx.exports,ty={components:{Properties:$w,MultDownload:Zx,CommentMain:Tx},methods:{clickNavProperty:function(){if(this.clickNav(o["A"].Property),null==this.curNode){var t,e=null===(t=this.curArtboard)||void 0===t?void 0:t.artboard;e&&this.setCurNode(e)}},clickNavComment:function(){this.clickNav(o["A"].Comment)},clickNavSlice:function(){this.clickNav(o["A"].Slice)},clickNav:function(t){this.$store.commit("setRightNavType",t)}},computed:{multDownloadCount:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e||null===(e=e.exportNodes)||void 0===e?void 0:e.length)&&void 0!==t?t:0},commentCount:function(){var t,e=null===(t=this.curArtboard)||void 0===t?void 0:t.artboard;if(!e)return 0;var n=e.comments+e.replies;return isNaN(n)?0:n},commentVisible:function(){return this.artboardInComment&&this.$store.state.artboardCommentVisible},propertyVisible:function(){return null!=this.curNode&&this.$store.state.rightNavType===o["A"].Property},multDownloadVisible:function(){return this.inMultDownMode&&this.curArtboard},visible:function(){return this.commentVisible||this.propertyVisible||this.multDownloadVisible}}},ey=ty,ny=(n("6492"),Object(hr["a"])(ey,vv,gv,!1,null,"16a37526",null)),ry=ny.exports,iy={components:{ZoomContainer:Ao,LeftSide:bv,RightSide:ry},methods:{clickReload:function(){window.location.reload()},checkArtboardData:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,o,s,u,d,h,f,m,p,b;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return i=!0,Object(l["s"])(t)&&!1===t.isLoaded&&(i=!1),n.next=7,Se(t,e.documentArtboards);case 7:a=n.sent,!i&&a.isLoaded&&(o=a.artboard,Object(l["s"])(o)&&(s=o.mlConfig,Object(l["s"])(s)&&"number"===typeof s.platform&&(u=Object(c["E"])(o.docGuid,s.platform),e.$store.commit("setPlatform",u),d=Object(c["R"])(o.docGuid),e.$store.commit("setUnitTemplate",d)),h=c["S"].initNodeGuid,h?(c["S"].initNodeGuid=null,f=a.childs.find((function(t){return t.guid===h})),f&&e.curNode!==f&&e.setCurNode(f)):e.curNode&&(p=e.curNode.guid,b=null!==(m=a.childs.find((function(t){return p===(null===t||void 0===t?void 0:t.guid)})))&&void 0!==m?m:null,e.setCurNode(b))));case 9:case"end":return n.stop()}}),n)})))()}},watch:{pathDataUpdateTimeTimes:function(t){t&&this.checkArtboardData(this.curArtboard).catch((function(t){}))}},computed:{autoIntoInfo:function(){return this.$store.state.autoIntoInfo},verDataWillBeFirstLoad:function(){var t,e,n=this.autoIntoInfo,r=n.commentArtboardId,i=n.commentId,a=this.inCloudMode,o=this.curArtboard;if(!a)return!1;if(i<1||r<1)return!1;if(!o)return!1;var s=null!==(t=null===(e=o.artboard)||void 0===e?void 0:e.cid)&&void 0!==t?t:0;return r===s},pathDataUpdateTimeTimes:function(){var t=this.pathData,e=this.updateTimeTimes;return t?"".concat(t,"-").concat(e):null},backgroundColor:function(){return this.$store.state.artboardDetail.interactionSet.backgroundColor},EnumScaleType:function(){return o["B"]},isLoaded:function(){return this.curArtboard.isLoaded},isFetching:function(){return this.curArtboard.isFetching||this.verDataWillBeFirstLoad},isError:function(){return this.curArtboard.isError},updateTimeTimes:function(){var t,e;return null!==(t=null===(e=this.loadedArtboard)||void 0===e?void 0:e.updateTimeTimes)&&void 0!==t?t:0},pathData:function(){var t,e;return null!==(t=null===(e=this.loadedArtboard)||void 0===e?void 0:e.pathData)&&void 0!==t?t:""},loadedArtboard:function(){var t,e=this.curArtboard;if(!e)return null;var n=e.artboardVerData,r=e.artboard;return null!==(t=null!==n&&void 0!==n?n:r)&&void 0!==t?t:null}},created:function(){this.checkArtboardData(this.curArtboard)}},ay=iy,oy=(n("31d8"),Object(hr["a"])(ay,$b,Gb,!1,null,"7a5633e6",null)),sy=oy.exports,cy=function(){var t=this,e=t._self._c;return t.visible?e("section",{staticClass:"pop-box webp-tip"},[e("div",{staticClass:"box"},[e("h4",[t._v("浏览器性能提示")]),e("p",{domProps:{textContent:t._s("Safari浏览器可能会出现响应卡顿".concat(t.supportWebp?"":"及WebP资源无法加载",",建议使用Chrome、Firefox浏览器访问."))}}),e("div",{staticClass:"footer"},[e("div",[e("a",{staticClass:"checkbox",class:{on:t.remember},attrs:{href:"javascript:;"},on:{click:function(e){t.remember=!t.remember}}},[e("i",[t._v("浏览器关闭前不再提示")])])]),e("div",[e("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickConfirm()}}},[t._v("我知道了")])])])])]):t._e()},ly=[],uy="safari_webp_notip",dy={methods:{clickConfirm:function(){this.remember&&Object(c["pb"])(uy,"1"),this.visible=!1},checkWebPSupport:function(){var t=this;clearTimeout(this.handle),this.handle=setTimeout((function(){t._checkWebPSupport()}),100)},_checkWebPSupport:function(){var t=this;if(this.inCloudMode&&this.allArtboardLoadChecked){var e="1"===Object(c["P"])(uy,!1);e||cn((function(e){var n=t.supportWebp=e===ln.Support;dn&&!n?t.visible=!0:e===ln.Support&&Object(c["pb"])(uy,"1")}))}}},computed:{allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked}},watch:{allArtboardLoadChecked:function(){this.checkWebPSupport()},inCloudMode:function(){this.checkWebPSupport()}},data:function(){return{visible:!1,remember:!1,handle:0,supportWebp:!1}},beforeDestroy:function(){clearTimeout(this.handle)},created:function(){this.checkWebPSupport()}},hy=dy,fy=(n("bda1"),Object(hr["a"])(hy,cy,ly,!1,null,"ccf18164",null)),my=fy.exports,py={components:{BeginnerGuide:gr,EmptyData:Pb,ArtboardList:Wb,ArtboardInfo:sy,Header:Ob,Tip:sl,ArtboardListItemMenu:el,InOutputTip:rd,Authority:Mb,FolderNav:Qu,CloudNeedLoginTip:uc,SafariWebpTip:my,ImageViewer:Mo,NetDiskFileMain:ic,AutomaticSync:Or,ChangeArtboardsTip:Mr},computed:{emptyText:function(){return this.inCloudMode?0===this.cloudCurrentFolderId?"私有云下还没有文件夹,请在标记狮中添加":this.inNetDiskFileMode?"文件不存在,可能已经被移动或删除":"当前文件夹是空的":"未检测到数据,请尝试重新导出画板"},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyArtboardData:function(){return this.inNetDiskFileMode?null==this.curNetDiskFile:0===this.documentArtboards.length},isEmptyFolder:function(){return this.isEmptyArtboardData&&0===this.cloudSubFiles.length&&0===this.cloudSubFolders.length}},watch:{cloudCurrentFolderId:function(){fs.clear(150)},curArtboard:function(){var t=this;this.checkUserState().then((function(e){t.$store.commit("setMyState",e)})).catch((function(){}))}}},by=py,vy=(n("2f9e"),Object(hr["a"])(by,ir,ar,!1,null,"61b2979f",null)),gy=vy.exports,wy=!1;function xy(){var t=Object(c["I"])("evmu",!1);return Object(l["i"])(t)&&32===t.length||(t=Object(c["z"])(32,16),Object(c["nb"])("evmu",t)),t}function yy(){var t,e;if(!wy&&(wy=!0,Ze&&!Ze.inCloudMode)){var n=c["S"].config,r=n.guid,i=n.softVer,a=c["S"].fileType,o={ver:i,type:a,f:r.replace(/-/gi,""),u:xy(),ot:null!==(t=null===(e=Ze.documentArtboards.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.mlOutputTime)>0})))||void 0===e?void 0:e.artboard.mlOutputTime)&&void 0!==t?t:0};if(!(o.ot<1)){var s="evmu".concat(o.type).concat(o.f).concat(o.ot),l=+Object(c["P"])(s,!1);if(!isNaN(l)&&l>0){var u=Math.abs(Date.now()-l);if(u>=0&&u<36e5)return}Object(c["pb"])(s,Date.now().toString());var d=new URLSearchParams(o),h=new Image,f=function(){h.onload=h.onerror=null,h.removeAttribute("src")};h.onload=h.onerror=f,h.src="".concat("https://log.marklion.cn","/st/?").concat(d.toString())}}}function ky(){try{return yy()}catch(t){}}function Cy(t,e){return Sy.apply(this,arguments)}function Sy(){return Sy=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,s,l;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=+Object(c["hb"])("commentid","#"),s="1"===Object(c["hb"])("isreply","#"),e().then((function(){c["S"].inCloudMode?function(){try{var t=nr.state;if(Ze.cloud.renderMode==o["C"].File)return void(t.cloud.allFoldersBoxVisible=!1);t.cloud.allFoldersBoxVisible="1"===Object(c["P"])(o["e"],!1),wt(t.documentArtboards);var e=t.cloud.defaultArtboardGuid,r=null,a=null;if(e){if(r=Ze.documentArtboards.find((function(t){return t.artboard.guid===e})),r){var l=window.location.href,u=/\/viewer\/\d+\/[^\\/]+\/([^\\/]+)\//i.exec(l),d=u?decodeURIComponent(u[1]):null;a=r.childs.find((function(t){return t.guid===d})),a||(c["S"].initNodeGuid=d)}if(t.curArtboard!==r&&nr.commit("curArtboard",{artboard:r}),t.curNode!=a&&(nr.commit("curNode",a),nr.commit("setRightNavType",o["A"].Property)),i>0){var h,f,m=t.autoIntoInfo;m.commentArtboardId=null!==(h=null===(f=r)||void 0===f||null===(f=f.artboard)||void 0===f?void 0:f.cid)&&void 0!==h?h:0,m.commentId=i,m.isReply=s,nr.commit("setRightNavType",o["A"].Comment)}}n()}finally{nr.commit("allArtboardLoadChecked",!0)}}():function(){var t=function(){var t=window.location.hash,e=null,n=null;if(t){var r=/\/artboard\/([^\\/]+)/i.exec(t);if(r){var i=r[1];e=Ze.documentArtboards.find((function(t){return t.artboard.guid===i}))}if(e&&(r=/\/node\/([^\\/]+)/i.exec(t),r)){var a=r[1],o=e.childs;n=o.find((function(t){return t.guid===a}))}}nr.state.curArtboard!==e&&nr.commit("curArtboard",{artboard:e}),nr.state.curNode!==n&&nr.commit("curNode",n)};window.addEventListener("hashchange",t),t(),setTimeout((function(){nr.commit("allArtboardLoadChecked",!0),ky()}),100)}()})),l=new a["a"]({store:nr,render:function(t){return t(gy)}}),cn((function(t){nr.commit("isSupportWebp",t),l.$mount("#app")}));case 5:case"end":return t.stop()}}),t)}))),Sy.apply(this,arguments)}var Oy=function(){var t=this,e=t._self._c;return e("section",{class:{"header-off":!t.headerVisible},attrs:{id:"main"}},[!t.cloudNeedLogin||t.cloudIsLogin?e("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]):t._e(),t.cloudNeedLogin&&!t.cloudIsLogin?e("CloudNeedLoginTip"):t.allArtboardLoadChecked?[e("Header"),e("a",{staticClass:"btn-visible-pop",attrs:{href:"javascript:;",title:t.headerVisibleTitle},on:{click:t.clickHeaderVisible}}),e("main",{style:{backgroundColor:t.backgroundColor}},[t.cloudFolderNotFound?e("EmptyData",{attrs:{text:t.cloudFolderErrorText,showLoginBtn:t.cloudFolderInSpecify}}):t.permission?t.isEmptyArtboardData?e("EmptyData",{attrs:{text:t.emptyText}}):[e("LeftSide")]:e("Authority"),e("device-container")],2)]:t._e(),e("Tip"),e("AutomaticSync")],2)},Iy=[],Ay=function(){var t=this,e=t._self._c;return e("section",{staticClass:"left-side-pc",class:{on:t.leftSideVisible}},[e("div",{staticClass:"btn-leftside-visible",class:{on:t.leftSideVisible,off:!t.headerVisible},attrs:{title:t.leftSideVisible?"收起左侧(F3)":"展开左侧(F3)"},on:{click:function(e){return t.setVisible(!t.visible)}}}),e("div",{staticClass:"filter"},[e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.artboard,expression:"searchText.artboard"}],ref:"input",attrs:{type:"text",placeholder:"搜索画板名",spellcheck:"false"},domProps:{value:t.searchText.artboard},on:{input:function(e){e.target.composing||t.$set(t.searchText,"artboard",e.target.value)}}}),t.searchText.artboard?e("span",{staticClass:"btn-clear",on:{click:t.clickClearInpout}}):t._e()]),e("LeftSideFlows")],1),e("section",{staticClass:"box"},[e("ArtboardList",{attrs:{visible:!0,list:t.renderDocumentArtboards,renderArtboardList:t.renderArtboardList,sliceFilterOpen:t.sliceFilterOpen}})],1)])},Ty=[],jy=[],Fy={toggleFullscreen:function(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()},isFullscreen:function(){var t=!0===document.fullscreen||null!=document.fullscreenElement||null!=document.msFullscreenElement||null!=document.mozFullscreenElement||null!=document.webkitFullscreenElement;return t||(t=screen.height==Math.max(window.outerHeight,window.innerHeight)&&screen.width==Math.max(window.outerWidth,window.innerWidth),t)},requestFullscreen:function(){var t=document.documentElement,e=t.requestFullscreen||t.webkitRequestFullscreen||t.msRequestFullscreen||t.mozRequestFullscreen;try{e&&e.call(t).catch((function(){}))}catch(n){}},exitFullscreen:function(){var t=document.exitFullscreen||document.webkitExitFullscreen||document.msExitFullscreen||document.mozExitFullscreen;t&&t.call(document)},onChange:function(t){if("function"===typeof t){var e=jy.findIndex((function(e){return e===t}));-1===e&&jy.push(t)}},offChange:function(t){if("function"===typeof t){var e=jy.findIndex((function(e){return e===t}));-1!==e&&jy.splice(e,1)}}};function My(){if(0!=jy.length){var t=Fy.isFullscreen();jy.forEach((function(e){try{e(t)}catch(n){console.error(n)}}))}}document.addEventListener("webkitfullscreenchange",My),document.addEventListener("mozfullscreenchange",My),document.addEventListener("msfullscreenchange",My),document.addEventListener("fullscreenchange",My),window.addEventListener("resize",My);var _y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"leftside-flows"},[e("div",{staticClass:"btn-flows",attrs:{title:t.visible?"起始画板(Flows)":"当前没有配置起始画板"},on:{click:t.clickBtnFlows}}),t.visible?e("menu",t._l(t.homeList,(function(n){return e("div",{key:"".concat(n.artboard.cid?n.artboard.cid:n.artboard.guid),attrs:{title:"切换到起始画板[".concat(n.artboard.name,"]")},domProps:{textContent:t._s(n.artboard.name)},on:{click:function(e){return t.clickArtboard(n)}}})})),0):t._e()])},Ly=[],Dy={methods:{clickBtnFlows:function(){var t=this.homeList;0!==t.length||this.showTextTip("当前没有配置起始画板")},clickArtboard:function(t){t&&(this.setCurArtboard(t),this.showTextTip("已切换到起始画板"))}},computed:{visible:function(){return this.homeList.length>0},homeList:function(){var t=this.renderDocumentArtboards;return t.filter((function(t){var e;return null===(e=t.artboard)||void 0===e?void 0:e.flowStart}))}}},Ny=Dy,Ey=(n("b547"),Object(hr["a"])(Ny,_y,Ly,!1,null,"52c44f43",null)),Py=Ey.exports,Ry={components:{ArtboardList:hv,LeftSideFlows:Py},methods:{clickClearInpout:function(){var t=this,e=this.searchText;e.artboard="",requestAnimationFrame((function(){var e,n;null===(e=t.$refs.input)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e)}))},quickKeyShift:function(t){this.shiftKey=t.shiftKey},quickKey:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,o,s,c;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.quickKeyShift(t),i=t.keyCode||t.which,n.t0=i,n.next=112===n.t0||122===n.t0?5:113===n.t0?8:114===n.t0?11:38===n.t0||40===n.t0?14:48;break;case 5:return Fy.toggleFullscreen(),t.preventDefault(),n.abrupt("break",48);case 8:return e.$store.commit("setInteractionHeaderVisible",!e.headerVisible),t.preventDefault(),n.abrupt("break",48);case 11:return e.setVisible(!e.visible),t.preventDefault(),n.abrupt("break",48);case 14:if(!e.keydownConfirming){n.next=16;break}return n.abrupt("return");case 16:if(!e.imageViewer.visible){n.next=18;break}return n.abrupt("return");case 18:if(a=38===i?-1:1,o=t.ctrlKey||t.metaKey,o){n.next=22;break}return n.abrupt("break",48);case 22:if(s=e.renderArtboardList,0!==s.length){n.next=26;break}return e.showTextTip(1===a?"已经到达最后一个画板":"已经到达第一个画板"),n.abrupt("return");case 26:if(c=s.findIndex((function(t){return e.curArtboard===t})),-1===c?c=0:c+=a,!(c<0)){n.next=33;break}return e.showTextTip("已经到达第一个画板"),n.abrupt("return");case 33:if(!(c>=s.length)){n.next=36;break}return e.showTextTip("已经到达最后一个画板"),n.abrupt("return");case 36:if(!e.inCommentDrawing){n.next=46;break}return e.keydownConfirming=!0,n.prev=38,n.next=41,e.confirm({text:"正在编辑画板截图,是否清理截图信息并切换画板?"});case 41:if(n.sent){n.next=43;break}return n.abrupt("return");case 43:return n.prev=43,e.keydownConfirming=!1,n.finish(43);case 46:return e.setCurArtboard(s[c]),n.abrupt("break",48);case 48:case"end":return n.stop()}}),n,null,[[38,,43,46]])})))()},getArtboardExportNodeCount:function(t){if(this.inCloudMode)return t.artboard.resNodeCount;var e=t.exportNodes;return e.length},setVisible:function(t){if(!this.headerVisible)return this.$store.commit("setInteractionHeaderVisible",!0),void this.$store.commit("leftSideVisible",!0);this.$store.commit("leftSideVisible",t)}},computed:{leftSideVisible:function(){return this.visible&&this.headerVisible},headerVisible:function(){return this.$store.state.artboardDetail.interactionSet.headerVisible},imageViewer:function(){return this.$store.state.imageViewer},renderArtboardList:function(){var t=this,e=this.artboardSearchText,n=this.sliceFilterOpen,r=this.renderDocumentArtboards,i=""!==e,a=[];return r.forEach((function(r){if(r&&r.artboard&&(!n||0!==t.getArtboardExportNodeCount(r))){if(i){var o=r.artboard.name;if(!o)return;if(-1===o.toLowerCase().indexOf(e))return}a.push(r)}})),a},artboardSearchText:function(){return this.searchText.artboard.toLowerCase()},visible:function(){return this.$store.state.artboardDetail.leftSideVisible}},data:function(){return{keydownConfirming:!1,preloadCount:2,shiftKey:!1,sliceFilterOpen:!1,commentFilterOpen:!1,searchText:{artboard:""}}},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKeyShift)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKeyShift)}},Vy=Ry,By=(n("bf12"),Object(hr["a"])(Vy,Ay,Ty,!1,null,"4ea8fcf7",null)),Uy=By.exports,Hy=function(){var t=this,e=t._self._c;return e("header",[e("div",{staticClass:"nav"},[e("PathNav")],1),e("device-set"),e("div",{staticClass:"preview-set"},[e("a",{staticClass:"btn-fullscreen",class:{on:t.isFullscreen},attrs:{href:"javascript:;",title:t.isFullscreen?"退出全屏(F1)":"全屏查看(F1)"},on:{click:t.clickFullscreen}}),e("BtnContainerColor"),e("BtnContainerVerticalAlign"),e("div",{staticClass:"line"}),e("div",{staticClass:"helper",class:{on:t.helperVisible},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickHelper(!t.helperVisible)}}},[e("Helper")],1),t.inCloudMode?e("BtnGoInteraction",{attrs:{fixRight:!t.cloudIsLogin}}):t._e(),t.inCloudMode&&t.cloudIsLogin?e("UserNotifyButton"):t._e(),t.inCloudMode?e("UserInfo",{attrs:{setVisible:t.setVisible}}):t._e()],1),t.inCloudMode?e("UserNotify"):t._e()],1)},Wy=[],$y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-item"},[e("div",{staticClass:"name",attrs:{title:t.folderName},on:{click:t.clickNav}},[t._v(t._s(t.folderName))]),t.showArtboardPages?e("PathNavArtboardPages"):t._e()],1)},Gy=[],zy={components:{PathNavArtboardPages:Dp},methods:{clickNav:function(){Object(c["T"])(this.cloudCurrentFolderId)}},computed:{folderName:function(){var t=this.cloudName,e=this.cloudCurrentFolderId,n=this.cloudFolderNotFound,r=this.documentName,i=this.cloudFolderInSpecify;return 0===e?t||"私有云根目录":i?"没有访问权限":n?"链接已失效":r},showArtboardPages:function(){return this.documents.length>0}}},Yy=zy,Xy=(n("2d5e"),Object(hr["a"])(Yy,$y,Gy,!1,null,"8bade1e6",null)),Ky=Xy.exports,qy=function(){var t=this,e=t._self._c;return e("div",{staticClass:"btn-container-vertical-align",class:Object(j["a"])(Object(j["a"])({},t.verticalAlignCss,1),"off",t.isWeb),attrs:{title:"在移动设备模拟中，当画板无法垂直完全覆盖屏幕时，画板的垂直对齐方式"},on:{click:t.clickVerticalAlign}})},Qy=[],Jy={methods:{clickVerticalAlign:function(){var t,e=this.verticalAlign,n=this.isWeb;if(n)this.showTextTip("Web模式下,无法调整画板的垂直对齐方式");else{var r=Object(j["a"])(Object(j["a"])(Object(j["a"])({},o["u"].Top,o["u"].Middle),o["u"].Middle,o["u"].Bottom),o["u"].Bottom,o["u"].Top),i=null!==(t=r[e])&&void 0!==t?t:o["u"].Middle;this.$store.commit("setInteractionArtboardVerticalAlign",i),this.showTextTip("已修改画板的对齐方式为[".concat(o["u"].getName(i),"]"))}}},computed:{isWeb:function(){return this.pcDeviceSet.type===bn.Web},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet},verticalAlignCss:function(){switch(this.verticalAlign){case o["u"].Bottom:return"align-bottom";case o["u"].Top:return"align-top";default:return"align-middle"}},verticalAlign:function(){return this.$store.state.artboardDetail.interactionSet.verticalAlign}}},Zy=Jy,tk=(n("490e"),Object(hr["a"])(Zy,qy,Qy,!1,null,"16d366d8",null)),ek=tk.exports,nk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"device-set"},[e("div",{staticClass:"device-name"},[e("div",{staticClass:"cur-text",class:{on:t.boxVisible},on:{click:function(e){t.boxVisible=!t.boxVisible}}},[t._v(t._s(t.pcDeviceSet.name))]),t.boxVisible?e("div",{staticClass:"device-list"},t._l(t.interactionDeviceList,(function(n,r){return e("div",{key:r,staticClass:"device-item",class:{web:n.type===t.InteractionDeviceType.Web}},[e("div",{staticClass:"text",class:{on:t.pcDeviceSet.name===n.name},on:{click:function(e){return t.clickDevice(n)}}},[t._v(t._s(n.name))]),n.type===t.InteractionDeviceType.Group?e("div",{staticClass:"device-sublist"},t._l(n.list,(function(n,i){return e("div",{key:"".concat(r,"-").concat(i),staticClass:"device-subitem"},[e("div",{staticClass:"subtext",class:{on:t.pcDeviceSet.name===n.name},on:{click:function(e){return t.clickDevice(n)}}},[t._v(t._s(n.name)+" ("+t._s(n.width)+" × "+t._s(n.height)+")")])])})),0):t._e()])})),0):t._e()]),e("div",{staticClass:"device-size",class:{off:!t.showDeviceSize}},[e("input",{attrs:{type:"number",readonly:!t.canChangeDeviceSize},domProps:{value:t.pcDeviceSet.width},on:{blur:function(e){return t.blurDeviceSize(e,"width")}}}),e("div",{staticClass:"split"},[t._v("x")]),e("input",{attrs:{type:"number",readonly:!t.canChangeDeviceSize},domProps:{value:t.pcDeviceSet.height},on:{blur:function(e){return t.blurDeviceSize(e,"height")}}})]),e("a",{staticClass:"btn-use-horizontal",class:{off:!t.showUseHorizontal},attrs:{href:"javascript:;",title:"切换横竖屏"},on:{click:t.clickHorizontal}})])},rk=[],ik={methods:{blurDeviceSize:function(t,e){if(this.canChangeDeviceSize){var n=this.pcDeviceSet,r=+t.target.value;isNaN(r)?t.target.value=n[e]:(r<100&&(r=100,t.target.value=r),n[e]=r)}},clickHorizontal:function(){var t=this.pcDeviceSet,e=t.height,n=t.width;this.setPCDeviceSet({isHorizontal:!this.isHorizontal,width:e,height:n})},clickDevice:function(t){if(Object(l["s"])(t))switch(t.type){case bn.Group:return void(this.notCloseThisTime=!0);case bn.Web:case bn.Mobile:return void this.setPCDeviceSet(t);case bn.Custom:var e=this.pcDeviceSet,n={width:0===e.width?375:Math.max(e.width,100),height:0===e.height?667:Math.max(e.height,100)};return n.type=bn.Custom,n.name=t.name,n.hasBangs=!1,n.iosDynamicIsland=!1,void this.setPCDeviceSet(n)}},setPCDeviceSet:function(t){this.$store.commit("setPCDeviceSet",t)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.boxHandle),this.boxHandle=setTimeout((function(){e.notCloseThisTime?e.notCloseThisTime=!1:e.boxVisible=!1}),100))}},watch:{boxVisible:function(t){t?(clearTimeout(this.boxHandle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},computed:{isHorizontal:function(){return this.pcDeviceSet.isHorizontal},canChangeDeviceSize:function(){switch(this.pcDeviceSet.type){case bn.Custom:return!0}return!1},showDeviceSize:function(){switch(this.pcDeviceSet.type){case bn.Custom:return!0}return!1},showUseHorizontal:function(){switch(this.pcDeviceSet.type){case bn.Mobile:case bn.Custom:return!0}return!1},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet}},data:function(){return{interactionDeviceList:gn,InteractionDeviceType:bn,boxVisible:!1,boxHandle:0,notCloseThisTime:!1}},created:function(){0},beforeDestroy:function(){window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)}},ak=ik,ok=(n("5026"),Object(hr["a"])(ak,nk,rk,!1,null,"4fd5aadd",null)),sk=ok.exports,ck={components:{PathNav:Ky,BtnContainerColor:dd,BtnContainerVerticalAlign:ek,DeviceSet:sk,UserNotifyButton:cb,UserNotify:yb,UserInfo:nb,Helper:Rm,BtnGoInteraction:Qh},methods:{clickHelper:function(t){this.$store.commit("setHelperVisible",t)},clickFullscreen:function(){Fy.toggleFullscreen()},onFullscreen:function(t){this.isFullscreen=t}},computed:{helperVisible:function(){return this.$store.state.helper.visible},setVisible:function(){return!this.cloudFolderNotFound&&this.permission&&this.documentArtboards.length>0}},data:function(){return{isFullscreen:Fy.isFullscreen()}},beforeDestroy:function(){Fy.offChange(this.onFullscreen)},created:function(){Fy.onChange(this.onFullscreen)}},lk=ck,uk=(n("1597"),Object(hr["a"])(lk,Hy,Wy,!1,null,"3e8e4bdc",null)),dk=uk.exports,hk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"device-container",class:{"margin-left":t.leftSideVisible,pc:t.isWeb,mobile:!t.isWeb}},[e("div",{staticClass:"device-ui"},[t.isWeb?t._e():e("div",{staticClass:"device-border"},[t.pcDeviceSet.hasBangs?e("div",{staticClass:"device-bangs",class:{horizontal:t.isHorizontal}}):t.pcDeviceSet.iosDynamicIsland?e("div",{staticClass:"device-ios-dynamic-island",class:{horizontal:t.isHorizontal}}):t._e(),e("div",{staticClass:"device-top-left"}),e("div",{staticClass:"device-top-center"}),e("div",{staticClass:"device-top-right"}),e("div",{staticClass:"device-middle-left"}),e("div",{staticClass:"device-middle-right"}),e("div",{staticClass:"device-bottom-left"}),e("div",{staticClass:"device-bottom-center"}),e("div",{staticClass:"device-bottom-right"})]),e("device-box")],1)])},fk=[],mk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"device-box",style:t.boxStyle,on:{click:t.clickDeviceBox}},t._l(t.renderList,(function(t){return e("InteractionArtboardItem",{key:t.key,attrs:{artboard:t.artboard,overlayArtboards:t.overlayArtboards,renderTapInteraction:t.renderTapInteraction,overlayVisible:t.overlayVisible}})})),1)},pk=[],bk=function(){var t=this,e=t._self._c;return e("div",{ref:"container",staticClass:"interaction-artboard-item",class:t.itemCls,style:t.itemStyle,attrs:{"data-unset-control":t.rootSize?"1":""},on:{dragstart:function(t){t.preventDefault()},"!touchstart":function(e){return t.onTouchStart.apply(null,arguments)},"!mousedown":function(e){return t.onMouseDown.apply(null,arguments)},click:function(e){return e.target!==e.currentTarget?null:t.clickArtboardItemSelf.apply(null,arguments)}}},[t.itemOverlayStyle?e("div",{staticClass:"artboard-overlay-background",style:t.itemOverlayStyle}):t._e(),e("div",{ref:"artboardScrollBox",staticClass:"artboard-content-scroll",class:Object(j["a"])({"non-width-scroll":!(t.isWeb&&t.isTopArtboard),top:t.isTopArtboard},t.verticalAlignCss,1),style:t.artboardContentScrollStyle,attrs:{"data-unset-control":t.rootSize?"1":""},on:{scroll:t.onScroll,click:function(e){return e.target!==e.currentTarget?null:t.clickArtboardItemSelf.apply(null,arguments)}}},[e("div",{staticClass:"artboard-content",class:{pc:t.isWeb,"interaction-node-show":t.isMouseDown&&!t.isMouseDownInInteractionNode||t.interactionRectAlwaysVisible},style:t.contentStyle,on:{dragstart:function(t){t.preventDefault()}}},[e("img",{staticClass:"preview",style:t.imgStyle,attrs:{src:t.imgSrc},on:{load:t.onImgLoad,error:t.onImgError}}),e("InteractionNodePoints",{attrs:{artboard:t.artboard,overlayScale:t.overlayScale}}),t.imgLoading?e("div",{staticClass:"img-loading",style:{backgroundColor:t.backgroundColor}},[e("div",{staticClass:"loading"},[t._v("正在加载画板预览图...")])]):t._e()],1)]),t.renderOverlayArtboardDatas.length>0?t._l(t.renderOverlayArtboardDatas,(function(n,r){return e("interaction-artboard-item",{key:n.key,attrs:{artboard:n.overlayArtboard.artboard.artboard,renderTapInteraction:n.overlayArtboard.renderTapInteraction,overlayArtboards:null,rootSize:t.artboard.boundsInParentForList,overlayOffset:n.overlayArtboardOffset,overlayVisible:n.overlayArtboard.visible,lastOverlay:t.renderOverlayArtboardDatas.length-1===r}})})):t._e()],2)},vk=[],gk=function(){var t=this,e=t._self._c;return t.visible?e("div",{staticClass:"interaction-node-points"},t._l(t.renderInteractions,(function(n,r){return e("InteractionNodePointItem",{key:r,attrs:{item:n,index:r,itemScale:t.itemScale}})})),1):t._e()},wk=[],xk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"interaction-node-pointitem",class:{on:t.hoverGuid===t.item.guid,pc:!t.inMobile},style:t.style,attrs:{"data-unset-control":"1","data-interaction-node":"1"},on:{mouseenter:function(e){return t.mouseEnterItem(!0)},mouseleave:function(e){return t.mouseEnterItem(!1)},click:t.clickGoArtboard}})},yk=[],kk={methods:{mouseEnterItem:function(t){var e;l["e"]||(this.interactionSet.hoverGuid=t?null===(e=this.item)||void 0===e?void 0:e.guid:null)},clickGoArtboard:function(){this.$store.commit("setInteractionArtboard",this.item.renderTapInteraction)}},computed:{interactionRectAlwaysVisible:function(){return this.$store.state.artboardDetail.interactionSet.rectAlwaysVisible},style:function(){var t=this.rect;return"top:".concat(t.top,"px;left:").concat(t.left,"px;width:").concat(t.width,"px;height:").concat(t.height,"px;")},hoverGuid:function(){return this.interactionSet.hoverGuid},artboardDetail:function(){return this.$store.state.artboardDetail},interactionSet:function(){return this.artboardDetail.interactionSet},boundsInArtboard:function(){var t,e;return null!==(t=null===(e=this.item)||void 0===e?void 0:e.boundsInArtboard)&&void 0!==t?t:new d["a"]},rect:function(){var t=this.boundsInArtboard,e=this.itemScale,n=t.width,r=t.height,i=t.x,a=t.y;return n*=e,r*=e,i*=e,a*=e,{width:n,height:r,left:i,top:a}}},props:{item:Object,index:Number,itemScale:Number}},Ck=kk,Sk=(n("0227"),Object(hr["a"])(Ck,xk,yk,!1,null,"33a6a087",null)),Ok=Sk.exports,Ik={components:{InteractionNodePointItem:Ok},methods:{},computed:{visible:function(){var t=this.currentInteractionData;if(t.fetchState!=c["a"].Success)return!1;var e=this.renderInteractions;return 0!=e.length},isWeb:function(){return!l["e"]&&this.pcDeviceSet.type===bn.Web},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet},mobileSize:function(){return this.$store.state.mobileInteraction.mobileSize},renderSize:function(){var t,e,n=this.mobileSize,r=this.pcDeviceSet;return this.inMobile?(t=n.width,e=n.height):(t=r.width,e=r.height),{width:t,height:e}},itemScale:function(){if(this.isWeb)return 1;var t=this.renderSize.width/this.rect.width;return isNaN(t)&&(t=1),t*this.overlayScale},currentInteractionData:function(){return this.artboard.interactionInfo},renderInteractions:function(){var t,e,n=this.currentInteractionData;return n.fetchState===c["a"].Success&&null!==(t=null===(e=n.data)||void 0===e?void 0:e.renderInteractions)&&void 0!==t?t:[]},rect:function(){var t,e=this.artboard,n=null!==(t=null===e||void 0===e?void 0:e.boundsInParentForList)&&void 0!==t?t:new d["a"];return(new d["a"]).set(0,0,n.width,n.height)}},props:{artboard:Object,overlayScale:Number},created:function(){}},Ak=Ik,Tk=(n("44a7"),Object(hr["a"])(Ak,gk,wk,!1,null,"6a3b9a21",null)),jk=Tk.exports,Fk={},Mk={name:"interaction-artboard-item",components:{InteractionNodePoints:jk},methods:{checkIsMouseDownInInteractionNode:function(t){var e=t.target;if(!e)return!1;if("1"===e.getAttribute("data-interaction-node"))return!0;var n=e;while(n){if(n.classList.contains("interaction-artboard-item"))break;n=n.parentNode}return!!n&&n!==this.$refs.container},onTouchStart:function(t){this.isMouseDown=!0,this.isMouseDownInInteractionNode=this.checkIsMouseDownInInteractionNode(t),window.addEventListener("touchend",this.onTouchEnd,!0)},onTouchEnd:function(){window.removeEventListener("touchend",this.onTouchEnd,!0),this.isMouseDown=!1},onMouseDown:function(t){l["e"]||(this.isMouseDown=!0,this.isMouseDownInInteractionNode=this.checkIsMouseDownInInteractionNode(t),window.addEventListener("mouseup",this.onMouseUp,!0))},onMouseUp:function(){window.removeEventListener("mouseup",this.onMouseUp,!0),l["e"]||(this.isMouseDown=!1)},clickArtboardItemSelf:function(){var t,e=this.rootSize,n=this.renderTapInteraction;if(e){var r=null!==(t=null===n||void 0===n?void 0:n.overlayBackgroundInteraction)&&void 0!==t?t:void 0;"NONE"!==r&&this.$store.commit("setInteractionArtboard",{type:ht.goBack})}},onImgLoad:function(){this.imgState=c["a"].Success,Fk[this.imgSrc]=1},onImgError:function(){this.imgState=c["a"].Error},onScroll:function(t){if(this.isTopArtboard){var e=this.scrollYCache;e[this.artboard.cid]=t.target.scrollTop}},resetScroll:function(){var t;if(this.isTopArtboard){var e=this.$refs.artboardScrollBox;if(e){var n=null!==(t=this.scrollYCache[this.artboard.cid])&&void 0!==t?t:0;e.scrollTop=n}}}},watch:{imgSrc:function(t){t&&(Fk[t]||(this.imgState=c["a"].Fetching))},curArtboard:function(){this.resetScroll()}},computed:{verticalAlignCss:function(){switch(this.verticalAlign){case o["u"].Bottom:return"align-bottom";case o["u"].Top:return"align-top";default:return"align-middle"}},verticalAlign:function(){return this.$store.state.artboardDetail.interactionSet.verticalAlign},interactionRectAlwaysVisible:function(){return this.interactionSet.rectAlwaysVisible},overlayArtboardOffset:function(){var t=new P,e=this.overlayArtboards;if(!e)return t;var n=e.length;if(n<=1)return t;for(var r=0;r<n-1;r++){var i=e[r].renderTapInteraction;if(i){var a=i.overlayTopLeft;a&&(t.x+=a.x,t.y+=a.y)}}return t},previousOverlayArtboardOffset:function(){var t=new P,e=this.overlayArtboards;if(!e)return t;var n=e.length;if(n<1)return t;for(var r=0;r<n-2;r++){var i=e[r].renderTapInteraction;if(i){var a=i.overlayTopLeft;a&&(t.x+=a.x,t.y+=a.y)}}return t},renderOverlayArtboardDatas:function(){var t=[],e=this.overlayArtboard,n=this.previousOverlayArtboard,r=this.previousOverlayArtboardOffset,i=this.overlayArtboardOffset,a=this.artboard.guid;return n&&t.push({overlayArtboard:n,overlayArtboardOffset:r,key:"".concat(a,"-").concat(n.artboard.artboard.guid)}),e&&t.push({overlayArtboard:e,overlayArtboardOffset:i,key:"".concat(a,"-").concat(e.artboard.artboard.guid)}),t},previousOverlayArtboard:function(){var t=this.overlayArtboards;if(!t)return null;var e=t.length;return e<1?null:t[e-2]},overlayArtboard:function(){var t=this.overlayArtboards;if(!t)return null;var e=t.length;return 0===e?null:t[e-1]},isTopArtboard:function(){var t=this.rootSize;return!t},itemOverlayStyle:function(){var t,e=null===(t=this.renderTapInteraction)||void 0===t?void 0:t.overlayBackground;if(!e)return null;var n=this.animationStyle;return{"background-color":e,"animation-duration":n?n["animation-duration"]:void 0}},artboardContentScrollStyle:function(){var t=this.isTopArtboard,e=this.animationStyle;return t?null:e},animationStyle:function(){var t=this.renderTapInteraction;if(!t)return null;var e=t.transition;if(!e)return null;var n={},r=e.customEasing?e.easing:dt[e.easing];return r||(r=dt.linear),n["animation-timing-function"]=r,n["animation-duration"]=(e.duration||.3).toFixed(3)+"s",n},itemStyle:function(){var t=this.imgStyle,e=this.isWeb,n=this.backgroundColor,r=this.isTopArtboard,i=this.animationStyle,a={};return r&&(a["background-color"]=e?n:"#000"),e&&r&&(a=Object.assign(a,t,{position:"relative",top:"auto",left:"auto","max-height":"100%","max-width":"100%"})),i?(Object.assign(a,i),this.overlayVisible||(a["pointer-events"]="none"),a):a},itemCls:function(){var t=this.renderTapInteraction,e=this.isTopArtboard,n=[];if(this.inMobile&&n.push("in-mobile"),this.imgLoading&&n.push("inloading"),!t)return n;var r=t.transition;if(!r)return n;!e&&null!==t&&void 0!==t&&t.overlayBackground?n.push("in-overlay"):n.push("in-top");var i=this.overlayVisible?"":"-reverse";switch(r.type){case"dissolve":case"autoAnimate":n.push("animation-opacity".concat(i));break;case"push":case"slide":case"move":var a=ut[r.fromSide];a||(a=ut.L),n.push("animation-slide-".concat(a).concat(i));break;case"push-background":case"slide-background":case"move-background":case"move_out":case"move_out-background":case"slide_out":case"slide_out-background":var o=ut[r.fromSide];o||(o=ut.L),n.push("animation-".concat(r.type,"-").concat(o).concat(i)),n.push(r.type);break}return n},isWeb:function(){return!this.inMobile&&this.pcDeviceSet.type===bn.Web},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},backgroundColor:function(){return this.interactionSet.backgroundColor},mobileSize:function(){return this.$store.state.mobileInteraction.mobileSize},renderSize:function(){var t,e,n=this.mobileSize,r=this.pcDeviceSet;return this.inMobile?(t=n.width,e=n.height):(t=r.width,e=r.height),{width:t,height:e}},pcDeviceSet:function(){return this.interactionSet.pcDeviceSet},overlayScale:function(){if(this.isWeb)return 1;var t=this.rootSize;return t?this.artboard.boundsInParentForList.width/t.width:1},rootScale:function(){if(this.isWeb)return 1;var t=this.rootSize,e=this.artboard,n=this.renderSize,r=t?t.width:e.boundsInParentForList.width;return n.width/r},contentStyle:function(){var t=this.isTopArtboard;if(t)return o;var e=this.animationStyle,n=this.renderTapInteraction,r=this.isWeb,i=this.rootScale,a=this.overlayOffset,o=this.imgStyle;n||(n={});var c=n,l=c.overlayPositionType,u=c.overlayTopLeft,d=0,h=0;if(null!=l){var f={top:0,left:0,bottom:"auto",right:"auto"},m=o.width,p=o.height;switch(l){case pt.CENTER:case pt.MANUAL:f.top="calc(50% - ".concat(p," / 2)");break;case pt.TOP_LEFT:case pt.TOP_CENTER:case pt.TOP_RIGHT:f.top="0px";break;case pt.BOTTOM_LEFT:case pt.BOTTOM_CENTER:case pt.BOTTOM_RIGHT:f.top="auto",f.bottom="0px";break}switch(l){case pt.CENTER:case pt.TOP_CENTER:case pt.BOTTOM_CENTER:case pt.MANUAL:f.left="calc(50% - ".concat(m," / 2)");break;case pt.TOP_LEFT:case pt.BOTTOM_LEFT:f.left="0px";break;case pt.TOP_RIGHT:case pt.BOTTOM_RIGHT:f.left="auto",f.right="0px";break}return Object(s["a"])(Object(s["a"])(Object(s["a"])({},f),o),e)}return u&&(d=u.x,h=u.y),a&&(d+=a.x,h+=a.y),r||(d*=i,h*=i),Object(s["a"])(Object(s["a"])({top:h+"px",left:d+"px"},o),e)},imgStyle:function(){var t=this.artboard.boundsInParentForList;if(this.isWeb)return{width:t.width+"px",height:t.height+"px"};var e=this.renderSize.width;return e=Math.round(this.overlayScale*e),{width:e+"px",height:Math.round(e/t.width*t.height)+"px"}},imgLoading:function(){return this.imgState===c["a"].Fetching},imgSrc:function(){var t,e=this.artboard,n=this.isSupportWebp;return n&&(t=e.artboardPreviewWebp,t)?t:e.artboardPreviewPng},isSupportWebp:function(){return this.$store.state.isSupportWebp===ln.Support},scrollYCache:function(){return this.$store.state.mobileInteraction.scrollYCache}},data:function(){return{imgState:c["a"].Normal,isMouseDown:!1,isMouseDownInInteractionNode:!1}},props:{artboard:Object,overlayArtboards:{type:Array,default:null},lastOverlay:{type:Boolean,default:!1},rootSize:{type:Object,default:null},renderTapInteraction:{type:Object,default:null},overlayOffset:{type:Object,default:null},overlayVisible:{type:Boolean,default:!0}},mounted:function(){this.resetScroll()},beforeDestroy:function(){window.removeEventListener("touchend",this.onTouchEnd,!0),window.removeEventListener("mouseup",this.onMouseUp,!0)}},_k=Mk,Lk=(n("df29"),Object(hr["a"])(_k,bk,vk,!1,null,"fa8784d0",null)),Dk=Lk.exports,Nk={components:{InteractionArtboardItem:Dk},methods:{clickDeviceBox:function(){this.currentArtboardHasRenderInteraction||this.showTextTip("当前画板没有或未提交交互原型热区",1)}},computed:{renderList:function(){var t=[],e=this.itemCurrent,n=this.gobackArtboard,r=this.gotoArtboard,i={};if(e&&(t.push(e),i[e.key]=1),n){var a,o=n.fromArtboard.artboard,s=null!==(a=o.cid)&&void 0!==a?a:o.guid;i[s]&&(s+="_1"),i[s]=1,t.push({key:s,artboard:o,renderTapInteraction:n.renderTapInteraction,overlayArtboards:null,overlayVisible:!1})}if(r){var c,l=r.fromArtboard.artboard,u=null!==(c=l.cid)&&void 0!==c?c:l.guid;i[u]&&(u+="_2"),i[u]=1,t.push({key:u,artboard:l,renderTapInteraction:r.renderTapInteraction,overlayArtboards:null,overlayVisible:!0})}return t},currentOverlayVisible:function(){return!this.gobackArtboard},currentArtboardHasRenderInteraction:function(){return null!=this.currentArtboardRenderInteractions},currentArtboardRenderInteractions:function(){var t,e,n=null===(t=this.curArtboard)||void 0===t||null===(t=t.artboard)||void 0===t?void 0:t.interactionInfo;if(!n)return null;if(n.fetchState!==c["a"].Success)return null;var r=null===(e=n.data)||void 0===e?void 0:e.renderInteractions;return Object(l["h"])(r)&&r.length>0?r:null},currentRenderTapInteraction:function(){var t,e=this.gobackArtboard,n=this.gotoArtboard,r=null===(t=null!==e&&void 0!==e?e:n)||void 0===t?void 0:t.renderTapInteraction;if(r){var i=r,a=i.transition,o=i.trigger_type,c=i.type,u=i.preserveScrollPosition,d=i.toArtboard;if(!Object(l["s"])(a))return null;switch(a=Object(s["a"])({},a),a.type){case"dissolve":case"autoAnimate":return null;case"push":case"slide":case"slide_out":case"move":case"move_out":a.type="".concat(a.type,"-background");break}r={transition:a,trigger_type:o,type:c,preserveScrollPosition:u,toArtboard:d}}return r},itemCurrent:function(){var t,e,n=null===(t=this.curArtboard)||void 0===t?void 0:t.artboard;return n?{artboard:n,renderTapInteraction:this.currentRenderTapInteraction,overlayArtboards:this.interactionSet.overlayArtboards,overlayVisible:this.currentOverlayVisible,key:null!==(e=n.cid)&&void 0!==e?e:n.guid}:null},gobackArtboard:function(){return this.interactionSet.gobackArtboard},gotoArtboard:function(){return this.interactionSet.gotoArtboard},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},boxStyle:function(){return this.isWeb?{width:"100%",height:"100%"}:{width:this.pcDeviceSet.width+"px",height:this.pcDeviceSet.height+"px"}},isWeb:function(){return this.pcDeviceSet.type===bn.Web},pcDeviceSet:function(){return this.interactionSet.pcDeviceSet},headerVisible:function(){return this.interactionSet.headerVisible},leftSideVisible:function(){return this.$store.state.artboardDetail.leftSideVisible&&this.headerVisible}}},Ek=Nk,Pk=(n("ffca"),Object(hr["a"])(Ek,mk,pk,!1,null,"5970a26f",null)),Rk=Pk.exports,Vk={components:{DeviceBox:Rk},computed:{isWeb:function(){return this.pcDeviceSet.type===bn.Web},pcDeviceSet:function(){return this.$store.state.artboardDetail.interactionSet.pcDeviceSet},isHorizontal:function(){return this.pcDeviceSet.isHorizontal},headerVisible:function(){return this.$store.state.artboardDetail.interactionSet.headerVisible},leftSideVisible:function(){return this.$store.state.artboardDetail.leftSideVisible&&this.headerVisible}}},Bk=Vk,Uk=(n("2afb"),Object(hr["a"])(Bk,hk,fk,!1,null,"54a50b64",null)),Hk=Uk.exports,Wk={components:{CloudNeedLoginTip:uc,Header:dk,EmptyData:Pb,Authority:Mb,Tip:sl,LeftSide:Uy,DeviceContainer:Hk,AutomaticSync:Or},methods:{clickHeaderVisible:function(){this.$store.commit("setInteractionHeaderVisible",!this.headerVisible)}},computed:{emptyText:function(){return this.inCloudMode?this.inNetDiskFileMode?"文件不存在,可能已经被移动或删除":"当前文件夹不存在画板":"未检测到数据,请尝试重新导出画板"},backgroundColor:function(){return this.interactionSet.backgroundColor},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},headerVisibleTitle:function(){return this.headerVisible?"隐藏顶部(F2)":"显示顶部(F2)"},headerVisible:function(){return this.interactionSet.headerVisible},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyArtboardData:function(){return 0===this.documentArtboards.length}},created:function(){0}},$k=Wk,Gk=(n("fa2f"),Object(hr["a"])($k,Oy,Iy,!1,null,"6ffc441e",null)),zk=Gk.exports,Yk=function(){var t=this,e=t._self._c;return e("section",{attrs:{id:"main"}},[!t.cloudNeedLogin||t.cloudIsLogin?e("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]):t._e(),t.cloudNeedLogin&&!t.cloudIsLogin?e("CloudNeedLoginTip"):t.allArtboardLoadChecked?[t.cloudFolderNotFound||!t.permission?[e("Header"),e("Nav"),e("main",[t.cloudFolderNotFound?e("EmptyData",{attrs:{text:t.cloudFolderErrorText,showLoginBtn:t.cloudFolderInSpecify}}):t.permission?t._e():e("Authority",{attrs:{include:!0}})],1)]:[t.inList?e("ArtboardList"):e("ArtboardInfo")]]:t._e(),e("TipInMobile"),e("AutomaticSync")],2)},Xk=[],Kk=function(){var t=this,e=t._self._c;return e("header",[t.cloudNeedLogin||t.cloudIsLogin?e("user-info"):t._e(),e("div",{staticClass:"search"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.mobileInteraction.searchText,expression:"mobileInteraction.searchText"}],ref:"searchInput",attrs:{type:"text",placeholder:t.showAll?"搜索文件夹和画板":"搜索画板",autocomplete:"off"},domProps:{value:t.mobileInteraction.searchText},on:{input:function(e){e.target.composing||t.$set(t.mobileInteraction,"searchText",e.target.value)}}}),t.hasSearchText?e("span",{staticClass:"search-clear",on:{click:t.clickSearchClear}}):t._e()]),e("div",{staticClass:"btn-control-refresh",on:{click:t.clickRefresh}})],1)},qk=[],Qk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userinfo"},[e("div",{staticClass:"nickname",class:{on:t.menuVisible},on:{click:t.clickShowMenu}},[e("UserFace",{attrs:{canClick:!1}})],1),t.menuVisible?e("div",{staticClass:"m-popbox",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.menuVisible=!1}}},[e("div",{staticClass:"box"},[e("div",{staticClass:"u-info"},[e("UserFace",{attrs:{canClick:!1}}),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(t.showName))]),e("div",{staticClass:"email"},[t._v(t._s(t.showEmail))])])],1),t.cloudIsLogin?e("a",{staticClass:"button btn-logout",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickLogout()}}},[t._v("退出登录")]):t._e()])]):t._e()])},Jk=[],Zk=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userface",class:{on:t.canClick},attrs:{title:t.title},on:{click:function(e){return e.stopPropagation(),t.clickUserFace.apply(null,arguments)}}},[t.showIcon?e("div",{staticClass:"icon"}):e("div",{staticClass:"user",class:{tourist:!t.cloudUserIsDesigner}},[t._v(t._s(t.iconText))])])},tC=[],eC={methods:{clickUserFace:function(){this.$emit("click")}},computed:{showIcon:function(){return!this.cloudIsLogin},iconText:function(){if(!this.cloudIsLogin)return"";var t=this.cloudNickName;return Object(l["i"])(t)||(t=this.cloudUserEmail),t[t.length-1]}},props:{title:String,canClick:Boolean}},nC=eC,rC=(n("e2d4"),Object(hr["a"])(nC,Zk,tC,!1,null,"079399e5",null)),iC=rC.exports,aC={components:{UserFace:iC},methods:{clickLogout:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.logoutting){e.next=2;break}return e.abrupt("return");case 2:return t.logoutting=!0,e.prev=3,e.next=6,t.goCloudLogout();case 6:return e.prev=6,t.logoutting=!1,e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[3,,6,9]])})))()},clickShowMenu:function(){this.cloudIsLogin?this.menuVisible=!0:this.goCloudLogin()}},computed:{showName:function(){return this.cloudIsLogin?this.cloudNickName:"未登录"},showEmail:function(){return this.cloudIsLogin?this.cloudUserEmail:""}},data:function(){return{menuVisible:!1,logoutting:!1}}},oC=aC,sC=(n("bb5a"),Object(hr["a"])(oC,Qk,Jk,!1,null,"35031a94",null)),cC=sC.exports,lC={components:{UserInfo:cC},methods:{clickRefresh:function(){this.goCloudFolderInteractionUrl(this.cloudCurrentFolderId,this.curArtboardGuid)},clickSearchClear:function(){var t;this.mobileInteraction.searchText="",null===(t=this.$refs.searchInput)||void 0===t||t.focus()}},computed:{mobileInteraction:function(){return this.$store.state.mobileInteraction},hasSearchText:function(){return!!this.searchText},searchText:function(){return this.mobileInteraction.searchText}},props:{showAll:Boolean}},uC=lC,dC=(n("7eea"),Object(hr["a"])(uC,Kk,qk,!1,null,"9ac34f88",null)),hC=dC.exports,fC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav"},[e("path-nav"),e("nav-filter")],1)},mC=[],pC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"path-nav"},[e("div",{staticClass:"navs"},t._l(t.navs,(function(n,r){return e("div",{key:r,staticClass:"nav-item",class:{"no-link":!n.link}},[e("div",{staticClass:"name",attrs:{title:n.name},on:{click:function(e){return t.clickNav(n)}}},[t._v(t._s(n.name))]),t.showArtboardPages&&n.selectPages?e("PathNavArtboardPages"):t._e()],1)})),0)])},bC=[],vC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"select-artboard-page"},[e("div",{staticClass:"page-current",attrs:{title:"点击切换显示的页面"},on:{click:function(e){t.visible=!t.visible}}},[e("div",{staticClass:"text"},[t._v(t._s(t.currentPageName))])]),e("ul",{staticClass:"page-list",class:{on:t.visible}},[e("li",{class:{on:!t.filterDocumentGuid,"nav-all":!0},attrs:{title:t.allPageName},on:{click:function(e){return t.clickItem(null)}}},[e("span",{staticClass:"text"},[t._v(t._s(t.allPageName)),e("span",{staticClass:"art-count"},[t._v("("+t._s(t.documentArtboards.length)+")")])])]),t._l(t.sortDocumentsWithSketchDocument,(function(n){return e("li",{key:n.guid,class:t.itemCls(n),attrs:{title:n.docFullName},on:{click:function(e){return t.clickItem(n)}}},[e("span",{staticClass:"text"},[t._v(t._s(n.name)),e("span",{staticClass:"art-count"},[t._v("("+t._s(n.arts.length)+")")])])])}))],2),t.visible?e("div",{staticClass:"bg on"}):t._e()])},gC=[],wC={methods:{itemCls:function(t){var e=o["x"].getClassName(t.type);return Object(j["a"])(Object(j["a"])({},e,!!e),"on",this.filterDocumentGuid===t.guid)},clickItem:function(t){var e,n=null!==(e=null===t||void 0===t?void 0:t.guid)&&void 0!==e?e:null;this.$store.commit("setFilterDocumentGuid",n)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.visible=!1}),100))}},computed:{sortDocumentsWithSketchDocument:function(){return this.$store.state.sortDocumentsWithSketchDocument},currentPageName:function(){var t,e,n,r=this.filterDocumentGuid;return r&&(n=this.sortDocumentsWithSketchDocument.find((function(t){return t.guid===r}))),null!==(t=null===(e=n)||void 0===e?void 0:e.name)&&void 0!==t?t:this.allPageName}},watch:{visible:function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0)):window.removeEventListener("mouseup",this.hideContextmenu,!0)}},data:function(){return{allPageName:"全部页面",visible:!1,handle:0}},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0)}},xC=wC,yC=(n("5124"),Object(hr["a"])(xC,vC,gC,!1,null,"1505b93e",null)),kC=yC.exports,CC={components:{PathNavArtboardPages:kC},methods:{clickNav:function(t){t.link&&setTimeout((function(){t.link()}),100)}},computed:{showArtboardPages:function(){return this.inCloudMode&&!this.inNetDiskFileMode&&this.documents.length>0},navs:function(){var t=this,e=[],n=this.inCloudMode,r=this.inArtboardMode,i=this.curArtboard,a=this.cloudCurrentFolderId,o=this.curNetDiskFile,s=this.inNetDiskFileMode;if(n){var c=this.cloudName,l=this.cloudParentFolder,u=this;r||(0===a?e.push({name:c||"私有云根目录",link:null}):l&&e.push({name:0===l.id&&c||l.name,id:l.id,link:function(){u.goCloudFolderInteractionUrl(this.id)}}))}if(n&&this.cloudFolderNotFound?e.push({name:this.cloudFolderInSpecify?"没有访问权限":"链接已失效",link:null}):n&&0==a||e.push({name:this.documentName,selectPages:!0,link:r?function(){t.setCurArtboard(null)}:s?function(){t.goCloudFolderInteractionUrl(a)}:null}),r){var d,h,f=null!==(d=null===i||void 0===i||null===(h=i.artboard)||void 0===h?void 0:h.name)&&void 0!==d?d:"";f&&e.push({name:f,link:null})}else if(s){var m,p=null!==(m=null===o||void 0===o?void 0:o.name)&&void 0!==m?m:"";p&&e.push({name:p,link:null})}return e}}},SC=CC,OC=(n("64be"),Object(hr["a"])(SC,pC,bC,!1,null,"09eb5e34",null)),IC=OC.exports,AC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-filter"},[e("div",{staticClass:"nav-sort"},[e("div",{staticClass:"title",class:{desc:t.listConfig.orderDesc},on:{click:function(e){t.menuVisible=!0}}},[t._v(t._s(t.renderTitle))]),t.menuVisible?e("div",{staticClass:"m-popbox",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.menuVisible=!1}}},[e("div",{staticClass:"box"},[e("div",{staticClass:"sort-order"},[e("div",{staticClass:"item asc",class:{on:!t.listConfig.orderDesc},on:{click:function(e){return t.setMobileInteractionListConfig({orderDesc:!1},!0)}}},[t._v("升序")]),e("div",{staticClass:"item desc",class:{on:t.listConfig.orderDesc},on:{click:function(e){return t.setMobileInteractionListConfig({orderDesc:!0},!0)}}},[t._v("降序")])]),e("div",{staticClass:"sort-types"},[e("div",{staticClass:"item",class:{on:t.listConfig.sortType===t.EnumCloudListSortType.Name},on:{click:function(e){return t.setMobileInteractionListConfig({sortType:t.EnumCloudListSortType.Name},!0)}}},[t._v("按名称排序")]),e("div",{staticClass:"item",class:{on:t.listConfig.sortType===t.EnumCloudListSortType.Date},on:{click:function(e){return t.setMobileInteractionListConfig({sortType:t.EnumCloudListSortType.Date},!0)}}},[t._v("按时间排序")]),e("div",{staticClass:"item",class:{on:t.listConfig.sortType===t.EnumCloudListSortType.ArtboardRect},attrs:{title:"画板列表按画板在文档中的坐标从上到下,从左到右排序;文件夹按名称排序"},on:{click:function(e){return t.setMobileInteractionListConfig({sortType:t.EnumCloudListSortType.ArtboardRect},!0)}}},[t._v("按坐标排序")])])])]):t._e()]),e("div",{staticClass:"nav-render"},[e("div",{staticClass:"item",class:{on:t.listConfig.renderType===t.EnumCloudMobileInteractionListRenderType.All},on:{click:function(e){return t.setMobileInteractionListConfig({renderType:t.EnumCloudMobileInteractionListRenderType.All})}}},[t._v("全部")]),e("div",{staticClass:"item",class:{on:t.listConfig.renderType===t.EnumCloudMobileInteractionListRenderType.Artboard},on:{click:function(e){return t.setMobileInteractionListConfig({renderType:t.EnumCloudMobileInteractionListRenderType.Artboard})}}},[t._v("画板")])])])},TC=[],jC={methods:{setMobileInteractionListConfig:function(t,e){this.$store.commit("setMobileInteractionListConfig",t),e&&(this.menuVisible=!1)}},computed:{EnumCloudMobileInteractionListRenderType:function(){return o["l"]},EnumCloudListSortType:function(){return o["k"]},renderTitle:function(){var t=this.listConfig,e=t.sortType,n=t.orderDesc;return"按".concat(e===o["k"].Name?"名称":e===o["k"].Date?"时间":"坐标").concat(n?"降序":"升序")},listConfig:function(){return this.$store.state.mobileInteraction.listConfig}},data:function(){return{menuVisible:!1}}},FC=jC,MC=(n("e934"),Object(hr["a"])(FC,AC,TC,!1,null,"d85c16d8",null)),_C=MC.exports,LC={components:{PathNav:IC,NavFilter:_C}},DC=LC,NC=(n("31a4"),Object(hr["a"])(DC,fC,mC,!1,null,"72e5b43a",null)),EC=NC.exports,PC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-list",class:{"safari-standalone":t.inSafariStandalone}},[e("Header",{attrs:{showAll:t.showAll}}),e("Nav"),t.isEmptyList?e("main",[e("EmptyData",{attrs:{text:t.emptyText}})],1):t.showAll?e("main",{ref:"mainAll",on:{scroll:t.onMainAllViewScroll,mousewheel:t.onMainAllViewMouseWheel}},[e("div",{staticClass:"box",class:{off:t.mainAllView.mousewheelTimes>0},style:{height:t.mainAllView.boxRealHeight+"px"}},[e("div",{staticClass:"brace",style:t.allListBraceStyle},t._l(t.showLazyAllList,(function(t){return e("ArtboardListItem",{key:t.key,attrs:{item:t.item}})})),1)])]):e("main",{ref:"mainArtboard",on:{scroll:t.onMainArtboardViewScroll,mousewheel:t.onMainArtboardViewMouseWheel}},[e("div",{staticClass:"box",class:{off:t.mainArtboardView.mousewheelTimes>0},style:{height:t.mainArtboardView.boxRealHeight+"px"}},t._l(t.showLazyArtboardList,(function(t){return e("ArtboardListArtboardItem",{key:t.key,attrs:{item:t}})})),1)]),t.listFetchState===t.FetchState.Fetching?e("div",{staticClass:"list-loading"},[e("div",{staticClass:"box"},[t.listFetchState===t.FetchState.Fetching?e("NetworkLoading",{attrs:{loadText:"正在获取文件夹数据...",errorText:"",isLoading:t.listFetchState===t.FetchState.Fetching,isError:!1,reLoadText:""}}):t._e()],1)]):t._e()],1)},RC=[],VC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-item",style:t.style},[e("div",{staticClass:"title"},[t._v(t._s(t.item.artboard.name))]),e("div",{staticClass:"img",on:{click:function(e){return t.setCurArtboard(t.item.item)}}},[e("img",{attrs:{src:t.artboardReviewImg,alt:""},on:{error:t.errPreviewImage}}),t.artboard.flowStart?e("div",{staticClass:"flow-start"}):t._e()])])},BC=[],UC={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)}},computed:{isSupportWebp:function(){return this.$store.state.isSupportWebp===ln.Support},artboardReviewImg:function(){var t=this.artboard,e=this.userMiniPreviewImg?this.isSupportWebp&&t.artboardPreviewWebp?t.artboardPreviewWebp:t.artboardPreviewThumbPng:t.artboardPreviewPng;return e},artboard:function(){return this.item.artboard},style:function(){var t=this.item.rect;return"top:".concat(t.top,"px;left:").concat(t.left,"px;width:").concat(t.width,"px;height:").concat(t.height,"px;")}},props:{item:Object},data:function(){return{userMiniPreviewImg:!0}}},HC=UC,WC=(n("2cd5c"),Object(hr["a"])(HC,VC,BC,!1,null,"904ae240",null)),$C=WC.exports,GC=function(){var t=this,e=t._self._c;return e("div",{staticClass:"item",on:{click:t.clickItem}},[e("div",{staticClass:"img",class:t.itemClass},[t.isArtboard?e("img",{attrs:{src:t.artboardReviewImg,alt:""},on:{error:t.errPreviewImage}}):t._e()]),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(t.name))]),e("div",{staticClass:"summary"},[t._v(t._s(t.summary))])])])},zC=[],YC={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)},clickItem:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.item,i=t.isFolder,a=t.isArtboard,!i){e.next=5;break}return e.next=4,t.goCloudFolderInteractionUrl(n.id);case 4:return e.abrupt("return");case 5:a&&t.setCurArtboard(n);case 6:case"end":return e.stop()}}),e)})))()}},computed:{itemClass:function(){var t=this.item,e=this.isFolder,n=this.isArtboard,r={folder:e,lock:e&&t.shareMode===o["r"].PrivateCode,"share-sm":e&&t.shareMode===o["r"].SpecifyMembers,artboard:n};if(null!=t.color){var i=o["p"].getName(t.color);i&&(r[i]=1)}return r},artboardReviewImg:function(){var t=this.item,e=this.isArtboard;if(!e)return null;var n=t.artboard,r=this.userMiniPreviewImg?n.artboardPreviewThumbPng:n.artboardPreviewPng;return r},name:function(){var t=this.item,e=this.isFolder,n=this.isArtboard;return e?t.name:n?t.artboard.name:null},summary:function(){var t=this.item,e=this.isFolder,n=this.isArtboard;return e?"".concat(t.folderCount," 文件夹, ").concat(t.artboardCount," 画板"):n?He(t.artboard):null},isFolder:function(){return this.item.id>0},isArtboard:function(){var t;return!this.isFolder&&(null===(t=this.item.artboard)||void 0===t?void 0:t.cid)>0}},data:function(){return{userMiniPreviewImg:!0}},props:{item:Object}},XC=YC,KC=(n("0445"),Object(hr["a"])(XC,GC,zC,!1,null,"65d72cae",null)),qC=KC.exports,QC=68,JC={components:{Header:hC,ArtboardListArtboardItem:$C,ArtboardListItem:qC,Nav:EC,EmptyData:Pb,NetworkLoading:us},methods:{sortData:function(t,e,n){var r=this.orderDesc,i=this.sortType;return Ie(t,e,n,{orderDesc:r,sortType:i})},designPXToShowPX:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t/c["b"]*this.mainArtboardView.docWidth;return!0===n?r:e?Math.ceil(r):Math.floor(r)},designPXToShowVW:function(t){return t/c["b"]*100+"vw"},onMainViewResize:function(){var t=this.$refs.mainArtboard,e=this.$refs.mainAll,n=document.documentElement.offsetWidth,r=this.mainArtboardView;r.docWidth=n,t&&(r.height=Math.ceil(t.getBoundingClientRect().height));var i=this.mainAllView;i.docWidth=n,e&&(i.height=Math.ceil(e.getBoundingClientRect().height))},onMainAllViewScroll:function(){var t=this.$refs.mainAll;if(t){var e=this.mainAllView;e.scrollTop=t.scrollTop}},onMainAllViewMouseWheel:function(t){var e;this.mainAllView.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onMainArtboardViewMouseWheel:function(t){var e;this.mainArtboardView.mousewheelTimes=null!==(e=t.timeStamp)&&void 0!==e?e:Date.now()},onMainArtboardViewScroll:function(){var t=this.$refs.mainArtboard;if(t){var e=this.mainArtboardView;e.scrollTop=t.scrollTop}},refreshBrowserInfo:function(){var t=this,e=this.showAll,n=this.isEmptyList;n||this.$nextTick((function(){t.onMainViewResize();var n=e?t.$refs.mainAll:t.$refs.mainArtboard,r=e?t.mainAllView:t.mainArtboardView;n&&(r.scrollTop=n.scrollTop=0)}))}},watch:{"mainAllView.mousewheelTimes":function(t){var e=this,n=this.mainAllView;clearTimeout(n.handle),t&&(n.handle=setTimeout((function(){e.mainAllView.mousewheelTimes=0}),200))},"mainArtboardView.mousewheelTimes":function(t){var e=this,n=this.mainArtboardView;clearTimeout(n.handle),t&&(n.handle=setTimeout((function(){e.mainArtboardView.mousewheelTimes=0}),200))},cloudCurrentFolderId:function(){this.refreshBrowserInfo()},isEmptyList:function(){this.refreshBrowserInfo()},showAll:function(){this.refreshBrowserInfo()}},computed:{FetchState:function(){return c["a"]},listFetchState:function(){return this.$store.state.mobileInteraction.listFetchState},allListBraceStyle:function(){var t;return t=this.renderAllListIndexStart*QC,{paddingTop:this.designPXToShowVW(t)}},isEmptyList:function(){var t=this.showAll,e=this.renderSortArtboardList,n=this.renderSortedAllList,r=t?n:e;return 0===r.length},emptyText:function(){var t=this.showAll,e=this.searchText,n=this.hasSearchText,r=t?"子文件夹和画板":"画板";return n?"未找到“".concat(e,"”相关的").concat(r):"当前文件夹不存在".concat(r)},showAll:function(){return this.renderType===o["l"].All},sortType:function(){return this.listConfig.sortType},orderDesc:function(){return this.listConfig.orderDesc},renderType:function(){return this.listConfig.renderType},listConfig:function(){return this.$store.state.mobileInteraction.listConfig},mobileInteraction:function(){return this.$store.state.mobileInteraction},hasSearchText:function(){return!!this.searchText},searchText:function(){return this.mobileInteraction.searchText},showLazyArtboardList:function(){var t=[],e=this.renderArtboardList,n=this.mainArtboardView,r=(new d["a"]).set(0,n.scrollTop,n.docWidth,n.height);return e.forEach((function(e){var n=e.rect;r.isOverlap(n)&&t.push(e)})),t},renderArtboardList:function(){var t=this.renderSortArtboardList,e=this.mainArtboardView,n=e.docWidth,r=[];if(e.boxRealHeight=0,0===n)return r;var i={titleHeight:this.designPXToShowPX(39,!0),imgWidth:this.designPXToShowPX(154,!0),lineCount:2,offsetX:this.designPXToShowPX(21),artboardFullEqualWidth:0};i.lineCount=Math.floor(n/i.imgWidth),i.artboardFullEqualWidth=Math.round(n/i.lineCount);var a=new Array(i.lineCount).fill(0),o=0;return t.forEach((function(t){var n,s=t.artboard,c=s.boundsInParentForList;if(c){var l=new d["a"],u=a[o],h=Math.ceil(c.height*i.imgWidth/c.width)+i.titleHeight;l.set(i.offsetX+(i.offsetX+i.imgWidth)*o,u,i.imgWidth,h),u+=h,a[o]=u,e.boxRealHeight=Math.max(e.boxRealHeight,u),o++,o>=i.lineCount&&(o=0),r.push({item:t,artboard:s,rect:l,titleHeight:i.titleHeight,key:null!==(n=s.cid)&&void 0!==n?n:"".concat(s.fileType,":").concat(s.guid)})}})),r},renderSortArtboardList:function(){var t,e,n=this.hasSearchText,r=this.searchText,i=this.renderDocumentArtboards,a=[];return r=n&&null!==(t=null===(e=r)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"",i.forEach((function(t){var e=null===t||void 0===t?void 0:t.artboard;if(e){if(n){var i=e.name;if(!i)return;if(-1===i.toLowerCase().indexOf(r))return}a.push(t)}})),a.length>0&&this.sortData(a,"updateTimeTimes",o["j"].Artboard),a},renderAllListIndexStart:function(){var t=this.mainAllView;return Math.floor(t.scrollTop/this.designPXToShowPX(QC))},showLazyAllList:function(){for(var t=this.renderSortedAllList,e=this.mainAllView,n=this.renderAllListIndexStart,r=Math.ceil(e.height/this.designPXToShowPX(QC))+1,i=[],a=Math.min(n+r,t.length);n<a;n++){var o,s,c=t[n];i.push({item:c,key:"".concat(c.id,"-").concat(null!==(o=null===(s=c.artboard)||void 0===s?void 0:s.cid)&&void 0!==o?o:0)})}return i},renderSortedAllList:function(){var t,e,n=this.cloudSubFolders,r=this.hasSearchText,i=this.searchText,a=this.mainAllView,s=[];i=r&&null!==(t=null===(e=i)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"",Object(l["h"])(n)&&n.forEach((function(t){if(r){var e=t.name;if(!e)return;if(-1===e.toLowerCase().indexOf(i))return}s.push(t)})),this.sortData(s,"updateTimes",o["j"].Folder);var c=this.renderSortArtboardList;return c.length>0&&s.push.apply(s,Object(u["a"])(c)),a.boxRealHeight=Math.ceil(this.designPXToShowPX(QC,!0,!0)*s.length),s}},data:function(){return{mainArtboardView:{scrollTop:0,height:0,docWidth:0,boxRealHeight:0,mousewheelTimes:0,handle:0},mainAllView:{scrollTop:0,height:0,docWidth:0,boxRealHeight:0,mousewheelTimes:0,handle:0},inSafariStandalone:l["f"]}},created:function(){window.addEventListener("resize",this.onMainViewResize)},mounted:function(){this.onMainViewResize(),this.onMainArtboardViewScroll(),this.onMainAllViewScroll()},beforeDestroy:function(){window.removeEventListener("resize",this.onMainViewResize),clearTimeout(this.mainArtboardView.handle),clearTimeout(this.mainAllView.handle)}},ZC=JC,tS=(n("7797"),Object(hr["a"])(ZC,PC,RC,!1,null,"52db80e1",null)),eS=tS.exports,nS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-info"},[e("ArtboardPanel",{attrs:{renderArtboardList:t.renderDocumentArtboards,curArtboardIndex:t.curArtboardIndex}}),!t.homeListVisible&&t.mobileInteraction.controlVisible?e("div",{staticClass:"control"},[e("div",{staticClass:"btns"},[e("div",{staticClass:"btn btn-control-golist",on:{click:function(e){return t.setCurArtboard(null)}}})]),e("menu",[e("span",{staticClass:"btn btn-homelist",class:{disabled:0===t.homeList.length},on:{click:t.clickHomeList}}),e("span",{staticClass:"line"}),e("span",{staticClass:"btn btn-interaction-rect-always-visible",class:{on:t.interactionRectAlwaysVisible},on:{click:t.clickInteractionRectAlwaysVisible}}),e("span",{staticClass:"line"}),e("span",{staticClass:"btn btn-vertical-align",class:t.verticalAlignCss,on:{click:t.clickVerticalAlign}})])]):t._e(),e("home-list",{attrs:{homeList:t.homeList,visible:t.homeListVisible},on:{hideHomeList:t.hideHomeList}})],1)},rS=[],iS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-panel",on:{touchstart:t.touchstartPanel}},[e("div",{staticClass:"box",class:{animation:t.animation,moving:t.movingX,out:t.isAnimationOut},style:t.style},t._l(t.showArtboards,(function(t){return e("div",{key:t.key,staticClass:"item"},[t.artboard?e("InteractionArtboardItem",{attrs:{artboard:t.artboard,overlayArtboards:t.overlayArtboards,renderTapInteraction:t.renderTapInteraction,overlayVisible:t.overlayVisible}}):e("artboard-empty")],1)})),0),t.gobackArtboard?e("InteractionArtboardItem",{attrs:{overlayVisible:!1,artboard:t.gobackArtboard.fromArtboard.artboard,overlayArtboards:[],renderTapInteraction:t.gobackArtboard.renderTapInteraction}}):t._e(),t.gotoArtboard?e("InteractionArtboardItem",{attrs:{artboard:t.gotoArtboard.fromArtboard.artboard,overlayArtboards:[],renderTapInteraction:t.gotoArtboard.renderTapInteraction}}):t._e()],1)},aS=[],oS=function(){var t=this;t._self._c;return t._m(0)},sS=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"artboard-empty"},[e("div",{staticClass:"box"},[e("div",{staticClass:"text"},[t._v("没有画板了")])])])}],cS=(n("938c"),{}),lS=Object(hr["a"])(cS,oS,sS,!1,null,"dbda9962",null),uS=lS.exports,dS={components:{InteractionArtboardItem:Dk,ArtboardEmpty:uS},methods:{touchmovePanel:function(t){var e=t.changedTouches[0];if(e){var n=this.maxDiffNum,r=this.docWidth,i=e.pageX-this.touchStartX,a=e.pageY-this.touchStartY,o=Math.abs(i),s=Math.abs(a);this.movingX||this.movingY||(s>=n&&o<s&&(this.movingY=!0),!this.movingY&&o>=n&&(this.movingX=!0)),this.movingX&&(t.preventDefault(),i=i>0?Math.min(i,r):Math.max(i,-r),this.mouseDiffX=i)}},touchendPanel:function(t){window.removeEventListener("touchmove",this.touchmovePanel,{passive:!1}),window.removeEventListener("touchend",this.touchendPanel);var e=t.changedTouches[0];if(e)if(this.movingX){var n=e.pageX-this.touchStartX;this.onSlide(n)}else if(this.movingY)this.movingY=!1;else{var r,i=t.target,a=i&&!!i.getAttribute("data-unset-control"),o=this.mobileInteraction,s=Math.abs(Date.now()-this.touchStartTime),c=s<300,l=s>1500,u=o.controlVisible;a&&c?a=!1:(l&&a||c)&&(r=!u),r!==u&&setTimeout((function(){o.controlVisible=r}),10),this.currentArtboardHasRenderInteraction||this.showTextTip("当前画板没有或未提交交互原型热区",1)}},touchstartPanel:function(t){if(!this.animation){window.addEventListener("touchmove",this.touchmovePanel,{passive:!1}),window.addEventListener("touchend",this.touchendPanel);var e=t.touches[0];e&&(this.mouseDiffX=0,this.movingX=this.movingY=!1,this.touchStartX=e.pageX,this.touchStartY=e.pageY,this.touchStartTime=Date.now())}},onSlide:function(t){var e,n=this,r=this.mouseDiffX,i=0;try{if(0===t)return;var a=this.prevArtboard,o=this.nextArtboard,s=this.docWidth;if(null==a&&t>0)return;if(null==o&&t<0)return;if(Math.abs(t)<s/5)return;if(t>0?(e=a,i=s):(e=o,i=-s),!e)return}finally{0!==r&&(this.animation=!0,this.mouseDiffX=i,setTimeout((function(){n.animation=!1,n.mouseDiffX=0,n.movingX=!1,n.movingY=!1,e&&n.setCurArtboard(e)}),200))}}},computed:{isAnimationOut:function(){var t=this.gobackArtboard,e=this.gotoArtboard;return null!=[t,e].find((function(t){var e,n;return!!t&&-1!==(null!==(e=null===(n=t.renderTapInteraction)||void 0===n||null===(n=n.transition)||void 0===n?void 0:n.type)&&void 0!==e?e:"").indexOf("_out")}))},gobackArtboard:function(){return this.interactionSet.gobackArtboard},gotoArtboard:function(){return this.interactionSet.gotoArtboard},currentOverlayVisible:function(){return!this.gobackArtboard},currentRenderTapInteraction:function(){var t,e=this.gobackArtboard,n=this.gotoArtboard,r=null===(t=null!==e&&void 0!==e?e:n)||void 0===t?void 0:t.renderTapInteraction;if(r){var i=r,a=i.transition,o=i.trigger_type,c=i.type,u=i.preserveScrollPosition,d=i.toArtboard;if(!Object(l["s"])(a))return null;switch(a=Object(s["a"])({},a),a.type){case"dissolve":case"autoAnimate":return null;case"push":case"slide":case"slide_out":case"move":case"move_out":a.type="".concat(a.type,"-background");break}r={transition:a,trigger_type:o,type:c,preserveScrollPosition:u,toArtboard:d}}return r},currentArtboardHasRenderInteraction:function(){return null!=this.currentArtboardRenderInteractions},currentArtboardRenderInteractions:function(){var t,e,n=null===(t=this.curArtboard)||void 0===t||null===(t=t.artboard)||void 0===t?void 0:t.interactionInfo;if(!n)return null;if(n.fetchState!==c["a"].Success)return null;var r=null===(e=n.data)||void 0===e?void 0:e.renderInteractions;return Object(l["h"])(r)&&r.length>0?r:null},showArtboards:function(){var t=this.prevArtboard,e=this.nextArtboard,n=this.curArtboard,r=this.overlayArtboards,i=[];t?i.push({key:t.artboard.cid,artboard:t.artboard,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0}):i.push({key:"prevArtboard.null",artboard:null,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0});var a=n.artboard;return i.push({key:a.cid,artboard:a,overlayArtboards:r,renderTapInteraction:this.currentRenderTapInteraction,overlayVisible:this.currentOverlayVisible}),e?i.push({key:e.artboard.cid,artboard:e.artboard,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0}):i.push({key:"nextArtboard.null",artboard:null,overlayArtboards:null,renderTapInteraction:null,overlayVisible:!0}),i},moving:function(){return this.movingX||this.movingY},style:function(){var t=this.mouseDiffX;return{transform:"translate3d(".concat(t,"px, 0, 1px)")}},docWidth:function(){return this.mobileInteraction.mobileSize.width},mobileInteraction:function(){return this.$store.state.mobileInteraction},interactionSet:function(){return this.$store.state.artboardDetail.interactionSet},overlayArtboards:function(){return this.interactionSet.overlayArtboards},prevArtboard:function(){var t=this.curArtboardIndex,e=this.renderArtboardList;return t<=0?null:e[t-1]},nextArtboard:function(){var t=this.curArtboardIndex,e=this.renderArtboardList,n=e.length;return t>=n-1?null:e[t+1]}},data:function(){return{touchStartTime:0,touchStartX:0,touchStartY:0,movingX:!1,movingY:!1,maxDiffNum:3,animation:!1,mouseDiffX:0}},props:{renderArtboardList:Array,curArtboardIndex:Number}},hS=dS,fS=(n("b623"),Object(hr["a"])(hS,iS,aS,!1,null,"cd9298dc",null)),mS=fS.exports,pS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home-list",class:{on:t.visible},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickHide.apply(null,arguments)}}},[e("ul",{staticClass:"box"},t._l(t.homeList,(function(n,r){return e("li",{key:r,on:{click:function(e){return t.clickItem(n)}}},[e("span",{staticClass:"text"},[t._v(t._s(n.artboard.name))])])})),0)])},bS=[],vS={methods:{clickItem:function(t){this.setCurArtboard(t),this.clickHide()},clickHide:function(){this.$emit("hideHomeList")}},props:{homeList:Array,visible:Boolean}},gS=vS,wS=(n("b3ac"),Object(hr["a"])(gS,pS,bS,!1,null,"10774c3a",null)),xS=wS.exports,yS={components:{ArtboardPanel:mS,HomeList:xS},methods:{clickVerticalAlign:function(){var t,e=this.verticalAlign,n=Object(j["a"])(Object(j["a"])(Object(j["a"])({},o["u"].Top,o["u"].Middle),o["u"].Middle,o["u"].Bottom),o["u"].Bottom,o["u"].Top),r=null!==(t=n[e])&&void 0!==t?t:o["u"].Middle;this.$store.commit("setInteractionArtboardVerticalAlign",r),this.showTextTip("已修改画板的对齐方式为[".concat(o["u"].getName(r),"]"))},hideHomeList:function(){this.homeListVisible=!1},clickHomeList:function(){var t=this.homeList;if(0!==t.length)return 1===t.length?(this.setCurArtboard(t[0]),void this.showTextTip("已切换到起始画板")):void(this.homeListVisible=!0);this.showTextTip("当前没有配置起始画板")},clickInteractionRectAlwaysVisible:function(){var t=!this.interactionRectAlwaysVisible;this.showTextTip(t?"已开启原型热区常显":"已关闭原型热区常显"),this.$store.commit("setInteractionRectAlwaysVisible",t)},clickGoArtboardByIndex:function(t){t<0&&(t=0);var e=this.renderDocumentArtboards,n=e.length;t>n-1&&(t=n-1);var r=e[t];this.setCurArtboard(r)}},computed:{verticalAlignCss:function(){switch(this.verticalAlign){case o["u"].Bottom:return"align-bottom";case o["u"].Top:return"align-top";default:return"align-middle"}},verticalAlign:function(){return this.$store.state.artboardDetail.interactionSet.verticalAlign},homeList:function(){var t=this.renderDocumentArtboards;return t.filter((function(t){var e;return null===(e=t.artboard)||void 0===e?void 0:e.flowStart}))},hasPrevArtboard:function(){var t=this.curArtboardIndex;return t>0},hasNextArtboard:function(){var t=this.renderDocumentArtboards,e=this.curArtboardIndex,n=t.length;return e<n-1},curArtboardIndex:function(){var t=this.curArtboard;return this.renderDocumentArtboards.findIndex((function(e){return e===t}))},interactionRectAlwaysVisible:function(){return this.$store.state.artboardDetail.interactionSet.rectAlwaysVisible},mobileInteraction:function(){return this.$store.state.mobileInteraction},hasSearchText:function(){return!!this.searchText},searchText:function(){return this.mobileInteraction.searchText},renderArtboardList:function(){var t,e,n=this.searchText,r=this.renderDocumentArtboards,i=this.hasSearchText,a=[];return n=i&&null!==(t=null===(e=n)||void 0===e?void 0:e.toLowerCase())&&void 0!==t?t:"",r.forEach((function(t){var e=null===t||void 0===t?void 0:t.artboard;if(e){if(i){var r=e.name;if(!r)return;if(-1===r.toLowerCase().indexOf(n))return}var o=e.boundsInParent;o&&a.push(t)}})),a}},watch:{curArtboard:function(t){t||(this.mobileInteraction.controlVisible=!1)}},data:function(){return{homeListVisible:!1}},created:function(){this.mobileInteraction.controlVisible=!1}},kS=yS,CS=(n("b13d"),Object(hr["a"])(kS,nS,rS,!1,null,"b3020be6",null)),SS=CS.exports,OS=function(){var t=this,e=t._self._c;return t.tipVisible?e("div",{staticClass:"pop-tip-text"},[e("p",[t._v(t._s(t.tipText))])]):t._e()},IS=[],AS={computed:{tipText:function(){return this.$store.state.textTip.text},tipVisible:function(){return this.$store.state.textTip.visible}}},TS=AS,jS=(n("2ec9"),Object(hr["a"])(TS,OS,IS,!1,null,"74a7e4ce",null)),FS=jS.exports,MS=l["e"]&&/MQQBrowser/i.test(navigator.userAgent),_S={components:{ArtboardList:eS,ArtboardInfo:SS,TipInMobile:FS,CloudNeedLoginTip:uc,Authority:Mb,EmptyData:Pb,Header:hC,Nav:EC,AutomaticSync:Or},methods:{onResize:function(){var t=document.documentElement,e=this.mobileSize;e.width=t.offsetWidth,e.height=t.offsetHeight},fullScreen:function(){var t=this.allArtboardLoadChecked,e=this.cloudIsLogin,n=this.cloudNeedLogin,r=this.cloudFolderNotFound,i=this.permission,a=this.isEmptyArtboardData,o=this.inList;t&&(n&&!e||r||i&&(a||o||this.isQQBrowser||this.isFullscreen||Fy.requestFullscreen()))},onFullscreen:function(t){this.isFullscreen=t},setFullscreen:function(t){var e=document.documentElement;t?Fy.onChange(this.onFullscreen):Fy.offChange(this.onFullscreen);var n=t?"addEventListener":"removeEventListener";e[n]("touchend",this.fullScreen),e[n]("click",this.fullScreen),e=null}},data:function(){return{isFullscreen:Fy.isFullscreen()}},computed:{isQQBrowser:function(){return MS},emptyText:function(){return this.inCloudMode?0===this.cloudCurrentFolderId?"私有云下还没有文件夹,请在标记狮中添加":this.inNetDiskFileMode?"文件不存在,可能已经被移动或删除":"当前文件夹没有画板信息":"未检测到数据,请尝试重新导出画板"},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyArtboardData:function(){return 0===this.documentArtboards.length},mobileSize:function(){return this.$store.state.mobileInteraction.mobileSize},inList:function(){return null==this.curArtboard}},created:function(){this.setFullscreen(!0),window.addEventListener("resize",this.onResize),this.onResize()},beforeDestroy:function(){this.setFullscreen(!1),window.removeEventListener("resize",this.onResize)}},LS=_S,DS=(n("d6df"),Object(hr["a"])(LS,Yk,Xk,!1,null,"39ffaee1",null)),NS=DS.exports;function ES(t,e){Object(c["Z"])(!0),Object(c["r"])();var n=+Object(c["hb"])("commentid","#"),r="1"===Object(c["hb"])("isreply","#");t().then((function(){var t=nr.state;nr.commit("allArtboardLoadChecked",!0),t.cloud.allFoldersBoxVisible="1"===Object(c["P"])(o["e"],!1),wt(t.documentArtboards);var i=t.cloud.defaultArtboardGuid,a=null;if(i&&(a=Ze.documentArtboards.find((function(t){return t.artboard.guid===i})),t.curArtboard!==a&&nr.commit("curArtboard",{artboard:a})),n>0){var s,u,d=t.autoIntoInfo;d.commentArtboardId=null!==(s=null===(u=a)||void 0===u||null===(u=u.artboard)||void 0===u?void 0:u.cid)&&void 0!==s?s:0,d.commentId=n,d.isReply=r,nr.commit("setRightNavType",o["A"].Comment)}e(),a||l["e"]||(t.renderDocuments.find((function(t){if(a=t.arts.find((function(t){return t.artboard.flowStart})),a)return!0})),a||t.renderDocuments.find((function(t){if(t.arts.length>0)return a=t.arts[0],!0})),a&&t.curArtboard!==a&&nr.commit("curArtboard",{artboard:a}))}));var i=new a["a"]({store:nr,render:function(t){return t(l["e"]?NS:zk)}});cn((function(t){nr.commit("isSupportWebp",t),i.$mount("#app")}))}var PS,RS,VS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pop-box confirm",class:{"in-mobile":t.inMobile}},[e("div",{staticClass:"box"},[t.showCancel?e("a",{staticClass:"sys-close",attrs:{href:"javascript:;"},on:{click:t.clickCancel}}):t._e(),e("div",{staticClass:"title"},[t._v(t._s(t.title))]),e("div",{staticClass:"text"},[t._v(t._s(t.text))]),e("div",{staticClass:"btns"},[t.noText?e("a",{staticClass:"button btn-no",attrs:{href:"javascript:;"},on:{click:t.clickNo}},[t._v(t._s(t.noText))]):t._e(),e("a",{staticClass:"button btn-yes",class:{light:!t.inMobile},attrs:{href:"javascript:;"},on:{click:t.clickYes}},[t._v(t._s(t.yesText))])])])])},BS=[],US={created:function(){window.addEventListener("keydown",this.onKeyDown)},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown)},methods:{onKeyDown:function(t){var e=t.keyCode||t.which;if(27===e){try{t.preventDefault(),t.stopPropagation()}catch(n){}this.showCancel?this.clickCancel():this.clickNo()}},clickCancel:function(){this.$emit("clickCancel")},clickYes:function(){this.$emit("clickYes")},clickNo:function(){this.$emit("clickNo")}},props:{title:{type:String,default:"提示"},text:{validator:function(){return!0}},yesText:{type:String,default:"确认"},noText:{type:String,default:"取消"},showCancel:{type:Boolean,default:!1}}},HS=US,WS=(n("567c"),Object(hr["a"])(HS,VS,BS,!1,null,"8aa1124e",null)),$S=WS.exports,GS=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pop-box prompt"},[e("form",{on:{submit:t.clickSubmit}},[e("div",{staticClass:"box"},[e("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:t.noText},on:{click:t.clickNo}}),e("div",{staticClass:"title"},[t._v(t._s(t.title))]),e("div",{staticClass:"text"},[e("UserInput",{ref:"text",attrs:{defaultBorder:!0,placeholder:t.placeholder,target:"text",initValue:t.text,maxLength:t.maxLength},on:{change:t.onChange}})],1),e("div",{staticClass:"btns"},[e("a",{staticClass:"button light btn-yes",attrs:{href:"javascript:;"},on:{click:t.clickYes}},[t._v(t._s(t.yesText))])])])])])},zS=[],YS={methods:{clickSubmit:function(t){t.preventDefault(),this.clickYes()},onChange:function(t){this.value=t}},components:{UserInput:Gd},props:{title:{type:String,default:"提示"},maxLength:{type:Number,default:256},placeholder:{type:String,default:""},text:String,yesText:{type:String,default:"确认"},noText:{type:String,default:"取消"}},data:function(){return{value:""}},created:function(){var t=this;this.value=this.text,Object(l["i"])(this.value)&&this.$nextTick((function(){var e=t.$refs.text;e&&e.setFocus&&e.setFocus()}))}},XS=YS,KS=(n("0913"),Object(hr["a"])(XS,GS,zS,!1,null,"bebbefea",null)),qS=KS.exports,QS=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a,s,u=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=!(u.length>2&&void 0!==u[2])||u[2],"string"!==typeof n&&(n=JSON.stringify(n)),a="".concat(c["d"],"/api/").concat(e),t.next=5,fetch(a,{method:"post",body:n,credentials:void 0});case 5:s=t.sent,t.t0=s.status,t.next=200===t.t0?9:500===t.t0?21:25;break;case 9:return t.next=11,s.text();case 11:if(n=t.sent,Object(l["i"])(n)){t.next=14;break}throw"接口".concat(e,"请求失败,不存在返回值");case 14:if(n=Object(c["sb"])(n),Object(l["s"])(n)){t.next=17;break}throw"接口".concat(e,"请求失败,无法解析返回值");case 17:if(n.success){t.next=20;break}throw n.code===o["H"].NotLogin&&Object(c["ub"])(2e3).then((function(){window.location.reload(!0)})),n.errMsg;case 20:return t.abrupt("return",i?Object(c["h"])(n.data):n.data);case 21:return t.next=23,s.text();case 23:throw n=t.sent,n;case 25:throw"接口".concat(e,"请求失败");case 26:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),JS=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var i,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(l["s"])(n)){t.next=2;break}throw"接口[".concat(e,"]返回值格式异常");case 2:if(n.success){t.next=4;break}return t.abrupt("return",n);case 4:if(n=n.data,Object(l["i"])(n)){t.next=7;break}throw"接口[".concat(e,"]返回值格式异常,无法解析data");case 7:return i="".concat(c["d"],"/api/").concat(e),t.next=10,fetch(i,{method:"post",body:n,credentials:void 0});case 10:a=t.sent,t.t0=a.status,t.next=200===t.t0?14:500===t.t0?23:27;break;case 14:return t.next=16,a.text();case 16:if(n=t.sent,Object(l["i"])(n)){t.next=19;break}throw"接口[".concat(e,"]请求失败,不存在返回值");case 19:if(n=Object(c["sb"])(n),Object(l["s"])(n)){t.next=22;break}throw"接口[".concat(e,"]请求失败,无法解析返回值");case 22:return t.abrupt("return",n);case 23:return t.next=25,a.text();case 25:throw n=t.sent,"接口[".concat(e,"]").concat(n);case 27:throw"接口[".concat(e,"]请求失败");case 28:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),ZS=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(e,n){var a,o,s,l,u,d,h,f,m=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=m.length>2&&void 0!==m[2]?m[2]:0,o="pre"+e,t.next=4,QS(o,n,!1);case 4:return s=t.sent,l="".concat(c["f"],"router/web/webupdate.ashx"),u=document.createElement("iframe"),d="__postdata_"+Date.now(),u.name=d,u.style.cssText="width:1px;height:1px;position: absolute;top:-10px;left:-10px;overflow:hidden;",h=document.createElement("form"),h.style.cssText="width:1px;height:1px;position: absolute;top:-10px;left:-10px;overflow:hidden;",h.appendChild(u),h.target=d,h.method="POST",h.action=l,h.enctype="multipart/form-data",f=document.createElement("input"),f.name="router",f.value=e,h.appendChild(f),f=document.createElement("input"),f.name="body",f.value=s,h.appendChild(f),f=null,document.body.appendChild(h),t.abrupt("return",new Promise((function(t,n){var o,s=function(){clearTimeout(o),c&&(window.removeEventListener("message",c),document.body.removeChild(h),c=h=u=null)};a>0&&(o=setTimeout((function(){s(),n("[".concat(e,"]操作已超时"))}),a));var c=function(){var a=Object(i["a"])(Object(r["a"])().mark((function i(a){var o,c;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=a.source,o===u.contentWindow){r.next=3;break}return r.abrupt("return");case 3:if(r.prev=3,c=a.data,"string"!==typeof c){r.next=9;break}return r.abrupt("return",n(c));case 9:return r.prev=9,r.t0=t,r.next=13,JS(e,c);case 13:r.t1=r.sent,(0,r.t0)(r.t1),r.next=20;break;case 17:r.prev=17,r.t2=r["catch"](9),n(r.t2);case 20:return r.prev=20,s(),r.finish(20);case 23:case"end":return r.stop()}}),i,null,[[3,,20,23],[9,17]])})));return function(t){return a.apply(this,arguments)}}();window.addEventListener("message",c),h.submit()})));case 28:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),tO={computed:{webViewFocus:function(){return this.$store.state.webViewFocus},webViewHidden:function(){return this.$store.state.webViewHidden},allFoldersBoxVisible:function(){return this.$store.state.cloud.allFoldersBoxVisible},fileViewUrl:function(){var t=this.curNetDiskFile;return t&&t.viewUrl?"".concat(t.viewUrl,"?type=res&t=").concat(t.updateTimeTimes):null},fileDownloadUrl:function(){var t=this.curNetDiskFile;return t&&t.viewUrl?"".concat(t.viewUrl,"?type=download&t=").concat(t.updateTimeTimes):null},inMobile:function(){return l["e"]},inMacOS:function(){return l["d"]},editComment:function(){return this.$store.state.editComment},inCommentDrawing:function(){var t=this.editComment;if(!t.drawing)return!1;var e=t.drawInfo.histories;return e.length>0},numberAutoRound:function(){return this.$store.state.setting.numberAutoRound},exportBoxBackground:function(){return this.$store.state.setting.exportBoxBackground},inCloudMode:function(){return this.$store.state.inCloudMode},artShowInListMode:function(){return this.inCloudMode&&this.$store.state.artShowInListMode},permission:function(){return this.$store.state.permission},cloudNeedLogin:function(){return this.inCloudMode&&this.$store.state.cloudNeedLogin},cloudIsLogin:function(){return this.inCloudMode&&this.$store.state.cloudIsLogin},cloudNickName:function(){return this.$store.state.cloudNickName},cloudUserEmail:function(){return this.$store.state.cloudUserEmail},cloudUserId:function(){return this.$store.state.cloudUserId},cloudUserIsDesigner:function(){return this.$store.state.cloudUserIsDesigner},cloudUserIsOwner:function(){return this.$store.state.cloudUserIsOwner},cloudUserKey:function(){return this.$store.state.cloudUserKey},cloudName:function(){return this.$store.state.cloudName},cloudKey:function(){return this.$store.state.cloudKey},cloudVersion:function(){return this.$store.state.cloudVersion},cloudFolderNotFound:function(){return this.$store.state.cloud.folderNotFound},cloudFolderInSpecify:function(){return this.$store.state.cloud.folderInSpecify},cloudFolderErrorText:function(){var t=this.cloudFolderNotFound,e=this.cloudFolderInSpecify;return e?l["e"]?"当前文件夹仅限定人员访问\n请使用有访问权限的账户登录":"当前文件夹仅限定人员访问,请使用有访问权限的账户登录":t?"链接已失效,无法找到对应的文件夹":null},cloudCurrentFolderId:function(){return this.$store.state.cloud.currentFolderId},cloudDefaultArtboardGuid:function(){return this.$store.state.cloud.defaultArtboardGuid},cloudSubFolders:function(){return this.$store.state.cloud.subFolders},cloudSubFiles:function(){return this.$store.state.cloud.subFiles},cloudParentFolder:function(){return this.$store.state.cloud.parentFolder},androidUseMipmap:function(){return this.$store.state.androidUseMipmap},calcPlatformUse:function(){var t=this.calcPlatformType;switch(t){case o["c"].ANDROID:case o["c"].WE_CHAT_MINI_PROGRAM:case o["c"].IOS:return t;case o["c"].CUSTOM:switch(this.calcPlatformCustomUnit){case o["d"].DP:return o["c"].ANDROID;case o["d"].PT:return o["c"].IOS;case o["d"].RPX:return o["c"].WE_CHAT_MINI_PROGRAM;default:return o["c"].WEB}default:return o["c"].WEB}},calcArtScale:function(){var t=this.curArtboard;if(!t)return 1;var e=t.artboardVerData,n=t.artboard,r=null!==e&&void 0!==e?e:n;if(!r)return 1;var i=r.mlConfig;if(!i)return 1;var a=i.artScale;return null==a||a<=0?1:a},calcPlatformType:function(){return this.$store.state.platform.type},calcPlatformCustomUnit:function(){return this.$store.state.platform.customUnit},calcPlatformShowType:function(){var t=this.calcPlatformType;switch(t){case o["c"].ANDROID:case o["c"].IOS:case o["c"].WE_CHAT_MINI_PROGRAM:return t;case o["c"].CUSTOM:switch(this.calcPlatformCustomUnit){case o["d"].DP:return o["c"].ANDROID;case o["d"].PT:return o["c"].IOS;case o["d"].RPX:return o["c"].WE_CHAT_MINI_PROGRAM;default:return o["c"].WEB}default:return o["c"].WEB}},calcUnitTemplateValue:function(){if(!this.inArtboardMode)return"";var t=this.$store.state.unitTemplate.template;return t||""},calcPlatformCustomDocWidth:function(){if(!this.inArtboardMode)return 1;var t=this.$store.state.platform.customDocWidth;return(isNaN(t)||!isFinite(t)||t<1)&&(t=0),t},calcPlatformCustomDocWidthShow:function(){var t=this.calcPlatformCustomDocWidth;if(0===t){var e=this.curArtboard;if(e){var n,r,i=e.artboardVerData,a=e.artboard,o=null!==i&&void 0!==i?i:a;if(o)t=null!==(n=null===(r=o.boundsInArtboard)||void 0===r?void 0:r.width)&&void 0!==n?n:0}}return t},scaleArtboard:function(){return this.$store.state.scale.artboard},scaleList:function(){return this.$store.state.scale.list},scaleImageViewer:function(){var t=this.$store.state.imageViewer;return t.scale},inArtboardMode:function(){return null!==this.curArtboard},inCloudViewerMode:function(){return this.inCloudMode&&this.$store.state.cloud.renderMode===o["C"].Normal},inNetDiskFileMode:function(){return this.inCloudMode&&this.$store.state.cloud.renderMode===o["C"].File},inInteractionMode:function(){return this.inCloudMode&&this.$store.state.cloud.renderMode===o["C"].Interaction},curNetDiskFile:function(){return this.inNetDiskFileMode?this.$store.state.cloud.fileInfo:null},curArtboard:function(){return this.$store.state.curArtboard},curArtboardLoadedVerData:function(){var t,e=this.curArtboard;if(!e)return null;var n=e.artboardVerData,r=e.artboard;return null!==(t=null!==n&&void 0!==n?n:r)&&void 0!==t?t:null},curArtboardGuid:function(){var t,e;return null!==(t=null===(e=this.curArtboard)||void 0===e||null===(e=e.artboard)||void 0===e?void 0:e.guid)&&void 0!==t?t:""},curArtboardId:function(){var t;return null===(t=this.curArtboard)||void 0===t||null===(t=t.artboard)||void 0===t?void 0:t.cid},curNode:function(){return this.$store.state.curNode},artboardInComment:function(){return this.$store.state.rightNavType===o["A"].Comment},inMultDownMode:function(){return this.inArtboardMode&&this.$store.state.rightNavType===o["A"].Slice},clickedNode:function(){return this.$store.state.clickedNode},enterNode:function(){return this.$store.state.enterNode},documents:function(){return this.$store.state.documents},renderDocuments:function(){return this.$store.state.renderDocuments},filterDocumentGuid:function(){return this.$store.state.filterDocumentGuid},filterDocumentType:function(){var t,e=this.filterDocumentGuid,n=this.$store.state.sortDocumentsWithSketchDocument;if(!Object(l["i"])(e)||"none"===e)return o["x"].None;var r=n.find((function(t){return t.guid===e}));return null!==(t=null===r||void 0===r?void 0:r.type)&&void 0!==t?t:o["x"].None},documentArtboards:function(){return this.$store.state.documentArtboards},renderDocumentArtboards:function(){return this.$store.state.renderDocumentArtboards},documentName:function(){return this.$store.state.documentName},inArtboardMultDownMode:function(){return!this.inArtboardMode&&this.$store.state.inArtboardMultDownMode},userFolderSpecifyMemberAuthority:function(){return this.$store.state.cloud.userFolderSpecifyMemberAuthority}},methods:{copyNetdiskFileViewUrl:function(t){var e;if(Object(l["s"])(t)){var n=null!==(e=this.getNetdiskFileOnlineViewUrl(t))&&void 0!==e?e:t.viewUrl;0===n.indexOf("/")&&(n=location.origin+n),Object(c["p"])(n)?this.showTextTip("链接已复制到剪切板"):this.showTextTip("链接复制到剪切板失败")}},isNetdiskFileCanOnlineView:function(t){if(!Object(l["s"])(t))return!1;var e=t.fileType,n=t.fileExt,r=t.name,i=Object(l["t"])(this.cloudVersion);return o["y"].isSupportOnlineViewType(e,null!==n&&void 0!==n?n:r,i.support)},getNetdiskFileOnlineViewUrl:function(t){if(!Object(l["s"])(t))return null;var e=t.fileType,n=t.fileExt,r=t.name,i=Object(l["t"])(this.cloudVersion),a=null!==n&&void 0!==n?n:r;if(!o["y"].isSupportOnlineViewType(e,a,i.support))return null;var s=t.viewUrl;return(o["y"].isDocxFile(e,a)&&i.needAddTypePage||o["y"].isTextFile(e))&&(s+="?type=page"),s},setBeginnerGuideRect:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o["g"].TopLeft;this.$nextTick((function(){var i=0,a=0,o=0,s=0;if(Object(l["s"])(e))i=e.x,a=e.y,o=e.width,s=e.height,r=e.direction;else if(n._isDestroyed||n._isBeingDestroyed||!n._isMounted||null==e);else{var c=n.$refs[e];if(c){var u=c.getBoundingClientRect();u.width>=0&&u.height>0&&(i=Math.round(u.x),a=Math.round(u.y),o=Math.round(u.width),s=Math.round(u.height))}}n.$store.commit("setBeginnerGuideRect",{step:t,rect:{x:i,y:a,width:o,height:s,direction:r}})}))},removeCloudItem:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,Object(l["s"])(t)){n.next=3;break}throw new Error("参数异常");case 3:return i=new FormData,i.append("parentId",t.parentId),t.fileSecId&&i.append("fileSecId",t.fileSecId),t.artboardGuid&&i.append("artGuid",t.artboardGuid),n.next=9,e.fetchPostCloudApi("ItemRemoveByWeb",{timeout:3e4,body:i});case 9:if(t=n.sent,Object(l["s"])(t)){n.next=12;break}throw new Error("返回值异常,无法解析数据:".concat(t));case 12:if(t.success){n.next=14;break}throw new Error(t.errMsg);case 14:return e.showTextTip(t.errMsg),n.abrupt("return",!0);case 18:return n.prev=18,n.t0=n["catch"](0),e.alert({title:"删除失败",text:n.t0}),n.abrupt("return",!1);case 22:case"end":return n.stop()}}),n,null,[[0,18]])})))()},goCloudFolderInteractionUrl:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function a(){var o,s,u,d,h,f;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o="/interactionviewer/".concat(t,"/").concat(e?"".concat(e,"/"):""),!l["f"]){a.next=28;break}if(s=n.$store,u=t!==s.state.cloud.currentFolderId,a.prev=4,s.state.mobileInteraction.listFetchState!==c["a"].Fetching){a.next=7;break}return a.abrupt("return");case 7:return s.state.mobileInteraction.listFetchState=c["a"].Fetching,a.next=10,n.fetchPostCloudApi(o,{timeout:1e4,abortKey:"goCloudFolderInteractionUrl"});case 10:return d=a.sent,n.setCurArtboard(null),Ze.dataInit({cloudData:d},s.state.cloudListSort),h=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ze.allArtboardLoadChecked((function(){}));case 2:s.commit("setDocument",Ze);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),f=function(){u&&s.commit("setFilterDocumentGuid",null)},a.next=17,h();case 17:wt(s.state.documentArtboards),f(),s.state.mobileInteraction.listFetchState=c["a"].Success,a.next=26;break;case 22:a.prev=22,a.t0=a["catch"](4),s.state.mobileInteraction.listFetchState=c["a"].Error,n.showTextTip(a.t0);case 26:a.next=29;break;case 28:location.href=o;case 29:case"end":return a.stop()}}),a,null,[[4,22]])})))()},checkCloudItem:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var a,s;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=new FormData,a.append("number"===typeof t?"id":e===o["i"].File?"secid":"id",t),a.append("type",e),r.next=5,n.fetchPostCloudApi("checkitemexistbyweb",{timeout:1e4,body:a});case 5:if(s=r.sent,Object(l["s"])(s)){r.next=8;break}throw new Error("返回值异常[checkitemexistbyweb]:".concat(s));case 8:if(s.success){r.next=10;break}throw new Error(s.errMsg);case 10:if(s.data){r.next=12;break}throw new Error("返回值异常[checkitemexistbyweb]:".concat(JSON.stringify(s)));case 12:return r.abrupt("return",s.data);case 13:case"end":return r.stop()}}),i)})))()},clickNetDiskFile:function(t){if(t){var e=this.getNetdiskFileOnlineViewUrl(t);e?window.open(e):this.clickDownloadNetDiskFile(t)}},clickDownloadNetDiskFile:function(t){var e,n,r=t&&t.viewUrl?"".concat(t.viewUrl,"?type=download&t=").concat(t.updateTimeTimes):null;if(r){var i=null!==(e=t.name)&&void 0!==e?e:"".concat(t.fileName).concat(null!==(n=t.fileExt)&&void 0!==n?n:"");Object(c["v"])(i,r)}},alert:function(t){var e=t.title,n=t.text,r=t.yesText,i=void 0===r?"确认":r;return this.confirm({title:e,text:n,noText:"",yesText:i})},confirm:function(t){var e=t.title,n=t.text,r=t.noText,i=void 0===r?"取消":r,o=t.yesText,s=void 0===o?"确认":o,c=t.showCancel,l=void 0!==c&&c;return new Promise((function(t){var r=function(){if(o){var t=o.$el;o.$destroy(),o=null,t&&t.parentNode&&(t.parentNode.removeChild(t),t=null)}},o=new(a["a"].extend($S))({propsData:{title:e,text:n,noText:i,yesText:s,showCancel:l},methods:{clickCancel:function(){r(),t("cancel")},clickYes:function(){r(),t(!0)},clickNo:function(){r(),t(!1)}}}).$mount();document.body.appendChild(o.$el)}))},prompt:function(t){var e=t.title,n=t.text,r=t.placeholder,i=void 0===r?"":r,o=t.beforeYes,s=t.maxLength,c=void 0===s?256:s,l=t.noText,u=void 0===l?"取消":l,d=t.yesText,h=void 0===d?"确认":d;return new Promise((function(t,r){var s=function(){if(l){var t=l.$el;l.$destroy(),l=null,t&&t.parentNode&&(t.parentNode.removeChild(t),t=null)}},l=new(a["a"].extend(qS))({propsData:{title:e,text:n,noText:u,yesText:h,placeholder:i,maxLength:c},methods:{clickYes:function(){var e=this.value;"function"!==typeof o||!1!==o(e)?(s(),t(e)):this.$refs.text.setFocus()},clickNo:function(){s(),r()}}}).$mount();document.body.appendChild(l.$el)}))},cleanFoldersCache:function(t){var e=this,n=function(t){var n="allfoldersbyweb_".concat(e.cloudUserKey,"_").concat(t?1:0);Object(c["kb"])(n),Object(c["kb"])("".concat(n,".t"))};void 0===t||null===t?(n(!0),n(!1)):n(t)},getAllUsers:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i,a,o,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.cloudVersion,i=t.inCloudMode,a=t.cloudIsLogin,i){e.next=3;break}return e.abrupt("return",null);case 3:if(!Object(l["m"])(n)){e.next=5;break}throw new Error("无法使用@功能,私有云版本过低(".concat(n,"),请先升级私有云部署包"));case 5:if(a){e.next=7;break}throw new Error("未登录,请先登录");case 7:if(o=In("cloudusers","all"),!o){e.next=10;break}return e.abrupt("return",o);case 10:return e.next=12,t.fetchPostCloudApi("GetUsersByWeb",{method:"post",body:"",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 12:if(s=e.sent,Object(l["s"])(s)){e.next=15;break}throw new Error("返回值异常,无法解析数据:".concat(s));case 15:if(s.success){e.next=17;break}throw new Error(s.errMsg);case 17:if(o=s.data,Object(l["h"])(o)){e.next=20;break}throw new Error("返回值异常,无法解析数据:".concat(JSON.stringify(s)));case 20:return o.forEach((function(t){var e,n=t.nickName;e=n?n[n.length-1]:"-",t.userFaceText=e})),o.sort((function(t,e){var n=Object(c["eb"])(t.nickName,e.nickName);return 0==n&&(n=Object(c["eb"])(t.email,e.email)),n})),Sn("cloudusers","all",o,3e4),e.abrupt("return",o);case 24:case"end":return e.stop()}}),e)})))()},searchWebItem:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,s,u,d,h,f,m,p,b,v,g,w;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.cloudVersion,a=e.inCloudMode,a){n.next=3;break}return n.abrupt("return",null);case 3:if(!Object(l["r"])(i)){n.next=5;break}throw new Error("私有云版本过低(".concat(i,"),请先升级私有云部署包"));case 5:if(s="webitemsearch",u="".concat(e.cloudUserKey,"_").concat(t),d=In(s,u),Object(l["h"])(d)){n.next=32;break}return n.next=11,e.fetchPostCloudApi("webitemsearch",{abortKey:"webitemsearch",timeout:1e4,method:"post",body:"wd=".concat(encodeURIComponent(t)),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 11:if(d=n.sent,Object(l["s"])(d)){n.next=14;break}throw new Error("返回值异常,无法解析数据:".concat(d));case 14:if(d.success){n.next=16;break}throw new Error(d.errMsg);case 16:if(d=d.data,Object(l["s"])(d)){n.next=19;break}throw new Error("返回值异常,无法解析数据:".concat(JSON.stringify(d)));case 19:h=d,f=h.folders,m=h.artboards,p=h.files,b=h.updaterNames,v=h.fromFolders,g=h.allParents,Object(l["h"])(f)||(f=[]),Object(l["h"])(m)||(m=[]),Object(l["h"])(p)||(p=[]),Object(l["s"])(b)||(b={}),Object(l["s"])(v)||(v={}),d=[],w=function(t){if(g){var e=t.parents=[],n=t.parentId;while(n>0){var r=v[n];if(!r)break;e.unshift(r),n=r.parentId}0==e.length&&e.push({folderId:0,name:"私有云根目录",parentId:0,shareMode:o["r"].Public})}else t.parents=null},f.forEach((function(t){var e=v[t];e&&(e=Object.assign({localSearchType:o["E"].Folder},e),e.parent=v[e.parentId],w(e),d.push(e))})),m.forEach((function(t){var e;t&&(t.localSearchType=o["E"].Artboard,t.updaterName=null!==(e=b[t.updaterId])&&void 0!==e?e:"undefined",t.parent=v[t.parentId],w(t),d.push(t))})),p.forEach((function(t){var e;t&&(t.localSearchType=o["E"].File,t.updaterName=null!==(e=b[t.updaterId])&&void 0!==e?e:"undefined",t.parent=v[t.parentId],w(t),d.push(t))})),d.sort((function(t,e){return Object(c["eb"])(t.name,e.name)})),Sn(s,u,d,8e3);case 32:return n.abrupt("return",d);case 33:case"end":return n.stop()}}),n)})))()},getAllFolders:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var a,s,u,d,h,f,m,p,b,v,g,w,x,y,k,C,S,O;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=n.cloudVersion,s=n.inCloudMode,s){r.next=3;break}return r.abrupt("return",null);case 3:if(!Object(l["m"])(a)){r.next=5;break}throw new Error("私有云版本过低(".concat(a,"),请先升级私有云部署包"));case 5:if(d=!1,h="allfoldersbyweb_".concat(n.cloudUserKey,"_").concat(t?1:0),f=Object(c["P"])(h+".t",!0),"number"===typeof f&&f>0&&(m=Math.abs(Date.now()-f),d=m<1e4),d&&(u=Object(c["P"])(h,!0)),Object(l["h"])(u)){r.next=23;break}return r.next=13,n.fetchPostCloudApi("getallfoldersbyweb",{method:"post",body:"needPreview=".concat(t?1:0),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}});case 13:if(u=r.sent,Object(l["s"])(u)){r.next=16;break}throw new Error("返回值异常,无法解析数据:".concat(u));case 16:if(u.success){r.next=18;break}throw new Error(u.errMsg);case 18:if(u=u.data,Object(l["h"])(u)){r.next=21;break}throw new Error("返回值异常,无法解析数据:".concat(JSON.stringify(u)));case 21:Object(c["pb"])(h,u),Object(c["pb"])(h+".t",Date.now());case 23:if(p={},b={},v=null,u.forEach((function(t){if(t){0===t.id&&(v=t),t.childArtboardCount=0,t.childFileCount=0,t.childFolderCount=0,p[t.id]=t;var e=b[t.parentId];e||(e=b[t.parentId]=[]);var n=b[t.id];n||(n=b[t.id]=[]),t.childs=n,0===t.id&&0===t.parentId||e.push(t)}})),g=!1,w=function(t,e){var n=Object(c["eb"])(t.name,e.name);return g?-n:n},Object.keys(b).forEach((function(t){var e=b[t];e.sort(w)})),u.forEach((function(t){t&&(t.parent=0===t.id?null:p[t.parentId],t.childsVisible=0===t.id,t.deepCount=0===t.id?0:1,t.name?t.nameLower=t.name.toLowerCase():t.name=t.nameLower="")})),u.forEach((function(t){var e;if(t&&!((null===(e=t.childs)||void 0===e?void 0:e.length)>0)){var n=t,r=n.parent;while(r)r.updateTimes=Math.max(r.updateTimes,t.updateTimes),t=r,r=r.parent}})),x=Object(c["P"])(o["a"],!0),Object(l["s"])(x)||(x={}),y=Object.keys(x),k=n.cloudCurrentFolderId,k>=0&&y.push(k),y.forEach((function(t){var e=p[t];while(e)(e.id||0!==e.childs.length)&&(e.childsVisible=!0),e=e.parent})),u.forEach((function(t){var e=t;while(null!=(e=e.parent)){var n,r,i;e.childArtboardCount+=null!==(n=t.artboardCount)&&void 0!==n?n:0,e.childFileCount+=null!==(r=t.fileCount)&&void 0!==r?r:0,e.childFolderCount+=null!==(i=t.folderCount)&&void 0!==i?i:0}})),!e){r.next=47;break}return C=[],S=!1,O=function t(e,n,r,i,a){if(n){n.deepCount=r,n.rootId=i,(0!==n.id||S)&&e.push(n);var s=n.childs;null!=a&&(s=s.map((function(t){return t})),Ae(s,"updateTimes",o["j"].Folder,a)),s.forEach((function(n){t(e,n,r+1,i,a)}))}},O(C,v,S?0:-1,v.id,null),r.t0=v,r.t1=function(t){var e=[],n=this.root;return O(e,n,S?0:-1,n.id,t),e},r.abrupt("return",{root:r.t0,_folders:null,get folders(){return C=this._folders,C||(C=this._folders=this.sortBy(null)),C},sortBy:r.t1});case 47:return r.abrupt("return",v);case 48:case"end":return r.stop()}}),i)})))()},goCloudPath:function(t){var e=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var i,a,s,u,d,h,f,m,p,b,v,g,w,x,y,k,C,S,O;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t.folderId,a=void 0===i?0:i,s=t.artboardId,u=void 0===s?0:s,d=t.artboardGuid,h=void 0===d?"":d,f=t.commentId,m=void 0===f?0:f,p=t.isReply,b=void 0!==p&&p,v=t.newWindow,g=void 0!==v&&v,w=t.checkArtboardExist,x=void 0!==w&&w,!(m>0&&e.cloudCurrentFolderId===a&&e.inCloudViewerMode)){n.next=22;break}if(y=e.documentArtboards,k=e.curArtboardId,C=e.$store.state.autoIntoInfo,k!==u){n.next=11;break}return e.$store.commit("setRightNavType",o["A"].Comment),C.isReply=b,C.commentArtboardId=u,C.commentId=m,n.abrupt("return");case 11:if(!Object(l["h"])(y)){n.next=21;break}if(S=y.find((function(t){var e;return(null===t||void 0===t||null===(e=t.artboard)||void 0===e?void 0:e.cid)===u})),!S){n.next=21;break}return e.$store.commit("setRightNavType",o["A"].Comment),e.setCurArtboard(S),C.commentArtboardId=u,C.commentId=m,C.isReply=b,n.abrupt("return");case 21:throw new Error("未找到画板信息,可能已经被删除");case 22:if(!(x&&u>0)){n.next=25;break}return n.next=25,e.checkCloudItem(u,o["i"].Artboard);case 25:O=Object(c["C"])(a),h&&(O+="".concat(h,"/"),m>0&&(O+="#commentid=".concat(m,"&isreply=").concat(b?"1":"0"))),g?window.open(O):window.location.href=O;case 28:case"end":return n.stop()}}),n)})))()},checkUserState:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var n,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.inCloudMode&&t.cloudNeedLogin){e.next=2;break}return e.abrupt("return");case 2:return n=new FormData,n.append("folderid",t.cloudCurrentFolderId),e.next=6,t.fetchPostCloudApi("getmystate",{body:n});case 6:if(i=e.sent,Object(l["s"])(i)){e.next=9;break}throw"返回值异常";case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))()},cryptoMarklionWeb2:function(t,e){var n=arguments,a=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var s,l;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=n.length>2&&void 0!==n[2]?n[2]:0,r.next=3,ZS(t,e,s);case 3:if(e=r.sent,e.success){r.next=19;break}r.t0=e.code,r.next=r.t0===o["H"].NotLogin?8:18;break;case 8:return a.showTextTip(e.errMsg),r.next=11,fetch("".concat(c["d"],"/api/logout"),{method:"post",body:""});case 11:return l=r.sent,r.next=14,l.text();case 14:return r.next=16,Object(c["ub"])(2e3);case 16:return window.location.reload(!0),r.abrupt("break",18);case 18:throw e.errMsg;case 19:return r.abrupt("return",e);case 20:case"end":return r.stop()}}),i)})))()},goCloudLogout:function(){return Object(i["a"])(Object(r["a"])().mark((function t(){var e,n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(c["d"],"/api/logout"),{method:"post",body:""});case 3:return e=t.sent,t.next=6,e.text();case 6:t.next=10;break;case 8:t.prev=8,t.t0=t["catch"](0);case 10:return t.prev=10,n="".concat(c["f"],"router/web/weblogout.ashx?redirect=").concat(encodeURIComponent(yn.href)),l["f"]?location.replace(n):window.location.href=n,t.finish(10);case 14:case"end":return t.stop()}}),t,null,[[0,8,10,14]])})))()},getCurrentInteractionUrl:function(){if(this.inNetDiskFileMode)return null;var t,e=this.cloudCurrentFolderId,n=this.curArtboard,r=this.filterDocumentGuid,i=window.location;t="".concat(i.protocol,"//").concat(i.host,"/interactionviewer/").concat(e,"/"),n&&(t+="".concat(encodeURIComponent(n.artboard.guid),"/"));var a=!1,o=function(e,n){t+="".concat(a?"&":"?").concat(e,"=").concat(encodeURIComponent(n)),a=!0};return r&&o("filterDoc",r),t},goCloudLogin:function(){var t=location.href;t=t.replace(/https?:\/\/[^/]+\//i,"/"),t="".concat(c["f"],"web/?action=cloud.login&cloudkey=").concat(encodeURIComponent(this.cloudKey),"&ver=").concat(encodeURIComponent(this.cloudVersion),"&redirect=").concat(encodeURIComponent(t)),l["f"]?location.replace(t):location.href=t},getCalcPlatformUnit:function(t){var e;switch(this.calcPlatformType){case o["c"].ANDROID:e=t?"sp":"dp";break;case o["c"].IOS:e="pt";break;case o["c"].WE_CHAT_MINI_PROGRAM:e="rpx";break;case o["c"].CUSTOM:e=this.getCalcPlatformCustomUnitText(t);break;default:e="px";break}return e},getCalcPlatformCustomUnitText:function(t){var e,n=this.calcPlatformCustomUnit;switch(n){case o["d"].DP:e=t?"sp":"dp";break;case o["d"].RPX:e="rpx";break;case o["d"].PT:e="pt";break;default:e="px";break}return e},getCalcRectScale:function(){var t,e,n;if(!this.inArtboardMode)return 1;switch(this.calcPlatformType){case o["c"].CUSTOM:n=this.calcPlatformCustomDocWidthShow;break;case o["c"].WE_CHAT_MINI_PROGRAM:n=o["V"];break;default:return 1}var r=null!==(t=null===(e=this.curArtboardLoadedVerData.boundsInArtboard)||void 0===e?void 0:e.width)&&void 0!==t?t:0;return 0==r?1:n/r},getCalcValue:function(t,e,n){if(!this.inArtboardMode)return 0;var r;switch(c["S"].inCloudMode&&n&&(t=Object(d["b"])(t,this.calcArtScale,e)),this.calcPlatformType){case o["c"].ANDROID:r=t;break;case o["c"].IOS:r=t;break;case o["c"].CUSTOM:var i,a,s=this.calcPlatformCustomDocWidthShow,l=null!==(i=null===(a=this.curArtboardLoadedVerData.boundsInArtboard)||void 0===a?void 0:a.width)&&void 0!==i?i:0;r=0==l?t:s/l*t;break;case o["c"].WE_CHAT_MINI_PROGRAM:var u,h,f=null!==(u=null===(h=this.curArtboardLoadedVerData.boundsInArtboard)||void 0===h?void 0:h.width)&&void 0!==u?u:0;r=0==f?t:o["V"]/f*t;break;default:r=t;break}return r=Math.round(100*r)/100,this.numberAutoRound&&(r=r>0&&r<1?1:e?Math.ceil(r):Math.round(r)),r},getCalcPlatformValue:function(t,e){if("string"===typeof t)return t;if(null==t)return 0;if(!this.inArtboardMode)return 0;var n,r,i,a;e?(n=e.fontSize,r=e.markedForExport,i=e.noUnitTemplate,a=e.needArtScale):(n=!1,r=!1,i=!1,a=!1);var o=this.getCalcValue(t,r,a);if(i){var s=this.getCalcPlatformUnit(n);return o+s}return this.getCalcUnitTemplateValue(o,n)},getCalcUnitTemplateValue:function(t,e){var n=this.$store.state.unitTemplate;if(n.enable){var r,i=null===(r=this.curArtboardLoadedVerData)||void 0===r?void 0:r.boundsInArtboard;return n.template.replace(/%[^%]+%/g,(function(e){switch(e){case"%num%":return t.toString();case"%W%":return null===i||void 0===i?void 0:i.width.toString();case"%H%":return null===i||void 0===i?void 0:i.height.toString();case"%VW%":return i?Object(c["q"])(t/i.width*100,2).toString():void 0;case"%VH%":return i?Object(c["q"])(t/i.height*100,2).toString():void 0;default:return e}}))}var a=this.getCalcPlatformUnit(e);return t+a},setInOutput:function(t){this.$store.commit("setInOutput",t)},setInArtboardMultDownMode:function(t){this.$store.commit("setInArtboardMultDownMode",t)},setScaleArtboard:function(t){this.$store.commit("setScale",{artboard:t})},setScaleList:function(t){this.$store.commit("setScale",{list:t})},setScaleImageViewer:function(t){var e=this.$store.state.imageViewer;e.scale=Object(c["x"])(!1,t)},resetImageViewerScale:function(){var t=this.$store.state.imageViewer,e=t.imgList;e&&0!==e.length&&(t.resetScale=Date.now())},setCurArtboard:function(t,e){this.$store.commit("curArtboard",{artboard:t,extral:e}),this.setCurNode(null),this.setEnterNode(null),this.setClickedNode(null)},setCurArtboardVer:function(t,e){this.$store.commit("setCurArtboardVer",{verId:t,noTipWhenCurrentVer:!!e})},setCurNode:function(t){this.$store.commit("curNode",t)},setClickedNode:function(t){this.$store.commit("clickedNode",t)},setEnterNode:function(t){this.$store.commit("enterNode",t)},showTextTip:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;"string"!==typeof t&&null!=t&&(t=t.toString()),this.$store.commit("Tip_showTextTip",{second:e,text:t})},hideTextTip:function(){this.$store.commit("Tip_hideTextTip")},fetchPostCloudApi:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var a;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(lt["fetchPostCloudApi"])(t,e);case 2:if(a=r.sent,!Object(l["s"])(a)){r.next=9;break}r.t0=a.code,r.next=r.t0===o["t"].WebUser_NotLogin?7:9;break;case 7:return n.$store.commit("setUserLogout"),r.abrupt("break",9);case 9:return r.abrupt("return",a);case 10:case"end":return r.stop()}}),i)})))()},updateCloudUsersByCloud:function(t){var e=this.cloudKey;if(e){var n=this.$store.state.userNotify.cloudUsersByCloud;this.$set(n,e,t)}},getFolderPrecis:function(t,e){var n=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var a,o;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.inCloudViewerMode){r.next=2;break}return r.abrupt("return");case 2:if(!Object(l["l"])(n.cloudVersion)){r.next=4;break}throw new Error("私有云版本过低,不支持获取文件夹信息");case 4:return a=new FormData,a.append("folderId",t),null!=e&&a.append("fut",e),r.next=9,n.fetchPostCloudApi("getfolderprecisbyweb",{body:a,timeout:1e4});case 9:if(o=r.sent,Object(l["s"])(o)){r.next=12;break}throw new Error("文件夹摘要返回值异常:".concat(o));case 12:if(o.success){r.next=14;break}throw new Error(o.errMsg);case 14:return o=o.data,n.$store.commit("setFolderPrecis",o),r.abrupt("return",o);case 17:case"end":return r.stop()}}),i)})))()},getCloudNotifies:function(t,e,n,a){var s=this;return Object(i["a"])(Object(r["a"])().mark((function i(){var c,u,d,h,f,m,p,b,v,g,w,x,y,k,C,S,O,I,A,T,j,F,M,_;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return c=new FormData,c.append("minNotifyId",t),c.append("artboardId",e),null!=n&&c.append("folderId",n),null!=a&&c.append("fut",a),r.next=7,s.fetchPostCloudApi("getnotifiesbyweb",{body:c,timeout:t>0?1e4:3e4});case 7:if(u=r.sent,Object(l["s"])(u)){r.next=10;break}throw new Error("消息列表返回值异常:".concat(u));case 10:if(u.success){r.next=12;break}throw new Error(u.errMsg);case 12:if(u=u.data,d=u,h=d.list,f=d.folders,m=d.users,p=d.cloudUserListNeedUpdate,b=d.cloudUserListState,v=d.cloudUserListTimes,g=d.folderUpdateTime,a>0&&g>0&&g!==a&&s.getFolderPrecis(n,a).catch((function(t){})),w=[],Object(l["h"])(h)){r.next=18;break}return r.abrupt("return",w);case 18:if(Object(l["s"])(f)||(f={}),Object(l["s"])(m)||(m={}),h.forEach((function(t){if(t){t.date=new Date(t.date);try{t.dateStr=Object(l["b"])(t.date)}catch(i){t.dateStr=t.date}switch(t.type){case o["D"].Artboard_Comment:case o["D"].Artboard_Reply:case o["D"].Artboard_Comment_At:case o["D"].Artboard_Reply_At:var e=t.msg;if(!e)return;if(e.commentUser=m[e.commentUserId],!e.commentUser)return;e.folder=f[e.folderId];var n=e.commentSummary,r=e.atUserIds;Object(l["h"])(r)&&r.length>0&&Object(l["i"])(n)&&(e.commentSummary=n.replace(/\[@uid:(\d+);\]/g,(function(t,e){var n=m[e];return n?"@"+n.nickName:t})));break}w.push(t)}})),x=s.$store.state.userNotify,y=x.cloudList,k=x.sysTipIds,C=x.commentUpdateStates,S=s.cloudKey,O=y[S],I=k[S]||0,null!=b&&s.updateCloudUsersByCloud({needUpdate:p,userListState:b,times:v}),u.artboardId>0&&s.$set(C,S,{artboardId:u.artboardId,commentUpdateTime:u.commentUpdateTime}),0!==t&&O){for(O.updateTime=Date.now(),F=null!==(T=null===(j=O.list[0])||void 0===j?void 0:j.id)&&void 0!==T?T:0,M=w.length-1;M>=0;M--)_=w[M],_.id>F&&(O.list.unshift(_),I=Math.max(_.id,I));I&&(k[S]=I)}else k[S]=Math.max((null===(A=w[0])||void 0===A?void 0:A.id)||0,I),s.$set(y,S,{updateTime:Date.now(),list:w});return r.abrupt("return",w);case 29:case"end":return r.stop()}}),i)})))()},checkLoginThrow:function(){if(!this.cloudIsLogin){var t="未登录,请先登录";throw t}return!0}}};a["a"].config.productionTip=!1,a["a"].mixin(tO);var eO=window.__marklionData;eO&&(window.__marklionData=null);var nO=null!==(PS=null===eO||void 0===eO||null===(RS=eO.cloudData)||void 0===RS?void 0:RS.renderMode)&&void 0!==PS?PS:o["C"].Normal,rO=-1!==navigator.userAgent.indexOf("MSIE");if(rO)document.body.innerHTML="很抱歉,不支持在IE浏览器中浏览标注信息,请使用Chrome,Firefox,Edge等浏览器浏览";else{if(Object(l["g"])(),hn)try{document.documentElement.classList.add("h-firefox")}catch(oO){}Jn(),Ze.dataInit(eO,nr.state.cloudListSort),rr();var iO=function(){var t=Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ze.allArtboardLoadChecked((function(t){nr.commit("artboardLoadProgress",t)}));case 2:nr.commit("setDocument",Ze);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),aO=function(){var t=nr.state,e=t.cloud.defaultArtboardGuid,n=Object(c["hb"])("filterDoc");if("none"===n)n=null;else if(n){var r=t.sortDocumentsWithSketchDocument.find((function(t){return t.guid===n}));if(r){var i=Ze.documentArtboards.find((function(t){var n=t.artboard;return n.guid===e&&(n.docGuid===r.guid||n.pageGuid===r.guid||n.topSectionId===r.guid)}));e&&!i&&(n=null)}else n=null}n?nr.commit("setFilterDocumentGuid",n):nr.commit("setFilterDocumentGuid",null)};switch(nO){case o["C"].Interaction:ES(iO,aO);break;default:Cy(iO,aO);break}}},5781:function(t,e,n){"use strict";n("3d64")},5945:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var r=n("0f37"),i=n("6fd1"),a=(n("1b7f"),n("4bf0"),n("e466"),n("80f5")),o=n("fa7d"),s={};function c(t,e,n){return l.apply(this,arguments)}function l(){return l=Object(i["a"])(Object(r["a"])().mark((function t(e,n,i){var a,c;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=document.createElement("iframe"),t.prev=1,a.style.cssText="top:-10000px;left:0;width:1px;height:1px;opacity:0;pointer-events:none;position: absolute;overflow:hidden;z-index:-1;",t.next=5,new Promise((function(t,r){var c=Object(o["lb"])();s[c]={resolve:t,reject:r},a.onload=function(){a.onerror=a.onload=null;var t=Object(o["D"])(),r=a.contentWindow,s=r.document;s.open(),s.write('<!DOCTYPE html>\n        <html lang="zh-CN">\n          <head>\n            <meta charset="utf-8">\n            <meta http-equiv="X-UA-Compatible" content="IE=edge">\n            <meta name="viewport" content="width=device-width,initial-scale=1.0">\n            <title>标记狮 MarkLion - https://www.marklion.cn</title>\n            <style>\n            *{margin:0;padding:0;}\n            html,body{width:100%;height:100%;overflow:hidden}\n            #pdfViewer{display:block;position:absolute;}\n            </style>\n          </head>\n          <body>            \n           <canvas id="pdfViewer"></canvas>\n           <script>if(!window.globalThis)window.globalThis=window;<\/script>\n            <script src="'.concat(t,'pdf.util.min.js" charset="utf-8"><\/script>\n            <script>pdfjsLib.GlobalWorkerOptions.workerSrc="').concat(t,"pdf.worker.min.js\";pdf_util.cloverPdfToJpg('").concat(e,"',").concat(n,",").concat(JSON.stringify(i),").then(function(blobs){parent.__cloverPdfToJpgCallback('").concat(c,"',true,blobs)}).catch(function(reason){parent.__cloverPdfToJpgCallback('").concat(c,"',false,reason)});<\/script>\n          </body>\n        </html>")),s.close()},a.onerror=function(){a.onerror=a.onload=null,parent.__cloverPdfToJpgCallback("${rnd}",!1,"iframe error")},a.src="about:blank",document.body.appendChild(a)}));case 5:return t.abrupt("return",t.sent);case 6:t.prev=6;try{c=a.parentNode,c&&c.removeChild(a)}catch(r){}return t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])}))),l.apply(this,arguments)}function u(t,e){var n=t.contentWindow;if(n&&n.pdf_util)n.pdf_util.renderPdf("#pdfViewer",e);else{var r=Object(o["D"])(),i='<!DOCTYPE html>\n    <html lang="zh-CN">\n      <head>\n        <meta charset="utf-8">\n        <meta http-equiv="X-UA-Compatible" content="IE=edge">\n        <meta name="viewport" content="width=device-width,initial-scale=1.0">\n        <title>标记狮 MarkLion - https://www.marklion.cn</title>\n        <style>\n        *{margin:0;padding:0;}\n        html,body{width:100%;height:100%;overflow:hidden}\n        #pdfViewer{display:block;position:absolute;}\n        </style>\n      </head>\n      <body>            \n       <canvas id="pdfViewer"></canvas>\n       <script>if(!window.globalThis)window.globalThis=window;<\/script>\n        <script src="'.concat(r,'pdf.util.min.js" charset="utf-8"><\/script>\n        <script>pdfjsLib.GlobalWorkerOptions.workerSrc="').concat(r,"pdf.worker.min.js\";pdf_util.renderPdf('#pdfViewer','").concat(e,"');<\/script>\n      </body>\n    </html>"),a=function(){t.onload=null;var e=t.contentWindow;e.__pluginloaded=!0;var n=e.document;n.open(),n.write(i),n.close()};t.src="about:blank",requestAnimationFrame((function(){var e=t.contentWindow;e&&!e.__pluginloaded?a():t.onload=a}))}}window.__cloverPdfToJpgCallback=function(t,e,n){if(Object(a["i"])(t)){var r=s[t];r&&(delete s[t],e?r.resolve(n):r.reject(n))}},window.cloverPdfToJpg=c,window.createPdfIframe=u},"597f":function(t,e,n){"use strict";n("d01d")},"59bb":function(t,e,n){},"5bd7":function(t,e,n){},"5c12":function(t,e,n){},"5c3c":function(t,e,n){"use strict";n("062b")},"5ccb":function(t,e,n){"use strict";n("ffc4")},"5f3a":function(t,e,n){"use strict";n("d734")},6161:function(t,e,n){"use strict";n("a3ae")},6397:function(t,e,n){},6492:function(t,e,n){"use strict";n("9792")},"64be":function(t,e,n){"use strict";n("aa69")},"64c9":function(t,e,n){"use strict";n("af7d")},"653cd":function(t,e,n){},"6a57":function(t,e,n){},"6b6a":function(t,e,n){"use strict";n("a327")},"6bc0":function(t,e,n){},"6bd2":function(t,e,n){"use strict";n("cc25")},"6c0c":function(t,e,n){"use strict";n("bbe4")},"6da1":function(t,e,n){"use strict";n("4990")},"6e1d":function(t,e,n){"use strict";n("24f8")},"6e20":function(t,e,n){"use strict";n("7df5")},"6e2e":function(t,e,n){},"6f5f":function(t,e,n){},"6fa0":function(t,e,n){"use strict";n("04f3")},"706c":function(t,e,n){"use strict";n("b3ae")},"711c":function(t,e,n){},"716f":function(t,e,n){},7289:function(t,e,n){"use strict";n("97d1")},7353:function(t,e,n){},"751a":function(t,e,n){"use strict";n.r(e),n.d(e,"createFetch",(function(){return d})),n.d(e,"fetchGetCloudApi",(function(){return f})),n.d(e,"fetchPostCloudApi",(function(){return m})),n.d(e,"fetchTextWithProgress",(function(){return p})),n.d(e,"fetchWithProgress",(function(){return v})),n.d(e,"loadCssFileAsync",(function(){return w})),n.d(e,"createLoadGlobalLibraryFunc",(function(){return x}));var r=n("0f37"),i=n("f4af"),a=n("6fd1"),o=(n("e466"),n("1b7f"),n("4bf0"),n("9f22"),n("8ee9"),n("5fb4"),n("f74c"),n("86d1"),n("92ea"),n("5a19"),n("d064"),n("80f5")),s=n("fa7d"),c="function"===typeof AbortController,l={},u=function(t){if(null!=t){var e=l[t];if(e){delete l[t];try{e()}catch(n){}}}};function d(t,e,n,r){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(Object(r["a"])().mark((function t(e,n,a,o){var s,d,h,f,m,p,b,v;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(a>0||null!=o)){t.next=43;break}if(u(o),!c){t.next=27;break}return s=new AbortController,d=!1,h=!1,f=0,null!=o&&(l[o]=function(){h=!0,f>0&&clearTimeout(f);try{var t;null===(t=s)||void 0===t||t.abort()}catch(e){}s=null}),a>0&&(f=setTimeout((function(){d=!0,null!=o&&delete l[o];try{var t;null===(t=s)||void 0===t||t.abort()}catch(e){}s=null}),a)),t.prev=9,t.next=12,fetch(e,Object(i["a"])(Object(i["a"])({},n),{},{signal:s.signal}));case 12:m=t.sent,t.next=20;break;case 15:if(t.prev=15,t.t0=t["catch"](9),!d){t.next=19;break}throw"Timeout: 接口请求超时了";case 19:throw t.t0;case 20:return t.prev=20,f>0&&clearTimeout(f),!h&&delete l[o],t.finish(20);case 24:return t.abrupt("return",m);case 27:return p=0,b=[],v=!1,a>0&&b.push(new Promise((function(t,e){p=setTimeout((function(){v||e("Timeout: 接口请求超时了")}),a)}))),b.push(fetch(e,n)),null!=o&&b.push(new Promise((function(t,e){l[o]=function(){v=!0,p>0&&clearTimeout(p),delete l[o],e("Error: The user aborted a request.")}}))),t.prev=33,t.next=36,Promise.race(b);case 36:return t.abrupt("return",t.sent);case 37:return t.prev=37,p>0&&clearTimeout(p),!v&&delete l[o],t.finish(37);case 41:t.next=46;break;case 43:return t.next=45,fetch(e,n);case 45:return t.abrupt("return",t.sent);case 46:case"end":return t.stop()}}),t,null,[[9,15,20,24],[33,,37,41]])}))),h.apply(this,arguments)}var f=function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e,n){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m(e,Object(i["a"])(Object(i["a"])({},n),{},{method:"GET"}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(a["a"])(Object(r["a"])().mark((function t(e,n){var a,c,l,u,h;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(o["s"])(n)||(n={}),a=n.timeout,null==a&&(a=0),(Object(o["s"])(n.body)||Object(o["h"])(n.body))&&(n.body=JSON.stringify(n.body)),e=e.toLowerCase(),Object(s["ab"])(e)&&(e="".concat(s["d"],"/api/").concat(e)),c=n.abortKey,delete n.abortKey,t.next=10,d(e,Object(i["a"])({method:"POST",credentials:void 0},n),a,c);case 10:l=t.sent,t.t0=l.status,t.next=200===t.t0?14:500===t.t0||403===t.t0?20:24;break;case 14:return t.next=16,l.text();case 16:if(u=t.sent,Object(o["i"])(u)){t.next=19;break}return t.abrupt("return","");case 19:return t.abrupt("return",Object(s["sb"])(u));case 20:return t.next=22,l.text();case 22:throw h=t.sent,"[".concat(l.status,"] ").concat(h);case 24:throw"接口".concat(e,"请求失败");case 25:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function p(t,e,n){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(Object(r["a"])().mark((function t(e,n,i){var a,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v(e,n,i);case 2:return a=t.sent,t.next=5,Object(s["i"])(a);case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function v(t,e){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(Object(r["a"])().mark((function t(e,n){var i,a,o,c,l,u,d,h,f,m,p,b,v,g,w,x=arguments;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=x.length>2&&void 0!==x[2]?x[2]:-1,null===n||void 0===n||n({percentage:"0%",current:"0B",total:i>0?Object(s["vb"])(i):"-"}),t.next=4,fetch(e);case 4:if(a=t.sent,o=parseInt(a.headers.get("Content-Length")||"0",10),0===o&&i>0&&(o=i),c=0,l=window.TransformStream,l){t.next=29;break}u=[],d=a.body.getReader(),h=!0;case 13:if(!h){t.next=28;break}return t.next=16,d.read();case 16:if(f=t.sent,m=f.done,p=f.value,!m){t.next=22;break}return h=!1,t.abrupt("break",28);case 22:u.push(p),c+=p.length,b=(o?c/o*100:0).toFixed(2)+"%",null===n||void 0===n||n({total:Object(s["vb"])(o),current:Object(s["vb"])(c),percentage:b}),t.next=13;break;case 28:return t.abrupt("return",new Blob(u));case 29:return v=new l({transform:function(t,e){c+=t.length,e.enqueue(t);var r=(o?c/o*100:0).toFixed(2)+"%";null===n||void 0===n||n({total:Object(s["vb"])(o),current:Object(s["vb"])(c),percentage:r})}}),g=a.body.pipeThrough(v),w=new Response(g),t.abrupt("return",w.blob());case 33:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function w(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){var i,a=e.isURL,o=void 0===a||a,c=e.id,l=e.media,u=void 0===l?"all":l;o?(i=document.createElement("link"),i.rel="stylesheet",i.href="".concat(Object(s["D"])()).concat(t)):(i=document.createElement("style"),i.textContent=t),c&&(i.id=c),i.media=u,i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Failed to load CSS: ".concat(t)))},document.head.appendChild(i)}))}function x(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null,o=s["a"].Normal,c=[];function l(){return new Promise((function(l,u){var d=function(){try{l(i)}catch(t){}c.length>0&&(c.forEach((function(e){try{e.resolve(i)}catch(t){}})),c.splice(0,c.length))},h=function(t){try{u(t)}catch(e){}c.length>0&&(c.forEach((function(n){try{n.reject(t)}catch(e){}})),c.splice(0,c.length))};if(i)return d();if(o!==s["a"].Fetching)try{o=s["a"].Fetching;var f=document.createElement("script"),m=function(t){if(t){var e=t.parentNode;e&&e.removeChild(t)}};f.addEventListener("load",function(){var c=Object(a["a"])(Object(r["a"])().mark((function a(c){var l,u,f;return Object(r["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return l=c.target,r.next=3,Object(s["ub"])(0);case 3:if(setTimeout((function(){m(l)}),100),o!==s["a"].Fetching){r.next=13;break}if(null!=t){r.next=10;break}return o=s["a"].Success,i=!0,d(),r.abrupt("return");case 10:u=t.find((function(t){return null!=window[t]})),f=u?window[u]:null,f?(o=s["a"].Success,n&&t.forEach((function(t){window[t]=void 0;try{delete window[t]}catch(e){}})),i=f,d()):(o=s["a"].Error,h("".concat(e," library load but not find the variable")));case 13:case"end":return r.stop()}}),a)})));return function(t){return c.apply(this,arguments)}}()),f.addEventListener("error",(function(t){var n=t.target;setTimeout((function(){m(n)}),100),o===s["a"].Fetching&&(o=s["a"].Error,h("".concat(e," library load failed")))})),f.src="".concat(Object(s["D"])()).concat(e),document.body.appendChild(f)}catch(p){o=s["a"].Error,h(p)}else c.push({resolve:l,reject:u})}))}return"string"===typeof t&&(t=[t]),{loadAsync:l}}},7544:function(t,e,n){},7549:function(t,e,n){},"755c":function(t,e,n){},7590:function(t,e,n){},"76b8":function(t,e,n){"use strict";n("6a57")},7797:function(t,e,n){"use strict";n("e5e5")},"77ed":function(t,e,n){},"794b":function(t,e,n){},7970:function(t,e,n){"use strict";n("cb56")},"7c79":function(t,e,n){"use strict";n("5c12")},"7c7b":function(t,e,n){},"7ca6a":function(t,e,n){},"7d1a":function(t,e,n){},"7d26":function(t,e,n){"use strict";n("b99d")},"7df5":function(t,e,n){},"7e6b":function(t,e,n){"use strict";n("2768")},"7e9c":function(t,e,n){},"7eae":function(t,e,n){"use strict";n("0d20")},"7ec1":function(t,e,n){"use strict";n("7590")},"7eea":function(t,e,n){"use strict";n("178d")},"80f5":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return f})),n.d(e,"u",(function(){return m})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return b})),n.d(e,"s",(function(){return v})),n.d(e,"k",(function(){return g})),n.d(e,"m",(function(){return w})),n.d(e,"o",(function(){return x})),n.d(e,"p",(function(){return y})),n.d(e,"n",(function(){return k})),n.d(e,"r",(function(){return C})),n.d(e,"j",(function(){return S})),n.d(e,"q",(function(){return O})),n.d(e,"l",(function(){return I})),n.d(e,"t",(function(){return A})),n.d(e,"c",(function(){return T})),n.d(e,"b",(function(){return j})),n.d(e,"g",(function(){return F}));n("697b"),n("d77e"),n("5fb4"),n("4bf0"),n("7d65"),n("0d0a"),n("1b7f");var r,i=n("fa7d"),a="file:"===location.protocol,o=function(){try{var t,e=null===(t=navigator.userAgentData)||void 0===t?void 0:t.platform;if("macOS"===e)return!0;if("iPadOS"===e)return!0;if("iOS"===e)return!0}catch(r){}var n=navigator.platform;return"Mac68K"==n||"MacPPC"==n||"Macintosh"==n||"MacIntel"==n||"MacAmd"==n||"iPhone"==n||"iPad"==n}(),s=function(t){try{var e,n=null===(e=navigator.userAgentData)||void 0===e?void 0:e.platform;if("Windows"===n)return!0}catch(r){}return/([ ;/)(,]|^)Windows([ ;/)(,]|$)/i.test(null!==(t=navigator.userAgent)&&void 0!==t?t:"")}(),c=/Mobile|Android|Iphone|Ipad/i.test(navigator.userAgent);if(o&&!c){var l=window.screen,u=l.width,d=l.height;(768===u&&1024===d||1536===u&&2048===d||1668===u&&2224===d||1668===u&&2388===d||2048===u&&2732===d)&&(c=!0)}var h=c,f=h&&navigator.standalone;function m(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r];n[i]||(n[i]=1,e.push(i))}return e}var p=null!==(r=Array.isArray)&&void 0!==r?r:function(t){return"[object Array]"===Object.prototype.toString.call(t)},b=function(t){return"string"===typeof t&&0!==t.length},v=function(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)},g=function(t){return Object(i["n"])("1.3.2470.0",t)},w=function(t){return Object(i["n"])("1.5.2772.0",t)},x=function(t){return Object(i["n"])("1.6.3656.0",t)},y=function(t){return Object(i["n"])("3.0.5050.0",t)},k=function(t){return Object(i["n"])("1.6.3656.0",t)},C=function(t){return Object(i["n"])("1.6.3656.0",t)};function S(t){return Object(i["n"])("5.3.6840.0",t)}var O=function(t){return Object(i["n"])("1.6.3656.0",t)},I=function(t){return Object(i["n"])("2.1.4376.0",t)},A=function(t){var e=Object(i["n"])(t,"6.0.7890"),n=!!e&&Object(i["n"])("6.0.7891",t);return{support:e,needAddTypePage:n}};function T(t){if(!t)return"-";t instanceof Date||(t=new Date(t));var e=t.getFullYear(),n=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0");return"".concat(e,"-").concat(n,"-").concat(r," ").concat(i,":").concat(a)}function j(t){if(!t)return"-";t instanceof Date||(t=new Date(t));var e=new Date,n=e-t,r=Math.floor(n/1e3),i=Math.floor(r/60),a=Math.floor(i/60),o=Math.floor(a/24),s=Math.floor(o/30),c=Math.floor(s/12);return c>0?"".concat(c,"年前"):s>0?"".concat(s,"月前"):o>0?"".concat(o,"天前"):a>0?"".concat(a,"小时前"):i>0?"".concat(i,"分钟前"):r>=-60?"刚刚":T(t)}function F(){try{var t=document.documentElement.classList;s&&t.add("h-windows"),o&&t.add("h-macos")}catch(e){}}},"810e":function(t,e,n){"use strict";n("92fa")},"813d":function(t,e,n){"use strict";n("fce2")},"858c":function(t,e,n){},"870d":function(t,e,n){},"877e":function(t,e,n){},"8a4b":function(t,e,n){},"8c01":function(t,e,n){},"8e46":function(t,e,n){},"8f08":function(t,e,n){},"92fa":function(t,e,n){},"938c":function(t,e,n){"use strict";n("7d1a")},"94f6":function(t,e,n){},9502:function(t,e,n){"use strict";n("55a8")},9792:function(t,e,n){},"97d1":function(t,e,n){},"9a10":function(t,e,n){"use strict";n("254b")},"9a4c":function(t,e,n){},"9b3d":function(t,e,n){"use strict";n("cb72")},"9b64":function(t,e,n){"use strict";n("0f21")},"9ddf":function(t,e,n){},"9e19":function(t,e,n){"use strict";n("711c")},"9e45":function(t,e,n){"use strict";n("c9b3")},"9ed9":function(t,e,n){},"9edf":function(t,e,n){"use strict";n("8e46")},"9fec":function(t,e,n){"use strict";n("167a")},a054:function(t,e,n){},a318:function(t,e,n){},a327:function(t,e,n){},a3ae:function(t,e,n){},a704:function(t,e,n){"use strict";n("1bde")},aa32:function(t,e,n){},aa69:function(t,e,n){},ac73:function(t,e,n){},ad22:function(t,e,n){"use strict";n("2400")},ad91:function(t,e,n){},ae32:function(t,e,n){},aef2:function(t,e,n){"use strict";n("ae32")},af58:function(t,e,n){},af7d:function(t,e,n){},b051:function(t,e,n){},b13d:function(t,e,n){"use strict";n("00b8")},b1c8:function(t,e,n){},b259:function(t,e,n){"use strict";n("3dd0")},b350:function(t,e,n){"use strict";n("1d04")},b376:function(t,e,n){},b3ac:function(t,e,n){"use strict";n("6bc0")},b3ae:function(t,e,n){},b4b3:function(t,e,n){},b50f:function(t,e,n){},b547:function(t,e,n){"use strict";n("7ca6a")},b623:function(t,e,n){"use strict";n("94f6")},b627:function(t,e,n){"use strict";n("d4be")},b63f:function(t,e,n){},b898:function(t,e,n){},b8be:function(t,e,n){"use strict";n("8c01")},b99d:function(t,e,n){},ba26:function(t,e,n){},bb5a:function(t,e,n){"use strict";n("16d5")},bbe4:function(t,e,n){},bc8f:function(t,e,n){"use strict";n.d(e,"j",(function(){return f})),n.d(e,"i",(function(){return p})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return v})),n.d(e,"a",(function(){return g})),n.d(e,"g",(function(){return w})),n.d(e,"e",(function(){return x})),n.d(e,"h",(function(){return y})),n.d(e,"f",(function(){return k})),n.d(e,"d",(function(){return O})),n.d(e,"l",(function(){return I})),n.d(e,"k",(function(){return T}));var r=n("43c1"),i=n("8748"),a=(n("f356"),n("1b7f"),n("0d0a"),n("4bf0"),n("7d65"),n("86d1"),n("5fb4"),n("8f0e"),n("8d23"),n("fe80")),o=n("80f5"),s=n("fa7d"),c=n("08f3");function l(t,e,n,r,i,a,o){var s={x:t,y:e},c={x:n,y:r},l=o/a;s.y*=l,c.y*=l,s.y*=-1,c.y*=-1;var h=u(s,c),f=d(s,c,h,a,o),m=f[0],p=f[1];i.forEach((function(t){if(p.x!=m.x){var e=s.x+t.stop*(c.x-s.x),n=(e-m.x)/(p.x-m.x);t.cssStop=isNaN(n)?t.stop:n}else{var r=s.y+t.stop*(c.y-s.y),i=(r-m.y)/(p.y-m.y);t.cssStop=isNaN(i)?t.stop:i}}))}function u(t,e){if(t.x==e.x)return e.y>t.y?0:180;if(t.y==e.y)return e.x>t.x?90:-90;var n=t.x,r=t.y+1,i=Math.sqrt(Math.pow(t.x-n,2)+Math.pow(t.y-r,2)),a=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),o=Math.sqrt(Math.pow(e.x-n,2)+Math.pow(e.y-r,2)),s=180*Math.acos((a*a+i*i-o*o)/(2*a*i))/Math.PI;e.x<t.x&&(s*=-1);while(s<0)s+=360;while(s>=360)s-=360;return s}function d(t,e,n,r,i){var a=void 0,o=e.y-t.y,s=e.x-t.x;0==o?a=s>0?[{x:0,y:.5},{x:1,y:.5}]:[{x:1,y:.5},{x:0,y:.5}]:0==s&&(a=o>0?[{x:.5,y:-1},{x:.5,y:0}]:[{x:.5,y:0},{x:.5,y:-1}]);var c=i/r;if(a)return a[0].y*=c,a[1].y*=c,a;var l={x:0,y:0},u={x:1,y:0},d={x:1,y:-1},f={x:0,y:-1};l.y*=c,u.y*=c,d.y*=c,f.y*=c;var m=void 0,p=void 0;n<=90?(m=f,p=u):n<=180?(m=l,p=d):n<=270?(m=u,p=f):(m=d,p=l);var b=-s/o,v=h({x:t.x,y:t.y},{x:e.x,y:e.y},{x:m.x,y:m.y},{x:m.x+1,y:m.y+1*b}),g=h({x:t.x,y:t.y},{x:e.x,y:e.y},{x:p.x,y:p.y},{x:p.x+1,y:p.y+1*b});return[v,g]}function h(t,e,n,r){var i=(e.y-t.y)*(r.x-n.x)-(t.x-e.x)*(n.y-r.y);if(0!=i){var a=((e.x-t.x)*(r.x-n.x)*(n.y-t.y)+(e.y-t.y)*(r.x-n.x)*t.x-(r.y-n.y)*(e.x-t.x)*n.x)/i,o=-((e.y-t.y)*(r.y-n.y)*(n.x-t.x)+(e.x-t.x)*(r.y-n.y)*t.y-(r.x-n.x)*(e.y-t.y)*n.y)/i;return{x:a,y:o}}}function f(t){var e=p(t);return t=1===e.opacity?w(e).value:e.value,t}var m=function(t){var e,n,r,i;if("number"===typeof t&&!isNaN(t)&&isFinite(t)){r=t%256;var o=a["a"].div(a["a"].sub(t,r),256);n=o%256,o=a["a"].div(a["a"].sub(o,n),256),e=o%256,o=a["a"].div(a["a"].sub(o,e),256),i=o%256}else e=n=r=i=255;return{r:e,g:n,b:r,a:i}},p=function(t){var e=m(t),n=e.r,r=e.g,i=e.b,o=e.a,c=Object(s["q"])(a["a"].div(o,255),2);return{r:n,g:r,b:i,a:o,opacity:c,hexa:"#".concat(n.toString(16).padStart(2,"0")).concat(r.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0")).concat(o.toString(16).padStart(2,"0")),value:"rgba(".concat(n,", ").concat(r,", ").concat(i,", ").concat(c,")"),type:"rgba"}},b=function(t){if("string"!==typeof t||9!==t.length||"#"!==t[0])return t;var e=parseInt(t.substr(1,2),16),n=parseInt(t.substr(3,2),16),r=parseInt(t.substr(5,2),16),i=parseInt(t.substr(7,2),16);return v(e,n,r,i)},v=function(t,e,n,r){var i=a["a"].mul(r,16777216);return i=a["a"].add(i,a["a"].mul(t,65536)),i=a["a"].add(i,a["a"].mul(e,256)),i=a["a"].add(i,n),i},g=function(t,e){var n,r,i,a;if("number"!==typeof e&&(e=1),"number"===typeof t){if(1===e)return t;t=m(t),n=t.a,r=t.r,i=t.g,a=t.b}else{var o;n=Math.round(255*(null!==(o=t.a)&&void 0!==o?o:1)),r=Math.round(255*t.r),i=Math.round(255*t.g),a=Math.round(255*t.b)}return v(r,i,a,Math.round(n*e))},w=function(t){if(Object(o["s"])(t))return{value:"#".concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")),a:t.a,opacity:null!=t.opacity?t.opacity:a["a"].div(t.a,255),type:"hex"}},x=function(t){if(Object(o["s"])(t))return{value:"#".concat(t.a.toString(16).padStart(2,"0")).concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")),type:"ahex"}},y=function(t){if(Object(o["s"])(t))return{value:"#".concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")).concat(t.a.toString(16).padStart(2,"0")),type:"hexa"}},k=function(t){var e=t.r,n=t.g,r=t.b;e/=255,n/=255,r/=255;var i,o,s=Math.max(e,n,r),c=Math.min(e,n,r),l=(s+c)/2;if(s==c)i=o=0;else{var u=s-c;switch(o=l>.5?u/(2-s-c):u/(s+c),s){case e:i=(n-r)/u+(n<r?6:0);break;case n:i=(r-e)/u+2;break;case r:i=(e-n)/u+4;break}i/=6}i=Math.round(a["a"].mul(i,360)),o=Math.round(a["a"].mul(o,100)),l=Math.round(a["a"].mul(l,100));var d=null!=t.opacity?t.opacity:a["a"].div(t.a,255);return d=a["a"].div(Math.round(a["a"].mul(d,100)),100),{h:i,s:a["a"].div(o,100),l:a["a"].div(l,100),a:t.a,opacity:d,value:"hsla(".concat(i,", ").concat(o,"%, ").concat(l,"%, ").concat(d,")"),type:"hsla"}};function C(t){if(null==t)return null;var e=Object(i["a"])(t);switch(e){case"string":return t;case"number":var n=t%256,r=a["a"].div(a["a"].sub(t,n),256),s=r%256;r=a["a"].div(a["a"].sub(r,s),256);var c=r%256;r=a["a"].div(a["a"].sub(r,c),256);var l=r%256;return"#".concat(c.toString(16).padStart(2,"0")).concat(s.toString(16).padStart(2,"0")).concat(n.toString(16).padStart(2,"0")).concat(l.toString(16).padStart(2,"0"));default:return Object(o["s"])(t)&&"number"===typeof t.value?C(t.value):null}}function S(t,e,n,r){return(n*t*(1-e)+r*e)/(t+e-t*e)}function O(t,e){var n,r,i=(null!==(n=t.a)&&void 0!==n?n:255)/255,a=(null!==(r=e.a)&&void 0!==r?r:255)/255,o=i+a-i*a,s=t.r/255,c=e.r/255,l=S(i,a,s,c),u=t.g/255,d=e.g/255,h=S(i,a,u,d),f=t.b/255,m=e.b/255,p=S(i,a,f,m);return{r:Math.round(255*l),g:Math.round(255*h),b:Math.round(255*p),a:Math.round(255*o)}}function I(t,e,n,i,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(t)if("number"!==typeof u&&(u=1),t.value){if(e||!i.types.Text&&(!n||!i.types.Group))return{type:c["o"].FillColor,color:Object(s["tb"])(Object(s["Q"])(a,t.value),u),swatch:t.swatch}}else if(Object(o["h"])(t.colorStops)&&Object(o["h"])(t.endPoints)){var d=t.gradientRadialTransform,h=t.gradientAngularTransform,f=t.gradientDiamondTransform,m=t.type;if(m&&!(d||h||f))switch(m){case"angular":var p=t.rotation;h={rotate:Object(s["q"])(90+p,2),scaleX:1,scaleY:1,endR:1,startR:0};break;case"radial":var b=t.gradientTransform;if(b){var v=b.scaleX,g=b.scaleY,w=b.rotate;d={rotate:Object(s["q"])(90+w,2),scaleX:v,scaleY:g,endR:1,startR:0}}break}if(d||h||f){var x,y;d?(y=c["o"].RadialGradientFill,x=d):h?(y=c["o"].AngularGradientFill,x=h):f&&(y=c["o"].DiamondGradientFill,x=f);var k=[];t.colorStops.forEach((function(t){var e=Object(s["q"])(100*t.stop,2)+"%",n=Object(s["tb"])(Object(s["Q"])(a,t.color.value),u);k.push({stop:e,color:n,swatch:t.color.swatch,originStop:t.stop})}));var C=t.endR-t.startR||1;return{type:y,colorStops:k,angle:Object(s["q"])(Object(s["K"])(x.rotate,0))+"deg",startX:Object(s["q"])(100*Object(s["K"])(t.startX,.5),2)+"%",startY:Object(s["q"])(100*Object(s["K"])(t.startY,.5),2)+"%",scaleX:Object(s["q"])(100*Math.abs(Object(s["K"])(x.scaleX,.5)*C),2)+"%",scaleY:Object(s["q"])(100*Math.abs(Object(s["K"])(x.scaleY,.5)*C),2)+"%"}}var S,O,I,T,j=[],F=Object(r["a"])(t.endPoints,4),M=F[0],_=F[1],L=F[2],D=F[3],N=null!==(S=null!==(O=null!==(I=null!==(T=i.globalBounds)&&void 0!==T?T:i.boundsInArtboardOrigin)&&void 0!==I?I:i.boundsInArtboard)&&void 0!==O?O:i.boundsInParent)&&void 0!==S?S:{width:1,height:1},E=N.width,P=N.height;return l(M,_,L,D,t.colorStops,E,P),t.colorStops.forEach((function(t){var e,n=Object(s["q"])(100*t.stop,2)+"%",r=Object(s["q"])(100*(null!==(e=t.cssStop)&&void 0!==e?e:t.stop),2)+"%",i=Object(s["tb"])(Object(s["Q"])(a,t.color.value),u);j.push({stop:n,color:i,swatch:t.color.swatch,cssStop:r,originStop:t.stop})})),{type:c["o"].LinearGradientFill,colorStops:j,endPoints:t.endPoints,angle:A({width:E,height:P},t.endPoints)}}}function A(t,e){var n=null!==t&&void 0!==t?t:{width:0,height:0},r=n.width,i=n.height;if(0===r||0===i)return"0deg";var a=i/r,o=e[0],c=e[1]*a,l=e[2],u=e[3]*a,d=Object(s["j"])({y:o,x:c},{y:l,x:u});return d+"deg"}function T(t,e){return Object(o["i"])(t)&&Object(o["h"])(e)&&0!==e.length?"".concat(t,";").concat(e.map((function(t){var e;return"".concat(null!==(e=t.originStop)&&void 0!==e?e:t.stop,",").concat(C(t.color))})).join("/")):null}},bd5b:function(t,e,n){},bd84:function(t,e,n){"use strict";n("aa32")},bda1:function(t,e,n){"use strict";n("cfdf")},bf12:function(t,e,n){"use strict";n("8f08")},bf59:function(t,e,n){},c018:function(t,e,n){},c088:function(t,e,n){"use strict";n("9ddf")},c192:function(t,e,n){"use strict";n("e5d6")},c1a4:function(t,e,n){},c2cb:function(t,e,n){"use strict";n("25f5")},c61e:function(t,e,n){"use strict";n("8a4b")},c687:function(t,e,n){},c6ab:function(t,e,n){"use strict";n("0054")},c8c3:function(t,e,n){"use strict";n("0677")},c9b3:function(t,e,n){},caa5:function(t,e,n){},cb56:function(t,e,n){},cb72:function(t,e,n){},cbf5:function(t,e,n){},cc25:function(t,e,n){},cd9d:function(t,e,n){"use strict";n("870d")},cdc8:function(t,e,n){},ce27:function(t,e,n){"use strict";n("c687")},cf0c:function(t,e,n){},cfdf:function(t,e,n){},d00b:function(t,e,n){"use strict";n("016f")},d01d:function(t,e,n){},d078:function(t,e,n){"use strict";n("5484")},d08e:function(t,e,n){},d0ee:function(t,e,n){},d1cf:function(t,e,n){"use strict";n("d0ee")},d1f9:function(t,e,n){},d28d:function(t,e,n){"use strict";n("4b97")},d2eb:function(t,e,n){"use strict";n("794b")},d395:function(t,e,n){"use strict";n("755c")},d398:function(t,e,n){"use strict";n("0624")},d3ec:function(t,e,n){},d4be:function(t,e,n){},d6df:function(t,e,n){"use strict";n("cdc8")},d734:function(t,e,n){},d78e:function(t,e,n){},d7f7:function(t,e,n){},dbb2:function(t,e,n){"use strict";n("7c7b")},dd0c:function(t,e,n){},df29:function(t,e,n){"use strict";n("ba26")},e0ff:function(t,e,n){"use strict";n("b051")},e2d4:function(t,e,n){"use strict";n("7353")},e332:function(t,e,n){},e3c1:function(t,e,n){},e4aa:function(t,e,n){},e4bf:function(t,e,n){},e5d6:function(t,e,n){},e5e5:function(t,e,n){},e934:function(t,e,n){"use strict";n("877e")},e95e:function(t,e,n){"use strict";n("07b7")},ea18:function(t,e,n){"use strict";n("77ed")},eb67:function(t,e,n){"use strict";n("0831")},eba2:function(t,e,n){},eca7:function(t,e,n){},ede7:function(t,e,n){},ef21:function(t,e,n){"use strict";n("c1a4")},efde:function(t,e,n){"use strict";n("ede7")},f2f6:function(t,e,n){"use strict";n("d78e")},f395:function(t,e,n){},f452:function(t,e,n){},f7d7:function(t,e,n){},f81c:function(t,e,n){},f856:function(t,e,n){"use strict";n("d1f9")},f99d:function(t,e,n){},f9b2:function(t,e,n){"use strict";n("a318")},fa0c:function(t,e,n){"use strict";n("cf0c")},fa2f:function(t,e,n){"use strict";n("59bb")},fa7d:function(t,e,n){"use strict";n.d(e,"f",(function(){return w})),n.d(e,"c",(function(){return x})),n.d(e,"d",(function(){return y})),n.d(e,"b",(function(){return k})),n.d(e,"g",(function(){return C})),n.d(e,"ub",(function(){return S})),n.d(e,"S",(function(){return O})),n.d(e,"db",(function(){return I})),n.d(e,"R",(function(){return A})),n.d(e,"E",(function(){return T})),n.d(e,"eb",(function(){return j})),n.d(e,"O",(function(){return F})),n.d(e,"bb",(function(){return _})),n.d(e,"A",(function(){return L})),n.d(e,"j",(function(){return D})),n.d(e,"k",(function(){return N})),n.d(e,"lb",(function(){return E})),n.d(e,"mb",(function(){return P})),n.d(e,"y",(function(){return R})),n.d(e,"V",(function(){return V})),n.d(e,"X",(function(){return B})),n.d(e,"W",(function(){return U})),n.d(e,"U",(function(){return H})),n.d(e,"v",(function(){return W})),n.d(e,"u",(function(){return $})),n.d(e,"s",(function(){return z})),n.d(e,"t",(function(){return X})),n.d(e,"l",(function(){return q})),n.d(e,"w",(function(){return Q})),n.d(e,"J",(function(){return nt})),n.d(e,"F",(function(){return rt})),n.d(e,"N",(function(){return at})),n.d(e,"C",(function(){return ot})),n.d(e,"T",(function(){return st})),n.d(e,"ob",(function(){return ct})),n.d(e,"I",(function(){return lt})),n.d(e,"nb",(function(){return ut})),n.d(e,"jb",(function(){return dt})),n.d(e,"P",(function(){return ht})),n.d(e,"pb",(function(){return ft})),n.d(e,"kb",(function(){return mt})),n.d(e,"hb",(function(){return pt})),n.d(e,"e",(function(){return bt})),n.d(e,"p",(function(){return vt})),n.d(e,"o",(function(){return gt})),n.d(e,"q",(function(){return wt})),n.d(e,"K",(function(){return xt})),n.d(e,"M",(function(){return yt})),n.d(e,"Q",(function(){return kt})),n.d(e,"tb",(function(){return Ct})),n.d(e,"sb",(function(){return St})),n.d(e,"h",(function(){return Ot})),n.d(e,"n",(function(){return At})),n.d(e,"L",(function(){return Tt})),n.d(e,"G",(function(){return jt})),n.d(e,"a",(function(){return Ft})),n.d(e,"vb",(function(){return Mt})),n.d(e,"fb",(function(){return _t})),n.d(e,"rb",(function(){return Lt})),n.d(e,"m",(function(){return Dt})),n.d(e,"cb",(function(){return Pt})),n.d(e,"Y",(function(){return Rt})),n.d(e,"qb",(function(){return Vt})),n.d(e,"ab",(function(){return Bt})),n.d(e,"Z",(function(){return Wt})),n.d(e,"r",(function(){return $t})),n.d(e,"H",(function(){return Gt})),n.d(e,"D",(function(){return Yt})),n.d(e,"gb",(function(){return Xt})),n.d(e,"x",(function(){return Kt})),n.d(e,"z",(function(){return qt})),n.d(e,"B",(function(){return Qt})),n.d(e,"ib",(function(){return Jt})),n.d(e,"i",(function(){return Zt}));var r,i=n("0f37"),a=n("8748"),o=n("6fd1"),s=(n("4bf0"),n("697b"),n("201d"),n("d77e"),n("f309"),n("bdd9"),n("18b5"),n("86d1"),n("7d65"),n("92ea"),n("5a19"),n("9758"),n("98f8"),n("67f3"),n("fc06"),n("3308"),n("cfdd"),n("2eb9"),n("1b7f"),n("6e6e"),n("1918"),n("e466"),n("8d23"),n("9cd4"),n("088c"),n("c469"),n("dc2e"),n("4437"),n("f0fe"),n("a5cb"),n("dc4c"),n("1a43"),n("b048"),n("216f"),n("2276"),n("20b4"),n("97a5"),n("d3c5"),n("0274"),n("c88e"),n("a932"),n("4c0c"),n("b0cc"),n("9b5a"),n("db09"),n("85bf"),n("aedb"),n("1bf9"),n("e38e"),n("684f"),n("1afe"),n("37d6"),n("601e"),n("b510"),n("6b16"),n("d80c"),n("60bd"),n("d569"),n("36e7"),n("5fb4"),n("d064"),n("8f0e"),n("9f22"),n("bc8f")),c=n("80f5"),l=n("08f3"),u=n("9c82"),d=n("a3df"),h=n("0aec"),f=(n("8ee9"),n("bc79"),n("f74c"),"function"===typeof createImageBitmap),m="function"===typeof Image,p=function(){function t(){Object(u["a"])(this,t),Object(h["a"])(this,"queue",[]),Object(h["a"])(this,"runningCount",0),Object(h["a"])(this,"runningMax",10),Object(h["a"])(this,"_paused",!1)}return Object(d["a"])(t,[{key:"canNext",get:function(){return!this.paused&&(this.runningCount<this.runningMax&&this.queue.length>0)}},{key:"paused",get:function(){return this._paused},set:function(t){if(this._paused=!!t,!this._paused)for(var e=0;e<this.runningMax-this.runningCount;e++)this.run()}},{key:"run",value:function(){var t=Object(o["a"])(Object(i["a"])().mark((function t(){var e,n,r,a,o,s,c=this;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.canNext){t.next=2;break}return t.abrupt("return");case 2:if(e=this.queue.splice(0,1)[0],e){t.next=5;break}return t.abrupt("return");case 5:if(0!==e.list.length){t.next=8;break}return this.run(),t.abrupt("return");case 8:if(this.runningCount++,n=function(t){c.runningCount--;var n=e.list;n&&0!==n.length&&(n.forEach((function(e){try{e.callback(t,e.state)}catch(n){}})),c.run())},t.prev=10,!m){t.next=18;break}r=new Image,r.onerror=function(){n(null)},r.onload=function(t){n(t.target)},r.src=e.src,t.next=33;break;case 18:if(!f){t.next=32;break}return t.next=21,fetch(e.src);case 21:return a=t.sent,t.next=24,a.blob();case 24:return o=t.sent,t.next=27,createImageBitmap(o);case 27:s=t.sent,o=null,n(s),t.next=33;break;case 32:n(null);case 33:t.next=38;break;case 35:t.prev=35,t.t0=t["catch"](10),n(null);case 38:case"end":return t.stop()}}),t,this,[[10,35]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"add",value:function(t,e,n){if(!t)return e(null,n);var r=this._get(t);if(!r)return r={src:t,list:[{callback:e,state:n}]},this.queue.push(r),void this.run();var i=r.list.findIndex((function(t){return e===t.callback&&t.state===n}));-1===i&&(r.list.push({callback:e,state:n}),this.run())}},{key:"remove",value:function(t,e,n){if(t){var r=this._get(t);if(r){var i=r.list.findIndex((function(t){return e===t.callback&&t.state===n}));-1!==i&&r.list.splice(i,1)}}}},{key:"_get",value:function(t){return this.queue.find((function(e){return e.src===t}))}},{key:"clean",value:function(){this.runningCount=0,this.queue.splice(0)}}]),t}(),b=n("fe80"),v=n("5945"),g=n("30be"),w="https://user.marklion.cn/",x="",y="",k=375,C=370,S=function(t){return new Promise((function(e){setTimeout((function(){e()}),t||0)}))},O={cloudKey:null,userKey:null,documentName:"",documentGuid:"",config:null,inCloudMode:!1,cloudFolderId:0,initTitle:"",fileType:l["n"].XD,cloudVersion:"",docsMinScale:{}},I=new p;var A=function(t){var e=lt("unittemplate.".concat(t),!0);return Object(c["s"])(e)||(e={enable:!1,template:"rem(%num%)"}),e.fromInited=!0,e.guid=t,e},T=function(t,e){var n=lt("platform.".concat(t),!0);return Object(c["s"])(n)||(n={},n.type=e),n.fromInited=!0,n.guid=t,n},j=function(t,e){return(null!==t&&void 0!==t?t:"").localeCompare(null!==e&&void 0!==e?e:"",["zh"],{numeric:!0,caseFirst:"upper"})},F=function(t){return 1==t?"":"@".concat(t,"x")},M=function(t){if(null==t)return 0;try{return t.replace(/[^\u0020-\u00ff]/g,"aa").length}catch(e){return 0}},_=function(t){var e=M(t);return!!(e>=5&&e<=20&&/^[a-zA-Z\u4e00-\u9fa5][\w\u4e00-\u9fa5-]{1,19}$/.test(t))};function L(t,e){var n=t[t.length-1];if(!n)return new g["a"];var r=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,s=function(t){t&&(r=Math.min(t.x,r),i=Math.min(t.y,i),a=Math.max(t.x+t.width,a),o=Math.max(t.y+t.height,o))};t.forEach((function(t){var e=t.artboard.boundsInParentForList||t.artboard.boundsInParent||t.artboard.frame;s(e)})),Object(c["h"])(e)&&e.forEach((function(t){var e=t.boundsInParentForList||t.boundsInParent||t.frame;s(e)}));var l=new g["a"];return l.x=r,l.y=i,l.width=a-r,l.height=o-i,l}function D(t,e){var n=t.x,r=t.y,i=e.x,a=e.y;if(n===i)return r>=a?270:90;if(r===a)return n>=i?0:180;var o=180*Math.atan2(a-r,i-n)/Math.PI;return o=Math.round(100*(180-o))/100,360===o&&(o=0),o}function N(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Math.round(Math.atan2(r-e,n-t)*(180/Math.PI)*100)/100+i}function E(){return Math.random().toString(16).substring(2)}function P(t,e){return Math.floor(Math.random()*(e-t))+t}function R(t,e,n){if(!t)return e+n;var r=t.mlConfig.linked;if(!Object(c["s"])(r))return e+n;var i=r[n.toLowerCase()];return i?O.inCloudMode?i:e+i:e+n}var V=function(t){if(!Object(c["s"])(t))return!1;var e,n=t.mlConfig;return e=Object(c["s"])(n)&&null!=n.resType?n.resType:l["I"].PNG,(e&l["I"].PNG)===l["I"].PNG},B=function(t){if(!Object(c["s"])(t))return!1;var e=t.mlConfig;return!!Object(c["s"])(e)&&(e.resType&l["I"].WEBP)===l["I"].WEBP},U=function(t){if(!Object(c["s"])(t))return!1;var e=t.mlConfig;return!!Object(c["s"])(e)&&(e.resType&l["I"].SVG)===l["I"].SVG},H=function(t){if(!Object(c["s"])(t))return!1;var e=t.mlConfig;return!!Object(c["s"])(e)&&(e.resType&l["I"].PDF)===l["I"].PDF};function W(t,e){var n,r;"string"===typeof e?n=e:(n=URL.createObjectURL(e),r=!0);var i=document.createElement("a");i.href=n,i.style.cssText+="width:0!important;height:0!important;overflow:hidden!important;position: absolute!important;opacity:0!important;top:0!important;left:0!important;",i.download=t,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i),i=null,r&&URL.revokeObjectURL(n),n=null}function $(t,e,n,r){return G.apply(this,arguments)}function G(){return G=Object(o["a"])(Object(i["a"])().mark((function t(e,n,r,a){var o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Q(n,r);case 2:return o=t.sent,"string"===typeof o&&(o="data:application/octet-stream;base64,"+o),t.next=6,a(o);case 6:return o=t.sent,W(e,o),t.abrupt("return","success");case 9:case"end":return t.stop()}}),t)}))),G.apply(this,arguments)}function z(t,e,n,r){return Y.apply(this,arguments)}function Y(){return Y=Object(o["a"])(Object(i["a"])().mark((function t(e,n,r,a){var o;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(v["a"])(n,r,a);case 2:if(o=t.sent[0],o){t.next=5;break}throw"fail";case 5:return W(e,o),t.abrupt("return","success");case 7:case"end":return t.stop()}}),t)}))),Y.apply(this,arguments)}function X(t,e,n,r){return K.apply(this,arguments)}function K(){return K=Object(o["a"])(Object(i["a"])().mark((function t(e,n,r,a){var o,s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s="function"===typeof a,s||!Object(c["i"])(n)||!/^(\/resource\/|https?:\/\/)/i.test(n)){t.next=5;break}o=n,t.next=13;break;case 5:return t.next=7,Q(n,r);case 7:if(o=t.sent,"string"===typeof o&&(o="data:application/octet-stream;base64,"+o),!s){t.next=13;break}return t.next=12,a(o);case 12:o=t.sent;case 13:return W(e,o),t.abrupt("return","success");case 15:case"end":return t.stop()}}),t)}))),K.apply(this,arguments)}function q(t){if(c["a"]&&!t.mlConfig.supportFileProtocol)throw"画板(".concat(t.name,")导出时[选择导出包支持范围]选择了[精简版];需要部署到HTTP服务上才支持下载切图,请自行前往res目录拷贝切图");return!0}function Q(t,e){return J.apply(this,arguments)}function J(){return J=Object(o["a"])(Object(i["a"])().mark((function t(e,n){var r,a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c["a"]){t.next=4;break}return t.next=3,et(n);case 3:return t.abrupt("return",t.sent);case 4:return r={},O.inCloudMode&&(r.cache="reload"),t.next=8,fetch(e,r);case 8:return a=t.sent,t.next=11,a.blob();case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)}))),J.apply(this,arguments)}var Z={},tt=1;function et(t){return new Promise((function(e,n){var r=document.createElement("script"),i=function(t){t&&null!=t.parentNode&&setTimeout((function(){t&&null!=t.parentNode&&(t.parentNode.removeChild(t),t=null)}),200)};r._marklionBack=function(t,a){r._marklionBack=null,r._marklionCallId=null,t?e(a):n(a),i(r),r=null},r.addEventListener("error",(function(e){var n=e.target._marklionBack;n&&n(!1,"资源加载失败[".concat(t,"]"))})),r.addEventListener("load",(function(t){i(t.target)}));var a="marklion_".concat(Date.now(),"_").concat(tt++);r._marklionCallId=a,r.src=t+"?marklion_res_id="+a,Z[a]=r._marklionBack,document.body.appendChild(r)}))}window.marklion_res=function(t,e){if(null!=t){var n=t._marklionBack,r=t._marklionCallId;n&&r&&(t._marklionBack=null,t._marklionCallId=null,Z[r]=null,n(!0,e))}},window.addEventListener("error",(function(t){var e=t.filename;if(e){var n=e.match(/marklion_res_id=(\w+)/);if(n&&(n=n[1],n)){e=e.replace(/\\/g,"/");var r=e.indexOf("/res/");-1!==r&&(e=e.substr(r+1)),r=e.indexOf("?"),-1!==r&&(e=e.substr(0,r)),e=decodeURIComponent(e);var i=Z[n];i&&i(!1,"资源加载失败[".concat(e,"]"))}}}),!0);var nt=function(t){if(!t)return null;var e=t.mlCustomName;return e||(e=t.name),e},rt=function(t,e,n,r){var i;switch(r){case l["I"].WEBP:i=".webp";break;case l["I"].JPG:i=".jpg";break;case l["I"].PDF:i=".pdf";break;default:i=".png";break}return 1===e||"1"===e||t===l["c"].ANDROID?n+i:"".concat(n,"@").concat(e,"x").concat(i)},it=/[\s\\/$:*?"'<>|\0]/g,at=function(t){if(Object(c["i"])(t)){t=t.replace(it,(function(t){return" "===t?t:""})).trim();var e=50;return t.length>e&&(t=t.substr(0,e)),t}return null},ot=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="/viewer/".concat(t,"/");return e&&(n="".concat(location.origin).concat(n)),n},st=function(t){window.location.href=ot(t)},ct=function(t,e,n){if(Object(c["s"])(e)&&e.markedForExport){var r=e.guid;if(r){var i="".concat(O.documentGuid,"_").concat(r);if(n=at(n),e.mlCustomName!==n){if(Object(c["i"])(n)&&n!==e.name)return t.$set(e,"mlCustomName",n),void ut(i,n);t.$set(e,"mlCustomName",null),dt(i)}}}},lt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=localStorage.getItem("marklion."+t);if(!Object(c["i"])(n))return n;if(!e)return n;try{n=JSON.parse(n)}catch(r){}return n}catch(i){return null}},ut=function(t,e){try{"string"!==typeof e&&(e=JSON.stringify(e)),localStorage.setItem("marklion."+t,e)}catch(n){}},dt=function(t){try{return localStorage.removeItem("marklion."+t)}catch(e){}},ht=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=sessionStorage.getItem("marklion."+t);if(!Object(c["i"])(n))return n;if(!e)return n;try{n=JSON.parse(n)}catch(r){}return n}catch(i){return null}},ft=function(t,e){try{"string"!==typeof e&&(e=JSON.stringify(e)),sessionStorage.setItem("marklion."+t,e)}catch(n){}},mt=function(t){try{return sessionStorage.removeItem("marklion."+t)}catch(e){}},pt=function(t,e,n){var r,i,a,o,s="";null==n?(n=window.location.href,i="#"==e?n.split("#"):n.split("#")[0].split("?"),r=1==i.length?"":i[1]):r=n;if(""!=r){a=r.split("&");var c=a.length;o=t+"=";for(var l=0;l<c;l++)if(0==a[l].indexOf(o)){s=a[l].replace(o,"");break}}return decodeURIComponent(s)},bt={NORMAL:"normal",PASSTHROUGH:"pass-through",MULTIPLY:"multiply",DARKEN:"darken",COLOR_BURN:"color-burn",LIGHTEN:"lighten",SCREEN:"screen",COLOR_DODGE:"color-dodge",OVERLAY:"overlay",SOFT_LIGHT:"soft-light",HARD_LIGHT:"hard-light",DIFFERENCE:"difference",EXCLUSION:"exclusion",HUE:"hue",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity",PASS_THROUGH:"pass-through",LINEAR_BURN:"linear-burn",LINEAR_DODGE:"linear-dodge"};function vt(t){try{if(document.execCommand){var e=document.createElement("textarea");e.style.cssText="position:absolute;left:-1000px;top:-1000px;width:50px;height:10px;background:none;border:none;opacity:0.01;z-index:99999;",e.value=t,e.readOnly=!0,document.body.appendChild(e),e.focus(),e.select();var n=document.execCommand("copy");return e.parentNode.removeChild(e),n}if(window.clipboardData)return window.clipboardData.setData("Text",t),!0}catch(r){return!1}return!1}function gt(t){try{if(document.execCommand)return document.execCommand("copy");if(window.clipboardData)return window.clipboardData.setData("Text",t),!0}catch(e){return!1}return!1}var wt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=Math.pow(10,e);return Math.round(t*n)/n},xt=function(t,e){return"number"===typeof t?t:e},yt=function(t){var e;while(t){var n=t.types;if(1===n.Group)if(t.fillEnabled)if(t.fill){var r=t.fill.value;null!=r&&(e=r),t=t.parentNode}else t=t.parentNode;else t=t.parentNode;else t=t.parentNode}if(e)return Object(s["i"])(e)},kt=function(t,e){if(null==t)return e;if(null==e)return e;var n=Object(s["i"])(e),r=Math.round(n.a*t.a/255);return Object(s["c"])(t.r,t.g,t.b,r)},Ct=function(t,e){if(e>=1||"number"!==typeof e)return t;e<0&&(e=0);var n=Object(s["i"])(t),r=Math.round(n.a*e);return Object(s["c"])(n.r,n.g,n.b,r)},St=function(t){if(void 0!=t){if(null===t)return null;var e=Object(a["a"])(t);switch(e){case"string":var n;try{n=JSON.parse(t)}catch(r){n=t}return n;default:return t}}};function Ot(t){for(var e=atob(t),n=e.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}var It=/^\d{1,7}(\.\d{1,7})*$/i,At=function(t,e){if("string"!==typeof t)return!1;if("string"!==typeof e)return!0;if(!It.test(t))return!1;if(!It.test(e))return!0;t=t.split("."),e=e.split(".");var n=t.length,r=e.length;if(n>r){for(var i=r;i<n;i++)e.push("0");r=n}else if(n<r){for(var a=n;a<r;a++)t.push("0");n=r}for(var o=0;o<n;o++){var s=parseInt(t[o]),c=parseInt(e[o]);if(s>c)return!0;if(s<c)return!1}return!0},Tt=function(){return window.devicePixelRatio||1};function jt(t){if("string"!==typeof t)return"";var e=t.lastIndexOf(".");return-1===e?"":t.substring(e)}var Ft={Normal:0,Fetching:1,Error:2,Success:3},Mt=function(t){return"number"!==typeof t?t:t<1024?"".concat(t,"B"):t<1048576?"".concat((t/1024).toFixed(2),"KB"):t<1073741824?"".concat((t/1048576).toFixed(2),"MB"):t<1099511627776?"".concat((t/1073741824).toFixed(2),"GB"):"".concat((t/1099511627776).toFixed(2),"TB")};function _t(t){for(var e=new Uint8Array(4),n=0;n<4;n++){var r=t%256;if(e[n]=r,t-=r,t<=0)break;t/=256}return e}function Lt(t){for(var e,n=new Array,r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e>=65536&&e<=1114111?(n.push(e>>18&7|240),n.push(e>>12&63|128),n.push(e>>6&63|128),n.push(63&e|128)):e>=2048&&e<=65535?(n.push(e>>12&15|224),n.push(e>>6&63|128),n.push(63&e|128)):e>=128&&e<=2047?(n.push(e>>6&31|192),n.push(63&e|128)):n.push(255&e);return new Uint8Array(n).buffer}function Dt(t){return new Blob(t)}function Nt(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}function Et(){var t=["webkit","moz","ms","o"];if("visibilityState"in document)return"visibilityState";for(var e=0;e<t.length;e++)if(t[e]+"VisibilityState"in document)return t[e]+"VisibilityState";return null}function Pt(){var t=Et();return null!==t?"visible"!=document[t]:(t=Nt(),!!t&&document[t])}function Rt(t){return Object(c["i"])(t)?t:/[<> ]/gi.replace((function(t){switch(t){case" ":return"&nbsp;";case"<":return"&lt;";case">":return"&gt;"}return t}))}function Vt(t,e){var n=[];if(Object(c["i"])(t)&&Object(c["i"])(e)){var r=-1,i=t.toLowerCase(),a=e.toLowerCase(),o=[];while(-1!=(r=i.indexOf(a,r+1)))o.push(r);var s=a.length,l=0;o.forEach((function(e){e>l&&n.push({light:!1,text:t.substr(l,e-l)}),n.push({light:!0,text:t.substr(e,s)}),l=e+s})),l<t.length&&n.push({light:!1,text:t.substr(l)})}else n.push({text:"",light:!1});return n}var Bt=function(t){return"string"===typeof t&&!/^(((https?|file):)?\/)?\//i.test(t)};function Ut(t,e,n){var r="meta",i=document.querySelector("".concat(r,"[name='").concat(e,"']")),a=!i;a&&(i=document.createElement(r),i.setAttribute("name",e)),i.setAttribute("content",n),a&&t.appendChild(i)}function Ht(t,e,n,r){var i,a="link";r?(i=[],Object.keys(r).forEach((function(t){i.push("[".concat(t,"='").concat(r[t],"']"))})),i=i.join("")):i="";var o=document.querySelector("".concat(a,"[rel='").concat(e,"']").concat(i)),s=!o;s&&(o=document.createElement(a),o.setAttribute("rel",e),r&&Object.keys(r).forEach((function(t){o.setAttribute(t,r[t])}))),o.setAttribute("href",n),s&&t.appendChild(o)}function Wt(t){var e=t?"/favicon_interaction.png":"/favicon.ico",n=document.head;if(n||(n=document.querySelector("head")),n||(n=document.body),c["e"]){Ut(n,"viewport","width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,minimal-ui,viewport-fit=cover,user-scalable=no"),Ut(n,"apple-mobile-web-app-capable","yes"),Ut(n,"mobile-web-app-capable","yes"),Ut(n,"apple-mobile-web-app-status-bar-style","black-translucent"),Ut(n,"apple-touch-fullscreen","yes"),Ut(n,"webkit","renderer"),Ht(n,"icon",e),Ht(n,"apple-touch-icon",e,{sizes:"64x64"}),Ht(n,"apple-touch-icon",e,{sizes:"128x128"}),Ht(n,"apple-touch-icon",e,{sizes:"256x256"});var r=document.documentElement;r.classList.add("i-mobile"),c["f"]&&r.classList.add("i-mobile-safari-standalone")}else t&&Ht(n,"icon",e)}function $t(){c["e"]&&document.documentElement.addEventListener("touchstart",(function(t){t.touches.length>1&&t.preventDefault()}),{passive:!1})}function Gt(t){if(!Object(c["i"])(t))return null;var e=/\/fileviewer\/\d+\/(\w+)\//i.exec(t);return e?e[1]:null}var zt=null===(r=document.currentScript)||void 0===r?void 0:r.src;function Yt(){var t=/^.*\/template\/[\w.]+\/js\//i;if(zt){var e=t.exec(zt);e&&e[0]}for(var n=document.querySelectorAll("script[src]"),r=0;r<n.length;r++){var i=n[r],a=i.src;if(a){var o=t.exec(a);if(o)return o[0]}}return O.inCloudMode?"/template/1.0/js/":"js/"}function Xt(t){return parseFloat(t)/100}function Kt(t,e){var n,r;t?(n=.02,r=10):(n=.1,r=6);var i=e>1?100:1e4;return e=Math.round(e*i),e=b["a"].div(e,i),e=Math.min(r,e),e=Math.max(n,e),e}function qt(t,e){var n,r,i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),a=[];if(e=e||i.length,t)for(n=0;n<t;n++)a[n]=i[0|Math.random()*e];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",n=0;n<36;n++)a[n]||(r=0|16*Math.random(),a[n]=i[19==n?3&r|8:r]);return a.join("")}function Qt(t){if(!Object(c["i"])(t))return t;var e=parseFloat(t);return isNaN(e)?t:(e-=90,e<-90&&(e+=360),"".concat(wt(e,2),"deg"))}function Jt(){try{var t,e;null===(t=window.getSelection())||void 0===t||null===(e=t.removeAllRanges)||void 0===e||e.call(t)}catch(n){}}function Zt(t){return new Promise((function(e,n){if(t.text)t.text().then(e).catch(n);else{var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(t){n(new Error("Failed to read blob: "+t.message))},r.readAsText(t)}}))}},fc83:function(t,e,n){"use strict";n("1d45")},fce2:function(t,e,n){},fe6a:function(t,e,n){"use strict";n("e4bf")},fe80:function(t,e,n){"use strict";n("4bf0"),n("7d65"),n("bdd9"),n("697b"),n("201d");e["a"]={add:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=0,r=0,i=1;try{n=t.toString().split(".")[1].length}catch(a){}try{r=e.toString().split(".")[1].length}catch(a){}return i=Math.pow(10,Math.max(n,r)),(this.mul(t,i)+this.mul(e,i))/i},sub:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=0,r=0,i=1;try{n=t.toString().split(".")[1].length}catch(a){}try{r=e.toString().split(".")[1].length}catch(a){}return i=Math.pow(10,Math.max(n,r)),(this.mul(t,i)-this.mul(e,i))/i},mul:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=0,r=t.toString(),i=e.toString();try{n+=r.split(".")[1].length}catch(a){}try{n+=i.split(".")[1].length}catch(a){}return Number(r.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,n)},div:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var n=1,r=1,i=0,a=0;try{i=t.toString().split(".")[1].length}catch(o){}try{a=e.toString().split(".")[1].length}catch(o){}return n=Number(t.toString().replace(".","")),r=Number(e.toString().replace(".","")),this.mul(n/r,Math.pow(10,a-i))}}},fe87:function(t,e,n){},fec8:function(t,e,n){"use strict";n("1204")},ffc4:function(t,e,n){},ffca:function(t,e,n){"use strict";n("858c")}});